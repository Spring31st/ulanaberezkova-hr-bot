!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=Error().stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="4e3a7f9c-7d43-4c56-90ac-ffb367d4d547",e._sentryDebugIdIdentifier="sentry-dbid-4e3a7f9c-7d43-4c56-90ac-ffb367d4d547")}catch(e){}}();var _global="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};_global.SENTRY_RELEASE={id:"d6be34e7"},(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2542,4474],{831:e=>{e.exports={container:"FigmaImportEntry_container__0gcKx",replitIcon:"FigmaImportEntry_replitIcon__Vmv79",figmaIcon:"FigmaImportEntry_figmaIcon__cj71Z",button:"FigmaImportEntry_button__tGaaO"}},2339:e=>{e.exports={toolsListPopover:"AllToolsButton_toolsListPopover__HvH5A"}},4558:(e,n,t)=>{"use strict";t.d(n,{Cp:()=>r,GB:()=>o,xn:()=>i});var r=86,i=140,o=48},5967:(e,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>Yp});var r,i,o,a,l,u=t(12694),c=t(57034),s=t(27338),d=t(21462),p=t(17844),f=t(12584),h=t(41114),g=t(54744),m=t(39590),v=t(42043),w=t(90628),y=t(63468);function b(){var e=(0,f._)(["\n  fragment FigmaImportFlowRepl on Repl {\n    id\n    config {\n      figmaUrl\n      figmaImportStatus\n    }\n    slug\n    title\n    layoutState\n    description\n    rootOriginReplUrl\n    ...CrosisContextRepl\n    ...ReplEnvironmentHeaderLeftRepl\n    ...PageTitleRepl\n  }\n  ","\n  ","\n  ","\n"]);return b=function(){return e},e}function x(){var e=(0,f._)(["\n  query FigmaImportFlow($replId: String!) {\n    getRepl(id: $replId) {\n      ... on Repl {\n        id\n        ...FigmaImportFlowRepl\n      }\n    }\n  }\n  ","\n"]);return x=function(){return e},e}function _(){var e=(0,f._)(["\n  mutation UpdateReplForFigmaImport($input: UpdateReplInput!) {\n    updateRepl(input: $input) {\n      repl {\n        id\n        config {\n          figmaUrl\n          figmaImportStatus\n        }\n        isRenamed\n        title\n      }\n    }\n  }\n"]);return _=function(){return e},e}function S(){var e=(0,f._)(["\n  mutation GetFigmaIntermediateToken($input: GetFigmaIntermediateTokenInput!) {\n    getFigmaIntermediateToken(input: $input) {\n      ... on FigmaImportIntermediateToken {\n        token\n      }\n      ... on NoOAuthFoundError {\n        message\n      }\n      ... on InvalidFigmaUrlError {\n        message\n      }\n      ... on FigmaRateLimitError {\n        message\n      }\n    }\n  }\n"]);return S=function(){return e},e}var Y={},A=(0,h.J1)(b(),v.c,y.c,w.b),I=(0,h.J1)(x(),A),C=(0,h.J1)(_()),k=(0,h.J1)(S()),E=t(94097),D=t(30722),R=t(2809);function F(){var e=(0,f._)(["\n  query ReplEnvironmentDesktop(\n    $replId: String!\n    $environment: KeybindingsEnvironmentEnum!\n    $platform: KeybindingsPlatformEnum!\n  ) {\n    getRepl(id: $replId) {\n      ... on Repl {\n        id\n        ...ReplEnvironmentDesktopRepl\n        ...ReplEnvironmentTourRepl\n        ...HandleReplRedirectionRepl\n        ...FigmaImportFlowRepl\n      }\n      ... on ReplRedirect {\n        ...HandleReplRedirectionReplRedirect\n      }\n      ... on ReplSubscriptionExpired {\n        ...HandleReplRedirectionSubscriptionExpired\n      }\n      ... on Error {\n        message\n      }\n    }\n    currentUser {\n      id\n      isVerified\n      ...ReplEnvironmentDesktopCurrentUser\n      keybindings(environment: $environment, platform: $platform) {\n        keybindings\n      }\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n"]);return F=function(){return e},e}var U={},P=(0,h.J1)(F(),D.cL,E.I,R.VU,A,R.V4,R.aU,D.dL),O=t(80167),T=t(23107),L=t(65044),M=t(63432),G=t(19596);function N(){var e=(0,f._)(["\n  mutation SaveReplLayoutState($input: SetReplLayoutStateInput!) {\n    setReplLayoutState(input: $input) {\n      ... on Repl {\n        id\n        layoutState\n      }\n    }\n  }\n"]);return N=function(){return e},e}var z={},H=(0,h.J1)(N()),B=t(67807);function W(e){return!e.origin&&"/@replit/Blank-Repl"===e.rootOriginReplUrl}var j=t(52648),$=t(74184),q=t(17421),V=t(87083),K=t(70956),Z=t(42552),J=t(39929);function Q(){var e=(0,f._)(["\n  fragment AgentLayoutReplConfig on ReplConfig {\n    isInPlanningPhase\n    isAgentRepl\n  }\n"]);return Q=function(){return e},e}function X(){var e=(0,f._)(["\n  query CenteredAgentPresentationDuringInitialPlanning($replId: String!) {\n    getRepl(id: $replId) {\n      ... on Repl {\n        id\n        origin {\n          id\n        }\n        config {\n          ...AgentLayoutReplConfig\n        }\n      }\n    }\n  }\n  ","\n"]);return X=function(){return e},e}var ee={},en=(0,h.J1)(Q()),et=(0,h.J1)(X(),en),er=t(7553),ei=t(76957),eo=t(96907),ea=t.n(eo),el=t(73327),eu=t(1614),ec=t(74651),es=ec.ZU.String();ec.ZU.String();var ed=ec.ZU.Object({width:ec.ZU.Number(),height:ec.ZU.Number()}),ep=ec.ZU.Object({x:ec.ZU.Number(),y:ec.ZU.Number()}),ef=ec.ZU.Intersect([ep,ed]),eh=ec.ZU.Object({top:ec.ZU.Number(),bottom:ec.ZU.Number(),left:ec.ZU.Number(),right:ec.ZU.Number()}),eg=ec.ZU.Object({id:ec.ZU.String(),type:ec.ZU.Literal("paneGroup"),panes:ec.ZU.Array(es),percent:ec.ZU.Number(),activeIndex:ec.ZU.Number()}),em=ec.ZU.Object({id:ec.ZU.String(),type:ec.ZU.Literal("floatingPaneGroup"),panes:ec.ZU.Array(es),activeIndex:ec.ZU.Number(),rect:ef}),ev=ec.ZU.Recursive(function(e){return ec.ZU.Object({type:ec.ZU.Literal("split"),stacked:ec.ZU.Boolean(),children:ec.ZU.Array(ec.ZU.Union([eg,e])),percent:ec.ZU.Number()})});ec.ZU.Union([eg,ev]);var ew=ec.ZU.Object({tiling:ec.ZU.Union([ev,eg,ec.ZU.Null()]),floating:ec.ZU.Array(em)});ec.ZU.Union([ec.ZU.Literal("left"),ec.ZU.Literal("right")]),ec.ZU.Object({inset:ec.ZU.Optional(eh),size:ed,gap:ec.ZU.Number(),headerHeight:ec.ZU.Number()});var ey=ec.ZU.Union([ec.ZU.Literal("above"),ec.ZU.Literal("below"),ec.ZU.Literal("leftOf"),ec.ZU.Literal("rightOf")]);function eb(e,n){var t,r,i,o,a={width:t=.5*n.width,height:r=.5*n.height,x:n.x+(n.width-t)/2,y:n.y+(n.height-r)/2};if(i=e.x,o=e.y,i>a.x&&i<a.x+a.width&&o>a.y&&o<a.y+a.height)return{dropLocation:"middle",previewRect:n};var l={x:n.x+n.width/2,y:n.y+n.height/2},u=.3*n.width,c=l.x-u/2;if(e.x>=c&&e.x<=c+u){var s=e.y<=l.y?"above":"below",d=n.height/2;return{dropLocation:s,previewRect:{x:n.x,y:"above"===s?n.y:n.y+d,width:n.width,height:d}}}var p=e.x<=l.x?"leftOf":"rightOf",f=n.width/2;return{dropLocation:p,previewRect:{x:"leftOf"===p?n.x:n.x+f,y:n.y,width:f,height:n.height}}}ec.ZU.Union([ey,ec.ZU.Literal("replace")]),ec.ZU.Union([ec.ZU.Literal("up"),ec.ZU.Literal("left"),ec.ZU.Literal("right"),ec.ZU.Literal("down")]);var ex={height:0,width:0};function e_(e){if(e.length<1)throw Error("Expected a path with a parent");return e.slice(0,-1)}function eS(e){return"floatingPaneGroup"!==e.type}var eY=t(56902),eA=t(86105),eI=t(22531);function eC(e,n){var t=(0,eY._)(n),r=t[0],i=t.slice(1);if("floating"===r){if(!e.floating)return null;var o=i[0];if("number"!=typeof o)throw Error("Expected floatingIndex");var a=e.floating[o];if(!a)throw Error("Expected paneGroup");return a}if("tiling"!==r)throw Error("Expected tiling path");var l=e.tiling;if(!l)return null;var u=l,c=i.length,s=0,d=!0,p=!1,f=void 0;try{for(var h,g=i[Symbol.iterator]();!(d=(h=g.next()).done);d=!0){var m=h.value;if("paneGroup"===u.type)break;if("number"!=typeof m)throw Error("Expected number");s++,u=u.children[m]}}catch(e){p=!0,f=e}finally{try{d||null==g.return||g.return()}finally{if(p)throw f}}return c===s?u:null}function ek(e,n){var t=e.floating.find(function(e){return e.panes.includes(n)});if(t)return{index:t.panes.indexOf(n),paneGroup:t,paneGroupPath:["floating",e.floating.indexOf(t)],floating:!0};var r=e.tiling;if(!r)return null;for(var i=[{paneGroupPath:["tiling"],parent:null,grandparent:null,node:r}];i.length;){var o=i.shift();if(!o)throw Error("Expected item");if("split"===o.node.type){var a=!0,l=!1,u=void 0;try{for(var c,s=o.node.children[Symbol.iterator]();!(a=(c=s.next()).done);a=!0){var d=c.value;i.push({grandparent:o.parent,parent:o.node,node:d,paneGroupPath:(0,eA._)(o.paneGroupPath).concat([o.node.children.indexOf(d)])})}}catch(e){l=!0,u=e}finally{try{a||null==s.return||s.return()}finally{if(l)throw u}}}else if(o.node.panes.includes(n))return{paneGroupPath:o.paneGroupPath,paneGroup:o.node,parent:o.parent,grandparent:o.grandparent,index:o.node.panes.indexOf(n),floating:!1}}return null}function eE(e,n){var t=e.tiling;return t?function e(n,t,r){if("paneGroup"===n.type)return{paneGroup:n,path:r};var i=0,o=n.children.length-1;return"topRight"!==t||n.stacked?"bottomRight"===t?i=o:"bottomLeft"===t&&n.stacked&&(i=o):i=o,e(n.children[i],t,(0,eA._)(r).concat([i]))}(t,n,["tiling"]):null}function eD(e,n){var t=e.tiling,r=e.floating,i=(0,eA._)(r);for(t&&i.push(t);i.length;){var o=i.shift();if(!o)throw Error("Expected item");if("split"===o.type)i.push.apply(i,(0,eA._)(o.children));else if(o.id===n)return o}return null}function eR(e,n){var t=e.tiling;if(null===t)return null;for(var r=[[t,["tiling"]]];r.length;){var i=function(){var e=r.shift();if(!e)throw Error("Expected item");var t=(0,u._)(e,2),i=t[0],o=t[1];return"split"!==i.type?"continue":i.children.some(function(e){return"paneGroup"===e.type&&e.id===n})?{v:{node:i,path:o}}:void i.children.forEach(function(e,n){r.push([e,(0,eA._)(o).concat([n])])})}();if("object"===(0,eI._)(i))return i.v}return null}function eF(e,n){var t=ek(e,n);if((null==t?void 0:t.paneGroup.type)==="paneGroup"){var r=eR(e,t.paneGroup.id);if(r){var i=r.node.children,o=i.indexOf(t.paneGroup);return o<i.length-1?i[o+1]:i[o-1]}}return null}function eU(e){var n=e.relativeTo,t=e.rects,r=e.direction,i=t.get(n);if(!i)throw Error("Expected relativeTo rect to be included in rects");var o=null,a=!0,l=!1,c=void 0;try{for(var s,d=t[Symbol.iterator]();!(a=(s=d.next()).done);a=!0){var p=(0,u._)(s.value,2),f=p[0],h=p[1];if(f===n)continue;var g=function(e){var n=e.from,t=e.other;switch(e.direction){case"above":return n.y-t.y;case"below":return t.y-n.y;case"rightOf":return t.x-n.x;case"leftOf":return n.x-t.x}}({from:i,other:h,direction:r});if(("leftOf"!==r&&"above"!==r||!(g<=0))&&("rightOf"!==r&&"below"!==r||!(g<0))){var m=function(e,n,t){var r=(0,u._)("x"===t?[[e.x,e.x+e.width],[n.x,n.x+n.width]]:[[e.y,e.y+e.height],[n.y,n.y+n.height]],2),i=r[0],o=r[1],a=Math.max(i[0],o[0]);return Math.min(i[1],o[1])-a}(i,h,"leftOf"===r||"rightOf"===r?"y":"x");!(m<=0)&&(!o||o.distance>g||o.distance===g&&o.overlap<m)&&(o={key:f,rect:h,distance:g,overlap:m})}}}catch(e){l=!0,c=e}finally{try{a||null==d.return||d.return()}finally{if(l)throw c}}return(null==o?void 0:o.key)||null}var eP={top:0,bottom:0,left:0,right:0};function eO(e,n){var t=n.inside,r=n.minVisibleX,i=n.minVisibleY,o=-e.width+r,a=t.width-r,l=t.height-i;return{x:Math.min(Math.max(o,e.x),a),y:Math.min(Math.max(0,e.y),l)}}function eT(e,n){var t=void 0===n.activeIndex?0:n.activeIndex;if(n.isFloating)return void e.floating.push({id:n.id,type:"floatingPaneGroup",panes:n.panes,activeIndex:t,rect:n.rect});var r=null;if(Array.isArray(n.relativeTo))r=n.relativeTo;else{var i=ek(e,n.relativeTo);if(!i)throw Error("Expected pane");r=i.paneGroupPath}if(null===r)throw Error("Expected relativeTo");if("tiling"!==r[0])throw Error("Expected tiling path");var o=n.placement,a=n.panes,l=n.percent,u="above"===o||"below"===o,c="rightOf"===o||"below"===o;if(!e.tiling&&1===r.length){e.tiling={id:n.id,type:"paneGroup",percent:100,panes:a,activeIndex:t};return}if(!e.tiling)throw Error("Expected tiling");var s=eC(e,r);if(!s||!eS(s))throw Error("Expected tiled node");if(1===r.length&&"replace"===o){e.tiling={id:n.id,type:"paneGroup",percent:100,panes:a,activeIndex:t};return}if(1===r.length&&"paneGroup"===e.tiling.type){var d=[e.tiling];e.tiling={type:"split",percent:100,stacked:u,children:d},eL({id:n.id,insertIndex:+!!c,panes:a,children:d,percent:l,activeIndex:t});return}if(1===r.length&&"split"===e.tiling.type){if(!!e.tiling.stacked==!!u)return void eL({id:n.id,panes:a,percent:l,activeIndex:t,insertIndex:c?e.tiling.children.length:0,children:e.tiling.children});var p={id:n.id,panes:a,type:"paneGroup",percent:void 0===l?50:l,activeIndex:t},f=c?[s,p]:[p,s];return s.percent=100-p.percent,void(e.tiling={type:"split",stacked:u,children:f,percent:100})}if(0===r.length)throw Error("Expected relativeTo length");var h=eC(e,e_(r));if((null==h?void 0:h.type)!=="split")throw Error("Expected split parent");if("replace"===o){var g=h.children.indexOf(s);h.children.splice(g,1,{id:n.id,panes:a,percent:s.percent,type:"paneGroup",activeIndex:t});return}if(!!h.stacked==!!u){var m=h.children.indexOf(s);eL({id:n.id,panes:a,percent:l,activeIndex:t,insertIndex:c?m+1:m,children:h.children});return}if(!!h.stacked!=!!u){var v={id:n.id,panes:a,type:"paneGroup",percent:void 0===l?50:l,activeIndex:t},w=c?[s,v]:[v,s],y=s.percent;s.percent=100-v.percent;var b=h.children.indexOf(s);h.children[b]={type:"split",stacked:u,children:w,percent:y};return}}function eL(e){var n=e.id,t=e.percent,r=e.children,i=e.panes,o=e.insertIndex,a=e.activeIndex;if(void 0!==t){var l=(100-t)/100;r.forEach(function(e){e.percent=e.percent*l}),r.splice(o,0,{id:n,panes:i,type:"paneGroup",percent:t,activeIndex:a});return}var u=r.reduce(function(e,n){return e+n.percent},0)/r.length,c=100/(100+u);r.forEach(function(e){e.percent=e.percent*c}),r.splice(o,0,{id:n,panes:i,type:"paneGroup",percent:u*c,activeIndex:a})}function eM(e,n){var t=eD(e,n.paneGroupId);if(!t)throw Error("Expected paneGroup");!function(e,n){var t,r=n.index,i=n.paneIds,o=n.activate;if(void 0!==r&&r>e.panes.length)throw Error("Invalid index");var a=void 0===r?e.panes.length:r;(t=e.panes).splice.apply(t,[a,0].concat((0,eA._)(i))),(void 0===o||o)&&(e.activeIndex=a)}(t,n)}function eG(e,n){e.panes.splice(n,1),0!==e.activeIndex&&(n>e.activeIndex||(e.activeIndex=e.activeIndex-1))}function eN(e,n){var t=ek(e,n);if(!t)throw Error("Expected pane");if(t.floating){if(1===t.paneGroup.panes.length){var r=t.paneGroupPath[1];if("number"!=typeof r)throw Error("Expected floatingIndex");ez(e,["floating",r])}else eG(t.paneGroup,t.index);return}var i=t.paneGroup,o=t.paneGroupPath,a=t.parent;if(!i)throw Error("paneGroup eith paneId not found: "+n);var l=i.panes.indexOf(n);if(-1===l)throw Error("Expected paneIndex");if(!a&&1===i.panes.length){e.tiling=null;return}if(i.panes.length>1)return void eG(i,l);ez(e,o)}function ez(e,n){var t=(0,eY._)(n),r=t[0],i=t.slice(1);if("tiling"===r&&0===i.length){e.tiling=null;return}if("floating"===r&&0===i.length){e.floating=[];return}var o=eC(e,n);if(!o)throw Error("Expected node");if("floatingPaneGroup"===o.type){var a=e.floating.indexOf(o);if(-1===a)throw Error("Expected paneGroupIndex");e.floating.splice(a,1);return}var l=e_(n),c=eC(e,l);if((null==c?void 0:c.type)!=="split")throw Error("Expected split");var s=c.children.indexOf(o);if(-1===s)throw Error("Expected paneGroupIndex");var d=c.children;if(d.splice(s,1),d.length>1){var p=100/d.reduce(function(e,n){return e+n.percent},0);d.forEach(function(e){e.percent=e.percent*p});return}var f=(0,u._)(d,1)[0],h=l.length>1?eC(e,e_(l)):null;if(!h){f.percent=100,e.tiling=f;return}if("split"!==h.type)throw Error("Expected split");var g=h.children.indexOf(c);if(-1===g)throw Error("Expected parentIndex");f.percent=c.percent,h.children[g]=f}function eH(e,n){var t=n.paneGroupPath,r=n.rect,i=eC(e,t);if((null==i?void 0:i.type)!=="paneGroup")throw Error("Expected paneGroup");ez(e,t),eT(e,{id:i.id,isFloating:!0,panes:i.panes,rect:r,activeIndex:i.activeIndex})}function eB(e,n){var t="floatingIndex"in n?e.floating[n.floatingIndex]:eC(e,n.paneGroupPath);if(!t||!("panes"in t))throw Error("Expected paneGroup");eN(e,n.paneId);var r=void 0===n.index?t.panes.length:n.index;t.panes.splice(r,0,n.paneId),n.activate?t.activeIndex=r:t.activeIndex>=r&&t.activeIndex++}function eW(e,n){var t=n.leftPath,r=n.percent,i=n.snapPercent,o=void 0===i?0:i,a=eC(e,t);if(!a||!eS(a))throw Error("Expected leftNode");var l=eC(e,e_(t));if((null==l?void 0:l.type)!=="split")throw Error("Expected splitNode");var u=l.children.indexOf(a);if(-1===u)throw Error("Expected leftNodeIndex");var c=u+1,s=l.children[c];if(!s)throw Error("Expected rightNode");if(r<=o){if(a.percent=0,r<0&&u>0)for(var d=Math.abs(r),p=u-1;d>0;){var f=l.children[p];if(f.percent>d){f.percent-=d;break}if(d-=f.percent,f.percent=0,0===p)break;p--}var h=l.children.reduce(function(e,n){return n===s?e:e+n.percent},0);s.percent=100-h;return}var g=a.percent+s.percent,m=l.children.slice(u).reduce(function(e,n){return e+n.percent},0);if(r>g-o){if(a.percent=Math.min(m,Math.max(g,r)),s.percent=0,r>g&&c<l.children.length-1)for(var v=r-g,w=c+1;v>0;){var y=l.children[w];if(y.percent>v){y.percent-=v;break}if(v-=y.percent,y.percent=0,w===l.children.length-1)break;w++}return}var b=a.percent-r;s.percent=s.percent+b,a.percent=r}var ej=t(35992),e$=t(69737),eq=(0,ei.eU)(!1),eV=(0,ei.eU)([]),eK=(0,ei.eU)([]),eZ=(0,ei.eU)([]),eJ={x:0,y:0,width:0,height:0},eQ={type:"commands",data:{autoFocus:!1}},eX=(0,e$.Iz)(function(e){return(0,ei.eU)({paneId:e,type:"tile",rectAtom:(0,ei.eU)((0,p._)({},eJ)),dataAtom:(0,ei.eU)((0,p._)({},eQ)),isHidden:!1,isCommitted:!1,highlight:!1})}),e0=(0,ei.eU)(function(e){return e(eV).map(function(n){return e(eX(n))})}),e1=(0,ei.eU)(function(e){return e(e0).filter(function(e){return!e.isHidden})}),e2=(0,ei.eU)(function(e){return e(e0).filter(function(e){return e.isHidden})}),e4=(0,ei.eU)(function(e){return e(eZ).map(function(n){return e(e7(n))})}),e5=(0,e$.Iz)(function(e){return(0,ei.eU)({handleId:e,rect:eJ,stacked:!1,parentPath:["tiling"],leftPath:["tiling"],rightPath:["tiling"]})}),e7=(0,e$.Iz)(function(e){return(0,ei.eU)({id:e,rectAtom:(0,ei.eU)((0,p._)({},eJ)),panes:[],path:["tiling"],activeIndex:0})}),e3=(0,ei.eU)(function(e){return e(eq)?36:32}),e8=(0,ei.eU)({x:0,y:0,width:0,height:0}),e6=t(76201),e9=(0,ei.eU)(null),ne=(0,ei.eU)(null,function(e,n,t){t!==e(e9)&&n(e9,t)}),nn=(0,ei.eU)(null,function(e,n,t){var r=eX(t);e(r).isCommitted||n(r,function(e){return(0,ej.jM)(e,function(e){e.isCommitted=!0})})}),nt=(0,ei.eU)(function(e){var n=e(e9);if(!n)return null;var t=e(eX(n)),r=e(t.dataAtom);return"markdown"===r.type?r.data.path:(0,e6.xS)(r)&&r.data.path||null}),nr=(0,ei.eU)(null),ni=t(61683),no=(0,ei.eU)(null),na=(0,ei.eU)(null,function(e,n,t){ni.A.set(ns(t.popupId),Date.now()+6048e5),ni.A.set(nc(t.popupId),t.state);var r=!0,i=!1,o=void 0;try{for(var a,l=ni.A.keys().filter(function(e){return e.startsWith(nu)})[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var u=a.value,c=ni.A.get(u);if("number"==typeof c&&c<Date.now()){var s=u.split(":")[1];ni.A.remove(ns(s)),ni.A.remove(nc(s))}}}catch(e){i=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}}),nl=(0,ei.eU)(function(e){return!!e(no)}),nu="popup-id-ttl:";function nc(e){return"".concat("popup-id-data:").concat(e)}function ns(e){return"".concat(nu).concat(e)}var nd=(0,ei.eU)(!0),np=(0,ei.eU)(!1),nf=(0,ei.eU)({tiling:null,floating:[]}),nh=(0,ei.eU)(function(e){return e(e0).filter(function(n){return(0,e6.xS)(e(n.dataAtom))})}),ng=(0,ei.eU)(function(e){var n=!0,t=!1,r=void 0;try{for(var i,o=e(e0)[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var a=i.value;if(!a.isCommitted&&(0,e6.xS)(e(a.dataAtom)))return a.paneId}}catch(e){t=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(t)throw r}}return null}),nm=(0,ei.eU)(function(e){var n=!0,t=!1,r=void 0;try{for(var i,o=e(e0)[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var a=i.value;if(!a.isCommitted&&!(0,e6.xS)(e(a.dataAtom)))return a.paneId}}catch(e){t=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(t)throw r}}return null}),nv=(0,ei.eU)(function(e){var n=[],t=!0,r=!1,i=void 0;try{for(var o,a=e(e1)[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=o.value;n.push([l.paneId,e(l.dataAtom)])}}catch(e){r=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}return n}),nw=(0,ei.eU)([]),ny=(0,ei.eU)(function(e){var n=[],t=!0,r=!1,i=void 0;try{for(var o,a=e(e2)[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=o.value;n.push([l.paneId,e(l.dataAtom)])}}catch(e){r=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}return n}),nb=(0,ei.eU)(function(e){var n=[],t=!0,r=!1,i=void 0;try{for(var o,a=e(e0)[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=o.value;n.push([l.paneId,e(l.dataAtom)])}}catch(e){r=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}return n}),nx=(0,ei.eU)(function(e){return e(nb).length}),n_=(0,ei.eU)(function(e){var n=e(e8);return!!(n.width&&n.height)}),nS=(0,ei.eU)(null),nY=(0,ei.eU)(function(e){var n=e(e9);if(!n)return null;var t=e(eX(n)).rectAtom,r=e(t),i=e(e3);return{x:r.x,y:r.y-i,width:r.width,height:r.height+i}}),nA=(0,ei.eU)(null,function(e,n,t){var r=e(e0).find(function(n){var r=e(n.dataAtom);return(0,e6.xS)(r)?t===(0,e6.Vj)(r):"markdown"===r.type&&t===r.data.path});r&&(n(ne,r.paneId),n(nn,r.paneId))}),nI=(0,ei.eU)(null),nC=(0,ei.eU)(!1),nk=(0,ei.eU)(function(e){return e(nC)?e(e9):null}),nE=(0,ei.eU)(null,function(e,n,t){n(ne,t),n(nC,!0)}),nD=(0,ei.eU)(null,function(e,n,t){n(nC,!0);var r=eD(e(nf),t.paneGroupId);if(!r){var i=Error("Expected paneGroup");throw n(nS,{error:i,tags:{layoutstate:!0},origin:"Layout: state/maximize/maximizePaneGroupAtom"}),i}var o=r.panes[r.activeIndex];if(!o){var a=Error("Expected paneId");throw n(nS,{error:a,tags:{layoutstate:!0},origin:"Layout: state/maximize/maximizePaneGroupAtom"}),a}n(ne,o)}),nR=(0,ei.eU)(null,function(e,n){e(nl)||n(nC,!1)}),nF=(0,ei.eU)(null,function(e,n,t){e(nk)===t?n(nR):n(nE,t)}),nU=(0,ei.eU)(null,function(e,n,t){var r=eD(e(nf),t.paneGroupId);if(!r){var i=Error("Expected paneGroup");throw n(nS,{error:i,tags:{layoutstate:!0},origin:"Layout: state/maximize/toggleMaximizePaneGroupAtom"}),i}var o=r.panes[r.activeIndex];if(!o){var a=Error("Expected paneId");throw n(nS,{error:a,tags:{layoutstate:!0},origin:"Layout: state/maximize/toggleMaximizePaneGroupAtom"}),a}n(nF,o)}),nP=(0,ei.eU)(function(e){var n=e(e8);return{x:-n.x,y:-n.y,width:n.width+n.x,height:n.height+n.y}}),nO=(0,ei.eU)(function(e){var n=e(e3),t=e(nP);return{x:t.x,y:t.y,width:t.width,height:n}}),nT=(0,ei.eU)(function(e){var n=e(e3),t=e(nP);return{x:t.x,y:t.y+n,width:t.width,height:t.height-n}}),nL=(0,ei.eU)(null),nM=(0,e$.mg)(nL,function(e){return null!==e}),nG=(0,ei.eU)(null,function(e,n,t){n(nL,t),requestAnimationFrame(function(){n(nL,null)})});function nN(e,n){var t=e.x,r=e.y;return t>n.x&&t<n.x+n.width&&r>n.y&&r<n.y+n.height}function nz(e,n){var t,r,i,o,a,l,u,c,s,d=(r=(t={point:e,rect:n}).rect,i=t.point,o=r.height>r.width?r.width/r.height:1,a=r.width>r.height?r.height/r.width:1,l=(i.x-r.x)*a,(s=Math.min(l,u=(r.x+r.width-i.x)*a,c=(i.y-r.y)*o,(r.y+r.height-i.y)*o))===l?"left":s===u?"right":s===c?"top":"bottom"),p={x:n.x,y:n.y,width:n.width,height:n.height},f="below";return"top"===d?(p.height=n.height/2,f="above"):"bottom"===d?(p.height=n.height/2,p.y=n.y+n.height/2,f="below"):"left"===d?(p.width=n.width/2,p.x=n.x,f="leftOf"):"right"===d&&(p.width=n.width/2,p.x=n.x+n.width/2,f="rightOf"),{placement:f,rect:p}}function nH(e){return"handle:"+e.leftPath.join(":")}function nB(e){return(0,$.A)(function(){return(0,e$.mg)(e,function(e){return{width:e.width,height:e.height}},function(e,n){return e.height===n.height&&e.width===n.width})},[e])}function nW(e){return(0,$.A)(function(){return(0,e$.mg)(e,function(e){return{x:e.x,y:e.y}},function(e,n){return e.x===n.x&&e.y===n.y})},[e])}var nj=t(23099),n$=t.n(nj),nq=t(7083),nV=ec.ZU.Object({width:ec.ZU.Number({minimum:0}),isOpen:ec.ZU.Boolean()}),nK=(0,ei.eU)({width:180,isOpen:!1}),nZ=(0,ei.eU)(function(e){return e(nK).isOpen}),nJ=(0,ei.eU)(function(e){var n=e(nK);return n.isOpen?n.width:0}),nQ=ec.ZU.Object({type:ec.ZU.Literal("centered")}),nX=ec.ZU.Object({type:ec.ZU.Literal("sidebar"),width:ec.ZU.Number({minimum:300})}),n0=(0,e$.tG)("agent-filetree-order",null,void 0,{getOnInit:!0});ec.ZU.Union([nX,nQ]);var n1=(0,ei.eU)(null),n2=(0,e$.mg)(n1,function(e){return null!==e}),n4=(0,ei.eU)(!0),n5=(0,ei.eU)(function(e){return e(np)?16:6}),n7=(0,ei.eU)(0),n3=(0,ei.eU)(function(e){var n=e(e3),t=e(n4),r=e(nK),i=r.isOpen?r.width:0,o=e(e8),a=e(n5),l=i+(t?48:a);i>0&&(l+=a);var u=e(n7),c=a+2,s=a+2;if(e(eq)){var d=e(n0),p=e(n1);if(p){var f="sidebar"===p.type?p.width:450;switch(d){case"filetree-agent":l=r.isOpen?r.width+2*a:a,c=a+f+a;break;case"agent-filetree":c=r.isOpen?r.width+2*a:a,l=a+f+a}}else l=r.isOpen?r.width+a:a,c=a;s=a}return{headerHeight:n,inset:{top:u,bottom:s,left:l,right:c},gap:a,size:{width:o.width,height:o.height}}}),n8=(0,ei.eU)(null,function(e,n,t){n(e8,t),n(n9,e(nf))});function n6(e,n){return n$()(e,n)}var n9=(0,ei.eU)(null,function(e,n,t){var r=function(t){var r=t.paneId,i=t.rect,o=t.type,a=t.isHidden;l.delete(r);var u=eX(r),c=e(u);n6(e(c.rectAtom),i)||n(c.rectAtom,i);var s=(0,ej.jM)(c,function(e){e.paneId=r,e.type=o,e.isHidden=a});n6(c,s)||n(u,s)},i=e(eV),o=e(eK),a=e(eZ),l=new Set(i),u=new Set(o),c=new Set(a),s=function(e,n){var t=n.size,r=n.gap,i=n.headerHeight,o=n.inset,a=void 0===o?eP:o,l=[],u=[],c=[],s=[],d=null,p={x:a.left,y:a.top,width:t.width-(a.left+a.right),height:t.height-(a.top+a.bottom)},f=e.tiling;if((null==f?void 0:f.type)==="paneGroup"){var h={x:p.x,y:p.y+i,width:p.width,height:p.height-i},g={x:h.x,y:h.y-i,width:h.width,height:i};s.push({id:f.id,rect:g,panes:f.panes,activeIndex:f.activeIndex,path:["tiling"]}),u.push.apply(u,(0,eA._)(f.panes.map(function(e,n){return{paneId:e,rect:h,active:n===f.activeIndex}})))}else f&&f.children.forEach(function(n,t){return function n(t,o,a,l){var p,f,h,g=o.children.indexOf(t),m=o.children.length,v=o.stacked?a.height:a.width,w=(p=a.width,f=a.height,h=t.percent/100,o.stacked?f=(v-(r*(m-1)+i*m))*h+i:p=(v-r*(m-1))*h,{width:p,height:f}),y=w.width,b=w.height,x=function(){var e=a.x,n=a.y;if(0===g)return{x:e,y:n};if(!d)throw Error("Expected previousRect");return o.stacked?n=d.y+d.height+r:e=d.x+d.width+r,{x:e,y:n}}(),_={x:x.x,y:x.y,height:b,width:y};if(d=_,"paneGroup"===t.type){var S={x:_.x,y:_.y+i,width:_.width,height:_.height-i},Y={x:S.x,y:S.y-i,width:S.width,height:i};s.push({id:t.id,rect:Y,panes:t.panes,activeIndex:t.activeIndex,path:l}),u.push.apply(u,(0,eA._)(t.panes.map(function(e,n){return{paneId:e,rect:S,active:n===t.activeIndex}})))}else t.children.forEach(function(e,r){return n(e,t,_,(0,eA._)(l).concat([r]))});if(0!==g){var A={x:_.x-(o.stacked?0:r),y:_.y-(o.stacked?r:0),width:o.stacked?_.width:r,height:o.stacked?r:_.height},I=e_(l),C=(0,eA._)(I).concat([g-1]),k=eC(e,C);if(!k||!eS(k))throw Error("Expected leftNode");var E=void 0;0===k.percent?E="left":0===t.percent&&(E="right"),c.push({parentPath:I,leftPath:C,rightPath:l,stacked:o.stacked,rect:A,snapped:E})}}(n,f,p,["tiling",t])});var m={x:p.x-a.left,y:p.y-a.top,width:p.width+a.left+a.right,height:p.height+a.top+a.bottom};return e.floating.forEach(function(e,n){var t=eO(e.rect,{inside:m,minVisibleX:2*i,minVisibleY:i}),r={height:i,width:e.rect.width,x:t.x,y:t.y},o={x:t.x,y:t.y+i,width:e.rect.width,height:Math.max(e.rect.height-i,0)};s.push({id:e.id,rect:r,panes:e.panes,activeIndex:e.activeIndex,path:["floating",n]}),l.push.apply(l,(0,eA._)(e.panes.map(function(n,t){return{paneId:n,rect:o,active:t===e.activeIndex}})))}),{tiles:u,gutters:c,headers:s,floating:l}}(t,e(n3)),d=s.tiles,p=s.floating,f=s.gutters,h=s.headers,g=f.map(nH);n6(o,g)||n(eK,g);var m=(0,eA._)(d).concat((0,eA._)(p)).map(function(e){return e.paneId});n6(i,m)||n(eV,(0,nq.A)(m,{existing:i,getKey:function(e){return e}}));var v=[];h.forEach(function(t){c.delete(t.id);var r=e7(t.id),i=e(r);v.push(t.id),n6(e(i.rectAtom),t.rect)||n(i.rectAtom,t.rect);var o=(0,ej.jM)(i,function(e){e.panes=t.panes,e.activeIndex=t.activeIndex,e.path=t.path});n6(i,o)||n(r,o)}),n6(a,v)||n(eZ,v),d.forEach(function(e){r({paneId:e.paneId,rect:e.rect,isHidden:!e.active,type:"tile"})}),p.forEach(function(e){r({paneId:e.paneId,rect:e.rect,isHidden:!e.active,type:"floating"})}),f.forEach(function(t){var r={handleId:nH(t),rect:t.rect,parentPath:t.parentPath,leftPath:t.leftPath,rightPath:t.rightPath,stacked:t.stacked,snapped:t.snapped};u.delete(r.handleId);var i=e5(r.handleId);n6(e(i),r)||n(i,r)}),l.forEach(eX.remove),u.forEach(e5.remove),c.forEach(e7.remove);var w=e(e9);w&&l.has(w)&&n(e9,null),n(nf,t)}),te=(0,ei.eU)(null),tn=(0,e$.mg)(te,Boolean),tt=(0,ei.eU)(null,function(e,n,t){switch(t.type){case"start":var r=e(n1);if((null==r?void 0:r.type)!=="sidebar")return;n(te,{startWidth:r.width});break;case"update":var i=e(te);if(!i)return;var o=e(n0),a=i.startWidth+t.moveDelta.x*("filetree-agent"===o?-1:1);n(n1,function(e){return(0,ej.jM)(e,function(e){(null==e?void 0:e.type)==="sidebar"&&(a<300?e.width=300-a>150?32:300:e.width=a)})}),n(n9,e(nf));break;case"end":var l=e(n1);if((null==l?void 0:l.type)!=="sidebar")return;var u=e(te);if(n(te,null),l.width>32&&l.width<300&&u){var c={width:l.width}.width>u.startWidth;n(tr,(0,p._)({type:"sidebar"},c?{width:450}:{width:300}))}}}),tr=(0,ei.eU)(null,function(e,n,t){n(nG,{headers:new Map(e(eZ).map(function(e){return[e,{snappiness:400}]})),panes:new Map(e(eV).map(function(e){return[e,{snappiness:400}]}))}),n(n1,t),n(n9,e(nf))}),ti=(0,ei.eU)(null,function(e,n,t){n(tr,{type:"sidebar",width:t?450:32})}),to=(0,ei.eU)(null,function(e,n){n(tr,{type:"sidebar",width:450})}),ta=(0,ei.eU)(null,function(e,n,t){var r=e(nb).find(function(e){var n=(0,u._)(e,2);return"agentChat"===(n[0],n[1]).type}),i=new Map(e(eV).map(function(e){return[e,{snappiness:60,delay:r&&e===r[0]?0:400}]})),o=new Map(e(eZ).map(function(e){return[e,{snappiness:60,delay:400}]}));n(tl,!0),n(nG,{panes:i,headers:o}),setTimeout(function(){n(tl,!1)},400),n(nr,t),e(eq)&&n(to)}),tl=(0,ei.eU)(!1),tu=(0,ei.eU)(!1),tc=(0,ei.eU)(function(e){var n=e(nb).find(function(e){return"webview"===(0,u._)(e,2)[1].type});if(!n||e(tl)||"centeredVisualPlanner"===e(nr)||null!==e(nL))return null;var t=e(eX(n[0]));if(t.isHidden)return null;if(e(nk)===n[0]){var r,i=(r=e(nP),{x:r.x+1,y:r.y+1,width:Math.max(0,r.width-2),height:Math.max(0,r.height-2)});return{x:i.x,y:i.y,width:i.width,height:i.height,show:e(tu)}}var o=e(t.rectAtom),a=e(e3);return{x:o.x,y:o.y-a,width:o.width,height:o.height+a,show:e(tu)}}),ts=ec.ZU.Object({type:ec.ZU.String()}),td=ec.ZU.Object({visible:ec.ZU.Boolean(),primaryTools:ec.ZU.Array(ts),secondaryTools:ec.ZU.Array(ts)}),tp=(0,ei.eU)({visible:!0,primaryTools:[{type:"agentChat"},{type:"ghostwriterChat"}],secondaryTools:[{type:"agentProgress"},{type:"webview"},{type:"runnerOutput"},{type:"neon"},{type:"deployments"}]});(0,ei.eU)(null,function(e,n){n(tp,(0,ej.jM)(e(tp),function(e){e.visible=!1})),n(n4,!1),n(n9,e(nf))}),(0,ei.eU)(null,function(e,n){n(tp,(0,ej.jM)(e(tp),function(e){e.visible=!0})),n(n4,!0),n(n9,e(nf))});var tf=(0,ei.eU)(null,function(e,n,t){var r=e(tp),i=r.secondaryTools.findIndex(function(e){return e.type===t});-1!==i&&n(tp,(0,ej.jM)(r,function(e){e.secondaryTools.splice(i,1)}))}),th=(0,ei.eU)(null,function(e,n,t){var r=e(tp);r.secondaryTools.some(function(e){return e.type===t.pane.type})||n(tp,(0,ej.jM)(r,function(e){void 0!==t.atIndex?e.secondaryTools.splice(t.atIndex,0,t.pane):e.secondaryTools.push(t.pane)}))});function tg(e){return"extension"===e.type?e.data.installationId:e.type}var tm=t(79203),tv=t(26325),tw=t(46577),ty=t(83846),tb=t(67201),tx=t(58506),t_=function(){var e=new Map([["agentChat",40],["webview",60]]);if(.4*window.innerWidth>450){var n=Math.round(450/window.innerWidth*100);e.set("agentChat",n),e.set("webview",100-n)}return e},tS=t(29935),tY=t(82643),tA=t(97388),tI=(0,ei.eU)(function(e){var n=e(nf),t={};return e(e0).forEach(function(n){t[n.paneId]=e(n.dataAtom)}),{layout:n,data:t,sidebar:e(nK),dock:e(tp)}}),tC=(0,ei.eU)(null),tk=(0,ei.eU)(null),tE=(0,ei.eU)(null),tD=(0,ei.eU)(null,function(e,n,t){return(0,tS._)(function(){var r,i,o,a,l,u,c;return(0,tY.YH)(this,function(s){switch(s.label){case 0:var d;if((r=e(tk))&&!r.retry||r&&Date.now()-r.timestamp<6e4||!e(n_)||(i=e(tI),o=t.replId,a=e(tC),!t.force&&n$()(a,i)))return[2];if(l=e(no))return n(na,{popupId:l,state:i}),n(tC,i),[2];return n(tE,u=(0,tb.A)()),[4,(d=i,(0,tS._)(function(){var e,n;return(0,tY.YH)(this,function(t){switch(t.label){case 0:n=void 0,t.label=1;case 1:return t.trys.push([1,3,,4]),[4,null===tA.V||void 0===tA.V?void 0:tA.V.mutate({mutation:H,variables:{input:{replId:o,state:d}}})];case 2:return n=t.sent(),[3,4];case 3:return t.sent(),[2,{success:!1,retry:!0}];case 4:if((null==n||null==(e=n.data)?void 0:e.setReplLayoutState.__typename)==="Repl")return[2,{success:!0,retry:void 0}];return[2,{success:!1,retry:!1}]}})})())];case 1:if(c=s.sent(),e(tE)!==u)return[2];if(n(tE,null),c.retry)return n(tk,{timestamp:Date.now(),retry:!0}),[2];if(!c.success)return n(tk,{timestamp:Date.now(),retry:!1}),[2];return n(tC,i),[2]}})})()}),tR=(0,ei.eU)(null,function(e,n,t){var r=t.data,i=t.layout,o=t.sidebar,a=t.dock,l=t.type;Object.entries(r).forEach(function(t){var r=(0,u._)(t,2),i=r[0],o=r[1],a=eX(i);n(a,(0,ej.jM)(e(a),function(e){e.isCommitted=!0})),n(e(a).dataAtom,o)}),n(nf,i),o&&"saved"===l&&n(nK,o),a&&n(tp,a),n(n9,i),n(nI,l),n(tC,e(tI))}),tF=t(16182),tU=t.n(tF),tP=(0,ei.eU)(null,function(e,n,t){var r=eD(e(nf),t);if(!r)return null;n(ne,r.panes[r.activeIndex])}),tO=(0,ei.eU)(null,function(e,n,t){var r=t.paneId,i=t.activate,o=e(nf);if("tile"===e(eX(r)).type?n(n9,(0,ej.jM)(o,function(e){try{!function(e,n){var t=ek(e,n.paneId);if(t){var r=t.paneGroupPath;t.paneGroup.activeIndex=t.index;var i=r.map(function(e,n){return r.slice(0,n+1)}),o=!0,a=!1,l=void 0;try{for(var u,c=i[Symbol.iterator]();!(o=(u=c.next()).done);o=!0){var s=u.value,d=eC(e,s);if(!d)throw Error("Expected node");if("floatingPaneGroup"===d.type)throw Error("Expected tiled pane");if(1!==s.length){var p=s[s.length-1];if("number"!=typeof p)throw Error("Expected number");var f=eC(e,e_(s));if((null==f?void 0:f.type)!=="split")throw Error("Expected split");var h=f.stacked?n.minPercentVertical:n.minPercentHorizontal;if(!(d.percent>=h)){var g=p===f.children.length-1,m=g?(0,eA._)(s.slice(0,-1)).concat([p-1]):s,v=g?f.children[p-1].percent-(h-d.percent):h;eW(e,{leftPath:m,percent:v})}}}}catch(e){a=!0,l=e}finally{try{o||null==c.return||c.return()}finally{if(a)throw l}}}}(e,{paneId:r,minPercentHorizontal:30,minPercentVertical:20})}catch(e){throw n(nS,{error:e,origin:"Layout: revealPaneAtom/revealTiledPane"}),e}})):n(n9,(0,ej.jM)(o,function(e){try{!function(e,n){var t=ek(e,n.paneId);if(t){var r=t.paneGroup;if("floatingPaneGroup"!==r.type)throw Error("Expected floatingPaneGroup");r.activeIndex=t.index,r.rect.width=Math.max(r.rect.width,n.minWidth),r.rect.height=Math.max(r.rect.height,n.minHeight)}}(e,{paneId:r,minWidth:200,minHeight:140})}catch(e){throw n(nS,{error:e,origin:"Layout: revealPaneAtom/revealFloatingPane"}),e}})),!i){var a=ek(o,r),l=e(e9);if(!a)throw Error("Expected pane");if(!l)return;var u=ek(o,l);if(!u)throw Error("Expected active pane");if(u.paneGroup.id!==a.paneGroup.id)return}n(ne,r)}),tT=(0,ei.eU)(null,function(e,n,t){var r;n(e(eX(t.paneId)).dataAtom,t.pane),(t.makeActive||t.reveal)&&n(tO,{paneId:t.paneId,activate:null!=(r=t.makeActive)&&r}),(t.commit||(0,e6.NM)(t.pane))&&n(nn,t.paneId)}),tL=(0,ei.eU)(null,function(e,n,t){var r,i=e(nf),o=ek(i,t);if(!o)throw Error("Expected pane");if(e(eq)&&(null==(r=i.tiling)?void 0:r.type)==="paneGroup"&&1===o.paneGroup.panes.length)return n(tT,{paneId:t,pane:{type:"webview"}});var a=!o.paneGroup.panes.some(function(e){return e!==t}),l=t===e(e9),u=eF(i,t),c=(0,ej.jM)(i,function(e){try{eN(e,t)}catch(e){throw n(nS,{error:e,tags:{layoutstate:!0},origin:"Layout: state/removePane/removePaneAtom"}),e}});if(n(n9,c),a&&e(nC)&&!e(nl)&&n(nC,!1),l&&(a||n(tP,o.paneGroup.id),a&&u)){do"split"===u.type&&(u=u.children[0]);while("paneGroup"!==u.type);n(tP,u.id)}}),tM=(0,ei.eU)(null,function(e,n,t){var r=e(nf),i=ek(r,t),o=null==i?void 0:i.paneGroup.panes.filter(function(e){return e!==t});if(null==o?void 0:o.length){var a=(0,ej.jM)(r,function(e){try{var t=!0,r=!1,i=void 0;try{for(var a,l=o[Symbol.iterator]();!(t=(a=l.next()).done);t=!0){var u=a.value;eN(e,u)}}catch(e){r=!0,i=e}finally{try{t||null==l.return||l.return()}finally{if(r)throw i}}}catch(e){throw n(nS,{error:e,tags:{layoutstate:!0},origin:"Layout: state/removePane/removePaneAtom"}),e}});n(n9,a)}}),tG=(0,ei.eU)(null,function(e,n,t){var r=e(nf),i=ek(r,t);i&&n(n9,(0,ej.jM)(r,function(e){var n=!1,r=!0,o=!1,a=void 0;try{for(var l,u=i.paneGroup.panes[Symbol.iterator]();!(r=(l=u.next()).done);r=!0){var c=l.value;n&&eN(e,c),c===t&&(n=!0)}}catch(e){o=!0,a=e}finally{try{r||null==u.return||u.return()}finally{if(o)throw a}}}))}),tN=(0,ei.eU)(null,function(e,n,t){var r=e(nf),i=eD(r,t.paneGroupId);if(!i){var o=Error("Expected pane group");throw n(nS,{error:o,tags:{layoutstate:!0},origin:"Layout: state/splits/removePaneGroupAtom"}),o}var a=(0,ej.jM)(r,function(e){try{i.panes.forEach(function(n){eN(e,n)})}catch(e){throw n(nS,{error:e,tags:{layoutstate:!0},origin:"Layout: state/splits/removePaneGroupAtom"}),e}});e(nC)&&!e(nl)&&n(nC,!1),n(n9,a)}),tz=(0,ei.eU)(null,function(e,n,t){var r=e(nf),i=ek(r,t.paneId);if(!i){var o=Error("Expected relativeToPane");throw n(nS,{error:o,tags:{layoutstate:!0},origin:"Layout: state/splits/splitPaneAtom"}),o}var a=(0,tb.A)();n(e(eX(a)).dataAtom,{type:"commands",data:{autoFocus:!!t.autoFocus}});var l=(0,ej.jM)(r,function(e){try{eT(e,{id:(0,tb.A)(),isFloating:!1,placement:t.placement,relativeTo:i.paneGroupPath,panes:[a]})}catch(e){throw n(nS,{error:e,tags:{layoutstate:!0},origin:"Layout: state/splits/splitPaneAtom"}),e}});n(n9,l),n(ne,a)}),tH=(0,ei.eU)(null,function(e,n,t){var r=e(nf),i=(0,tb.A)();n(e(eX(i)).dataAtom,t.pane),(0,e6.NM)(t.pane)&&n(nn,i);var o=(0,ej.jM)(r,function(e){try{eT(e,{id:(0,tb.A)(),isFloating:!1,placement:t.placement,relativeTo:t.relativeTo,panes:[i],percent:t.percent})}catch(e){throw n(nS,{error:e,tags:{layoutstate:!0},origin:"Layout: state/splits/insertSplitPaneAtom"}),e}});return n(n9,o),i}),tB=(0,ei.eU)(null,function(e,n,t){var r=e(nf);n(n9,(0,ej.jM)(r,function(e){eW(e,{leftPath:t.leftPath,percent:t.percent})}))}),tW=t(77223),tj=(0,ei.eU)(null,function(e,n,t){if(0===t.panes.length){var r=Error("Expect at least one pane");throw n(nS,{error:r,origin:"Layout: state/insertPaneGroup/insertPaneGroupAtom"}),r}var i=e(nf),o=t.panes.map(function(){return(0,tb.A)()}),a=(0,ej.jM)(i,function(e){try{eT(e,{id:(0,tb.A)(),panes:o,relativeTo:t.relativeTo||["tiling"],placement:t.placement,percent:t.percent})}catch(e){throw n(nS,{error:e,tags:{layoutstate:!0},origin:"Layout: state/insertPaneGroup/insertPaneGroupAtom"}),e}});if(n(n9,a),t.panes.forEach(function(t,r){var i=o[r];n(e(eX(i)).dataAtom,t),(0,e6.NM)(t)&&n(nn,i);var a=(0,e6.gG)(t.type)?e(e0).find(function(n){return e(n.dataAtom).type===t.type&&n.paneId!==i}):null;a&&n(tL,a.paneId)}),t.commit){var l=!0,u=!1,c=void 0;try{for(var s,d=o[Symbol.iterator]();!(l=(s=d.next()).done);l=!0){var p=s.value;n(nn,p)}}catch(e){u=!0,c=e}finally{try{l||null==d.return||d.return()}finally{if(u)throw c}}}return t.makeActive&&n(ne,o[0]),o}),t$={top:"above",left:"leftOf",right:"rightOf",bottom:"below"},tq=(0,ei.eU)(null,function(e,n,t){n(tH,{pane:t.pane,relativeTo:["tiling"],placement:t$[t.edge]})}),tV=(0,ei.eU)(null,function(e,n,t){var r=e(nf),i=(0,tb.A)(),o=(0,tb.A)(),a=(0,ej.jM)(r,function(e){try{eT(e,{id:o,panes:[i],isFloating:!0,rect:t.rect})}catch(e){throw n(nS,{error:e,tags:{layoutstate:!0},origin:"Layout: state/insertPaneGroup/insertFloatingPaneGroupAtom"}),e}});return n(n9,a),n(e(eX(i)).dataAtom,t.pane),(0,e6.NM)(t.pane)&&n(nn,i),t.makeActive&&(n(ne,i),t.makeModal&&n(tW.LY,o)),i}),tK=(0,ei.eU)(null),tZ=(0,ei.eU)(null,function(e,n,t){if(0===t.panes.length)return[];var r=e(nf),i=t.panes.map(function(){return(0,tb.A)()}),o=(0,ej.jM)(r,function(e){try{eM(e,{paneIds:i,activate:t.activate,paneGroupId:t.paneGroupId,index:t.index})}catch(e){throw n(nS,{error:e,tags:{layoutstate:!0},origin:"Layout: state/tabs/insertPanesAtom"}),e}});return n(n9,o),t.panes.forEach(function(r,o){var a=i[o];n(e(eX(a)).dataAtom,r);var l=(0,e6.gG)(r.type)?e(e0).find(function(n){return e(n.dataAtom).type===r.type&&n.paneId!==a}):null;l&&n(tL,l.paneId),(t.commit||(0,e6.NM)(r))&&n(nn,a)}),t.activate&&n(tO,{paneId:(0,u._)(i,1)[0],activate:!0}),i}),tJ=(0,ei.eU)(null,function(e,n,t){var r=t.pane,i=t.activate,o=t.commit,a=t.placement;if("agentChat"===r.type&&e(eq)){n(ti,!0);var l,c=e(tK),s=null==(l=r.data)?void 0:l.sessionId;null==c||c.setSessionId(null!=s?s:null),null==c||c.focusInput();return}var d=e(nf);if(!d.tiling){var p=n(tH,{pane:r,relativeTo:["tiling"],placement:"replace"});return i&&n(ne,p),p}if("after"===a.type){var f=ek(d,a.paneId);if(f){var h=(0,u._)(n(tZ,{panes:[r],paneGroupId:f.paneGroup.id,index:f.index+1,activate:i}),1)[0];return i&&n(ne,h),h}}if("secondary"===a.type&&a.relativeTo){var g=eF(d,a.relativeTo);if(g){if("paneGroup"===g.type){var m=(0,u._)(n(tZ,{panes:[r],paneGroupId:g.id,activate:i}),1)[0];return i&&n(ne,m),m}var v=n(tH,{pane:r,relativeTo:a.relativeTo,placement:"rightOf"});return i&&n(ne,v),v}var w=ek(d,a.relativeTo);if((null==w?void 0:w.paneGroup.type)==="floatingPaneGroup"){var y=e(eX(a.relativeTo)),b=e(y.rectAtom);return n(tV,{rect:{x:b.x+b.width,y:b.y,width:b.width,height:b.height},pane:r,makeActive:i})}}var x=n(tH,{pane:r,relativeTo:["tiling"],placement:"rightOf"});return i&&n(ne,x),o&&n(nn,x),x}),tQ=t(8767),tX=(0,ei.eU)(null,function(e,n,t){var r=e(nf),i=ek(r,t);if(!i){var o=Error("Expected selectedPane");throw n(nS,{error:o,tags:{layoutstate:!0},origin:"Layout: state/tabs/selectTabAtom"}),o}n(e7(i.paneGroup.id),function(e){return(0,ej.jM)(e,function(e){e.activeIndex=i.index})});var a=!0,l=!1,u=void 0;try{for(var c,s=i.paneGroup.panes[Symbol.iterator]();!(a=(c=s.next()).done);a=!0){var d=c.value,p=eX(d);n(p,function(e){return(0,ej.jM)(e,function(e){e.isHidden=e.paneId!==t})})}}catch(e){l=!0,u=e}finally{try{a||null==s.return||s.return()}finally{if(l)throw u}}n(nf,(0,ej.jM)(r,function(e){try{var r=ek(e,t);if(!(null==r?void 0:r.paneGroup))throw Error("Expected pane group");var i=r.paneGroup,o=i.panes.indexOf(t);if(-1===o)throw Error("Expected index");i.activeIndex=o}catch(e){throw n(nS,{error:e,tags:{layoutstate:!0},origin:"Layout: state/tabs/selectTabAtom"}),e}})),0===e(e(eX(t)).rectAtom).width?n(tO,{paneId:t,activate:!0}):n(ne,t)}),t0=(0,ei.eU)(null,function(e,n,t){var r=e(nf),i=eE(r,"topRight"),o=eE(r,"topLeft");if(!i||!o||!r.tiling){var a=n(tH,{pane:t,relativeTo:["tiling"],placement:"replace"});n(nn,a);return}if("paneGroup"===r.tiling.type){var l=n(tH,{pane:t,relativeTo:["tiling"],placement:"rightOf"});n(nn,l);return}if("split"===r.tiling.type&&2===r.tiling.children.length&&"paneGroup"===r.tiling.children[1].type){var u=r.tiling.stacked,c=n(tH,{pane:t,relativeTo:i.path,placement:u?"rightOf":"above"});n(nn,c);return}n(tZ,{panes:[t],paneGroupId:i.paneGroup.id,commit:!0})}),t1=(0,ei.eU)(null,function(e,n,t){var r=t.pane,i=t.focusIfExists,o=e(e0).find(function(n){return e(n.dataAtom).type===r.type});if(o){i&&(n(tX,o.paneId),n(nn,o.paneId));return}n(t0,r)}),t2=(0,ei.eU)(null,function(e,n,t){if(!e(e0).find(function(n){var r,i,o,a,l,u,c,s=e(n.dataAtom);return"webview"===s.type&&(c=s&&s.data,!t&&!c||!!t&&!!c&&(null==(r=t.ports)?void 0:r.port)===(null==(i=c.ports)?void 0:i.port)&&(null==(o=t.ports)?void 0:o.type)===(null==(a=c.ports)?void 0:a.type)&&(null==(l=t.ports)?void 0:l.path)===(null==(u=c.ports)?void 0:u.path))}))return void n(t0,{type:"webview",data:t})}),t4=(0,ei.eU)(null,function(e,n,t){var r=e(nf),i=(0,ej.jM)(r,function(e){var r=ek(e,t.paneId);if(!r){var i=Error("Expected pane");throw n(nS,{error:i,tags:{layoutstate:!0},origin:"Layout: state/tabs/movePaneAtom"}),i}var o=eD(e,t.toPaneGroupId);if(!o){var a=Error("Expected toPaneGroup");throw n(nS,{error:a,tags:{layoutstate:!0},origin:"Layout: state/tabs/movePaneAtom"}),a}var l=1===r.paneGroup.panes.length,u=!o.panes.includes(t.paneId);if(!l||u)try{eN(e,t.paneId),eM(e,{paneIds:[t.paneId],paneGroupId:t.toPaneGroupId,index:t.index}),u&&n(nn,t.paneId)}catch(e){throw n(nS,{error:e,tags:{layoutstate:!0},origin:"Layout: state/tabs/movePaneAtom"}),e}});n(n9,i)}),t5=(0,ei.eU)(null,function(e,n,t){var r=e(e9);if(r){var i=e(nf),o=ek(i,r);if(o){var a=o.paneGroup,l=eU({relativeTo:r,rects:new Map(e(e0).filter(function(e){return!e.isHidden}).map(function(n){return[n.paneId,e(n.rectAtom)]})),direction:t}),u=l?ek(i,l):null;if(u)return void n(t4,{paneId:r,toPaneGroupId:u.paneGroup.id});var c=a.panes.find(function(e){return e!==r});c&&n(n9,(0,ej.jM)(i,function(e){eN(e,r),eT(e,{id:(0,tb.A)(),relativeTo:c,panes:[r],placement:t})}))}}}),t7=(0,ei.eU)(!1),t3=(0,ei.eU)(null,function(e,n,t){var r=e(nh).map(function(n){return{paneId:n.paneId,path:(0,e6.Vj)(e(n.dataAtom))}}).filter(function(e){return t===e.path}),i=[],o=e(nf),a=(0,ej.jM)(o,function(e){var t=!0,o=!1,a=void 0;try{for(var l,u=r[Symbol.iterator]();!(t=(l=u.next()).done);t=!0){var c=l.value.paneId,s=ek(e,c);if(!s){var d=Error("Expected pane");throw n(nS,{error:d,tags:{layoutstate:!0},origin:"Layout: state/tabs/removePanesForFileAtom"}),d}s.floating||1!==s.paneGroup.panes.length?eN(e,c):i.push(c)}}catch(e){o=!0,a=e}finally{try{t||null==u.return||u.return()}finally{if(o)throw a}}}),l=!0,u=!1,c=void 0;try{for(var s,d=i[Symbol.iterator]();!(l=(s=d.next()).done);l=!0){var p=s.value;n(tT,{paneId:p,pane:{type:"commands",data:{autoFocus:!1}}})}}catch(e){u=!0,c=e}finally{try{l||null==d.return||d.return()}finally{if(u)throw c}}n(n9,a)}),t8=(0,ei.eU)(null,function(e,n,t){var r=t.node.path;if(t.eventType===tQ.dV.Delete)return void n(t3,r);var i=e(nh).filter(function(n){return(0,e6.Vj)(e(n.dataAtom))===r}),o={type:(0,e6.QY)({path:t.to}),data:{path:t.to}},a=!0,l=!1,u=void 0;try{for(var c,s=i[Symbol.iterator]();!(a=(c=s.next()).done);a=!0){var d=c.value.paneId;n(tT,{paneId:d,pane:o})}}catch(e){l=!0,u=e}finally{try{a||null==s.return||s.return()}finally{if(l)throw u}}}),t6=(0,ei.eU)(null,function(e,n,t){var r=e(e9),i=e(nf);if(r){var o=ek(i,r);if(o)return void n(tZ,{panes:t,paneGroupId:null==o?void 0:o.paneGroup.id,activate:!0,index:o.index+t.length})}var a=eE(i,"topLeft");if(a)return void n(tZ,{activate:!0,paneGroupId:a.paneGroup.id,index:a.paneGroup.activeIndex+t.length,panes:t});var l=i.floating.length?i.floating[0]:null;if(l)return void n(tZ,{activate:!0,paneGroupId:l.id,index:l.activeIndex+t.length,panes:t});n(tj,{panes:t,placement:"leftOf",makeActive:!0,relativeTo:["tiling"]})}),t9=(0,ei.eU)(null,function(e,n){n(t6,[{type:"commands",data:{autoFocus:!0}}])}),re=(0,ei.eU)(null,function(e,n){var t=e(e9);return!!t&&(n(tL,t),!0)}),rn=(0,ei.eU)(null,function(e,n,t){var r=e(e9);if(r){var i=function(e,n){var t=n.paneId,r=n.dir,i=ek(e,t);if(i){var o=i.index,a=i.paneGroup.panes;return"previous"===r?a[0===o?a.length-1:o-1]:a[o===a.length-1?0:o+1]}}(e(nf),{paneId:r,dir:t});i&&n(tX,i)}}),rt=(0,ei.eU)(null,function(e,n,t){var r=t.paneId,i=t.pane;n(tT,{paneId:r,pane:i});var o=(0,e6.gG)(i.type)?e(e0).find(function(n){return e(n.dataAtom).type===i.type&&n.paneId!==r}):null;if(o){var a=ek(e(nf),o.paneId);if(!(null==a?void 0:a.floating)&&(null==a?void 0:a.paneGroup.panes.length)===1)return void n(tT,{paneId:o.paneId,pane:{type:"commands",data:{autoFocus:!1}}});n(tL,o.paneId)}}),rr=(0,ei.eU)(null,function(e,n,t){var r=e(e(eX(t.b)).dataAtom);n(tT,{paneId:t.a,pane:r});var i=ek(e(nf),t.b);if(!(null==i?void 0:i.floating)&&(null==i?void 0:i.paneGroup.panes.length)===1)return void n(rt,{paneId:t.b,pane:{type:"commands",data:{autoFocus:!1}}});n(tL,t.b)}),ri=(0,ei.eU)(null,function(e,n,t){if(e(eq)){var r=eX(t);n(r,function(e){return(0,ej.jM)(e,function(e){e.highlight=!0})}),setTimeout(function(){n(r,function(e){return(0,ej.jM)(e,function(e){e.highlight=!1})})},200)}}),ro=(0,ei.eU)(null,function(e,n,t){var r,i,o=e(nf),a=t.activate,l=void 0===a||a,u=t.update,c=void 0===u||u,s=function(r){return r.paneId===e(e9)&&n(ri,r.paneId),n(tX,r.paneId),c&&n(tT,{paneId:r.paneId,pane:t.pane,makeActive:l,reveal:t.reveal}),r.paneId};if("diff"===t.pane.type||"webview"===t.pane.type){var d=e(e0).find(function(n){var r=e(n.dataAtom);return tU()(r,t.pane)});if(d)return s(d)}var p=e(e0).find(function(n){return e(n.dataAtom).type===t.pane.type});if((0,e6.gG)(t.pane.type)&&p)return s(p);var f=eE(o,"topRight"),h=eE(o,"topLeft"),g=f,m="rightOf";if("agentChat"===t.pane.type||"ghostwriterChat"===t.pane.type?(null==(i=o.tiling)?void 0:i.type)==="paneGroup"?(g=null,m="leftOf"):g=h:(null==(r=o.tiling)?void 0:r.type)!=="paneGroup"||e(n2)||(g=null,m="rightOf"),!g)return n(tj,{panes:[t.pane],placement:m,relativeTo:["tiling"],makeActive:l,commit:t.commit,percent:t_().get(t.pane.type)})[0];var v=g.paneGroup.panes.find(function(n){var t=e(eX(n));if(t.isHidden)return!1;var r=e(t.dataAtom);return!t.isCommitted&&!(0,e6.Dx)(r.type)});if(v)return n(tT,{paneId:v,pane:t.pane,makeActive:l,reveal:t.reveal}),v;var w=n(tZ,{panes:[t.pane],paneGroupId:g.paneGroup.id,activate:l,commit:t.commit});return t.reveal&&n(tO,{paneId:w[0],activate:l}),w[0]}),ra=t(7821),rl=t(61324),ru=t(21188),rc=(0,ei.eU)(!1),rs=(0,d.createContext)(null);function rd(e){var n,t,r,i=e.children,o=e.savedLayoutState,a=e.isExtension,l=void 0!==a&&a,p=e.isBlankRepl,f=e.popupId,h=e.initialPane,g=e.agentCenteredLayout,m=void 0!==g&&g,v=e.agentLayoutVariation,w=(0,rl.p)(),y=(0,ra.E)(),b=(n=(0,s.useRouter)(),t=(0,q.Po)(n),r=(0,q.ME)(n,"workspace2"),t&&!r?6:ru.uF),x=(0,u._)((0,d.useState)(function(){var e,n,t,r,i,a,u,c,s,d,g,x,_,S,Y=(0,ei.y$)();Y.set(eq,w),w&&Y.set(n0,"filetree-agent"),Y.set(rc,y),Y.set(n7,b);var A=null!=o?o:(n=(e={isExtension:l,isInPopup:!!f,showAssistantChat:null==h,isBlankRepl:p}).codeEditorPath,t=e.isExtension,{data:(a=(i={isExtension:t,isInPopup:e.isInPopup,codeEditorPath:n,showAssistantChat:void 0!==(r=e.showAssistantChat)&&r,isBlankRepl:e.isBlankRepl}).isExtension,u=i.isInPopup,s=void 0===(c=i.codeEditorPath)?"":c,d=i.showAssistantChat,g=i.isBlankRepl,x={config:{paneId:(0,tb.A)(),pane:{type:"config",flow:"incompleteConfig"}},codeEditor:{paneId:(0,tb.A)(),pane:{type:s.toLowerCase().endsWith(".md")?"markdown":"codeEditor",data:{path:s}}},output:{paneId:(0,tb.A)(),pane:{type:"runnerOutput"}},shell:{paneId:(0,tb.A)(),pane:{type:"shell"}},commands:{paneId:(0,tb.A)(),pane:{type:"commands",data:{autoFocus:!1}}},ghostwriter:{paneId:(0,tb.A)(),pane:{type:"ghostwriterChat"}},extensionDevtools:{paneId:(0,tb.A)(),pane:{type:"extensionDevtools"}},extensionDocs:{paneId:(0,tb.A)(),pane:{type:"docs",data:{url:tx.ik.EXTENSIONS}}}},_={},Object.values(x).forEach(function(e){var n=e.paneId,t=e.pane;_[n]=t}),S={layout:function(e){var n=e.configId,t=e.codeEditorId,r=e.outputId,i=e.shellId,o=e.extensionDevtoolsId,a=e.extensionDocsId,l=e.ghostwriterId,u=e.isExtension,c=e.isInPopup,s=e.showAssistantChat,d=e.isBlankRepl;if(c)return{floating:[],tiling:null};var p=d?[n]:[t],f=[r,i];s&&f.unshift(l);var h={type:"split",stacked:!1,percent:100,children:[{id:(0,tb.A)(),percent:55,type:"paneGroup",panes:p,activeIndex:0},{id:(0,tb.A)(),percent:45,type:"paneGroup",panes:f,activeIndex:0}]};return u&&(h={type:"split",stacked:!1,percent:100,children:[{id:(0,tb.A)(),percent:55,type:"paneGroup",panes:p,activeIndex:0},{id:(0,tb.A)(),percent:45,type:"paneGroup",panes:[o,a,i],activeIndex:0}]}),d||(h={type:"split",stacked:!1,percent:100,children:[{id:(0,tb.A)(),percent:40,type:"paneGroup",panes:[l],activeIndex:0},{id:(0,tb.A)(),percent:60,type:"paneGroup",panes:[t],activeIndex:0}]}),{floating:[],tiling:h}}({configId:x.config.paneId,codeEditorId:x.codeEditor.paneId,outputId:x.output.paneId,shellId:x.shell.paneId,commandsId:x.commands.paneId,extensionDevtoolsId:x.extensionDevtools.paneId,extensionDocsId:x.extensionDocs.paneId,ghostwriterId:x.ghostwriter.paneId,isExtension:a,isInPopup:u,showAssistantChat:d,isBlankRepl:g}),data:_}).data,layout:S.layout,type:"default"});return f&&(Y.set(no,f),Y.set(nC,!0)),(m||"split-with-webview"===v||"split-with-console"===v)&&(A=function(e){var n,t,r=e.wsUiSimplification,i=e.variation,o=(0,tb.A)(),a=(0,tb.A)(),l={type:"split-with-console"===i?"runnerOutput":"webview"},u=null!=(n=t_().get("agentChat"))?n:40;if(r)return{data:(0,ty._)({},a,l),layout:{floating:[],tiling:{type:"paneGroup",panes:[a],activeIndex:0,id:(0,tb.A)(),percent:100}},type:"default"};var c={tiling:{type:"split",stacked:!1,percent:100,children:[{id:(0,tb.A)(),percent:u,type:"paneGroup",panes:[o],activeIndex:0},{id:(0,tb.A)(),percent:100-u,type:"paneGroup",panes:[a],activeIndex:0}]},floating:[]};return{data:(t={},(0,ty._)(t,o,{type:"agentChat"}),(0,ty._)(t,a,l),t),layout:c,type:"default"}}({wsUiSimplification:w,variation:v})),Y.set(tR,A),void 0!==v&&(Y.set(nr,"tilingLayout"),Y.set(n1,{type:"sidebar",width:450})),m&&(Y.set(nr,"centeredVisualPlanner"),Y.set(n1,{type:"centered"})),null!=h&&(Y.get(e1).some(function(e){return Y.get(e.dataAtom).type===(null==h?void 0:h.type)})||Y.set(ro,{pane:h,commit:!0})),Y}),1)[0];return(0,c.Y)(rs.Provider,{value:x,children:i})}function rp(){var e=(0,d.useContext)(rs);if(!e)throw Error("Expected store in context");return e}function rf(e){return(0,tm.md)(e,{store:rp()})}function rh(e){return(0,tw.k)(e,rp())}var rg=function(e){return(0,tm.Xr)(e,{store:rp()})};function rm(e){return(0,tv.yF)((0,d.useCallback)(function(n){return n(e)},[e]),{store:rp()})}var rv=(0,ei.eU)(null),rw=(0,ei.eU)(null,function(e,n){var t=e(nK);n(rv,{startWidth:t.width,startIsOpen:t.isOpen})}),ry=(0,ei.eU)(function(e){return!!e(rv)}),rb=(0,ei.eU)(null,function(e,n,t){var r=e(rv);if(r){var i=t*("agent-filetree"!==e(n0)?1:-1),o=.6*e(e8).width,a=Math.min(Math.max(r.startWidth+i,0),o),l=i>0;0===a&&l?a=140:!l&&a<140&&140-a>20&&(a=0),n(nK,function(e){return(0,ej.jM)(e,function(e){e.width=a,0===a?e.isOpen=!1:e.isOpen=r.startIsOpen})}),r.startIsOpen&&n(n9,e(nf))}}),rx=(0,ei.eU)(null,function(e,n){var t=e(nK),r=e(rv);t.isOpen||n(nK,function(e){return(0,ej.jM)(e,function(e){var n;e.width=null!=(n=null==r?void 0:r.startWidth)?n:140})}),n(rv,null)}),r_=(0,ei.eU)(function(e){var n=e(nK),t=e(e8),r=e(n5),i=e(n7),o=n.width,a=n.isOpen;if(e(eq)){var l=e(n1),u={y:i,width:o,isOpen:a,height:t.height-r-i},c=e(n0);return l&&"agent-filetree"===c?(0,p._)({x:t.width-o-r},u):(0,p._)({x:a?r:r-o},u)}return{isOpen:a,width:o,height:t.height-r-i-2,x:a?48:-o,y:i}}),rS=(0,ei.eU)(function(e){var n=e(nK),t=e(n5);return n.isOpen?{isOpen:!0,width:t}:{isOpen:!1,width:t}}),rY=t(46569),rA=t(60703),rI=t(79890),rC=t(18304),rk=t(3588),rE=(0,ei.eU)(null),rD=(0,rk.v)(["backgroundColor","borderRadius","zIndex","border","opacity","visibility","width","height","x","y","innerScale","innerOpacity"]),rR=rD.cssVars,rF=rD.styleTokens,rU=(0,e$.mg)(rE,function(e){return(0,ty._)({},rR.border,(null==e?void 0:e.type)==="detachPreview"&&e.progress<.98?"1px dashed ".concat(rI.LU.foregroundDefault):"1px solid ".concat(rI.LU.accentPrimaryDefault))},n$()),rP=(0,e$.mg)(rE,function(e){return null==e?void 0:e.rect},n$()),rO=(0,e$.mg)(rP,function(e){var n;return e?(n={},(0,ty._)(n,rR.width,e.width+"px"),(0,ty._)(n,rR.height,e.height+"px"),n):null},n$()),rT=(0,e$.mg)(rP,function(e){var n;return e?(n={},(0,ty._)(n,rR.x,e.x+"px"),(0,ty._)(n,rR.y,e.y+"px"),n):null},n$()),rL=(0,e$.mg)(rE,function(e){var n,t;return e?"detachPreview"===e.type?(n={},(0,ty._)(n,rR.zIndex,rA.W.detachPreview.toString()),(0,ty._)(n,rR.borderRadius,"100%"),(0,ty._)(n,rR.backgroundColor,"transparent"),n):(t={},(0,ty._)(t,rR.zIndex,rA.W.dropPreview.toString()),(0,ty._)(t,rR.borderRadius,"8px"),(0,ty._)(t,rR.backgroundColor,rI.LU.accentPrimaryDimmer),t):null},n$()),rM=(0,e$.mg)(rE,function(e){var n,t,r;return e?"detachPreview"===e.type?(t={},(0,ty._)(t,rR.opacity,(.5*e.progress).toString()),(0,ty._)(t,rR.visibility,"visible"),t):(r={},(0,ty._)(r,rR.opacity,"0.2"),(0,ty._)(r,rR.visibility,"visible"),r):(n={},(0,ty._)(n,rR.opacity,"0"),(0,ty._)(n,rR.visibility,"hidden"),n)},n$()),rG=(0,e$.mg)(rE,function(e){return(0,ty._)({},rR.innerOpacity,(null==e?void 0:e.type)==="detachPreview"?"0.5":"0")},n$()),rN=(0,e$.mg)(rE,function(e){return(0,ty._)({},rR.innerScale,(null==e?void 0:e.type)==="detachPreview"?e.progress.toString():"1")},n$()),rz=(0,rC.x)({root:[{position:"absolute",pointerEvents:"none",opacity:rF.opacity,width:rF.width,height:rF.height,transform:"translate(".concat(rF.x,", ").concat(rF.y,")"),backgroundColor:rF.backgroundColor,borderRadius:rF.borderRadius,border:rF.border,zIndex:rF.zIndex,visibility:rF.visibility,transition:"transform 140ms, width 140ms, height 140ms, border-radius 140ms, opacity 140ms ease-out 200ms","@media (prefers-reduced-motion: reduce)":{transitionDuration:"0ms"}}],inner:[{width:"100%",height:"100%",borderRadius:"100%",background:"radial-gradient(transparent, ".concat(rI.LU.backgroundHighest,")"),opacity:rF.innerOpacity,transform:"scale(".concat(rF.innerScale,")")}]}),rH=(0,d.memo)(function(){var e=(0,d.useRef)(null);(0,rY.d)(e,rh(rT)),(0,rY.d)(e,rh(rO)),(0,rY.d)(e,rh(rU)),(0,rY.d)(e,rh(rL)),(0,rY.d)(e,rh(rM));var n=(0,d.useRef)(null);return(0,rY.d)(n,rh(rG)),(0,rY.d)(n,rh(rN)),(0,c.Y)("div",{ref:e,css:rz.root,children:(0,c.Y)("div",{ref:n,css:rz.inner})})}),rB=(0,ei.eU)(null,function(e,n){n(rE,{type:"dropPreview",rect:e(rj)})}),rW=(0,ei.eU)(null,function(e,n,t){n(rE,null),n(t7,!1),n(tj,{panes:t.panes,placement:"leftOf",makeActive:!0,relativeTo:["tiling"]})}),rj=(0,ei.eU)(function(e){if(e(nl))return e(nP);var n=e(e8),t=e(nK),r=t.isOpen?t.width:0,i=e(n5),o=Math.round(r+i)+48-i,a=n.width-r-2*i-48;return r>0?o+=i:a+=i,{x:o,y:0,width:a,height:n.height-i}});function r$(){var e=(0,f._)(["\n  query FiletypeAssociations {\n    currentUser {\n      id\n      filetypeAssociations\n    }\n  }\n"]);return r$=function(){return e},e}function rq(){var e=(0,f._)(["\n  mutation SetFiletypeAssociation($input: FiletypeAssociationInput!) {\n    setFiletypeAssociation(input: $input) {\n      ... on UserFiletypeAssociations {\n        associations\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n"]);return rq=function(){return e},e}var rV={},rK=(0,h.J1)(r$()),rZ=(0,h.J1)(rq()),rJ=(0,ei.eU)({}),rQ=(0,ei.eU)(null),rX=(0,ei.eU)(null,function(e,n,t){return(0,tS._)(function(){var r,i,o,a,l,u;return(0,tY.YH)(this,function(c){switch(c.label){case 0:r=e(rJ),n(rJ,(0,ej.jM)(r,function(e){if(!t.newAssociation)return void delete e[t.fileExtension];e[t.fileExtension]={extensionId:t.newAssociation.extensionId,fileHandlerId:t.newAssociation.fileHandlerId}})),c.label=1;case 1:return c.trys.push([1,3,,4]),[4,null===tA.V||void 0===tA.V?void 0:tA.V.mutate({mutation:rZ,variables:{input:t}})];case 2:if((null==(a=c.sent())||null==(o=a.data)||null==(i=o.setFiletypeAssociation)?void 0:i.__typename)!=="UserFiletypeAssociations")throw Error("Failed to set Filetype Association: "+(null==a||null==(u=a.data)||null==(l=u.setFiletypeAssociation)?void 0:l.message));return[3,4];case 3:return c.sent(),n(rJ,r),[3,4];case 4:return[2]}})})()}),r0=1920/1020,r1=(0,ei.eU)(null,function(e,n,t){var r,i,o,a,l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{location:"bottomRight"},u=e(e0).find(function(n){return e(n.dataAtom).type===t.type});if(u){n(tT,{paneId:u.paneId,pane:t}),l.commit&&n(nn,u.paneId);return}var c=e(e8),s=e(e3),d=n(tV,{pane:t,rect:"bottomRight"===l.location?{width:r=Math.min(600,c.width),height:i=Math.min(600/r0+s,c.height),x:c.width-r,y:c.height-i}:(a=Math.min((o=Math.min(600,c.width))/r0+s,c.height),{width:o,height:a,x:(c.width-o)/2,y:(c.height-a)/2})});l.commit&&n(nn,d)}),r2=(0,ei.eU)(null,function(e,n,t){e(e0).filter(function(n){return e(n.dataAtom).type===t}).forEach(function(e){return n(tL,e.paneId)})}),r4=(0,ei.eU)(null),r5=(0,ei.eU)(null,function(e,n,t){if("end"===t.type)return void n(r4,null);if("update"===t.type){var r=e(r4);if(!r){var i=Error("Expected tilingResize");throw n(nS,{error:i,tags:{layoutstate:!0},origin:"Layout: state/resizeTiling"}),i}var o=r.stacked,a=r.leftPath,l=r.startPercent,u=r.resizeDistance,c=r.initialLayout,s=r.snapPercent,d=l+(o?t.moveDelta.y:t.moveDelta.x)/u*100;if(e(eq)){var p=e(e8);d/100*p.width<240&&(d=240/p.width*100)}n(n9,(0,ej.jM)(c,function(e){eW(e,{leftPath:a,percent:d,snapPercent:s})}));return}var f=e(nf),h=t.stacked?window.innerHeight:window.innerWidth,g=eC(f,t.leftPath);if(!g||!eS(g)){var m=Error("Expected left node");throw n(nS,{error:m,tags:{layoutstate:!0},origin:"Layout: state/resizeTiling"}),m}var v=e_(t.leftPath),w=g.percent,y=null;try{y=function(e){var n=e.layout,t=e.splitPath,r=e.tilingOptions,i=function(e,n){var t=n.splitPath,r=eC(e,t);if(!r||"split"!==r.type)throw Error("Expected split node");for(var i=100,o=e_(t);o.length;){var a=eC(e,o);if(!a)break;o=e_(o),"split"===a.type&&a.stacked===r.stacked&&(i*=a.percent/100)}return i}(n,{splitPath:t}),o=eC(n,t);if((null==o?void 0:o.type)!=="split")throw Error("Expected split node");var a=r.size,l=r.gap,u=r.headerHeight,c=r.inset,s=void 0===c?{top:0,bottom:0,left:0,right:0}:c,d=o.children.length,p=o.stacked?l*(d-1)+u*d:l*(d-1);return i/100*((o.stacked?a.height-(s.top+s.bottom):a.width-(s.left+s.right))-p)}({splitPath:v,layout:f,tilingOptions:e(n3)})}catch(e){throw n(nS,{error:e,tags:{layoutstate:!0},origin:"Layout: state/resizeTiling"}),e}if(null===y)throw Error("Expected resizeDistance");n(r4,{stacked:t.stacked,leftPath:t.leftPath,startPercent:w,resizeDistance:y,snapPercent:30/h*100,initialLayout:f})});function r7(e){return(0,$.A)(function(){return e5(e)},[e])}function r3(e){var n=r7(e);return(0,$.A)(function(){return(0,e$.mg)(n,function(e){return e.rect})},[n])}function r8(e){return(0,$.A)(function(){return(0,ei.eU)(function(n){var t=n(r4);return!!t&&e===nH({leftPath:t.leftPath})})},[e])}function r6(e){var n=r7(e);return(0,$.A)(function(){return(0,e$.mg)(n,function(e){return e.stacked})},[n])}var r9=t(93629),ie={width:100,height:200},it={width:200,height:100},ir=function(e){var n=e.container,t=e.sidebarWidth,r=e.gap,i=n.width-t,o=n.width-it.width/2-i/2,a=(n.height-r)/2-ie.height/2;return{middle:{rect:{x:0,y:0,width:0,height:0},paneId:null,visible:!1},above:{visible:!1,rect:{x:o,y:0,width:it.width,height:it.height}},below:{visible:!1,rect:{x:o,y:n.height-it.height-r,width:it.width,height:it.height}},leftOf:{visible:!1,rect:{x:t+r,y:a,width:ie.width,height:ie.height}},rightOf:{visible:!1,rect:{x:n.width-ie.width-r,y:a,width:ie.width,height:ie.height}}}},ii=["above","rightOf","leftOf","below","middle"],io=(0,ei.eU)(null),ia=(0,ei.eU)(function(e){var n=e(io);if(!n)return null;var t=eD(e(nf),n.paneGroupId);return t&&t.panes[t.activeIndex]||null}),il=(0,e$.mg)(io,function(e){return null==e?void 0:e.dropPoints}),iu=(0,ei.eU)(null,function(e,n,t){if(!e(nC)){var r=e(e8),i=eD(e(nf),t.paneGroupId);if(!i){var o=Error("Expected paneGroup");throw n(nS,{error:o,origin:"Layout: state/paneGroupDragAndDrop/dragStartAtom"}),o}var a=e(eX(i.panes[i.activeIndex])),l=e(a.rectAtom),u=e(e3),c={x:l.x,y:l.y-u,width:l.width,height:l.height+u},s=t.mouse.x-(r.x+l.x),d=e(n5),p=new Map(e(eZ).filter(function(e){return e!==i.id}).map(function(e){return[e,{snappiness:400}]}));n(nG,{panes:new Map(e(eV).filter(function(e){return e!==a.paneId}).map(function(e){return[e,{snappiness:400}]})),headers:p}),n(io,{startType:a.type,startPoint:{x:t.mouse.x-r.x,y:t.mouse.y-r.y},paneGroupId:t.paneGroupId,transformOriginX:Math.round(s)+"px",scale:1,fromRect:c,movedAtAll:!1,dropPoints:"floating"===a.type?ir({container:r,sidebarWidth:e(nJ),gap:d}):null})}}),ic=(0,ei.eU)(null,function(e,n,t){if(!e(nC)){var r=e(io);if(!r)return void n(rE,null);var i=t.delta,o=r.paneGroupId,a=r.fromRect,l=e(nf),c=eD(e(nf),o);if(!c){var s=Error("Expected paneGroup");throw n(nS,{error:s,origin:"Layout: state/paneGroupDragAndDrop/dragUpdateAtom"}),s}var d=c.panes[c.activeIndex],p=ek(l,d);if(!p){var f=Error("Expected pane");throw n(nS,{error:f,tags:{layoutstate:!0},origin:"Layout: state/paneGroupDragAndDrop/dragUpdateAtom"}),f}var h=eX(d),g=e7(p.paneGroup.id),m=e(e3),v=Math.max(Math.abs(i.x),Math.abs(i.y)),w=v>=50,y=v>0;if(w&&!p.floating){var b=e(h).rectAtom,x=e(b),_=(0,ej.jM)(l,function(e){try{eH(e,{paneGroupPath:p.paneGroupPath,rect:{x:x.x+i.x,y:x.y-m+i.y,width:x.width,height:x.height+m}})}catch(e){throw n(nS,{error:e,tags:{layoutstate:!0},origin:"Layout: state/paneGroupDragAndDrop/dragUpdateAtom"}),e}});n(nG,{headers:new Map(e(eZ).filter(function(e){return e!==p.paneGroup.id}).map(function(e){return[e,{snappiness:400}]})),panes:new Map(e(eV).filter(function(e){return e!==d}).map(function(e){return[e,{snappiness:400}]}))}),n(n9,_),n(id,t.mouse);return}var S=e(g),Y=e(h);c.id===e(tW.LY)&&n(tW.LY,null);var A="floating"===r.startType?eO({x:a.x+i.x,y:a.y+i.y,width:a.width,height:a.height},{inside:e(e8),minVisibleX:2*m,minVisibleY:m}):{x:a.x+i.x,y:a.y+i.y},I=A.x,C=A.y;if(n(S.rectAtom,function(e){return(0,ej.jM)(e,function(e){e.x=I,e.y=C})}),n(Y.rectAtom,function(e){return(0,ej.jM)(e,function(e){e.x=I,e.y=C+m})}),!w&&!p.floating){var k=r.startPoint,E=1-.7*(1-Math.sqrt(1-Math.pow(v/50,2)));n(rE,{type:"detachPreview",rect:{x:k.x-50,y:k.y-50,width:100,height:100},progress:v/50}),n(io,(0,ej.jM)(r,function(e){e.scale=E,e.movedAtAll=e.movedAtAll||y}));return}var D=e(n5);if(r.dropPoints)return void n(io,function(n){return(0,ej.jM)(n,function(n){(null==n?void 0:n.dropPoints)&&function(e,n){var t=n.container,r=n.gap,i=n.sidebarWidth,o=n.headerHeight,a=n.paneRects,l=n.mouse,c={x:l.x-t.x,y:l.y-t.y},s=null,d=null;if(a.length){var p=!0,f=!1,h=void 0;try{for(var g,m=a[Symbol.iterator]();!(p=(g=m.next()).done);p=!0){var v=(0,u._)(g.value,2),w=v[0],y=v[1],b={x:y.x-r/2,y:y.y-r/2-o,width:y.width+r,height:y.height+r+o};if(nN(l,b)){s=w,d=y;break}}}catch(e){f=!0,h=e}finally{try{p||null==m.return||m.return()}finally{if(f)throw h}}if(e.middle.visible=!!d,d){var x={width:Math.min(100,d.width),height:Math.min(100,d.height)};e.middle.paneId=s,e.middle.rect={x:d.x+d.width/2-x.width/2,y:d.y-o+(d.height+o)/2-x.height/2-r,width:x.width,height:x.height+o/2}}}else{var _={x:t.x+i+r,y:t.y,width:t.width-r-i,height:t.height},S={width:Math.min(100,_.width),height:Math.min(100,_.height)};e.middle.rect={x:_.x+_.width/2-S.width/2,y:_.height/2-S.height/2,width:S.width,height:S.height},e.middle.visible=!0}var Y=null,A=!0,I=!1,C=void 0;try{for(var k,E=ii[Symbol.iterator]();!(A=(k=E.next()).done);A=!0){var D=k.value,R=e[D].rect;if(nN(c,R)){Y=D;break}}}catch(e){I=!0,C=e}finally{try{A||null==E.return||E.return()}finally{if(I)throw C}}var F=!0,U=!1,P=void 0;try{for(var O,T=ii[Symbol.iterator]();!(F=(O=T.next()).done);F=!0){var L=O.value;e[L].visible=!Y||L===Y}}catch(e){U=!0,P=e}finally{try{F||null==T.return||T.return()}finally{if(U)throw P}}}(n.dropPoints,{paneRects:e(is),container:e(e8),sidebarWidth:e(nJ),headerHeight:e(e3),gap:D,mouse:t.mouse})})});if(!p.floating)throw Error("Expected floating pane");n(id,t.mouse)}}),is=(0,ei.eU)(function(e){return e(e0).filter(function(e){return"tile"===e.type&&!e.isHidden}).map(function(n){return[n.paneId,e(n.rectAtom)]})}),id=(0,ei.eU)(null,function(e,n,t){var r=e(e3),i=e(e8),o=function(e){var n=e.views,t=e.mouse,r=e.container,i=e.headerHeight,o=e.sidebarWidth,a=e.gap,l={x:Math.min(Math.max(t.x-r.x,1),r.width-1),y:Math.min(Math.max(t.y-r.y,1),r.height-1)},c=!0,s=!1,d=void 0;try{for(var p,f=n[Symbol.iterator]();!(c=(p=f.next()).done);c=!0){var h=(0,u._)(p.value,2),g=h[0],m=h[1],v={x:m.x,y:m.y-i,width:m.width,height:i},w={x:v.x-a/2,y:v.y-a/2,width:v.width+a,height:i+a/2};if(nN(l,w))return{dropPreview:v,drop:{type:"insert",paneId:g}};var y={x:m.x,y:m.y-i,width:m.width,height:m.height+i},b={x:y.x-a/2,y:y.y-a/2,width:y.width+a,height:y.height+a};if(nN(l,b)){var x=nz(l,y);return{dropPreview:x.rect,drop:{type:"split",relativeTo:g,placement:x.placement}}}}}catch(e){s=!0,d=e}finally{try{c||null==f.return||f.return()}finally{if(s)throw d}}var _=nz(l,{x:o,y:0,width:r.width-o,height:r.height});return{dropPreview:_.rect,drop:{type:"split",relativeTo:["tiling"],placement:_.placement}}}({views:e(is),container:i,mouse:t,headerHeight:r,sidebarWidth:e(nJ),gap:e(n5)}),a=o.drop;n(rE,{type:"dropPreview",rect:o.dropPreview}),n(io,function(e){return(0,ej.jM)(e,function(e){e&&(e.drop=a,e.movedAtAll=!0)})})}),ip=(0,ei.eU)(null,function(e,n,t){var r=t.delta;if(!e(nC)){n(rE,null);var i=e(io);if(i){var o=i.paneGroupId,a=i.drop,l=i.fromRect,u=e(nf),c=eD(e(nf),o);if(!c){var s=Error("Expected paneGroup");throw n(nS,{error:s,origin:"Layout: state/paneGroupDragAndDrop/dragEndAtom"}),s}var d=c.panes[c.activeIndex],p=ek(u,d);if(!p){var f=Error("Expected pane");throw n(nS,{error:f,tags:{layoutstate:!0},origin:"Layout: state/paneGroupDragAndDrop/dragEndAtom"}),f}var h=(0,ej.jM)(u,function(t){if(!a&&p.floating&&"floating"===i.startType){var o=eC(t,p.paneGroupPath);if((null==o?void 0:o.type)!=="floatingPaneGroup")return;var u=e(e3),c=eO({x:l.x+r.x,y:l.y+r.y,width:l.width,height:l.height},{inside:e(e8),minVisibleX:2*u,minVisibleY:u}),s=c.x,f=c.y;o.rect.x=s,o.rect.y=f;return}if(a){if(p.paneGroup.panes.forEach(function(e){n(nn,e)}),"split"===a.type){if(null===t.tiling){var h=(0,tb.A)();try{eT(t,{id:(0,tb.A)(),panes:[h],placement:"leftOf",relativeTo:["tiling"]})}catch(e){throw n(nS,{error:e,tags:{layoutstate:!0},origin:"Layout: state/paneGroupDragAndDrop/dragEndAtom"}),e}}try{!function(e,n){var t=n.from,r=n.to,i=n.placement,o=ek(e,t);if(!o)throw Error("Expected fromPane");var a=o.paneGroup,l=a.panes,u=a.activeIndex;ez(e,o.paneGroupPath),eT(e,{id:o.paneGroup.id,relativeTo:r,panes:l,placement:i,activeIndex:u})}(t,{from:d,to:a.relativeTo,placement:a.placement})}catch(e){throw n(nS,{error:e,tags:{layoutstate:!0},origin:"Layout: state/paneGroupDragAndDrop/dragEndAtom"}),e}return}var g=ek(t,a.paneId);p.paneGroup.panes.forEach(function(e){eB(t,{paneId:e,paneGroupPath:(null==g?void 0:g.paneGroupPath)||["tiling"],activate:!1})})}});n(io,null),n(n9,h),(null==a?void 0:a.type)==="insert"&&n(tX,d)}}});function ih(e){var n=iy(e);return(0,$.A)(function(){return(0,ei.eU)(function(t){if(t(n))return t(nO);var r=t(e7(e));return t(r.rectAtom)})},[n,e])}function ig(e){var n=im(e),t=ih(e);return(0,$.A)(function(){var r=(0,ei.eU)(function(r){var i,o,a,l=r(t),u=r(n)||(null==(a=r(nL))||null==(o=a.headers)||null==(i=o.get(e))?void 0:i.dropState)?"transform":"top-left";return{x:l.x,y:l.y,positioning:u}});return(0,e$.mg)(r,function(e){return e},n$())},[n,e,t])}function im(e){return(0,$.A)(function(){return(0,ei.eU)(function(n){var t=n(io);return t&&e===t.paneGroupId?t:null})},[e])}function iv(e){var n=im(e);return(0,$.A)(function(){return(0,e$.mg)(n,function(e){var n;return null!=(n=null==e?void 0:e.scale)?n:1})},[n])}function iw(e){return(0,$.A)(function(){return(0,e$.mg)(nf,function(n){return eD(n,e)})},[e])}function iy(e){var n=iw(e);return(0,$.A)(function(){return(0,ei.eU)(function(e){if(e(nl))return!0;if(!e(nC))return!1;var t=e(n);if(!t)return!1;var r=e(e9);return!!r&&t.panes.includes(r)})},[n])}function ib(e){var n=e7(e);return(0,$.A)(function(){return(0,e$.mg)(n,function(e){return"floating"===e.path[0]})},[n])}var ix=t(39972),i_=t(89695),iS=(0,ei.eU)(null,function(e,n,t){var r,i=t.path,o=e(nf),a=(0,p._)({},t);if(!a.opener){var l=e(rJ),u=(0,i_.QC)(i);if(u){var c=l[u];if(c){var s=e(nw).find(function(e){return e.extension.extensionId===c.extensionId});s&&(a.opener={paneType:"extension",extensionFileHandler:s,supports:function(){return!0}})}}}if(a.newPane)return void n(tq,{pane:iY(a),edge:null!=(r=a.newPaneEdge)?r:"left"});var d=eE(o,"topLeft");if(!d)return void n(tH,{pane:iY(a),relativeTo:["tiling"],placement:"replace"});var f=e(e0).find(function(n){var t,r=e(n.dataAtom);return(0,e6.xS)(r)?i===(0,e6.Vj)(r):!!((null==(t=a.opener)?void 0:t.paneType)==="extension"&&(0,e6.En)(r))&&r.data.filePath===i&&a.opener.extensionFileHandler.extension.installationId===r.data.installationId||"markdown"===r.type&&i===r.data.path});if(f&&!a.newTab){var h=e(f.dataAtom);if((0,e6.xS)(h)||"markdown"===h.type){n(tX,f.paneId),n(tT,{paneId:f.paneId,pane:iY((0,p._)({opener:{paneType:h.type}},a))});return}if((0,e6.En)(h))return void n(tX,f.paneId)}var g=d.paneGroup;if(e(eq)){var m=eE(o,"topRight");m&&(g=m.paneGroup)}if(a.newTab)return void n(tZ,{panes:[iY(a)],paneGroupId:g.id,activate:!0,commit:!0,index:g.activeIndex+1});var v=e(e0).find(function(n){return!n.isCommitted&&((0,e6.xS)(e(n.dataAtom))||"markdown"===e(n.dataAtom).type)});if(v){n(tT,{paneId:v.paneId,pane:iY(a)}),n(tX,v.paneId);return}var w=e(nh).find(function(n){var t=e(n.dataAtom);return"codeEditor"===t.type&&""===(0,e6.Vj)(t)});if(w){n(tT,{paneId:w.paneId,pane:iY(a)}),n(tX,w.paneId);return}var y=g.panes.find(function(n){var t=e(eX(n));return"commands"===e(t.dataAtom).type});if(y){n(tT,{paneId:y,pane:iY(a)}),n(eX(y),function(e){return(0,ej.jM)(e,function(e){e.isCommitted=!1})}),n(tX,y);return}n(tZ,{panes:[iY(a)],paneGroupId:g.id,activate:!0})});function iY(e){var n=e.path,t=e.col,r=e.line,i=e.opener;if(!(null==i?void 0:i.paneType)&&(0,ix.e$)(n.toLowerCase()))return{type:"markdown",data:{path:n}};if(!(null==i?void 0:i.paneType)&&(0,ix.Zy)(n.toLowerCase()))return{type:"csvPreview",data:{path:n}};var o=(null==i?void 0:i.paneType)||(0,e6.QY)({path:n});if("codeEditor"===o)return{type:"codeEditor",data:{path:n,col:t,line:r}};if("extension"===o){var a=i.extensionFileHandler;return{type:"extension",data:{filePath:n,extensionId:a.extension.extensionId,installationId:a.extension.installationId,name:a.extension.manifest.name,baseUrl:a.extension.baseUrl,path:a.handler}}}return"markdown"===o?{type:"markdown",data:{path:n}}:{type:o,data:{path:n}}}var iA=(0,ei.eU)(null,function(e,n,t){var r=t.paths.map(function(e){var n=e.match(/(.+?)(:(\d+))?(:(\d+))?$/);if(!n)return!1;var t=[n[1],void 0!==n[3]&&parseInt(n[3],10),void 0!==n[5]&&parseInt(n[5],10)],r=t[0],i=t[1],o=t[2];return{type:(0,e6.QY)({path:r}),data:{path:r,line:i,col:o}}}).filter(Boolean),i=r.length-1,o=e(e9);r.forEach(function(e,t){return(0,tS._)(function(){return(0,tY.YH)(this,function(r){return n(tJ,{pane:e,activate:i===t,placement:{type:"secondary",relativeTo:o}}),[2]})})()})}),iI=(0,ei.eU)(null,function(e,n,t){var r=t.urls;if(null===e(nr)){var i=r.map(function(e){var n;try{n=new URL(e)}catch(e){return!1}return"0.0.0.0"===n.hostname||"localhost"===n.hostname?{ports:{type:"local",path:n.pathname,port:parseInt(n.port,10)}}:(window.open(e,"_blank"),!1)}).filter(Boolean);if(0!==i.length){var o=!0,a=!1,l=void 0;try{for(var u,c=i[Symbol.iterator]();!(o=(u=c.next()).done);o=!0){var s=u.value;n(t2,s)}}catch(e){a=!0,l=e}finally{try{o||null==c.return||c.return()}finally{if(a)throw l}}}}}),iC=(0,ei.eU)(null,function(e,n,t){if(!e(nC)){var r=e(e8),i=t.pageX,o=t.pageY,a=e(eX(t.over)),l=eb({x:i-r.x,y:o-r.y},e(a.rectAtom)).previewRect;n(t7,!0),n(rE,{type:"dropPreview",rect:l})}}),ik=(0,ei.eU)(null,function(e,n,t){if(!e(nC)){var r=e(e8),i=t.pageX,o=t.pageY,a=t.over,l=e(eX(a)),u=eb({x:i-r.x,y:o-r.y},e(l.rectAtom)).dropLocation;n(rE,null),n(t7,!1);var c=e(nf);if("newPaneGroup"===t.type){if("middle"===u){var s=ek(c,l.paneId);if(!s)return;n(tZ,{panes:t.panes,paneGroupId:s.paneGroup.id,activate:!0,index:s.index+1});return}n(tj,{panes:t.panes,placement:u,makeActive:!0,relativeTo:l.paneId});return}var d=a;if("middle"===u){if(d===t.paneId)return;var p=ek(c,l.paneId);if(!p)return;n(t4,{paneId:t.paneId,toPaneGroupId:p.paneGroup.id,index:p.index+1});return}if(d===t.paneId){var f=ek(c,t.paneId);if(!f){var h=Error("Expected pane");throw n(nS,{error:h,tags:{layoutstate:!0},origin:"Layout: state/paneDragAndDrop/expectedPane"}),h}if(f.floating)throw Error("Expected paneGroup");var g=f.paneGroup.panes.find(function(e){return e!==t.paneId});if(!g)return;d=g}var m=(0,ej.jM)(c,function(e){try{eN(e,t.paneId),eT(e,{id:(0,tb.A)(),panes:[t.paneId],relativeTo:d,placement:u}),n(nn,t.paneId)}catch(e){throw n(nS,{error:e,tags:{layoutstate:!0},origin:"Layout: state/paneDragAndDrop/updatedLayout"}),e}});n(n9,m)}});function iE(e){var n=(0,$.A)(function(){return(0,ei.eU)(function(n){return!!n(nl)||!!n(nC)&&n(e9)===e})},[e]);return(0,$.A)(function(){return(0,ei.eU)(function(t){if(t(n))return t(nT);var r=t(eX(e)),i=t(r.dataAtom).type;if("agentChat"===i){var o=t(e8),a=t(nr),l=Math.min("centeredVisualPlanner"===a?1/0:600,o.width-32);if("centeredVisualPlanner"===a){var u=t(n7);return{x:o.width/2-l/2,y:u,width:l,height:o.height-u}}}if(t(n2)&&t(eq)&&"webview"===i){var c,s=t(nf),d=(null==(c=s.tiling)?void 0:c.type)==="paneGroup"?s.tiling:null;if((null==d?void 0:d.panes.length)===1){var p=t(r.rectAtom),f=t(e3);return{x:p.x,width:p.width,y:p.y-f,height:p.height+f}}}return t(r.rectAtom)})},[e,n])}function iD(e){return(0,$.A)(function(){return(0,ei.eU)(function(n){var t=n(io);return t&&e===n(ia)?t:null})},[e])}function iR(e){var n=iD(e);return(0,$.A)(function(){return(0,e$.mg)(n,function(e){var n;return null!=(n=null==e?void 0:e.scale)?n:1})},[n])}function iF(e){return(0,$.A)(function(){return(0,ei.eU)(function(n){return n(e9)===e})},[e])}function iU(e){return(0,$.A)(function(){return(0,ei.eU)(function(n){return n(n(eX(e)).dataAtom)})},[e])}function iP(e){return(0,$.A)(function(){return(0,ei.eU)(function(n){var t=n(eX(e));return"centeredVisualPlanner"===n(nr)?"agentChat"!==n(t.dataAtom).type:t.isHidden})},[e])}function iO(e){return(0,$.A)(function(){return(0,e$.mg)(eX(e),function(e){return"floating"===e.type})},[e])}var iT=(0,ei.eU)(null),iL=(0,ei.eU)(function(e){var n=e(iT);if(!n)return null;if("sidebar"===n.target)return{target:"sidebar"};var t=ek(e(nf),n.paneId);if(!t)return null;var r=t.paneGroup;return{target:"pane",paneGroupId:r.id,activeIndex:r.activeIndex,panes:r.panes.map(function(n){var t=e(eX(n));return[t.paneId,e(t.dataAtom)]})}}),iM=(0,ei.eU)(function(e){var n=e(iL);if(!n)return null;if("sidebar"===n.target)return{target:"sidebar"};var t=n.paneGroupId,r=n.activeIndex;return{target:"pane",paneId:n.panes[r][0],paneGroupId:t}}),iG=(0,ei.eU)(function(e){var n=e(iT);if(!n||"sidebar"===n.target)return null;if(e(nk)===n.paneId)return e(nT);var t=e(eX(n.paneId)),r=e(t.rectAtom),i=e(e3);return{x:Math.round(r.x),y:Math.round(r.y-i),width:Math.round(r.width),height:Math.round(r.height+i)}}),iN=(0,ei.eU)(null,function(e,n,t){var r=e(e9),i=null!=t?t:r;if(i){n(iT,{target:"pane",paneId:i}),i!==r&&n(ne,i);return}var o=eE(e(nf),"topLeft"),a=o?o.paneGroup.panes[o.paneGroup.activeIndex]:null;if(a)return void n(iT,{target:"pane",paneId:a})}),iz=(0,ei.eU)(null,function(e,n){var t=e(iT);t&&(n(iT,null),"sidebar"!==t.target&&n(tO,{paneId:t.paneId,activate:!0}))}),iH=(0,ei.eU)(null,function(e,n){if(e(iL))return void n(iz);var t=e(e9);if(t)return void n(iN,t);var r=eE(e(nf),"topLeft"),i=r?r.paneGroup.panes[r.paneGroup.activeIndex]:null;if(i)return void n(iN,i)}),iB=(0,ei.eU)(function(e){return null!==e(iT)}),iW=(0,ei.eU)(null,function(e,n){n(iT,null)}),ij=(0,ei.eU)(null,function(e,n,t){var r=e(e9);if(!(!r||e(nk))){var i=eU({relativeTo:r,rects:new Map(e(e0).filter(function(e){return!e.isHidden}).map(function(n){return[n.paneId,e(n.rectAtom)]})),direction:t});i&&(n(e9,i),e(iT)&&n(iT,{target:"pane",paneId:i}))}}),i$=(0,ei.eU)(null,function(e,n,t){var r=e(iL);null!==r&&"sidebar"!==r.target&&n(n9,(0,ej.jM)(e(nf),function(e){!function(e,n){var t=n.paneGroupId,r=n.direction,i=eD(e,t),o=eR(e,t);if((null==i?void 0:i.type)==="paneGroup"&&o){var a=o.node.children.indexOf(i);if(-1===a)throw Error("Expected index");var l=(0,eA._)(o.path).concat([a]),u="down"===r||"right"===r,c=0===a,s=a===o.node.children.length-1,d=o.node.stacked===("up"===r||"down"===r),p=o.path.length>2;if(d&&!((s&&u||c&&!u)&&p))return function(e,n,t){var r=e.indexOf(n);if(-1===r)throw Error("Expected item to be in array");if(1!==e.length){var i=r===e.length-1;if("forward"===t&&i){e.pop(),e.unshift(n);return}if("back"===t&&0===r){e.shift(),e.push(n);return}var o="forward"===t?1:-1;e[r]=e[r+o],e[r+o]=n}}(o.node.children,i,u?"forward":"back");var f=(v=eR(e,i.id))?function e(n,t){var r=t.path,i=t.forwards,o=t.vertical,a=eC(n,r);if((null==a?void 0:a.type)!=="split")return null;var l=e_(r);if(0===l.length)return null;var u=eC(n,l);if((null==u?void 0:u.type)!=="split")return null;if(u.stacked!==o)return e(n,{path:l,forwards:i,vertical:o});var c=u.children.indexOf(a),s=0===c;if(!(c===u.children.length-1&&i||s&&!i)){var d=c+(i?1:-1),p=u.children[d],f=u.children[c];return p?{other:f,node:p,parent:u,path:(0,eA._)(l).concat([d])}:null}if(1===l.length){var h=s&&!i?u.children.length-1:0;return{parent:u,other:u.children[c],path:(0,eA._)(l).concat([h]),node:u.children[h]}}return e(n,{path:l,forwards:i,vertical:o})}(e,{path:v.path,forwards:"down"===r||"right"===r,vertical:"up"===r||"down"===r}):null;if(f){var h=l.slice(0,f.path.length+("paneGroup"===f.node.type?2:1));if("tiling"!==h[0])throw Error("Expected tiling path");var g=eC(e,h);if(!g||"floatingPaneGroup"===g.type)throw Error("Expected adjacentNode");if("split"!==f.other.type)throw Error("Expected split");var m=function(e,n){var t=e.indexOf(n),r=0,i=!0,o=!1,a=void 0;try{for(var l,u=e.slice(0,t)[Symbol.iterator]();!(i=(l=u.next()).done);i=!0){var c=l.value.percent;r+=c}}catch(e){o=!0,a=e}finally{try{i||null==u.return||u.return()}finally{if(o)throw a}}return{start:r,end:r+n.percent}}(f.other.children,g);if("paneGroup"===f.node.type){var v,w,y,b=(w={start:0,end:100},y=!f.parent.stacked,m.start-w.start<w.end-m.end?y?"above":"rightOf":y?"below":"leftOf");ez(e,(0,eA._)(o.path).concat([a])),eT(e,{placement:b,id:i.id,panes:i.panes,activeIndex:i.activeIndex,percent:i.percent,relativeTo:f.path});return}var x=function(e,n){var t=e.children,r=e.stacked,i="above",o=0,a=0,l=0,u=0,c=!0,s=!1,d=void 0;try{for(var p,f=t[Symbol.iterator]();!(c=(p=f.next()).done);c=!0){var h=p.value,g={start:l,end:l+h.percent},m=Math.max(0,Math.min(n.end,g.end)-Math.max(n.start,g.start));m>u&&(u=m,o=a,i=n.start-g.start<g.end-n.end?r?"above":"rightOf":r?"below":"leftOf"),l+=h.percent,a++}}catch(e){s=!0,d=e}finally{try{c||null==f.return||f.return()}finally{if(s)throw d}}return{placement:i,index:o}}(f.node,m),_=x.index,S=x.placement;ez(e,(0,eA._)(o.path).concat([a])),eT(e,{placement:S,id:i.id,panes:i.panes,activeIndex:i.activeIndex,percent:i.percent,relativeTo:(0,eA._)(f.path).concat([_])})}}}(e,{paneGroupId:r.paneGroupId,direction:t.direction})}))}),iq={width:120,height:120},iV=(0,ei.eU)(null),iK=(0,ei.eU)(null,function(e,n,t){var r=e(nf);if("end"===t.type){n(iV,null),n(n9,r);return}if("update"===t.type){var i=e(iV);if(!i){var o=Error("Expected floatingResizeState");throw n(nS,{error:o,tags:{layoutstate:!0},origin:"Layout: state/resizeFloating"}),o}var a=e(e3),l=function(e,n){var t=n.edge,r=n.delta,i=n.minSize,o=void 0===i?ex:i,a=(0,p._)({},e),l=o.height,u=o.width;if("top"===t||"topLeft"===t||"topRight"===t){var c=e.height-r.y;a.height=Math.max(c,l),c<l?a.y=e.y+e.height-l:a.y=e.y+r.y}else("bottom"===t||"bottomLeft"===t||"bottomRight"===t)&&(a.height=Math.max(e.height+r.y,l));if("right"===t||"bottomRight"===t||"topRight"===t)a.width=Math.max(e.width+r.x,u);else if("left"===t||"bottomLeft"===t||"topLeft"===t){var s=e.width-r.x;a.width=Math.max(s,u),s<u?a.x=e.x+e.width-u:a.x=e.x+r.x}return a}(i.rectStart,{delta:t.moveDelta,edge:i.edge,minSize:iq}),u=i.paneId,c=(0,ej.jM)(r,function(e){var t=e.floating.find(function(e){return e.panes.includes(u)});if(!t){var r=Error("Expected floating");throw n(nS,{error:r,tags:{layoutstate:!0},origin:"Layout: state/resizeFloating"}),r}var i=t.rect;i.x=l.x,i.y=l.y-a,i.width=l.width,i.height=l.height+a});n(n9,c);return}var s=e(e0).find(function(e){return e.paneId===t.paneId});if(!s){var d=Error("Expected pane");throw n(nS,{error:d,tags:{layoutstate:!0},origin:"Layout: state/resizeFloating"}),d}n(ne,t.paneId),n(iV,{paneId:t.paneId,edge:t.edge,rectStart:e(s.rectAtom)})}),iZ=(0,ei.eU)(null,function(e,n,t){var r=e(nf),i=e(eX(t)),o=i.rectAtom,a=i.type,l=e(o),u=ek(r,t);if(!u){var c=Error("Expected pane");throw n(nS,{error:c,tags:{layoutstate:!0},origin:"Layout: state/toggleFloating"}),c}if("tile"===a)return void n(n9,(0,ej.jM)(r,function(e){eH(e,{paneGroupPath:u.paneGroupPath,rect:{x:l.x-16,y:l.y-16,width:l.width,height:l.height}})}));u.paneGroup.id===e(tW.LY)&&n(tW.LY,null);var s=e(e0).filter(function(e){return"tile"===e.type&&!e.isHidden}),d=e(e3),p={x:l.x+l.width/2,y:l.y+l.height/2},f=s.find(function(n){var t=e(n.rectAtom);return nN(p,{x:t.x,y:t.y-d,width:t.width,height:t.height+d})});if(!f)return void n(n9,(0,ej.jM)(r,function(e){!function(e,n){var t=n.paneGroupPath,r=n.placement,i=n.to,o=eC(e,t);if((null==o?void 0:o.type)!=="floatingPaneGroup")throw Error("Expected floatingPaneGroup");if(ez(e,t),null===i){e.tiling={id:o.id,panes:o.panes,percent:100,type:"paneGroup",activeIndex:o.activeIndex};return}eT(e,{id:o.id,relativeTo:i,panes:o.panes,activeIndex:o.activeIndex,placement:r})}(e,{paneGroupPath:u.paneGroupPath,to:["tiling"],placement:"leftOf"})}));n(n9,(0,ej.jM)(r,function(e){var n=ek(e,f.paneId);u.paneGroup.panes.forEach(function(t){eB(e,{paneId:t,paneGroupPath:(null==n?void 0:n.paneGroupPath)||["tiling"],activate:!1})})})),n(tX,u.paneGroup.panes[u.paneGroup.activeIndex])}),iJ=(0,ei.eU)(null),iQ=(0,ei.eU)(function(e){var n=e(iJ);return n&&e(e0).find(function(t){var r=e(t.dataAtom);return"videoPlayer"===r.type&&r.data.embedUrl===(null==n?void 0:n.embedUrl)})||null}),iX=(0,ei.eU)(function(e){var n=e(iQ);return n&&!n.isHidden?n:null}),i0=(0,ei.eU)(null,function(e,n,t){n(iJ,t);var r,i="videoPlayer";if(!t)return void n(r2,i);n(r1,{type:i,data:{title:null!=(r=t.title)?r:"Tutorial",embedUrl:t.embedUrl}},{commit:!0,location:"center"})}),i1=(0,ei.eU)(null,function(e,n){var t=e(iQ);if(null==t?void 0:t.isHidden){n(tX,t.paneId),n(nn,t.paneId);return}var r=e(iJ);r&&n(i0,r)}),i2=(0,ei.eU)(function(e){return e(e0).find(function(n){return"tutorial"===e(n.dataAtom).type})||null}),i4=(0,ei.eU)(null,function(e,n){var t=e(i2);if(null==t?void 0:t.isHidden)return void n(tX,t.paneId);n(tj,{panes:[{type:"tutorial"}],placement:"leftOf",percent:25,relativeTo:["tiling"],makeActive:!1,commit:!0})}),i5=(0,ei.eU)(function(e){return!!(e(io)||e(iV)||e(r4)||e(t7)||e(ry)||e(tn))}),i7=(0,ei.eU)(null,function(e,n,t){n(n0,t),n(n9,e(nf))}),i3=(0,ei.eU)(null,function(e,n,t){e(eq)&&n(nG,{headers:new Map(e(eZ).map(function(e){return[e,{snappiness:400}]})),panes:new Map(e(eV).map(function(e){return[e,{snappiness:400}]}))}),n(nK,function(e){return(0,ej.jM)(e,function(e){e.isOpen=null!=t?t:!e.isOpen,t&&0===e.width&&(e.width=180)})}),n(n9,e(nf))});(0,ei.eU)(null,function(e,n,t){if(n(eq,t),n(n9,e(nf)),n(i3,!1),t){var r=e(nb).find(function(e){var n=(0,u._)(e,2);return"agentChat"===(n[0],n[1]).type});r&&n(tL,r[0])}else n(ro,{pane:{type:"agentChat"}})});var i8=(0,ei.eU)(function(e){var n=e(n1);if(!n)return!0;switch(n.type){case"sidebar":return 32===n.width;case"centered":return!1}}),i6=(0,ei.eU)(function(e){var n=e(n1);if(!n)return null;switch(n.type){case"sidebar":return e(i8)?"collapsed":"sidebar";case"centered":return n.type}}),i9=(0,ei.eU)(function(e){var n=e(n1);if(!n)return{x:0,y:0,width:0,height:0};var t=e(e8),r=e(n0),i=e(n7),o=t.height-i;switch(n.type){case"sidebar":var a=e(n5),l={width:n.width,height:o,y:i};switch(r){case"filetree-agent":return(0,p._)({x:t.width-n.width-a},l);case"agent-filetree":return(0,p._)({x:a},l);default:return{x:0,y:0,width:0,height:0}}case"centered":return{x:0,y:i,width:t.width,height:o}}}),oe=t(31142),on=t(47993),ot=(0,ei.eU)(!1),or=(0,ei.eU)(null,function(e,n,t){if(e(ot))return void(0,on.flushSync)(function(){n(oi,null),n(ot,!1)});t&&n(oi,t),n(ot,!0)}),oi=(0,ei.eU)(null),oo=(0,ei.eU)([]),oa=(0,ei.eU)(function(e){if(e(iB)||e(ot))return null;var n=e(e9);if(!n)return null;var t=e(eX(n)),r=e(t.dataAtom),i=t.paneId+r.type;return(0,e6.xS)(r)&&(i+=r.data.path),i}),ol=t(83020),ou=t(85743),oc=t(46586);function os(e){return(0,c.FD)(oc.Ay,(0,r9._)((0,p._)({},e),{children:[(0,c.Y)("path",{fillRule:"evenodd",d:"M2 6.75A4.75 4.75 0 0 1 6.75 2h10a4.75 4.75 0 0 1 4.75 4.75v10a4.75 4.75 0 0 1-4.75 4.75h-10A4.75 4.75 0 0 1 2 16.75v-10ZM6.75 3.5A3.25 3.25 0 0 0 3.5 6.75v10A3.25 3.25 0 0 0 6.75 20h10A3.25 3.25 0 0 0 20 16.75v-10a3.25 3.25 0 0 0-3.25-3.25h-10Z",clipRule:"evenodd"}),(0,c.Y)("path",{d:"M5.25 8.398a3.167 3.167 0 0 1 3.167-3.167h6.666a3.167 3.167 0 0 1 3.167 3.167v6.667a3.167 3.167 0 0 1-3.167 3.166H8.417a3.167 3.167 0 0 1-3.167-3.166V8.398Z"})]}))}function od(e){return(0,c.Y)(oc.Ay,(0,r9._)((0,p._)({},e),{children:(0,c.Y)("path",{fillRule:"evenodd",d:"M17 21.75A4.75 4.75 0 0 0 21.75 17V7A4.75 4.75 0 0 0 17 2.25H7A4.75 4.75 0 0 0 2.25 7v10A4.75 4.75 0 0 0 7 21.75h10ZM20.25 12H3.75V7A3.25 3.25 0 0 1 7 3.75h10A3.25 3.25 0 0 1 20.25 7v5Z",clipRule:"evenodd"})}))}function op(e){return(0,c.Y)(oc.Ay,(0,r9._)((0,p._)({},e),{children:(0,c.Y)("path",{fillRule:"evenodd",d:"M2.25 7A4.75 4.75 0 0 1 7 2.25h10A4.75 4.75 0 0 1 21.75 7v10A4.75 4.75 0 0 1 17 21.75H7A4.75 4.75 0 0 1 2.25 17V7ZM12 3.75v16.5h5A3.25 3.25 0 0 0 20.25 17V7A3.25 3.25 0 0 0 17 3.75h-5Z",clipRule:"evenodd"})}))}function of(e){return(0,c.Y)(oc.Ay,(0,r9._)((0,p._)({},e),{children:(0,c.Y)("path",{fillRule:"evenodd",d:"M21.75 7A4.75 4.75 0 0 0 17 2.25H7A4.75 4.75 0 0 0 2.25 7v10A4.75 4.75 0 0 0 7 21.75h10A4.75 4.75 0 0 0 21.75 17V7ZM12 3.75v16.5H7A3.25 3.25 0 0 1 3.75 17V7A3.25 3.25 0 0 1 7 3.75h5Z",clipRule:"evenodd"})}))}function oh(e){return(0,c.Y)(oc.Ay,(0,r9._)((0,p._)({},e),{children:(0,c.Y)("path",{fillRule:"evenodd",d:"M7 2.25A4.75 4.75 0 0 0 2.25 7v10A4.75 4.75 0 0 0 7 21.75h10A4.75 4.75 0 0 0 21.75 17V7A4.75 4.75 0 0 0 17 2.25H7ZM3.75 12h16.5v5A3.25 3.25 0 0 1 17 20.25H7A3.25 3.25 0 0 1 3.75 17v-5Z",clipRule:"evenodd"})}))}var og=(0,ei.eU)(null,function(e,n,t){if(null===t){n(rE,null),n(io,function(e){return e?(0,ej.jM)(e,function(e){e.drop=null}):e});return}n(io,function(e){return e?(0,ej.jM)(e,function(e){!function(e,n){if("edge"===n.type||"emptyLayout"===n.type){e.drop={type:"split",relativeTo:["tiling"],placement:"edge"===n.type?n.position:"replace"};return}var t=n.paneId;if("middle"===n.position){e.drop={type:"insert",paneId:t};return}e.drop={type:"split",relativeTo:t,placement:n.position}}(e,t)}):e});var r=e(e8),i=e(e3),o=e(nJ),a=e(n5);if("pane"===t.type){var l=e(eX(t.paneId)),u=e(l.rectAtom);n(rE,{type:"dropPreview",rect:{x:u.x,y:u.y-i,width:u.width,height:u.height+i}});return}if("emptyLayout"===t.type)return void n(rE,{type:"dropPreview",rect:function(e){var n=e.container,t=e.sidebarWidth,r=e.gap,i=e.location,o={x:t+r,y:0,width:n.width-t-2*r,height:n.height-r},a=o.x,l=o.y,u=o.width,c=o.height;switch(i){case"middle":return o;case"leftOf":return{x:a,y:l,width:u/2,height:c};case"rightOf":return{x:a+u/2,y:l,width:u/2,height:c};case"above":return{x:a,y:l,width:u,height:c/2};case"below":return{x:a,y:l+c/2,width:u,height:c/2}}}({container:r,sidebarWidth:o,location:t.position,gap:a})});n(rE,{type:"dropPreview",rect:function(e,n){var t=n.container,r=n.sidebarWidth,i=n.position,o=n.gap,a={x:r+o,y:0,width:t.width-r-2*o,height:t.height-o};if((null==e?void 0:e.type)!=="split"){switch(i){case"above":case"below":a.height=a.height/2,"below"===i&&(a.y+=a.height);break;case"rightOf":case"leftOf":a.width=a.width/2,"rightOf"===i&&(a.x+=a.width)}return a}if(e.stacked){switch(i){case"above":a.height=a.height*(e.children[0].percent/100)/2;break;case"below":a.height=a.height*(e.children[e.children.length-1].percent/100)/2,a.y=t.height-a.height;break;case"leftOf":a.width=a.width/2;break;case"rightOf":a.width=a.width/2,a.x=t.width-a.width-o}return a}switch(i){case"above":a.height=a.height/2;break;case"below":a.height=a.height/2,a.y=t.height-a.height-o;break;case"leftOf":a.width=a.width*(e.children[0].percent/100)/2;break;case"rightOf":a.width=a.width*(e.children[e.children.length-1].percent/100)/2,a.x=t.width-a.width}return a}(e(nf).tiling,{container:r,sidebarWidth:o,position:t.position,gap:a})})}),om=(0,rk.v)(["opacity","width","height","transform","pointerEvents"]),ov=om.cssVars,ow=om.styleTokens,oy=(0,rC.x)({dropPoint:[ol.wp.center,ol.wp.top(0),ol.wp.left(0),ol.wp.position.absolute,{zIndex:rA.W.overlay,cursor:"grabbing",width:ow.width,height:ow.height,transform:ow.transform,opacity:"var(".concat(ov.opacity,", 0)"),pointerEvents:ow.pointerEvents,transition:"opacity 200ms ease-out 200ms","&:hover":{color:rI.LU.accentPrimaryStronger}}]}),ob={above:(0,c.Y)(oh,{}),below:(0,c.Y)(od,{}),leftOf:(0,c.Y)(op,{}),rightOf:(0,c.Y)(of,{}),middle:(0,c.Y)(os,{})};function ox(e){var n=(0,d.useRef)(null),t=(0,d.useMemo)(function(){return(0,e$.mg)(il,function(n){return null==n?void 0:n[e]})},[e]),r=(0,d.useMemo)(function(){return(0,e$.mg)(t,function(e){return e?(0,ty._)({},ov.transform,"translate(".concat(e.rect.x,"px, ").concat(e.rect.y,"px)")):null},n$())},[t]);(0,rY.d)(n,rh(r));var i=(0,d.useMemo)(function(){return(0,e$.mg)(t,function(e){var n;return e?(n={},(0,ty._)(n,ov.width,e.rect.width+"px"),(0,ty._)(n,ov.height,e.rect.height+"px"),n):null},n$())},[t]);(0,rY.d)(n,rh(i));var o=(0,d.useMemo)(function(){return(0,e$.mg)(t,function(e){var n;return n={},(0,ty._)(n,ov.opacity,(null==e?void 0:e.visible)?"1":"0"),(0,ty._)(n,ov.pointerEvents,(null==e?void 0:e.visible)?"all":"none"),n},n$())},[t]);return(0,rY.d)(n,rh(o)),n}function o_(){var e=ox("middle"),n=rg(og),t=rm((0,d.useMemo)(function(){return(0,e$.mg)(il,function(e){var n;return null!=(n=null==e?void 0:e.middle.paneId)?n:null})},[]));return(0,c.Y)(ou.S,{css:oy.dropPoint,innerRef:e,onMouseEnter:function(){var e=t(),r="middle";n(e?{type:"pane",position:r,paneId:e}:{type:"emptyLayout",position:r})},onMouseLeave:function(){return n(null)},children:(0,c.Y)(os,{size:32})})}function oS(e){var n=e.position,t=ox(n),r=rg(og);return(0,c.Y)(ou.S,{css:oy.dropPoint,innerRef:t,onMouseEnter:function(){return r({type:"edge",position:n})},onMouseLeave:function(){return r(null)},children:(0,d.cloneElement)(ob[n],{size:32})})}var oY=(0,d.memo)(function(){return(0,c.FD)(c.FK,{children:[(0,c.Y)(oS,{position:"above"}),(0,c.Y)(oS,{position:"below"}),(0,c.Y)(oS,{position:"leftOf"}),(0,c.Y)(oS,{position:"rightOf"}),(0,c.Y)(o_,{})]})}),oA=(0,ei.eU)(null);function oI(e){return rf((0,$.A)(function(){return(0,ei.eU)(function(n){var t=n(eX(e));return n(t.dataAtom)})},[e]))}function oC(){var e=rp();return(0,d.useCallback)(function(n){var t=e.get(eX(n));return{pane:e.get(t.dataAtom),isCommitted:t.isCommitted}},[e])}function ok(e){var n=e.paneId;return rf((0,$.A)(function(){return(0,ei.eU)(function(e){return e(e9)===n})},[n]))}function oE(){var e=rg(ne),n=rg(nn);return(0,$.A)(function(){return function(t,r){(null==r?void 0:r.commit)&&n(t),e(t)}},[n,e])}function oD(){return rg(ro)}var oR=(0,ei.eU)(null,function(e,n){n(t7,!1)});function oF(e){var n=e.paneGroupId,t=rg(iu),r=rg(ic),i=rg(ip),o=(0,$.A)(function(){return{start:function(e){t({paneGroupId:n,mouse:e.mouse})},update:function(e){r(e)},end:function(e){i(e)}}},[n,t,r,i]);return{isDragging:rf((0,$.A)(function(){return(0,ei.eU)(function(e){var t;return n===(null==(t=e(io))?void 0:t.paneGroupId)})},[n])),dnd:o}}function oU(){return rg(iS)}function oP(){return{maximizePane:rg(nE),maximizePaneGroup:rg(nD),restoreMaximizedPaneGroup:rg(nR),toggleMaximizePane:rg(nF),toggleMaximizedPaneGroup:rg(nU)}}function oO(e){var n,t,r=(n=e7(e),{activeIndexAtom:(0,$.A)(function(){return(0,ei.eU)(function(e){return e(n).activeIndex})},[n]),pathAtom:(0,$.A)(function(){return(0,e$.mg)(n,function(e){return e.path},n$())},[n]),panesAtom:(0,$.A)(function(){return(0,e$.mg)(n,function(e){return e.panes},n$())},[n]),activeFileAtom:(0,$.A)(function(){return(0,ei.eU)(function(e){var t=e(n),r=e(eX(t.panes[t.activeIndex])),i=e(r.dataAtom);return(0,e6.xS)(i)?(0,e6.Vj)(i):null})},[n])}),i=r.activeIndexAtom,o=r.pathAtom,a=r.panesAtom;return{activeIndex:rh(i),path:rh(o),panes:rh(a),activeTabPaneId:rh((t=e7(e),(0,$.A)(function(){return(0,ei.eU)(function(e){var n=e(t);return e(eX(n.panes[n.activeIndex])).paneId})},[t])))}}function oT(e){return rf((0,$.A)(function(){return(0,ei.eU)(function(n){return n(e0).some(function(t){return n(t.dataAtom).type===e})})},[e]))}function oL(e){var n,t,r,i,o,a,l,u,c,s,d,f=iE(e),h=nB(f),g=nW(f),m=iR(e),v=(n=iD(e),(0,$.A)(function(){return(0,ei.eU)(function(t){var r,i,o,a,l,u=t(n);if(u)return null!=(a=u.transformOriginX)?a:"0px";var c=null==(o=t(nL))||null==(i=o.panes)||null==(r=i.get(e))?void 0:r.dropState;return null!=(l=null==c?void 0:c.transformOrginX)?l:"0x"})},[n,e])),w=(t=iE(e),(0,$.A)(function(){return(0,ei.eU)(function(e){var n=e(t),r=e(e8);return{x:Math.round(r.x+n.x),y:Math.round(r.y+n.y)}})},[t])),y=iP(e),b=(0,$.A)(function(){return(0,ei.eU)(function(n){var t,r,i,o=n(eX(e));if(o.isHidden)return rA.W.hiddenPane;var a=e===n(e9);return n(nk)===e?rA.W.maximizedPane:e===n(ia)||(null==(i=n(nL))||null==(r=i.panes)||null==(t=r.get(e))?void 0:t.dropState)?rA.W.draggingPane:"floating"===o.type?a?rA.W.floatingPaneActive:rA.W.floatingPane:"agentChat"===n(o.dataAtom).type&&"centeredVisualPlanner"===n(nr)||n(tl)||a?rA.W.tiledPaneActive:rA.W.tiledPane})},[e]),x=(0,$.A)(function(){return(0,ei.eU)(function(n){var t,r,i=n(nL);return null!=(r=null==i||null==(t=i.panes)?void 0:t.get(e))&&r})},[e]),_=(r=iU(e),(0,$.A)(function(){return(0,e$.mg)(r,function(e){return e.type})},[r])),S=iO(e),Y=(0,$.A)(function(){return(0,ei.eU)(function(n){var t,r=null==(t=ek(n(nf),e))?void 0:t.paneGroup;return!!r&&r.id===n(tW.LY)})},[e]),A=iF(e),I=(0,$.A)(function(){return(0,ei.eU)(function(n){return n(e9)===e})},[e]),C=(0,$.A)(function(){return(0,e$.mg)(eX(e),function(e){return e.isCommitted})},[e]),k=iU(e),E=(i=iO(e),o=iF(e),a=iD(e),(0,$.A)(function(){return(0,ei.eU)(function(e){return!e(nC)&&!!(e(i)||e(o)||e(a))})},[i,o,a])),D=(l=iD(e),(0,$.A)(function(){return(0,ei.eU)(function(n){var t,r,i;return!!n(l)||!!(null==(i=n(nL))||null==(r=i.panes)||null==(t=r.get(e))?void 0:t.dropState)})},[l,e])),R=(u=iD(e),(0,$.A)(function(){return(0,e$.mg)(u,function(e){var n;return null!=(n=null==e?void 0:e.movedAtAll)&&n})},[u])),F=(0,$.A)(function(){return(0,ei.eU)(function(n){if((null==(t=n(nf).tiling)?void 0:t.type)!=="paneGroup")return!1;var t,r,i=null==(r=ek(n(nf),e))?void 0:r.paneGroup;return!!i&&1===i.panes.length})},[e]),U=(0,$.A)(function(){return(0,ei.eU)(function(n){return n(eX(e)).highlight})},[e]);return{properties:rh((c=iE(e),s=iR(e),d=iP(e),(0,$.A)(function(){return(0,ei.eU)(function(e){var n=e(d);return(0,r9._)((0,p._)({},e(c)),{scale:e(s),opacity:+!n})})},[c,s,d]))),size:rh(h),position:rh(g),scale:rh(m),paneType:rh(_),transformOriginXAtom:rh(v),viewportInset:rh(w),zIndex:rh(b),disableInteractions:rh(i5),getTransitionEnabled:rm(x),data:rh(k),isFloating:rh(S),isModal:rh(Y),isActive:rh(A),isActivePane:rh(I),isCommitted:rh(C),isHidden:rh(y),isBeingDragged:rh(D),hasMovedWhileDragging:rh(R),headerHeight:rh(e3),hasBorder:rh(E),isOnlyPane:rh(F),highlight:rh(U)}}function oM(e){var n,t,r,i,o,a,l,u,c,s=nB(ih(e)),d=ig(e),f=iv(e),h=(t=im(e),(0,$.A)(function(){return(0,ei.eU)(function(n){var r,i,o,a,l,u=n(t);if(u)return null!=(a=u.transformOriginX)?a:"0px";var c=null==(o=n(nL))||null==(i=o.headers)||null==(r=i.get(e))?void 0:r.dropState;return null!=(l=null==c?void 0:c.transformOrginX)?l:"0x"})},[t,e])),g=(r=im(e),i=iy(e),o=ib(e),n=iw(e),a=(0,$.A)(function(){return(0,ei.eU)(function(e){var t=e(e9);if(!t)return!1;var r=e(n);return!!r&&r.panes.includes(t)})},[n]),(0,$.A)(function(){return(0,ei.eU)(function(n){var t,l,u;return n(i)?rA.W.maximizedHeader:n(r)||(null==(u=n(nL))||null==(l=u.headers)||null==(t=l.get(e))?void 0:t.dropState)?rA.W.draggingHeader:n(o)?n(a)?rA.W.floatingHeaderActive:rA.W.floatingHeader:rA.W.tiledHeader})},[r,i,o,a,e])),m=(0,$.A)(function(){return(0,ei.eU)(function(n){var t,r,i=n(nL);return null!=(r=null==i||null==(t=i.headers)?void 0:t.get(e))&&r})},[e]),v=iy(e),w=ib(e),y=(0,$.A)(function(){return(0,ei.eU)(function(n){return n(tW.LY)===e})},[e]),b=(0,$.A)(function(){return(0,ei.eU)(function(n){var t;return(null==(t=n(io))?void 0:t.paneGroupId)===e})},[e]);return{properties:rh((l=ih(e),u=iv(e),c=ig(e),(0,$.A)(function(){return(0,ei.eU)(function(e){var n="centeredVisualPlanner"===e(nr);return(0,r9._)((0,p._)({},e(l)),{scale:e(u),positioning:e(c).positioning,opacity:+!n})})},[l,u,c]))),size:rh(s),position:rh(d),scale:rh(f),transformOriginX:rh(h),zIndex:rh(g),getTransitionEnabled:rm(m),isMaximized:rh(v),isFloating:rh(w),isModal:rh(y),isBeingDragged:rh(b)}}function oG(){return rf(nr)}function oN(){return{view:rh(r_),resizeHandleView:rh(rS),isOpen:rh(nZ),toggle:rg(i3),resize:{start:rg(rw),update:rg(rb),end:rg(rx)},getTransitionEnabled:rm(nM)}}function oz(e){var n=rf(tp),t=(0,B.NC)(),r=(0,eu.Rj)(function(){return t.sessions.query({types:[el.dF3.CHAT]}).map.select(function(e){return e.size>0})},[t],{default:!1});return(0,d.useMemo)(function(){var t=n.primaryTools.filter(function(n){return e.has(n.type)});return t.some(function(e){return"agentChat"===e.type})&&!r&&(t=t.filter(function(e){return"ghostwriterChat"!==e.type})),{visible:n.visible,primaryTools:t,secondaryTools:n.secondaryTools.filter(function(n){return e.has(n.type)})}},[n,e,r])}function oH(){var e=rh(i9),n=rh(n5),t=rh(i6),r=rg(tt),i=rg(ti);return{rect:e,gutter:n,displayState:t,collapsedWidth:32,getTransitionEnabled:rm(nM),resizeSidebar:r,toggle:i,setChatRef:rg(tK),agentFiletreeOrder:rh(n0),setAgentFiletreeOrder:rg(i7)}}var oB=t(30274),oW=t(64319),oj=t(25723);function o$(){var e,n,t,r,i,o,a,l,c,s,f,h,m,v;return t=(0,er.A)(),r=oG(),i=rg(ta),o=(0,B.Ik)(),a=(0,oB.Y)(),l=(0,d.useRef)(!1),c=(0,u._)((0,J.V)(),1)[0],h=(s={variables:{replId:t}},f=(0,p._)({},ee,s),g.I(et,f)).data,m=null,v=!1,(null==h||null==(e=h.getRepl)?void 0:e.__typename)==="Repl"&&(m=h.getRepl.config,v=(null==(n=h.getRepl.origin)?void 0:n.id)!=null),(0,d.useEffect)(function(){(null==m?void 0:m.isAgentRepl)&&!v&&a&&null!=o&&!l.current&&("approved"===o?("centeredVisualPlanner"===r&&i("tilingLayout"),(null==m?void 0:m.isInPlanningPhase)!==!1&&c({variables:{input:{id:t,isInPlanningPhase:!1}}})):("centeredVisualPlanner"!==r&&i("centeredVisualPlanner"),(null==m?void 0:m.isInPlanningPhase)!==!0&&c({variables:{input:{id:t,isInPlanningPhase:!0}}})),l.current=!0)},[r,t,i,c,o,a,m,v]),(0,oj.g)(),(0,oW.c)(),null}var oq=t(5942),oV=t(24385),oK=t(1444),oZ=t(14996),oJ=t(74325);function oQ(e){var n=(0,B.dm)().setAssistantMode,t=(0,B.NC)(),r=(0,d.useCallback)(function(r){return(0,tS._)(function(){var i,o;return(0,tY.YH)(this,function(a){switch(a.label){case 0:return[4,t.sessions.create({sessionType:el.dF3.CHAT})];case 1:if(!(i=a.sent()).ok)return[2];return e({pane:{type:"ghostwriterChat",data:{sessionId:(o=i.payload).id}}}),n("basic"),[4,o.appendEvent({kind:"message",message:r,intent:el.qRv.NONE,modelType:el.e3q.BASIC})];case 2:return a.sent(),(0,oq.u4)(oq.AZ.ASSISTANT_USED,{action:"message_sent",intent_type:"explain",model:"basic",user_model_selection:"basic",message_content:r,message_source:"ask_ai_command_bar"}),[2]}})})()},[t,e,n]);return(0,$.A)(function(){return{data:{type:"context",label:"Assistant",icon:(0,c.Y)(oJ.A,{size:16}),key:"assistant"},commands:function(e){var n=e.searchQuery;return n?[{match:(0,oK.u4)({defaultScore:oZ.q.askAssistant,matchScoreMultiplier:oZ.B.askAssistant,filterLowMatchScores:!1}),data:{type:"action",label:"Ask Assistant: ".concat(n),icon:(0,c.Y)(oJ.A,{size:16}),run:function(){return r(n)}}}]:[]}}},[r])}var oX=t(23241);function o0(e){var n=(0,e6.Vv)();return(0,$.A)(function(){return{data:{type:"context",label:"Open with Code Search",icon:(0,c.Y)(oX.A,{}),key:"codeSearch"},commands:function(t){var r=t.searchQuery;if(!r)return[];var i={type:"searchReplace",data:{initialQuery:r}};return[{match:(0,oK.u4)({defaultScore:oZ.q.codeSearch,matchScoreMultiplier:oZ.B.codeSearch,filterLowMatchScores:!1}),data:{type:"action",label:n.getTitle(i),icon:n.Icon({pane:i}),run:function(){e({pane:i})}}}]}}},[n,e])}var o1=t(3599),o2=t(87070),o4=t(78950),o5=t(80894),o7=t(14440),o3=t(40854),o8=t(86410),o6=t(97571),o9=t(23627),ae=t(16623),an=t(76516),at=t(41805),ar=t(18215);function ai(e){var n=e.currentPaneId,t=e.type,r=(0,e6.Vv)(),i=rg(rr),o=rg(tX),a=(0,tW.t3)(),l=(0,o6.gB)(),s=n?"Move existing tab here":"Jump to existing tab";return(0,d.useCallback)(function(e){var d=e.searchQuery;return(0,tS._)(function(){var e,p,f,h,g,m,v,w,y,b,x,_,S,Y,A,I,C,k,E,D,R,F,U,P,O;return(0,tY.YH)(this,function(T){switch(T.label){case 0:if(e=a(),!(p=n?e.filter(function(e){return(0,u._)(e,1)[0]!==n}):e).length||!d&&"files"===t)return[2,[]];f=new Map,h=[],g=!0,m=!1,v=void 0;try{for(w=p[Symbol.iterator]();!(g=(y=w.next()).done);g=!0)(b=(0,u._)(y.value,2))[0],x=b[1],(0,e6.xS)(x)&&x.data.path&&h.push(x.data.path)}catch(e){m=!0,v=e}finally{try{g||null==w.return||w.return()}finally{if(m)throw v}}return[4,(0,o5.UI)(d,h)];case 1:_=T.sent(),S=!0,Y=!1,A=void 0;try{for(I=_[Symbol.iterator]();!(S=(C=I.next()).done);S=!0)k=C.value,f.set(k.path,{score:k.score,ranges:k.ranges})}catch(e){Y=!0,A=e}finally{try{S||null==I.return||I.return()}finally{if(Y)throw A}}E=[],D=!0,R=!1,F=void 0;try{for(U=function(){var e=(0,u._)(O.value,2),a=e[0],d=e[1],p=(0,e6.NM)(d);if("tools"===t&&!p||"tools"===t&&"commands"===d.type||"files"===t&&p)return"continue";var h=(0,e6.xS)(d)?d.data.path:null,g=h?f.get(h):null;if("deployments"===d.type){var m=l(a);if((null==m?void 0:m.type)==="deployments"){var v=m.getTabs();if(v)return E.push({match:oK.KK,data:{type:"context",label:r.getTitle(d),icon:(0,c.Y)(r.Icon,{pane:d})},commands:function(){return v.map(function(e){return{match:oK.KK,data:{key:a+e.id,type:"action",label:e.label,icon:(0,c.Y)(e.Icon,{size:16}),run:function(){o(a),m.setTab(e.id)}}}})}}),"continue"}}var w=h&&g?function(){return{score:g.score,render:(0,o5.SS)({path:h,ranges:g.ranges,description:s})}}:oK.KK,y=r.getTitle(d),b=r.Icon({pane:d});E.push({match:w,data:{key:a,type:"action",label:y,icon:b,run:function(){return n?i({a:n,b:a}):o(a)},description:s}})},P=p[Symbol.iterator]();!(D=(O=P.next()).done);D=!0)U()}catch(e){R=!0,F=e}finally{try{D||null==P.return||P.return()}finally{if(R)throw F}}return[2,E]}})})()},[n,a,r,o,i,l,s,t])}function ao(e){var n=(0,e6.Vv)(),t=(0,o9.Tb)(),r=(0,tW.t3)();return(0,d.useCallback)(function(){var i=r().map(function(e){var n=(0,u._)(e,2);return(n[0],n[1]).type}),o=[],a=!0,l=!1,c=void 0;try{for(var s,d=t[Symbol.iterator]();!(a=(s=d.next()).done);a=!0)!function(){var t=s.value;if(!((0,e6.gG)(t.type)&&i.includes(t.type))){var r=n.getTitle(t),a=n.Icon({pane:t});o.push({match:(0,o7.T)({pane:t,aliases:o3.f.get(t.type)}),data:{key:"extension"===t.type?"extension-".concat(t.data.installationId,"-").concat(t.data.path):void 0,type:"action",label:r,description:n.getDescription(t,{short:!0}),icon:a,run:function(){e({pane:t})}}})}}()}catch(e){l=!0,c=e}finally{try{a||null==d.return||d.return()}finally{if(l)throw c}}return o},[t,e,r,n])}function aa(e){var n=e.currentPaneId,t=e.openPane,r=(0,o1.A)(),i=r.fs,o=r.container,a=ao(t),l=(0,B.jt)(),u=ai({currentPaneId:n,type:"tools"}),s=ai({currentPaneId:n,type:"files"}),p=(0,d.useCallback)(function(e){var n=e.path;t({pane:{type:(0,e6.QY)({path:n}),data:{path:n}}})},[t]),f=(0,tW.Sx)(),h=(0,o8.J)(),g=o0(t),m=oQ(t);return(0,$.A)(function(){var e,n,t,r=(0,o2.g)({openFile:p,fs:i,shouldHideFile:h,getRecentFiles:f,getCurrentlyOpenFilePanesCommands:s}),d=(0,o4.Y)({container:o,openFile:p}),v={data:{type:"context",label:an.Ve,icon:(0,c.Y)(ar.A,{})},commands:function(e){var n=e.searchQuery;return(0,tS._)(function(){return(0,tY.YH)(this,function(e){switch(e.label){case 0:return[4,u({searchQuery:n})];case 1:return[2,eA._.apply(void 0,[e.sent()]).concat((0,eA._)(a()))]}})})()}},w=(n=(e={fs:i,openFile:p}).openFile,t=e.fs,{match:oK.KK,data:{type:"context",label:"New file",description:"Create a new file",icon:(0,c.Y)(at.A,{})},commands:function(e){var r=e.searchQuery,i=e.active;return r&&i?[{match:oK.G2,data:{type:"action",description:"Create a new file",label:r,icon:(0,c.Y)(ae.A,{path:r}),run:function(){return(0,tS._)(function(){return(0,tY.YH)(this,function(e){switch(e.label){case 0:return[4,t.stat(r)];case 1:if(e.sent().exists)return[2,{type:"error",message:'"'.concat(r,'" already exists')}];return[4,t.writeFile(r,oV.A.from(""))];case 2:if(e.sent().error)return[2,{type:"error",message:'Could not create "'+r+'"'}];return n({path:r}),[2]}})})()}}}]:[]}});return{data:{type:"group",key:"root",description:"Search for files & tools…"},commands:function(){return[w,r,v,g,d].concat((0,eA._)(l?[]:[m]))}}},[o,i,f,a,u,s,h,p,g,m,l])}var al=t(41569),au=t(87155),ac="Search…";function as(){var e=(0,tm.Xr)(or);return(0,d.useCallback)(function(n){e(n)},[e])}var ad=t(19464),ap=t(24735),af=t(19789),ah=t(17018),ag={id:"toggleGlobalCommandBarCommand",name:"Toggle Commandbar",description:"Opens or closes the command bar",default:(0,ad.FM)({cmdOrCtrl:!0,key:"k"})};function am(e){var n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{enabled:!0}).enabled,t=(0,tm.Xr)(oo);(0,d.useEffect)(function(){if(n)return t(function(n){return(0,eA._)(n).concat([e])}),function(){t(function(n){return n.filter(function(n){return n!==e})})}},[t,e,n])}var av=(0,rC.x)({surface:[ol.wp.maxHeight("70vh"),ol.wp.borderRadius(8)]});let aw=(0,d.memo)(function(){var e,n,t,r,i,o,a,l,u=(0,tm.md)(ot),s=as(),p=(e=oD(),n=ao((0,d.useCallback)(function(n){(0,oq.u4)(oq.AZ.TOOL_OPENED,{source:"Command Bar",tool:n.pane.type}),e(n)},[e])),t=ai({type:"tools"}),r=(0,al.Jn)("toggleGlobalCommandBarCommand"),i=(0,$.A)(function(){return{type:"context",icon:(0,c.Y)(au.A,{}),label:"",description:ac,keyboardShortcut:r}},[r]),o=(0,rl.p)(),a=(0,$.A)(function(){return(0,ei.eU)(function(e){var r=e(oo),a={data:{type:"context",label:an.Ve,icon:(0,c.Y)(ar.A,{})},commands:function(e){var r=e.searchQuery;return(0,tS._)(function(){return(0,tY.YH)(this,function(e){switch(e.label){case 0:return[4,t({searchQuery:r})];case 1:return[2,eA._.apply(void 0,[e.sent()]).concat((0,eA._)(n()))]}})})()}};return{data:i,commands:function(){return(0,eA._)(r).concat((0,eA._)(o?[]:[a]))}}})},[n,i,t,o]),l=(0,$.A)(function(){return(0,ei.eU)(function(e){var n=e(a),t=e(oi);return t?[n,t]:n})},[a]),(0,tm.md)(l)),f=(0,al.Jn)(ag.id);return(0,c.Y)(ap.a,{hideCloseButton:!0,isOpen:u,onRequestClose:s,noPadding:!0,skipTransition:!0,topPadding:8,children:(0,c.Y)(af.ui,{css:av.surface,children:(0,c.Y)(ah.r,{keyboardShortcut:f,onAction:function(){return s()},command:p,autoFocus:!0})})})});var ay=t(74639);function ab(){var e=(0,f._)(["\n  query ExtensionStore($replId: String!, $userId: Int) {\n    extensionList(includeNonBlessed: true, userId: $userId) {\n      ...TopLevelExtension\n      installation(replId: $replId) {\n        ...TopLevelExtensionInstallation\n      }\n    }\n  }\n  ","\n  ","\n"]);return ab=function(){return e},e}var ax=(0,h.J1)(ab(),ay.Fz,ay.Tu),a_=t(805),aS=t(1223),aY=t(92152),aA=t(60421),aI=(0,rC.x)({container:ol.wp.colWithGap(24)});function aC(e){var n=e.fileExtension,t=e.onCancel,r=e.onConfirm;return(0,c.FD)(ou.S,{css:aI.container,children:[(0,c.Y)(aA.Y9,{level:1,variant:"headerDefault",children:"Make this extension default?"}),(0,c.FD)(aA.EY,{children:["Do you want to use this extension to open ",n," files by default? You can always use another file opener by right clicking on the file and opening it with something else"]}),(0,c.FD)(ou.S,{row:!0,gap:12,justify:"end",children:[(0,c.Y)(aY.$n,{onClick:function(){return t()},text:"Cancel"}),(0,c.Y)(aY.$n,{colorway:"positive",onClick:function(){return r()},text:"Yes, use this extension by default"})]})]})}var ak=t(84885);function aE(){var e=(0,tW.RG)(),n=rm(nv),t=rm(ny),r=rm(tI),i=rg(tJ),o=rg(tO),a=rg(tT),l=rm(ng),c=rm(nm),s=rm(nC);return(0,d.useCallback)(function(d){var p=d.pane,f=d.activate,h=d.updateOnReveal,g=e(),m=(0,e6.xS)(p)?l():c();m||(m=function(e){var n,t,r=e.panes,i=e.pane;if((0,e6.xS)(i)){var o,a,l=i.data.path;return null!=(a=null==(o=r.find(function(e){var n=(0,u._)(e,2)[1];return(0,e6.xS)(n)&&n.data.path===l}))?void 0:o[0])?a:null}if((0,e6.En)(i))return null!=(s=null==(c=r.find(function(e){var n=(0,u._)(e,2)[1];return!!(0,e6.En)(n)&&n.data.installationId===i.data.installationId&&n.data.path===i.data.path&&n.data.filePath===i.data.filePath}))?void 0:c[0])?s:null;if("diff"===i.type){var c,s,d,p=r.find(function(e){var n=(0,u._)(e,2),t=(n[0],n[1]);return"diff"===t.type&&n$()(t.data,i.data)});return null!=(d=null==p?void 0:p[0])?d:null}return(0,e6.gG)(i.type)&&null!=(t=null==(n=r.find(function(e){return(0,u._)(e,2)[1].type===i.type}))?void 0:n[0])?t:null}({panes:(0,eA._)(n()).concat((0,eA._)(t())),pane:p}));var v=s();if(m&&g){var w,y,b=r().layout,x=null==(w=ek(b,g))?void 0:w.paneGroup,_=null==(y=ek(b,m))?void 0:y.paneGroup;if(!v||(null==x?void 0:x.id)===(null==_?void 0:_.id))return(void 0===h||h)&&a({paneId:m,pane:p}),o({paneId:m,activate:f}),m}var S=d.placement;return v&&null!=g?S={type:"after",paneId:g}:(null==S?void 0:S.type)!=="secondary"||S.relativeTo||(S={type:"secondary",relativeTo:g}),i({pane:p,activate:f,placement:S})},[e,l,c,i,n,t,r,s,o,a])}var aD=t(30233);function aR(){var e,n=oU(),t=(0,tW.T_)(),r=(e=(0,tW.dm)(),(0,$.A)(function(){return function(n){return e.subscribe(n)}},[e])),i=(0,tW.w1)(),o=(0,ak.A)(),a=aE(),l=(0,tW.RG)(),u=rm(tI),c=rg(tR),s=(0,aD.A)(),p=(0,oe.A)(s),f=(0,d.useCallback)(function(e){a({pane:{type:"extension",data:{extensionId:e.extensionId,installationId:e.installationId,baseUrl:e.baseUrl,path:e.path,name:e.name}},activate:!0,placement:{type:"secondary",relativeTo:l()}})},[a,l]);return(0,$.A)(function(){return{openFile:n,watchActiveFile:r,getActiveFile:i,activatePane:t,toasts:o,revealOrInsertTool:f,getLayoutState:u,setLayoutState:c,getSshConfig:function(){return p.current}}},[n,r,i,t,o,f,u,c,p])}var aF=t(65186),aU=t(99640),aP=t(74833),aO=t(61356),aT=t(70225),aL=t(19784),aM=t(35547),aG=t(52964),aN=t(1114),az=t(53847),aH=function(e){return e.RAW="RAW",e.PROXY="PROXY",e.THROW="THROW",e.HANDLER="HANDLER",e}({}),aB=function(e){return e.GET="GET",e.SET="SET",e.APPLY="APPLY",e.CONSTRUCT="CONSTRUCT",e.ENDPOINT="ENDPOINT",e.RELEASE="RELEASE",e}({}),aW=Symbol("Comlink.proxy"),aj=Symbol("Comlink.endpoint"),a$=Symbol("Comlink.releaseProxy"),aq=Symbol("Comlink.thrown"),aV=function(e){return(void 0===e?"undefined":(0,eI._)(e))==="object"&&null!==e||"function"==typeof e},aK=new Map([["proxy",{canHandle:function(e){return aV(e)&&e[aW]},serialize:function(e){var n=new MessageChannel,t=n.port1,r=n.port2;return aZ(e,t),[r,[r]]},deserialize:function(e){var n;return e.start(),function e(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},i=!1,o=new Proxy(r,{get:function(r,a){if(aQ(i),a===a$)return function(){return a5(n,{type:aB.RELEASE,path:t.map(function(e){return e.toString()})}).then(function(){aJ(n),i=!0})};if("then"===a){if(0===t.length)return{then:function(){return o}};var l=a5(n,{type:aB.GET,path:t.map(function(e){return e.toString()})}).then(a4);return l.then.bind(l)}return e(n,(0,eA._)(t).concat([a]))},set:function(e,r,o){aQ(i);var a=(0,u._)(a2(o),2),l=a[0],c=a[1];return a5(n,{type:aB.SET,path:(0,eA._)(t).concat([r]).map(function(e){return e.toString()}),value:l},c).then(a4)},apply:function(r,o,a){aQ(i);var l=t[t.length-1];if(l===aj)return a5(n,{type:aB.ENDPOINT}).then(a4);if("bind"===l)return e(n,t.slice(0,-1));var c=(0,u._)(aX(a),2),s=c[0],d=c[1];return a5(n,{type:aB.APPLY,path:t.map(function(e){return e.toString()}),argumentList:s},d).then(a4)},construct:function(e,r){aQ(i);var o=(0,u._)(aX(r),2),a=o[0],l=o[1];return a5(n,{type:aB.CONSTRUCT,path:t.map(function(e){return e.toString()}),argumentList:a},l).then(a4)}});return o}(e,[],n)}}],["throw",{canHandle:function(e){return aV(e)&&aq in e},serialize:function(e){var n=e.value;return[(0,az._)(n,Error)?{isError:!0,value:{message:n.message,name:n.name,stack:n.stack}}:{isError:!1,value:n},[]]},deserialize:function(e){if(e.isError)throw Object.assign(Error(e.value.message),e.value);throw e.value}}]]);function aZ(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:self,t=arguments.length>2?arguments[2]:void 0;function r(i){if(i&&i.data&&(!t||i.origin===t.origin&&i.source===t.source)){var o,a=(0,p._)({path:[]},i.data),l=a.id,c=a.type,s=a.path,d=(i.data.argumentList||[]).map(a4);try{var f=s.slice(0,-1).reduce(function(e,n){return e[n]},e),h=s.reduce(function(e,n){return e[n]},e);switch(c){case aB.GET:o=h;break;case aB.SET:f[s.slice(-1)[0]]=a4(i.data.value),o=!0;break;case aB.APPLY:o=h.apply(f,d);break;case aB.CONSTRUCT:var g=(0,aN._)(h,(0,eA._)(d));o=a1(g);break;case aB.ENDPOINT:var m,v,w=new MessageChannel,y=w.port1,b=w.port2;aZ(e,b),m=y,v=[y],a0.set(m,v),o=m;break;case aB.RELEASE:o=void 0;break;default:return}}catch(e){o=(0,ty._)({value:e},aq,0)}Promise.resolve(o).catch(function(e){return(0,ty._)({value:e},aq,0)}).then(function(e){var t=(0,u._)(a2(e),2),i=t[0],o=t[1];n.postMessage((0,r9._)((0,p._)({},i),{id:l}),o),c===aB.RELEASE&&(n.removeEventListener("message",r),aJ(n))})}}return n.addEventListener("message",r),n.start&&n.start(),function(){n.removeEventListener("message",r),aJ(n)}}function aJ(e){"MessagePort"===e.constructor.name&&e.close()}function aQ(e){if(e)throw Error("Proxy has been released and is not useable")}function aX(e){var n,t=e.map(a2);return[t.map(function(e){return e[0]}),(n=t.map(function(e){return e[1]}),Array.prototype.concat.apply([],n))]}var a0=new WeakMap;function a1(e){return Object.assign(e,(0,ty._)({},aW,!0))}function a2(e){var n=!0,t=!1,r=void 0;try{for(var i,o=aK[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var a=(0,u._)(i.value,2),l=a[0],c=a[1];if(c.canHandle(e)){var s=(0,u._)(c.serialize(e),2),d=s[0],p=s[1];return[{type:aH.HANDLER,name:l,value:d},p]}}}catch(e){t=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(t)throw r}}return[{type:aH.RAW,value:e},a0.get(e)||[]]}function a4(e){switch(e.type){case aH.HANDLER:return aK.get(e.name).deserialize(e.value);case aH.RAW:return e.value}}function a5(e,n,t){return new Promise(function(r){var i=[,,,,].fill(0).map(function(){return Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)}).join("-");e.addEventListener("message",function n(t){t.data&&t.data.id&&t.data.id===i&&(e.removeEventListener("message",n),r(t.data))}),e.start&&e.start(),e.postMessage((0,p._)({id:i},n),t)})}var a7=t(87965),a3=t(84473),a8=Symbol("timeout"),a6=t(68627);function a9(){var e=(0,f._)(["\n  fragment InitialCurrentUserData on CurrentUser {\n    id\n    username\n    image\n    bio\n  }\n"]);return a9=function(){return e},e}function le(){var e=(0,f._)(["\n  fragment SocialCurrentUserData on CurrentUser {\n    url\n    socials {\n      id\n      url\n      type\n    }\n    firstName\n    lastName\n    displayName\n    fullName\n    followCount\n    followerCount\n  }\n"]);return le=function(){return e},e}function ln(){var e=(0,f._)(["\n  fragment RolesCurrentUserData on CurrentUser {\n    roles {\n      id\n      name\n      key\n      tagline\n    }\n  }\n"]);return ln=function(){return e},e}function lt(){var e=(0,f._)(["\n  fragment PlanCurrentUserData on CurrentUser {\n    isUserHacker: subscriptionIsType(subscriptionType: HACKER)\n    ...CoreSubscriptionPlanStatus\n  }\n  ","\n"]);return lt=function(){return e},e}function lr(){var e=(0,f._)(["\n  fragment SocialUserData on User {\n    url\n    socials {\n      id\n      url\n      type\n    }\n    firstName\n    lastName\n    displayName\n    fullName\n    followCount\n    followerCount\n  }\n"]);return lr=function(){return e},e}function li(){var e=(0,f._)(["\n  fragment RolesUserData on User {\n    roles {\n      id\n      name\n      key\n      tagline\n    }\n  }\n"]);return li=function(){return e},e}function lo(){var e=(0,f._)(["\n  fragment PlanUserData on User {\n    isUserHacker: subscriptionIsType(subscriptionType: HACKER)\n    isUserPro: subscriptionIsType(subscriptionType: HACKER_PRO)\n  }\n"]);return lo=function(){return e},e}function la(){var e=(0,f._)(["\n  fragment InitialReplData on Repl {\n    id\n    url\n    title\n    description\n    timeCreated\n    slug\n    isPrivate\n  }\n"]);return la=function(){return e},e}function ll(){var e=(0,f._)(["\n  fragment SocialReplData on Repl {\n    likeCount\n    publicForkCount\n    iconUrl\n    imageUrl\n  }\n"]);return ll=function(){return e},e}function lu(){var e=(0,f._)(["\n  fragment InitialUserData on User {\n    id\n    username\n    image\n    bio\n  }\n"]);return lu=function(){return e},e}function lc(){var e=(0,f._)(["\n  fragment OwnerData on Repl {\n    owner {\n      __typename\n      ... on User {\n        ...InitialUserData\n      }\n      ... on Team {\n        id\n        username\n        image\n        description\n      }\n    }\n  }\n  ","\n"]);return lc=function(){return e},e}function ls(){var e=(0,f._)(["\n  fragment MultiplayersData on Repl {\n    multiplayers {\n      ...InitialUserData\n    }\n  }\n  ","\n"]);return ls=function(){return e},e}function ld(){var e=(0,f._)(["\n  query extensionPortCurrentUser(\n    $includeSocialData: Boolean! = false\n    $includeRoles: Boolean! = false\n    $includePlan: Boolean! = false\n  ) {\n    user: currentUser {\n      ...InitialCurrentUserData\n      ...SocialCurrentUserData @include(if: $includeSocialData)\n      ...RolesCurrentUserData @include(if: $includeRoles)\n      ...PlanCurrentUserData @include(if: $includePlan)\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n"]);return ld=function(){return e},e}function lp(){var e=(0,f._)(["\n  query extensionPortUserByUsername(\n    $username: String!\n    $includeSocialData: Boolean! = false\n    $includeRoles: Boolean! = false\n    $includePlan: Boolean! = false\n  ) {\n    userByUsername(username: $username) {\n      ...InitialUserData\n      ...SocialUserData @include(if: $includeSocialData)\n      ...RolesUserData @include(if: $includeRoles)\n      ...PlanUserData @include(if: $includePlan)\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n"]);return lp=function(){return e},e}function lf(){var e=(0,f._)(["\n  query extensionPortUserById(\n    $id: Int!\n    $includeSocialData: Boolean! = false\n    $includeRoles: Boolean! = false\n    $includePlan: Boolean! = false\n  ) {\n    user(id: $id) {\n      ...InitialUserData\n      ...SocialUserData @include(if: $includeSocialData)\n      ...RolesUserData @include(if: $includeRoles)\n      ...PlanUserData @include(if: $includePlan)\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n"]);return lf=function(){return e},e}function lh(){var e=(0,f._)(["\n  query currentUserEditorPreferences {\n    currentUser {\n      id\n      workspacePreferences\n    }\n  }\n"]);return lh=function(){return e},e}function lg(){var e=(0,f._)(["\n  query extensionPortReplById(\n    $id: String!\n    $includeSocialData: Boolean! = false\n    $includeOwner: Boolean! = false\n    $includeMultiplayers: Boolean! = false\n  ) {\n    getRepl(id: $id) {\n      __typename\n      ... on Repl {\n        ...InitialReplData\n        ...SocialReplData @include(if: $includeSocialData)\n        ...OwnerData @include(if: $includeOwner)\n        ...MultiplayersData @include(if: $includeMultiplayers)\n      }\n      ... on ReplRedirect {\n        replUrl\n      }\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n"]);return lg=function(){return e},e}function lm(){var e=(0,f._)(["\n  query extensionPortReplByUrl(\n    $url: String!\n    $includeSocialData: Boolean! = false\n    $includeOwner: Boolean! = false\n    $includeMultiplayers: Boolean! = false\n  ) {\n    getRepl(url: $url) {\n      __typename\n      ... on Repl {\n        ...InitialReplData\n        ...SocialReplData @include(if: $includeSocialData)\n        ...OwnerData @include(if: $includeOwner)\n        ...MultiplayersData @include(if: $includeMultiplayers)\n      }\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n"]);return lm=function(){return e},e}var lv=(0,h.J1)(a9()),lw=(0,h.J1)(le()),ly=(0,h.J1)(ln()),lb=(0,h.J1)(lt(),a6.y),lx=(0,h.J1)(lr()),l_=(0,h.J1)(li()),lS=(0,h.J1)(lo()),lY=(0,h.J1)(la()),lA=(0,h.J1)(ll()),lI=(0,h.J1)(lu()),lC=(0,h.J1)(lc(),lI),lk=(0,h.J1)(ls(),lI),lE=(0,h.J1)(ld(),lv,lw,ly,lb),lD=(0,h.J1)(lp(),lI,lx,l_,lS),lR=(0,h.J1)(lf(),lI,lx,l_,lS),lF=(0,h.J1)(lh()),lU=(0,h.J1)(lg(),lY,lA,lC,lk),lP=(0,h.J1)(lm(),lY,lA,lC,lk);function lO(e){return function(n){return(0,tS._)(function(){var t,r;return(0,tY.YH)(this,function(i){switch(i.label){case 0:return[4,null===tA.V||void 0===tA.V?void 0:tA.V.query({query:e,variables:n||void 0})];case 1:if(null==(t=i.sent())?void 0:t.data)return[2,t.data];throw Error(null==t||null==(r=t.error)?void 0:r.message)}})})()}}var lT=t(97858);function lL(e,n){var t={};for(var r in n)"function"==typeof n[r]&&(t[r]=function(e,n){return function(){for(var t=arguments.length,r=Array(t),i=0;i<t;i++)r[i]=arguments[i];var o=!0,a=!1,l=void 0;try{for(var u,c=e[Symbol.iterator]();!(o=(u=c.next()).done);o=!0)(0,u.value)()}catch(e){a=!0,l=e}finally{try{o||null==c.return||c.return()}finally{if(a)throw l}}return n.apply(void 0,(0,eA._)(r))}}(e,n[r]));return t}function lM(e,n){return function(){var t=e.store.get(e.extensionStateAtom),r=!0,i=!1,o=void 0;try{for(var a,l=n[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var u=a.value;if(!t.scopes.has(u)){var c="Scope not declared in extension.json: ".concat(u);e.logger.warn("".concat(c,". In the future this will throw an error"))}}}catch(e){i=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}}}var lG=ec.ZU.Record(ec.ZU.String(),ec.ZU.String({minLength:1})),lN=t(30238);function lz(){var e=(0,f._)(["\n  query ExtensionApiAuthToken($installationId: String!) {\n    extensionInstallationById(id: $installationId) {\n      ... on ExtensionInstallation {\n        id\n        token\n      }\n    }\n  }\n"]);return lz=function(){return e},e}var lH=(0,h.J1)(lz());function lB(e){return{registerCommand:function(n,t){return(0,tS._)(function(){var r,i,o;return(0,tY.YH)(this,function(a){switch(a.label){case 0:if(t)return[3,2];return e.logger.warn("registerCommand: calling registerCommand with a single argument is deprecated. Pass a {commandId, contributions} object as the first command."),r=n,[4,(0,aP.c)(r,e)];case 1:if(!(o=a.sent()).data.id)throw Error("Command: expected id to be defined");if(!("contributions"in o.data))throw Error("Command: In ".concat(o.data.id,", contributions should be an array"));return 0===o.data.contributions.length&&e.logger.warn("Command: ".concat(o.data.id," has no contributions")),(i={commandId:o.data.id,contributions:o.data.contributions}).contributions||(e.logger.warn("Command: '".concat(o.data.id,"' has no contributions")),i.contributions=[]),[3,4];case 2:return i=n,r=t,[4,(0,aP.c)(r,e)];case 3:o=a.sent(),a.label=4;case 4:return e.store.set(a7.Pw,{extensionStateAtom:e.extensionStateAtom,createCommand:{id:(0,a_.eb)(i.commandId),contributions:i.contributions,create:function(){return(0,tS._)(function(){return(0,tY.YH)(this,function(e){return[2,o]})})()}}}),[2]}})})()},registerCreateCommand:function(n,t){return(0,tS._)(function(){var r,i;return(0,tY.YH)(this,function(o){if(!n.commandId||""===n.commandId)throw Error("Attempted to register command without id");if(!n.contributions||!Array.isArray(n.contributions))throw Error("Command: In ".concat(n.commandId,", contributions should be an array"));return 0===n.contributions.length&&e.logger.warn("Command: ".concat(n.commandId," has no contributions")),(r=n.contributions.filter(function(e){return!(e in a3.P)})).length>0&&e.logger.warn("Command: ".concat(n.commandId," has unrecognized contributions: ").concat(r.join(", "),". Valid contributions are ").concat(Object.values(a3.P))),i={id:(0,a_.eb)(n.commandId),contributions:n.contributions,create:function(n){var r=n.path;return(0,tS._)(function(){var n;return(0,tY.YH)(this,function(i){switch(i.label){case 0:return[4,Promise.race([t({path:r}),new Promise(function(e){return setTimeout(function(){return e(null)},50)})])];case 1:if(null===(n=i.sent()))return[2,null];return[2,(0,aP.c)(n,e)]}})})()}},e.store.set(a7.Pw,{extensionStateAtom:e.extensionStateAtom,createCommand:i}),[2]})})()}}}function lW(e){return function(){if(!e.store.get(e.extensionStateAtom).enableExperimentalApi)throw Error("Experimental APIs are not enabled. (If you are the developer, please add the `experimental-api` scope to your extension.json)")}}var lj=t(88846);function l$(e){return e.error?{error:e.error,success:!1}:{success:!0,error:null}}var lq=t(83792),lV=t(34475),lK=t(52853),lZ=function(e,n){var t=e.extension,r=n.showMessage,i=n.hideMessage,o=n.hideAllMessages,a=function(e){return function(n){var i,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4e3,a=arguments.length>2?arguments[2]:void 0,s=Date.now();s-u>=6e4&&(u=s,l=0);var d=null!=(i=t.manifest.name.trim())?i:"Unknown Extension";l<10?(r({content:(0,c.FD)(c.FK,{children:[n,(0,c.Y)("div",{children:(0,c.Y)(aA.EY,{variant:"small",children:d})})]}),type:e,time:o>1e4?1e4:o,style:a}),l++):lK.vF.error("Extension reached showMessage throttle limit",{extensionId:t.extensionId,extensionName:t.manifest.name,content:n})}},l=0,u=Date.now();return{showConfirm:a("confirm"),showError:a("error"),showNotice:a("notice"),showWarning:a("warning"),hideMessage:i,hideAllMessages:o}},lJ=t(68785),lQ=t(8444);function lX(e){var n=e.extension,t=e.sandboxUrl,r=e.sandboxTitle,i=e.paneId,o=e.environmentAPIs,a=e.filePath,l=(0,d.useRef)(null),c=(0,er.A)(),s=(0,aS.T)(),f=(0,o1.A)(),h=(0,d.useRef)(),g=(0,lJ.p9)(),m=(0,aU.X_)(null==n?void 0:n.installationId),v=(0,lQ.D)(),w=(0,d.useRef)(v),y=(0,d.useRef)([]);w.current=v;var b=(0,$.A)(function(){return{}},[]),x=(0,aG.A)(f.container),_=(0,u._)((0,d.useState)(!1),2),S=_[0],Y=_[1];(0,d.useEffect)(function(){x===aT.KN.CONNECTED&&Y(!0)},[x]),(0,d.useEffect)(function(){y.current.forEach(function(e){return e(v.theme)})},[v.theme]),(0,d.useEffect)(function(){return function(){h.current&&h.current()}},[]);var A=(0,d.useCallback)(function(){try{var e=new URL(t);if("https:"===e.protocol)return!0;return!1}catch(e){return!1}},[t]),I=(0,d.useCallback)(function(){l.current&&A()&&n&&m&&s&&(h.current&&h.current(),h.current=function(e){var n=e.extensionIframe,t=new URL(n.src).origin,r=function(e){var n,t,r,i,o,a,l,u,c,s,d,f=e.filePath,h=e.replId,g=e.environmentAPIs,m=e.logger.createLogger({api:"debug"});return(0,r9._)((0,p._)({filePath:f},(n=e.services.fs,t=e.logger.createLogger({api:"fs"}),lL([lM(e,["read"])],(0,p._)({readFile:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf8";return(0,tS._)(function(){var r,i;return(0,tY.YH)(this,function(o){switch(o.label){case 0:return r=(0,lj.Fd)(e),[4,n.readFile(r)];case 1:var a;if((i=o.sent()).error)return[2,{error:i.error,content:null}];return[2,{error:null,content:(a=i.content,"utf8"===t?a.toString():"binary"===t?a.toBuffer():a)}]}})})()},readDir:function(e){return(0,tS._)(function(){var t,r;return(0,tY.YH)(this,function(i){switch(i.label){case 0:return t=(0,lj.Fd)(e),[4,n.readDir(t)];case 1:if((r=i.sent()).error)return[2,{error:r.error,children:null}];return[2,{error:null,children:r.children}]}})})()},watchFile:function(e,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"binary",o=(0,lj.Fd)(e);(0,ix.m6)(o)&&t.warn("Extension used watchFile on a text file. This works, but watchTextFile is preferred.");var a=n.watchFile(o,{onChange:function(e){if("utf8"===i)return void r.onChange(e.toString("utf8"));r.onChange(e.asBuffer)},onError:function(e){r.onError(e.message)},onMoveOrDelete:function(e){r.onMoveOrDelete({eventType:e.eventType,node:e.node})}});return a1(function(){a()})},watchDir:function(e,t){var r=(0,lj.Fd)(e),i=n.watchDir(r,{onChange:function(n){t.onChange(n.map(function(n){return{path:(0,lj.me)(e)+n.filename,type:n.type}}))},onError:function(e){t.onError(e)},onMoveOrDelete:function(e){t.onMoveOrDelete(e)}});return a1(function(){i()})}},lL([lM(e,["write-exec"])],{createDir:function(e){return(0,tS._)(function(){var t;return(0,tY.YH)(this,function(r){switch(r.label){case 0:return t=(0,lj.Fd)(e),[4,n.createDir(t)];case 1:return[2,l$(r.sent())]}})})()},deleteDir:function(e){return(0,tS._)(function(){var t;return(0,tY.YH)(this,function(r){switch(r.label){case 0:return t=(0,lj.Fd)(e),[4,n.deleteDir(t)];case 1:return[2,l$(r.sent())]}})})()},writeFile:function(e,t){return(0,tS._)(function(){var r,i,o;return(0,tY.YH)(this,function(a){switch(a.label){case 0:if(r=(0,lj.Fd)(e),"string"!=typeof t)return[3,1];return i=t,[3,4];case 1:if(!(0,az._)(t,Blob))return[3,3];return o=oV.A.from,[4,t.arrayBuffer()];case 2:return i=o.apply(oV.A,[a.sent()]),[3,4];case 3:i=oV.A.from(t),a.label=4;case 4:return[4,n.writeFile(r,i)];case 5:return[2,l$(a.sent())]}})})()},deleteFile:function(e){return(0,tS._)(function(){var t;return(0,tY.YH)(this,function(r){switch(r.label){case 0:return t=(0,lj.Fd)(e),[4,n.deleteFile(t)];case 1:return[2,l$(r.sent())]}})})()},copyFile:function(e,t){return(0,tS._)(function(){var r;return(0,tY.YH)(this,function(i){switch(i.label){case 0:return r=(0,lj.Fd)(e),[4,n.copyFile(r,t)];case 1:return[2,l$(i.sent())]}})})()},move:function(e,t){return(0,tS._)(function(){var r,i,o;return(0,tY.YH)(this,function(a){switch(a.label){case 0:return r=(0,lj.Fd)(e),[4,n.stat(r)];case 1:if(!(i=a.sent()).exists)return[2,{error:"File or directory does not exist",success:!1}];if(i.type!==tQ.pt.File)return[3,3];return[4,n.moveFile(r,t)];case 2:return o=a.sent(),[3,5];case 3:return[4,n.moveDir(r,t)];case 4:o=a.sent(),a.label=5;case 5:return[2,l$(o)]}})})()},watchTextFile:function(e,r){(0,ix.m6)(e)||t.warn("It appears that you are trying to use watchTextFile on a non-OT file. Please use fs.watchFile instead");var i=n.watchTextFile(e,{onReady:function(e){var n=e.fetchChanges,t=e.initialContent,i=e.transformSelection,o=e.updateSelections,a=e.version,l=e.writeChange;r.onReady(a1({writeChange:l,fetchChanges:n,initialContent:t,version:a,transformSelection:i,updateSelections:o}))},onChange:function(e){var n=e.latestContent,t=e.changeSource,i=e.changes,o=e.version;return(0,tS._)(function(){return(0,tY.YH)(this,function(e){return r.onChange({latestContent:n.toString(),version:o,changeSource:t,changes:i.toJSON()}),[2]})})()},onError:function(e){r.onError(e.message)},onMoveOrDelete:function(e){r.onMoveOrDelete({eventType:e.eventType,node:e.node})}});return a1(function(){i()})}})))),function(e){var n=e.services.container,t=null;function r(){return(0,tS._)(function(){var e;return(0,tY.YH)(this,function(r){switch(r.label){case 0:if(t)return[2];return[4,n.exec("bash","-c","echo $REPLIT_DB_URL")];case 1:if((e=r.sent()).error||!e.output)throw Error("unable to find REPLIT_DB_URL");return t=e.output.trim(),[2]}})})()}return lL([lM(e,["repldb:read"])],(0,p._)({getReplDbValue:function(e){return(0,tS._)(function(){return(0,tY.YH)(this,function(i){switch(i.label){case 0:return[4,r()];case 1:return i.sent(),[4,n.exec("curl","-s","".concat(t,"/").concat(e))];case 2:return[2,i.sent().output]}})})()},listReplDbKeys:function(e){return(0,tS._)(function(){var i;return(0,tY.YH)(this,function(o){switch(o.label){case 0:return[4,r()];case 1:return o.sent(),[4,n.exec("curl","-s","".concat(t,"?prefix=").concat(e))];case 2:if((i=o.sent()).error||!i.output)return[2,{error:i.error}];return[2,{keys:i.output.split("\n")}]}})})()}},lL([lM(e,["repldb:write"])],{setReplDbValue:function(e,i){return(0,tS._)(function(){return(0,tY.YH)(this,function(o){switch(o.label){case 0:return[4,r()];case 1:return o.sent(),[4,n.exec("curl",t,"-s","-d","".concat(e,"=").concat(i))];case 2:return o.sent(),[2]}})})()},deleteReplDbKey:function(e){return(0,tS._)(function(){var i;return(0,tY.YH)(this,function(o){switch(o.label){case 0:return[4,r()];case 1:return o.sent(),[4,n.exec("curl","-s","-XDELETE","".concat(t,"/").concat(e))];case 2:if((i=o.sent()).error||!i.output)return[2,{error:i.error}];return[2,{keys:i.output.split("\n")}]}})})()}})))}(e),{watchActiveFile:function(e){return a1(r.environmentAPIs.watchActiveFile(e))},openFile:(r=e).environmentAPIs.openFile,getActiveFile:function(){return r.environmentAPIs.getActiveFile()}},(i=e.getThemeContext,o=e.onThemeChange,{getCurrentTheme:function(){return i().theme},getCurrentThemeValues:function(){return i().theme.values.global},onThemeChange:function(e){var n=o(e);return a1(function(){n()})},onThemeChangeValues:function(e){var n=o(function(n){return e(n.values.global)});return a1(function(){n()})}}),lZ(e,g.toasts),{currentUser:lO(lE),userById:lO(lR),userByUsername:lO(lD),currentRepl:function(e){return lO(lU)((0,p._)({id:h},e))},replById:lO(lU),replByUrl:lO(lP)},(a=e.services.container.client(),l=e.logger.createLogger({api:"exec"}),(0,p._)({},lL([lM(e,["write-exec"])],{exec:function(e){return(0,tS._)(function(){var n,t,r,i;return(0,tY.YH)(this,function(o){switch(o.label){case 0:return[4,e.args];case 1:return n=o.sent(),[4,e.env];case 2:if(t=o.sent(),l.info("exec: [".concat(n.join(", "),"]"),{environmentVariables:t}),!lT.J(lG,t))throw Error("Invalid environment variables");return[4,e.splitStderr];case 3:return r=o.sent(),i=function(){},[2,a1({dispose:function(){i()},promise:new Promise(function(o){i=a.openChannel({service:"exec"},function(a){var u=a.channel;u.onCommand(function(n){r?n.output?e.onOutput(n.output):n.stderr&&e.onStdErr(n.stderr):n.output&&e.onOutput(n.output)}),u.request({exec:{args:n,env:t,splitStderr:!!r}}).then(function(n){if(n.ok)return void o({exitCode:0,error:null});if(n.channelClosed){var t="Channel closed before command's execution finished";e.onError(t),o({exitCode:null,error:t});return}if("open"===u.status&&i(),n.error){var r,a,l=Number(null==(a=n.error)||null==(r=a.match(/-?[0-9]+/g))?void 0:r[0]);o({exitCode:"number"==typeof l?l:null,error:n.error});return}throw Error("Unknown error")}).catch(function(n){l.error("exec: threw crosis error:\n".concat(String(n||"")));var t="exec() failed due to internal error. See console for details.";e.onError(t),o({error:t,exitCode:null})})})})})]}})})()}}))),(u=e.extension,c=e.paneId,s=e.environmentAPIs,d=!1,{activatePane:function(){c&&(s.activatePane(c),d||(d=!0,(0,oq.u4)(oq.AZ.EXTENSION_USED,{extensionId:u.extensionId,extensionName:u.manifest.name})))}})),{commands:{registerCommand:function(n,t){return(0,tS._)(function(){var r;return(0,tY.YH)(this,function(i){switch(i.label){case 0:if(!n.commandId||""===n.commandId)throw Error("Attempted to register command without id");if(!n.contributions||!Array.isArray(n.contributions))throw Error("Command: In ".concat(n.commandId,", contributions should be an array"));return 0===n.contributions.length&&e.logger.warn("Command: ".concat(n.commandId," has no contributions")),[4,(0,aP.c)(t,e)];case 1:return r=i.sent(),e.store.set(a7.Pw,{extensionStateAtom:e.extensionStateAtom,createCommand:{id:n.commandId,contributions:n.contributions,create:function(){return(0,tS._)(function(){return(0,tY.YH)(this,function(e){return[2,r]})})()}}}),[2]}})})()},registerCreateCommand:function(n,t){return(0,tS._)(function(){var r,i;return(0,tY.YH)(this,function(o){if(!n.commandId||""===n.commandId)throw Error("Attempted to register command without id");if(!n.contributions||!Array.isArray(n.contributions))throw Error("Command: In ".concat(n.commandId,", contributions should be an array"));return 0===n.contributions.length&&e.logger.warn("Command: ".concat(n.commandId," has no contributions")),(r=n.contributions.filter(function(e){return!(e in a3.P)})).length>0&&e.logger.warn("Command: ".concat(n.commandId," has unrecognized contributions: ").concat(r.join(", "),". Valid contributions are ").concat(Object.values(a3.P))),i={id:n.commandId,contributions:n.contributions,create:function(n){var r=n.path;return(0,tS._)(function(){var n;return(0,tY.YH)(this,function(i){switch(i.label){case 0:return[4,Promise.race([t({path:r}),new Promise(function(e){return setTimeout(function(){return e(a8)},50)})])];case 1:if(null===(n=i.sent()))return[2,null];if(n===a8)return e.logger.warn("Command took too long to create. When using registerCreateCommand, you must return a command within ".concat(50,"ms")),[2,null];return[2,(0,aP.c)(n,e)]}})})()}},e.store.set(a7.Pw,{extensionStateAtom:e.extensionStateAtom,createCommand:i}),[2]})})()}},experimental:(0,r9._)((0,p._)({},lL([lW(e)],{hasExperimentalApi:function(){return!0}})),{editor:lL([lW(e)],(0,p._)({},{getPreferences:function(){return(0,tS._)(function(){var e,n,t,r;return(0,tY.YH)(this,function(i){switch(i.label){case 0:return[4,null===tA.V||void 0===tA.V?void 0:tA.V.query({query:lF})];case 1:if(null==(t=i.sent())||null==(n=t.data)||null==(e=n.currentUser)?void 0:e.workspacePreferences)return[2,(0,lN.o)(t.data.currentUser.workspacePreferences)];throw Error(null==t||null==(r=t.error)?void 0:r.message)}})})()}})),commands:lL([lW(e)],(0,p._)({},lB(e))),auth:lL([lW(e)],(0,p._)({},{getAuthToken:function(){return(0,tS._)(function(){var n,t;return(0,tY.YH)(this,function(r){switch(r.label){case 0:if(e.extension.isLocal)return[2,[btoa(JSON.stringify({alg:"none",typ:"JWT",local:!0,key:"there-is-no-key-for-local-extensions"})),btoa(JSON.stringify({installationId:e.extension.installationId,extensionId:e.extension.extensionId,userId:e.userId,origin:"https://staging.replit.com"})),"this-is-a-locally-generated-jwt-that-will-fail-verification-to-avoid-being-used-accidentally-in-prod-so-please-check-the-header-for-whether-this-is-a-local-extension"].join(".")];return[4,null===tA.V||void 0===tA.V?void 0:tA.V.query({query:lH,variables:{installationId:e.extension.installationId}})];case 1:if(!(null==(n=r.sent())?void 0:n.data))throw Error("Failed to authenticate: something went wrong");if("NotFoundError"===(t=n.data.extensionInstallationById).__typename)throw Error("Failed to authenticate: invalid installation ID");if("ExtensionInstallation"!==t.__typename||!t.token)throw Error("Failed to authenticate: something went wrong");return[2,t.token]}})})()}})),internal:lL([lW(e)],(0,p._)({},lB(e)))}),internal:function(e){var n,t,r;return e.store.get(e.extensionStateAtom).enableInternalApi?{hasInternalApi:function(){return!0},ghostwriter:{},container:(n=e.services.container,{getConnectionState:function(){return n.getConnectionState()},onConnectionStateChanged:function(e){var t=n.onConnectionStateChanged(e);return a1(function(){t()})}}),layout:{revealOrInsertTool:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=e.logger.createLogger({api:"revealOrInsertTool"});if(!e.extension.manifest.tools)return void t.warn("No tools defined in extension manifest");if(e.extension.manifest.tools.length<n+1)return void t.warn("Tool index out of bounds");var r=e.extension.manifest.tools[n],i=r.name||e.extension.manifest.name,o=r.handler;e.environmentAPIs.revealOrInsertTool({extensionId:e.extension.extensionId,installationId:e.extension.installationId,baseUrl:e.extension.baseUrl,path:o,name:i})},getLayoutState:function(){return e.environmentAPIs.getLayoutState()},setLayoutState:function(n){return e.environmentAPIs.setLayoutState(n)}},secrets:(t=e.services.secrets,{setSecret:function(e){return(0,tS._)(function(e){var n,r;return(0,tY.YH)(this,function(i){switch(i.label){case 0:return n=e.key,r=e.value,[4,t.addEntries([{key:n,value:r}])];case 1:return i.sent(),[2,(0,lq.Ok)(!0)]}})}).apply(this,arguments)},getSecret:function(e){return(0,tS._)(function(){var n;return(0,tY.YH)(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,t.read()];case 1:return[2,lq.Ok.apply(void 0,[r.sent().get(e.key)])];case 2:return n=r.sent(),[2,(0,lq._)(n)];case 3:return[2]}})})()},getReferenceCode:function(e){return(0,tS._)(function(){return(0,tY.YH)(this,function(n){return[2,(0,lV.M)(e.filePath,e.key)]})})()}}),dotReplit:{getConfig:(r=e.services.dotReplit).getConfig,update:r.updateDotReplit},ssh:{getSshConfig:function(){return(0,tS._)(function(){return(0,tY.YH)(this,function(n){return[2,e.environmentAPIs.getSshConfig()]})})()}},commands:lB(e)}:null}(e),debug:{info:function(e,n){return m.info(e,n)},warn:function(e,n){return m.warn(e,n)},error:function(e,n){return m.error(e,n)}},handshake:function(n){return(0,tS._)(function(){var t,r,i,o;return(0,tY.YH)(this,function(a){switch(a.label){case 0:return[4,null==n?void 0:n.clientName];case 1:return r=null!=(t=a.sent())?t:"(unset)",[4,null==n?void 0:n.clientVersion];case 2:return o=null!=(i=a.sent())?i:"(unset)",(0,oq.u4)(oq.AZ.EXTENSION_SANDBOX_INITIALIZED,{clientName:r,clientVersion:o,extensionId:e.extension.extensionId,extensionName:e.extension.manifest.name,installationId:e.extension.installationId}),(0,tS._)(function(){var n,t,i;return(0,tY.YH)(this,function(a){switch(a.label){case 0:if(!e.extension.isLocal||"@replit/extensions"!==r)return[2];return[4,e.services.container.exec("sh","-c","npm view @replit/extensions --json version 2>/dev/null")];case 1:if((t=a.sent()).error)throw t.error;if(!t.output)throw Error("No output from npm");if((i=JSON.parse(null==(n=t.output)?void 0:n.trim()))===o)return[2];return e.logger.warn("There is a new version of @replit/extensions available. You are using ".concat(o,", but the latest version is ").concat(i),{clientVersion:o,latestVersion:i}),[2]}})})(),[2,{success:!0}]}})})()}})}(e);if(!n.contentWindow)throw Error("No contentWindow");var i=aZ(r,function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:self,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"*";return{postMessage:function(n,r){e.postMessage(n,t,r)},addEventListener:n.addEventListener.bind(n),removeEventListener:n.removeEventListener.bind(n)}}(n.contentWindow,self,t),{origin:t,source:n.contentWindow}),o=function(r){if(r.origin===t&&n.contentWindow===r.source){var i=r.data;i.payload&&e.logger.warn("Extension sent deprecated postMessage",i)}};return window.addEventListener("message",o),function(){i(),window.removeEventListener("message",o)}}({extension:n,extensionIframe:l.current,services:f,paneId:i,replId:c,getThemeContext:function(){return w.current},onThemeChange:function(e){return y.current.push(e),function(){y.current.splice(y.current.indexOf(e),1)}},store:g,extensionStateAtom:m,environmentAPIs:o,filePath:a,logger:n.logger.createLogger({sandboxUrl:t,sandboxTitle:r}),userId:s,ghostwriter:b}))},[s,w,f,A,i,g,m,o,c,a,n,t,r,b]);return{isValidExtensionPaneUrl:A,didConnectOnce:S,getIframeProps:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,r9._)((0,p._)({title:r,src:t},aL.A,e),{ref:(0,aM.P)([l,e.ref],{breadcrumb:"client/workspace/extensions/sandbox/useExtensionSandbox.tsx:191"}),onLoad:function(n){I(),e.onLoad&&e.onLoad(n)}})},reloadSandbox:(0,d.useCallback)(function(){if(l.current){var e=l.current.src;l.current.src=e}},[])}}function l0(e){var n=e.extension,t=e.environmentAPIs;if(!n.manifest.background)throw Error("ExtensionBackground loaded without a background script defined in manifest");var r=(0,aU.X_)(n.installationId),i=lX({extension:n,sandboxUrl:(0,aO.sU)(n.baseUrl,n.manifest.background.page),sandboxTitle:"Extension Background: "+n.manifest.name,environmentAPIs:t,paneId:null,filePath:null}),o=i.didConnectOnce,a=i.isValidExtensionPaneUrl,l=i.getIframeProps;return a()&&o&&r?(0,c.Y)("iframe",(0,p._)({},l({css:{width:"0px",height:"0px",border:"none"}}))):null}var l1=t(60671),l2=t(2078),l4=t(47092),l5=t(12978),l7=t(92301);function l3(){var e,n,t,r=(0,er.A)(),i=(0,aS.T)(),o=(0,o1.A)().container,a=(0,aF.A)(o).url,l=(0,l1.oR)(),s=(0,aU.Sc)(),f=oD(),h=(0,l2.yb)(),m=(0,aU.hS)(),v=(0,l2.iD)();(0,l1.Ju)();var w=(0,aU.Ot)(),y=aR(),b=(0,u._)((0,d.useState)(!1),2),x=b[0],_=b[1];(0,d.useEffect)(function(){r&&i&&v({replId:r,userId:i})},[r,i,v]);var S=(0,a7.xx)(),Y=rg(nw);(0,d.useEffect)(function(){Y(S)},[S,Y]);var A=rg(rX);n=(e=(0,p._)({},rV,void 0),g.I(rK,e)).data,t=rg(rJ),(0,d.useEffect)(function(){var e;(null==n||null==(e=n.currentUser)?void 0:e.filetypeAssociations)&&t(n.currentUser.filetypeAssociations)},[n,t]);var I=rf(rQ),C=rg(rQ),k=function(e){var n=e.filterUser;return function(e){var t=e.active;return(0,tS._)(function(){var e,o;return(0,tY.YH)(this,function(a){switch(a.label){case 0:if(!t)return[2,[]];return[4,null===tA.V||void 0===tA.V?void 0:tA.V.query({query:ax,variables:{replId:r,userId:n?i:void 0}})];case 1:if(!(e=a.sent())||e.error||!(o=e.data.extensionList))return[2,[]];return[2,o.map(function(e){var n;return{match:oK.G2,data:{type:"action",label:e.name,icon:(0,c.Y)(l7.A,{}),description:null!=(n=e.description)?n:"",run:function(){e.url&&(e.installation?m({installationId:(0,a_.qq)(e.installation.id)}):s({replId:r,extensionId:(0,a_.PM)(e.id)}))}}}})]}})})()}},E=(0,a7.Zp)(a3.P.CommandBar);return am({data:{type:"group",key:"Extensions",description:"Commands from Extensions"},commands:function(){return(0,tS._)(function(){var e;return(0,tY.YH)(this,function(n){switch(n.label){case 0:return e=[{data:{}}],[4,Promise.all(E.map(function(n){return(0,tS._)(function(){var t;return(0,tY.YH)(this,function(r){switch(r.label){case 0:return[4,n.create({path:e})];case 1:if(!(t=r.sent()))return[2,null];return[2,(0,aP.l)(t,{path:e})]}})})()}))];case 1:return[2,n.sent().filter(Boolean)]}})})()}},{enabled:!0}),am({match:oK.G2,commands:function(e){return e.active||""!==e.searchQuery?[{match:oK.G2,data:{type:"action",label:"Extension Devtools",icon:(0,c.Y)(at.A,{}),description:"Manage and deploy this Repl as an extension",run:function(){f({pane:{type:"extensionDevtools"}})}}},{match:oK.G2,data:{type:"action",label:"URL",icon:(0,c.Y)(at.A,{}),description:"Add an extension by URL",run:function(){_(!0)}}},{match:oK.G2,data:{type:"action",label:"From this Repl",icon:(0,c.Y)(at.A,{}),description:"Load this Repl as an extension",run:function(){a&&h(a)}}},{match:oK.G2,data:{type:"context",label:"My Extensions",icon:(0,c.Y)(l7.A,{}),description:"Browse extensions you have created"},commands:k({filterUser:!0})},{match:oK.G2,data:{type:"action",label:"Docs",icon:(0,c.Y)(l5.A,{}),description:"Read the Extensions docs",run:function(){f({pane:{type:"docs",data:{url:tx.ik.EXTENSIONS}}})}}}]:[]},data:{type:"context",label:"Extensions",icon:(0,c.Y)(l7.A,{}),description:"Manage extensions"}},{enabled:l}),(0,c.FD)(c.FK,{children:[(0,c.Y)(ap.a,{isOpen:x,onRequestClose:function(){return _(!1)},children:(0,c.Y)(l4.A,{prompt:"Add an extension by URL",desc:"Insert extension url",placeholder:"https://example-extension.replit.app",type:"text",onCancel:function(){return _(!1)},onConfirm:function(e){h(e)}})}),(0,c.Y)(ap.a,{isOpen:!!I,onRequestClose:function(){return C(null)},children:I?(0,c.Y)(aC,{fileExtension:I.fileExtension,extensionId:I.extensionId,fileHandlerId:I.fileHandlerId,onCancel:function(){return C(null)},onConfirm:function(){return(0,tS._)(function(){var e;return(0,tY.YH)(this,function(n){switch(n.label){case 0:return e=I.fileExtension,[4,A({fileExtension:e,newAssociation:{extensionId:I.extensionId,fileHandlerId:I.fileHandlerId}})];case 1:return n.sent(),C(null),[2]}})})()}}):null}),w.map(function(e){return e.manifest.background?(0,c.Y)(l0,{environmentAPIs:y,extension:e},e.installationId):null})]})}var l8=t(68205),l6=t(95370),l9=t(87563);function ue(){var e=(0,o1.A)().fs,n=(0,u._)((0,d.useState)(!1),2),t=n[0],r=n[1],i=(0,u._)((0,d.useState)(!1),2),o=i[0],a=i[1],l=(0,d.useId)();(0,d.useEffect)(function(){if(!o)return e.onDiskQuotaExceeded(function(){r(!0)})},[e,o]);var s=(0,d.useCallback)(function(){r(!1)},[r]);return(0,c.Y)(ap.a,{isOpen:t,onRequestClose:s,children:(0,c.Y)(ou.S,{gap:24,children:(0,c.FD)(ou.S,{gap:24,children:[(0,c.FD)(aA.Y9,{level:3,variant:"headerDefault",children:["Oops! This Repl's disk is full"," ",(0,c.Y)(l6.A,{color:rI.LU.accentNegativeDefault,size:20})]}),(0,c.FD)(aA.EY,{variant:"subheadDefault",children:["Please free up space by deleting some files. You can open the file tree by clicking the ",(0,c.Y)(l9.A,{})," icon on the left."]}),(0,c.Y)(aA.EY,{children:"You can check how much space you are using from the Repl Resources section under the file tree."}),(0,c.FD)(ou.S,{row:!0,gap:8,tag:"label",children:[(0,c.Y)(l8.S,{id:l,checked:o,onChange:a}),(0,c.Y)(aA.EY,{variant:"small",children:"Do not show this message again for this session."})]}),(0,c.Y)(aY.$n,{onClick:s,text:"Close"})]})})})}var un=t(72279),ut=t(14737),ur=t(65426),ui=t(10796);function uo(){var e=rg(t8),n=(0,ut.A)({moveOrDeleteFile:e}),t=n.isConverging,r=n.didContentsDiverge,i=n.showMoreDetail,o=n.failedFiles,a=n.failedFilesOptions,l=n.selectedFile,u=n.setSelectedFile,s=n.reviewingPrompt,d=n.onChoice,p=n.local,f=n.remote,h=[ol.wp.minHeight("7em"),ol.wp.maxHeight("50vh"),ol.wp.overflowY("auto"),{"> div":{display:"flex",alignItems:"stretch",width:"100%",height:"100%"},"> div > .cm-editor":{flex:"1 1 auto",width:"100%"}}];return(0,c.Y)(ap.a,{css:[{maxHeight:"90%"}],preventClose:!0,maxWidth:"90%",isOpen:r,onRequestClose:function(){},children:(0,c.FD)(ou.S,{gap:24,children:[(0,c.Y)(aA.Y9,{level:3,variant:"headerDefault",children:"Replit is out of sync!"}),(0,c.FD)(aA.EY,{children:["Sometimes Replit has trouble making sure everyone's code is the same. Let us know which version of"," ",o.length>1?"these files":"this file"," you'd like to keep."," ",o.length>1?(0,c.FD)("strong",{children:["There are ",o.length," files impacted by this."]}):""]}),t?(0,c.Y)(ui.A,{}):(0,c.FD)(c.FK,{children:[a.length?(0,c.Y)(ur.l,{initialSelectedItem:a[0],selectedItem:a.find(function(e){return e.path===l}),items:a,onChange:function(e){u(e.path)}}):null,i?(0,c.FD)(ou.S,{css:[ol.wp.backgroundColor.redDimmest,ol.wp.font.code],pt:16,p:8,row:!0,gap:16,justify:"start",align:"center",children:[(0,c.Y)(aA.EY,{variant:"subheadDefault",multiline:!1,children:"Debug View"}),(0,c.FD)(aA.EY,{multiline:!1,children:["Divergence type: ",null==s?void 0:s.case]})]}):null,(0,c.FD)(ou.S,{row:!0,gap:8,children:[(0,c.FD)(ou.S,{css:[{flexBasis:0}],grow:!0,shrink:!0,children:[(0,c.Y)(aA.EY,{variant:"subheadDefault",multiline:!1,children:"My changes"}),(0,c.Y)(af.ui,{elevated:!0,grow:!0,shrink:!0,py:8,children:(0,c.Y)(ou.S,{css:h,children:(0,c.Y)(un.N,{diffViewer:p})})}),(0,c.FD)(ou.S,{pt:16,children:[(0,c.Y)(aA.EY,{css:[ol.wp.textAlign.center],children:"This might disrupt other people's work or create unexpected bugs."}),(0,c.Y)(aY.$n,{onClick:function(){d("local")},text:"Reset to Mine"})]})]}),(0,c.FD)(ou.S,{css:[{flexBasis:0}],grow:!0,shrink:!0,children:[(0,c.Y)(aA.EY,{variant:"subheadDefault",multiline:!1,children:"Shared changes"}),(0,c.Y)(af.ui,{elevated:!0,grow:!0,shrink:!0,py:8,children:(0,c.Y)(ou.S,{css:h,children:(0,c.Y)(un.N,{diffViewer:f})})}),(0,c.FD)(ou.S,{pt:16,justify:"end",children:[(0,c.Y)(aA.EY,{css:[ol.wp.textAlign.center],children:"This is the safest option and won't disrupt other's work."}),(0,c.Y)(aY.$n,{onClick:function(){d("remote")},text:"Sync to Shared",colorway:"primary"})]})]})]})]})]})})}var ua=t(4676),ul=t(98110),uu=t(49066),uc=t(44335),us=t(59978),ud=t(77337);function up(e,n){var t=(0,oe.A)(n);return(0,d.useMemo)(function(){var n,r;return n="current"in e?new us.V_(function(n){return n.next(e.current),e.subscribe(function(e){return n.next(e)})}):e,r=function(){return t.current()},new us.V_(function(e){var t=null,i=null,o=null,a=null,l=n.subscribe(function(n){null==t||t.stop(),i&&(clearTimeout(i),i=null);var l=r();if(!l&&a&&(l=a),!1===l){o=n,e.next(n);return}a=l;var u=!0===l?{}:l,c=u.snappiness,s=void 0===c?400:c,d=u.ramp,f=u.delay,h=void 0===f?0:f,g=0,m={};for(var v in n)m[v]=o&&v in o?o[v]:n[v];t=new uc.F3(function(t,r){for(var i in g+=t,n){if("number"!=typeof m[i]||"number"!=typeof n[i]){m[i]=n[i];continue}var l=m[i],u=n[i],c=l>=0&&l<=1&&u>=0&&u<=1?.001:void 0;m[i]=(0,ud.L)({current:l,target:u,elapsed:g,delta:t,snappiness:s,ramp:d,minStepSize:c})}e.next((0,p._)({},m)),n$()(m,n)&&(a=null,o=n,r())}),h>0?i=setTimeout(function(){i=null,null==t||t.start()},h):t.start()});return function(){null==t||t.stop(),i&&clearTimeout(i),l()}})},[e,t])}var uf=t(58137),uh=t(32343),ug=t(19564),um=t(62732),uv=t(39550),uw=t(42793),uy=t(97877),ub=t(38848),ux=t(7776);function u_(e){return(0,c.Y)(oc.Ay,(0,r9._)((0,p._)({},e),{children:(0,c.Y)("path",{d:"M2.47 5.53a.75.75 0 0 1 1.06-1.06l16 16a.75.75 0 1 1-1.06 1.06l-16-16ZM1.291 11.215a7.593 7.593 0 0 1 1.42-3.675l1.077 1.077a6.024 6.024 0 0 0-.376 6.128 6.352 6.352 0 0 0 2.402 2.554 6.73 6.73 0 0 0 3.462.951h4.146l1.5 1.5H9.277a8.23 8.23 0 0 1-4.234-1.164 7.852 7.852 0 0 1-2.967-3.16 7.524 7.524 0 0 1-.785-4.211ZM5.828 5l1.15 1.15.02-.008a6.787 6.787 0 0 1 3.593-.263 6.62 6.62 0 0 1 3.185 1.603 6.2 6.2 0 0 1 1.81 2.962.75.75 0 0 0 .725.556h1.145c1.015 0 1.983.389 2.693 1.072a3.544 3.544 0 0 1 1.101 2.553c0 .952-.393 1.871-1.101 2.553a3.817 3.817 0 0 1-1.317.825l1.134 1.134a5.286 5.286 0 0 0 1.223-.878 5.044 5.044 0 0 0 1.561-3.634 5.044 5.044 0 0 0-1.56-3.634A5.385 5.385 0 0 0 17.455 9.5h-.593a7.725 7.725 0 0 0-2.074-3.124 8.118 8.118 0 0 0-3.907-1.968A8.287 8.287 0 0 0 5.828 5Z"})}))}var uS=(0,uw.i7)("0%,100%{opacity:1;}50%{opacity:0.25;}"),uY=(0,rC.x)({root:[ol.wp.height(20),ol.wp.width(20),ol.wp.center]}),uA=(0,rC.x)({root:[uY.root],pulseRoot:[uY.root,{animation:"".concat(uS," 2s infinite")}]});function uI(){var e=(0,uv.A)(),n=e.isSaving;return e.isOffline?(0,c.Y)(uy.m_,{tooltip:"Reconnecting, changes will be synced when you’re online",placement:"right",children:(0,c.Y)(ou.S,{css:uA.root,children:(0,c.Y)(u_,{size:16,color:rI.LU.redDefault})})}):n?(0,c.Y)(uy.m_,{tooltip:"Saving",placement:"right",children:(0,c.Y)(ou.S,{css:uA.pulseRoot,children:(0,c.Y)(ub.A,{size:16,color:rI.LU.foregroundDimmest})})}):(0,c.Y)(uy.m_,{tooltip:"Saved",placement:"right",children:(0,c.Y)(ou.S,{css:uA.root,children:(0,c.Y)(ux.A,{size:16,color:rI.LU.foregroundDimmest})})})}var uC=t(9103),uk=t(81181),uE=t(30156),uD=t(73061),uR=t.n(uD),uF=(0,rI.CK)("Search.module.css",["--background-color","--input-height"]),uU={type:"context",icon:(0,c.Y)(oX.A,{}),label:"",description:"Search"};function uP(){var e,n=(0,o1.A)().fs,t=(0,tW.Sx)(),r=oU(),i=(0,o8.J)(),o=(0,d.useMemo)(function(){var e=(0,o2.g)({openFile:r,fs:n,shouldHideFile:i,getRecentFiles:t});return e.data=uU,delete e.match,e},[r,n,i,t]),a=(0,rl.p)();return(0,c.Y)(ou.S,{clsx:uR().root,style:(e={padding:a?0:void 0},(0,ty._)(e,uF.backgroundColor,a?rI.LU.surfaceBackground:uk.s),(0,ty._)(e,uF.inputHeight,"32px"),e),children:(0,c.Y)(ah.r,{fullWidth:!0,command:o,openOnInput:!0,compact:!0})})}var uO=t(45758),uT=t(88890),uL=t(66775),uM=t(91884),uG=t(80920),uN=t(27165),uz=t(96388),uH=t(62237),uB=t(98217),uW=t(91342),uj=t(83868),u$=t(42015),uq=t(39961),uV=t(48637);function uK(e){var n=e.size,t=e.iconUrl,r=e.name;return(0,c.Y)(uB.A,{src:t,width:n,height:n,alt:"Icon for file opener: ".concat(r)})}var uZ=/[*]{2}\/[*]\.([a-z0-9.]+)/,uJ=t(89534),uQ=t(16965),uX=t(95488),u0=t(47793),u1=t(41379),u2=t(58698),u4=t(84864),u5=t(39366),u7=t(71643),u3=t.n(u7),u8={id:"sidebar.toggle",name:"Toggle sidebar",description:"Opens or closes the sidebar",default:(0,ad.FM)({cmdOrCtrl:!0,shift:!0,key:"b"})},u6=(0,rI.CK)("index.module.css",["--width","--height","--transform","--border-color","--background-color","--display","--z-index","--resize-handle-width","--resize-handle-height","--resize-grip-opacity","--resize-grip-color"]),u9=(0,d.memo)(function(){var e,n,t,r,i,o,a,l,s,f,h,g,m,v,w,y,b,x,_,S,Y,A,I,C,k,E,D,R,F,U,P,O,L,M,G,N,z,H,B,W=(0,d.useRef)(null),j=oN(),$=(0,rl.p)(),q=j.view;(0,rY.d)(W,up(q,$?j.getTransitionEnabled:function(){return!1}),function(e){var n,t=$?"":uk.s,r=e.isOpen&&!$?t:"transparent";return n={},(0,ty._)(n,u6.width,e.width+"px"),(0,ty._)(n,u6.height,e.height+"px"),(0,ty._)(n,u6.transform,"translate(".concat(e.x,"px, ").concat(e.y,"px)")),(0,ty._)(n,u6.display,e.isOpen?"flex":"none"),(0,ty._)(n,u6.borderColor,r),(0,ty._)(n,u6.backgroundColor,t),(0,ty._)(n,u6.zIndex,rA.W.filetreeDragLayer.toString()),n},[$]);var V=(e=(0,er.A)(),t=(n=(0,u._)((0,d.useState)(null),2))[0],r=n[1],i=oU(),o=(0,uX.v)(),a=(0,o8.J)(!0),l=(0,d.useCallback)(function(e){return!a(e.filename)},[a]),s=(0,o1.A)().fs,f=(0,uO.g)("multiselectModifierKey").preferences,h=rg(nA),g="cmdOrCtrlKey"===f.multiselectModifierKey?"cmdOrCtrlKey":"altKey",m=(0,tW.Sx)(),v=(0,d.useCallback)(function(e){return(0,u0.J9)(e,m)},[m]),w=(0,uJ.EF)().onContextMenu,y=(0,er.A)(),b=(0,o1.A)().fs,x=oU(),_=rg(tq),S=rf(nw),Y=(0,a7.Zp)(a3.P.FiletreeContextMenu),A=rf(rJ),I=rg(rX),C=(0,T._P)({controlName:"flag-folder-downloads"}),k=(0,T._P)({controlName:"flag-direct-file-downloads"}),E=rg(rQ),D=(0,d.useCallback)(function(e){var n=e.extensionId,t=e.fileExtension,r=e.fileHandlerId,i=A[t];i&&i.extensionId===n&&i.fileHandlerId===r||E(e)},[E,A]),R=(0,d.useCallback)(function(e,n){var t=e.path,r=[{data:{type:"group",key:"rename"},commands:function(){return[(0,uN.ep)(function(){return n.rename(t)})]}}];(0,ix.m6)(t)&&r.push({data:{type:"group",key:"saveFile"},commands:function(){return[(0,uN.tH)(function(){return(0,tS._)(function(){return(0,tY.YH)(this,function(e){switch(e.label){case 0:return[4,b.flush(new Set([t]),tQ.sT.MANUAL_SAVE)];case 1:return e.sent(),[2]}})})()})]}}),r.push({data:{type:"group",key:"open"},commands:function(){return function(e){var n=e.path,t=e.getSelectedNodes,r=e.openFile,i=[{type:tQ.pt.File,path:n}],o=!0,a=!1,l=void 0;try{for(var s,d=t()[Symbol.iterator]();!(o=(s=d.next()).done);o=!0){var p=(0,u._)(s.value,2),f=p[0],h=p[1];h!==tQ.pt.Directory&&f!==n&&i.push({path:f,type:h})}}catch(e){a=!0,l=e}finally{try{o||null==d.return||d.return()}finally{if(a)throw l}}var g=i.length,m=1===g?"Open":"Open ".concat(g," files");return[{label:m,icon:(0,c.Y)(uj.A,{}),run:function(){var e=!0,n=!1,t=void 0;try{for(var o,a=i[Symbol.iterator]();!(e=(o=a.next()).done);e=!0){var l=o.value;r({path:l.path,newTab:!0})}}catch(e){n=!0,t=e}finally{try{e||null==a.return||a.return()}finally{if(n)throw t}}}},{label:m+" in split",icon:(0,c.Y)(op,{}),run:function(){var e=(0,eY._)(i),n=e[0],t=e.slice(1);r({path:n.path,newPane:!0});var o=!0,a=!1,l=void 0;try{for(var u,c=t[Symbol.iterator]();!(o=(u=c.next()).done);o=!0){var s=u.value;r({path:s.path,newTab:!0})}}catch(e){a=!0,l=e}finally{try{o||null==c.return||c.return()}finally{if(a)throw l}}}}].map(function(e){var n=e.label,t=e.icon,r=e.run;return{match:oK.G2,data:{type:"action",label:n,icon:t,run:r}}})}({path:t,getSelectedNodes:n.getSelectedNodes,openFile:x})}});var i=function(e){var n=function(e){var n=r[e],i=(0,uc.tL)(n.glob);if(!i||!i.exec(t))return"continue";var l=uZ.exec(n.glob),u=n.icon?n.icon:n.extension.manifest.icon,s=n.name?n.name:n.extension.manifest.name,p=u?(0,aO.sU)(n.extension.baseUrl,u):null;d.push({match:oK.G2,data:{type:"action",icon:p?(0,c.Y)(uK,{size:16,name:s,iconUrl:p}):(0,c.Y)(uj.A,{}),label:"Open with "+s,run:function(){l&&a({extensionId:n.extension.extensionId,fileHandlerId:e,fileExtension:l[1]}),o({path:t,opener:{paneType:"extension",supports:function(){return!0},extensionFileHandler:n}})}}})},t=e.path,r=e.handlers,i=e.filetypeAssociations,o=e.openFile,a=e.requestAssociateFiletype,l=e.associateFiletype,u=(0,i_.QC)(t),s=u?i[u]:null,d=[];for(var p in r)n(p);return s&&u&&d.length&&d.push({match:oK.G2,data:{icon:(0,c.Y)(uV.A,{}),type:"action",label:"Use default opener",run:function(){l({fileExtension:u,newAssociation:null})}}}),d}({path:t,handlers:S,filetypeAssociations:A,requestAssociateFiletype:D,associateFiletype:I,openFile:x});return i.length&&r.push({data:{type:"group",key:"extensions"},commands:function(){return i}}),r.push({data:{type:"group",key:"copy"},commands:function(){return(0,uN.kx)(t)}}),r.push((0,uN.Z4)(function(){return(0,tS._)(function(){var e;return(0,tY.YH)(this,function(r){switch(r.label){case 0:e=null,r.label=1;case 1:return r.trys.push([1,3,,4]),[4,(0,uM.A)(t,b)];case 2:return e=r.sent(),[3,4];case 3:return r.sent(),[2,{type:"error",message:"Error duplicating file"}];case 4:return(0,uz.A)({replId:y,action:"duplicated",fileType:tQ.pt.File}),n.rename(e),[2]}})})()})),r.push((0,uG.Gp)(t,b,k)),r.push({data:{type:"group",key:"deleteFile"},commands:function(){return[(0,uN.tE)(function(){return n.deleteNodes(e)})]}}),r.push({data:{type:"group",key:"extensions"},commands:function(){return(0,tS._)(function(){var e;return(0,tY.YH)(this,function(n){switch(n.label){case 0:return e=[{data:{filePath:t,fileType:tQ.pt.File}}],[4,Promise.all(Y.map(function(n){return(0,tS._)(function(){var t;return(0,tY.YH)(this,function(r){switch(r.label){case 0:return[4,n.create({path:e})];case 1:if(!(t=r.sent()))return[2,null];return[2,(0,aP.l)(t,{path:e})]}})})()}))];case 1:return[2,n.sent().filter(Boolean)]}})})()}}),r},[S,A,D,I,x,b,k,y,Y]),F=(0,uH.xu)(),U=(0,uH.xi)(),P=(0,d.useCallback)(function(e,n){var t=e.path,r=t===uL.Dl,i=r?[]:[{data:{type:"group",key:"rename"},commands:function(){return[(0,uN.ep)(function(){return n.rename(e.path)})]}}];return i.push({data:{type:"group",key:"search"},commands:function(){var n;return[(n=e.path,{match:oK.G2,data:{type:"action",icon:(0,c.Y)(oX.A,{}),label:"Search this directory",run:function(){_({pane:{type:"searchReplace",data:{initialIncludeGlob:"".concat(n,"/**")}},edge:"right"})}}})]}}),i.push.apply(i,(0,eA._)((0,uN.DN)(function(t){return n.create(t,e.path)}))),i.push({data:{type:"group",key:"openShell"},commands:function(){return[{match:oK.G2,data:{type:"action",label:"Open shell here",icon:(0,c.Y)(uq.A,{}),run:function(){_({pane:{type:"shell",data:{initialPwd:t}},edge:"left"})}}}]}}),r||i.push({data:{type:"group",key:"copy"},commands:function(){return(0,uN.kx)(t)}}),n.getExpandedDirs()&&i.push({match:oK.G2,data:{icon:(0,c.Y)(uW.A,{}),type:"action",label:"Collapse "+(r?"all":"child folders"),run:function(){var e=n.getExpandedDirs(t);e&&n.collapse((0,eA._)(e))}}}),!r&&C&&i.push({data:{type:"group",key:"downloadFolder"},commands:function(){return[(0,uG.QW)(t)]}}),r||i.push({data:{type:"group",key:"deleteFile"},commands:function(){return[(0,uN.tE)(function(){return n.deleteNodes(e)})]}}),r&&i.push({data:{type:"group",key:"hiddenFiles"},commands:function(){return[{match:oK.G2,data:{type:"action",label:(U?"Hide":"Show")+" hidden files",icon:U?(0,c.Y)(u$.A,{}):(0,c.Y)(uj.A,{}),run:function(){F(!U)}}}]}}),i.push({data:{type:"group",key:"extensions"},commands:function(){return(0,tS._)(function(){var e;return(0,tY.YH)(this,function(n){switch(n.label){case 0:return e=[{data:{dirPath:t,fileType:tQ.pt.Directory}}],[4,Promise.all(Y.map(function(n){return(0,tS._)(function(){var t;return(0,tY.YH)(this,function(r){switch(r.label){case 0:return[4,n.create({path:e})];case 1:if(!(t=r.sent()))return[2,null];return[2,(0,aP.l)(t,{path:e})]}})})()}))];case 1:return[2,n.sent().filter(Boolean)]}})})()}}),i},[U,F,Y,_,C]),O=(0,d.useCallback)(function(e,n){return{data:{type:"context",label:"Search actions",icon:(0,c.Y)(oX.A,{})},commands:function(){return e.type===tQ.pt.Directory?P(e,n):R(e,n)}}},[R,P]),L=(0,uH.Qd)(),M=(0,ug.u)({fs:s,filter:l,fontSize:13,onFileDoubleClick:function(e,n){h(n)},onFileSelect:function(e){var n=e.path,t=e.type,r=e.event,a="click"===t&&"altKey"===g?(0,uT.T$)(r):r.altKey;i({path:n,newTab:a}),o(n,{newTab:a})},onCreate:function(e){e.type===tQ.pt.File&&i({opener:{paneType:(0,e6.QY)({path:e.path})},path:e.path})},multiselectModifierKey:g,onConflicts:function(e){return r({type:"conflicts",data:e})},onDeleteNodes:function(e){return r({type:"deleteNode",data:e})},onContextMenu:function(e,n){return w(e,{command:O(n,M)})},autocomplete:v,localCacheKey:e+":sidebar",onFileRenameStart:L,onFileRenameEnd:function(){return L(null)}}),G=(0,uQ._)(),(0,d.useEffect)(function(){return M.setFileStatus(G)},[M,G]),N=(0,tW.dm)(),(0,d.useEffect)(function(){var e=function(e){return(0,tS._)(function(){return(0,tY.YH)(this,function(n){switch(n.label){case 0:if(null===e)return M.select(null),[2];return[4,M.select({path:e,type:tQ.pt.File})];case 1:if(n.sent(),N.current!==e)return[2];return M.scrollToPath(e),[2]}})})()};return e(N.current),N.subscribe(e)},[N,M]),z=oN(),H=(0,tW.Mg)(),B=(0,tW.JZ)(),(0,d.useEffect)(function(){var e=function(e){return(0,tS._)(function(){return(0,tY.YH)(this,function(n){switch(n.label){case 0:if(null===e)return[2];return z.isOpen.current||z.toggle(),[4,M.select({path:e,type:tQ.pt.File})];case 1:return n.sent(),M.scrollToPath(e),B(null),[2]}})})()};return e(H.current),H.subscribe(e)},[H,B,M,z]),{filetree:M,activeModal:t,closeModal:function(){return r(null)}}),K=V.filetree,Z=V.activeModal,J=V.closeModal;return(0,c.FD)(c.FK,{children:[(0,c.FD)(af.ui,{clsx:[u3().root,(0,ty._)({},u3().simple,$)],innerRef:W,children:[(0,c.Y)(ce,{filetree:K}),(0,c.FD)(ou.S,{clsx:u3().content,grow:!0,shrink:!0,children:[(0,c.Y)(uP,{}),(0,c.Y)(ou.S,{grow:!0,shrink:!0,dataCy:"sidebar-filetree-section",children:(0,c.Y)(ug.J,{store:K.store})}),$?null:(0,c.FD)(ou.S,{clsx:u3().footerButtons,p:4,row:!0,gap:4,justify:"end",align:"center",children:[(0,c.Y)(aY.$n,{dataCy:"filetree-add-file",size:"small",variant:"outlined",iconLeft:(0,c.Y)(u4.A,{}),text:"File",onClick:function(){K.create(tQ.pt.File)}}),(0,c.Y)(aY.$n,{size:"small",variant:"outlined",iconLeft:(0,c.Y)(u5.A,{}),text:"Folder",onClick:function(){K.create(tQ.pt.Directory)}})]})]}),(0,c.Y)(cn,{})]}),(0,c.FD)(ap.a,{isOpen:!!Z,onRequestClose:J,children:[(null==Z?void 0:Z.type)==="conflicts"?(0,c.Y)(um.A,{paths:Z.data.conflicts.map(function(e){return e.path}),onCancel:J,onConfirm:function(){var e=Z.data;"move"===e.type?K.move({nodes:e.nodes,to:e.to,overwrite:!0}):K.upload({files:e.files,parentPath:e.to,overwrite:!0}),J()}}):null,(null==Z?void 0:Z.type)==="deleteNode"?(0,c.Y)(u2.A,(0,r9._)((0,p._)({},(0,uC.D)(Z.data.nodes)),{delete:function(){return Z.data.confirm()},hideModal:J})):null]})]})});function ce(e){var n=e.filetree,t=(0,rl.p)(),r=oN().toggle,i=(0,d.useCallback)(function(){return r(!1)},[r]);return(0,c.FD)(ou.S,{clsx:u3().header,row:!0,gap:4,align:"center",pl:6,pr:4,style:t?{height:30,paddingTop:rI.LU.space6}:{},children:[(0,c.FD)(ou.S,{grow:!0,shrink:!0,row:!0,gap:4,align:"center",children:[(0,c.Y)(aA.EY,{css:u3().title,children:"Files"}),t?null:(0,c.Y)(uI,{})]}),(0,c.FD)(ou.S,{row:!0,gap:0,align:"center",children:[t?(0,c.FD)(c.FK,{children:[(0,c.Y)(u1.K0,{dataCy:"filetree-add-file",alt:"New file",onClick:function(){n.create(tQ.pt.File)},children:(0,c.Y)(u4.A,{})}),(0,c.Y)(u1.K0,{alt:"New folder",onClick:function(){n.create(tQ.pt.Directory)},children:(0,c.Y)(u5.A,{})})]}):null,(0,c.Y)(uE.U,{closeFiletree:i,filetree:n})]})]})}function cn(){var e,n=oN(),t=(0,rl.p)(),r=oH(),i=(0,uf.A)(r.agentFiletreeOrder),o=(0,d.useRef)(null);(0,rY.d)(o,n.resizeHandleView,function(e){var n;return n={},(0,ty._)(n,u6.resizeGripOpacity,e.isOpen?"1":"0"),(0,ty._)(n,u6.resizeGripColor,rI.LU.outlineDimmest),(0,ty._)(n,u6.resizeHandleWidth,e.width+"px"),(0,ty._)(n,u6.resizeHandleHeight,"24px"),n},[t]);var a=(0,d.useRef)(null);return(0,c.Y)(ou.S,{clsx:[u3().resizeHandleRoot,(e={},(0,ty._)(e,u3().right,"agent-filetree"!==i),(0,ty._)(e,u3().left,"agent-filetree"===i),e)],innerRef:o,onPointerDown:function(e){(0,uh.j)(e,{start:function(){(0,az._)(document.activeElement,HTMLElement)&&(a.current=document.activeElement),n.resize.start()},move:function(e){var t=e.delta;n.resize.update(t.x)},end:function(){var e,t;n.resize.end(),null==(t=a.current)||null==(e=t.focus)||e.call(t),a.current=null}})},align:"center",justify:"center",children:t?null:(0,c.Y)(ou.S,{clsx:u3().resizeHandleGrip})})}var ct=t(69945),cr=t.n(ct),ci=t(16583),co=t(72607),ca=t(47211),cl=t(41278),cu=t(6919),cc=t.n(cu);function cs(){var e=(0,f._)(["\n  fragment ReplEnvironmentDesktopMyReplsSearchRepl on Repl {\n    id\n    title\n    timeUpdated\n    url\n    iconUrl\n    owner {\n      ... on User {\n        id\n        username\n        image\n      }\n      ... on Team {\n        id\n        username\n        image\n      }\n    }\n  }\n"]);return cs=function(){return e},e}function cd(){var e=(0,f._)(["\n  query ReplEnvironmentDesktopMyReplsSearch($query: String, $count: Int) {\n    currentUser {\n      id\n      search {\n        repls(query: $query, count: $count) {\n          id\n          ...ReplEnvironmentDesktopMyReplsSearchRepl\n        }\n      }\n    }\n  }\n  ","\n"]);return cd=function(){return e},e}var cp=(0,h.J1)(cs()),cf=(0,h.J1)(cd(),cp),ch=t(89849),cg=t(91963),cm=t(39206),cv=t(27113),cw=t(76189),cy=(0,rC.x)({root:[ol.wp.viewStyle,ol.wp.rowWithGap(8),ol.wp.align.center,ol.wp.px(8),{textDecoration:"none"}],meta:{fontSize:10}});function cb(e){var n=e.repl,t=e.height,r=e.isActive,i=e.searchQuery,o=n.title,a=(0,d.useMemo)(function(){return i?ch.A.match(i,o):null},[i,o]);return(0,c.FD)(cc(),{href:n.url,passHref:!0,style:{height:t},css:cy.root,children:[(0,c.Y)(cm.Ay,{alt:n.title,size:32,iconUrl:n.iconUrl}),(0,c.FD)(ou.S,{grow:!0,shrink:!0,gap:2,children:[(0,c.Y)(cv.e,{text:n.title,highlight:null==a?void 0:a.ranges,dimmed:!r}),(0,c.FD)(aA.EY,{css:cy.meta,color:"dimmest",multiline:!1,children:[n.owner.username," • edited ",(0,cg.K)(n.timeUpdated)]})]})]})}var cx=t(41724),c_=t(57373),cS=t(37414),cY=t(84634),cA=t(82970),cI=["fontSize","wrapping","minimapDisplay","indentDetection","indentFormatPastes","indentIsSpaces","keyboardHandler","showFileTreeGitStatus","codeIntelligence","shellBellAudio","accessibleTerminal","webviewAutoOpenOnPortOpened","forwardPortsAutomatically","chatAudioNotification","multiselectModifierKey","codeSuggestion","chatEngine","ghostwriterModelSelection"],cC=t(54628),ck=t(41230),cE=t(53864),cD=t(26233),cR=t(25134),cF=t(91839),cU={nextTab:{id:"tabs.next",name:"Switch to next tab",default:(0,ty._)({},cF._9Z.DesktopApp,(0,ad.FM)({cmdOrCtrl:!0,shift:!0,key:"]"}))},previousTab:{id:"tabs.previous",name:"Switch to previous tab",default:(0,ty._)({},cF._9Z.DesktopApp,(0,ad.FM)({cmdOrCtrl:!0,shift:!0,key:"["}))},newTab:{id:"tabs.new",name:"New tab",description:"Opens a tab in the current active group",default:(0,ty._)({},cF._9Z.DesktopApp,(0,ad.FM)({cmdOrCtrl:!0,key:"t"}))},closeTab:{id:"tabs.close",name:"Close tab",description:"Close the current active tab",default:(0,ty._)({},cF._9Z.DesktopApp,(0,ad.FM)({cmdOrCtrl:!0,key:"w"}))},reopenClosedTab:{id:"tabs.reopenClosed",name:"Reopen closed tab",default:(0,ty._)({},cF._9Z.DesktopApp,(0,ad.FM)({cmdOrCtrl:!0,shift:!0,key:"t"}))},findFile:{id:"files.find",name:"Find file",default:(0,ad.FM)({cmdOrCtrl:!0,key:"p"})},searchFileContents:{id:"files.searchContents",name:"Search file contents",default:o4.G},run:{id:"repl.run",name:"Run Repl",default:(0,ad.FM)({cmdOrCtrl:!0,key:"Enter"})},toggleInviteDialog:{id:"repl.multiplayers",name:"See multiplayers",default:(0,ad.FM)({cmdOrCtrl:!0,key:"m"})},showShell:{id:"repl.showShell",name:"Show shell",default:(0,ad.FM)({ctrl:!0,key:"`"}),description:"Opens or reveals a Shell in a tab"},showConsole:{id:"repl.showConsole",name:"Show console",description:"Opens or reveals the Console in a tab",default:void 0},showDocs:{id:"repl.showDocs",name:"Show docs",description:"Opens or reveals the Replit Docs in a tab",default:void 0},showReplitAi:{id:"repl.showGhostwriter",name:"Show Replit AI",description:"Opens or reveals Replit AI in a tab",default:void 0},showSettings:{id:"repl.showSettings",name:"Show settings",description:"Opens or reveals the Settings tab",default:(0,ty._)({},cF._9Z.DesktopApp,(0,ad.FM)({cmdOrCtrl:!0,key:","}))},saveAllFiles:{id:"repl.saveAllFiles",name:"Save all files",description:"Forces all changes to be flushed to disk",default:void 0},showGit:{id:"repl.showGit",name:"Show git",description:"Opens or reveals the Git tool in a tab",default:void 0},toggleFloatPaneGroup:{id:"paneGroup.toggleFloat",name:"Toggle float group",description:"Floats or un-floats the current active group",default:void 0},toggleMaximizePaneGroup:{id:"paneGroup.toggleMaximize",name:"Toggle maximize group",description:"Maximizes or restores the current active group",default:void 0},removePaneGroup:{id:"paneGroup.close",name:"Close group",description:"Closes all tabs in the current active group",default:void 0},removeOthersInPaneGroup:{id:"paneGroup.closeOthers",name:"Close other tabs in group",description:"Closes all tabs except the visible one in the current active group",default:void 0},insertPaneGroupUp:{id:"paneGroup.insertUp",name:"Insert group above",description:"Adds a new group above the current active group",default:void 0},insertPaneGroupRight:{id:"paneGroup.insertRight",name:"Insert group right",description:"Adds a new group to the right of the current active group",default:void 0},insertPaneGroupLeft:{id:"paneGroup.insertLeft",name:"Insert group left",description:"Adds a new group to the left of the current active group",default:void 0},insertPaneGroupDown:{id:"paneGroup.insertDown",name:"Insert group below",description:"Adds a new group below the current active group",default:void 0},moveTabUpGroup:{id:"tabs.move.groupUp",name:"Move tab into group above",description:"Moves the current active tab into the group above",default:void 0},moveTabRightGroup:{id:"tabs.move.groupRight",name:"Move tab into group right",description:"Moves the current active tab into the group to the right",default:void 0},moveTabLeftGroup:{id:"tabs.move.groupLeft",name:"Move tab into group left",description:"Moves the current active tab into the group to the left",default:void 0},moveTabDownGroup:{id:"tabs.move.groupDown",name:"Move tab into group below",description:"Moves the current active tab into the group below",default:void 0},moveFocusUp:{id:"paneGroup.focusUp",name:"Move focus to group above",description:"Move focus to the group above the current active group",default:void 0},moveFocusRight:{id:"paneGroup.focusRight",name:"Move focus to group right",description:"Move focus to the group to the right of the current active group",default:void 0},moveFocusLeft:{id:"paneGroup.focusLeft",name:"Move focus to group left",description:"Move focus to the group to the left of the current active group",default:void 0},moveFocusDown:{id:"paneGroup.focusDown",name:"Move focus to group below",description:"Move focus to the group below the current active group",default:void 0},webviewRefresh:{id:"webviewpane.reload",name:"Refresh the webview",default:(0,ad.FM)({alt:!0,key:"r"})},keepTab:{id:"tab.keep",name:"Keep tab",description:"Converts a preview tab to a persisted tab",default:void 0}};function cP(){var e=(0,f._)(["\n  query ConfiguredTools($replId: String!) {\n    getRepl(id: $replId) {\n      ... on Repl {\n        id\n        hasAuthUsers\n        defaultBucket {\n          ... on Bucket {\n            id\n          }\n        }\n      }\n    }\n  }\n"]);return cP=function(){return e},e}var cO={},cT=(0,h.J1)(cP()),cL=t(3144);function cM(){var e,n,t,r=(n={variables:{replId:(0,er.A)()}},t=(0,p._)({},cO,n),g.I(cT,t)).data,i=(null==r?void 0:r.getRepl.__typename)==="Repl"?r.getRepl:null,o=void 0!==(0,cL.GK)().database,a=!!(null==i?void 0:i.hasAuthUsers),l=(null==i||null==(e=i.defaultBucket)?void 0:e.__typename)==="Bucket";return(0,d.useMemo)(function(){var e=[];return a&&e.push({type:"replitAuth"}),o&&e.push({type:"neon"}),l&&e.push({type:"objectStorage"}),e},[o,a,l])}function cG(e){return(0,c.Y)(oc.Ay,(0,r9._)((0,p._)({},e),{children:(0,c.Y)("path",{d:"M12.147 1.896a1.45 1.45 0 0 1 .967.502l.112.15.009.013 3.702 5.942-.003.001a1.447 1.447 0 0 1 .078 1.465 1.451 1.451 0 0 1-1.281.781H8.3v-.002a1.449 1.449 0 0 1-1.49-1.482l.02-.198a1.45 1.45 0 0 1 .21-.546L10.764 2.6h.001c.12-.202.287-.374.488-.497l.165-.087c.17-.076.354-.12.541-.126l.187.005ZM8.353 9.25h7.282l-3.623-5.815-3.66 5.815ZM9.25 15a.25.25 0 0 0-.25-.25H4a.25.25 0 0 0-.25.25v5c0 .138.112.25.25.25h5a.25.25 0 0 0 .25-.25v-5Zm1.5 5A1.75 1.75 0 0 1 9 21.75H4A1.75 1.75 0 0 1 2.25 20v-5c0-.966.784-1.75 1.75-1.75h5c.966 0 1.75.784 1.75 1.75v5ZM20.25 17.5a2.75 2.75 0 1 0-5.5 0 2.75 2.75 0 0 0 5.5 0Zm1.5 0a4.25 4.25 0 1 1-8.5 0 4.25 4.25 0 0 1 8.5 0Z"})}))}var cN=new Set(["ghostwriterChat","chat","threadInbox","extensionStore","database"]),cz=[{type:"webview"},{type:"runnerOutput"},{type:"file"},{type:"neon"},{type:"objectStorage"},{type:"replitAuth"},{type:"deployments"},{type:"securityScan"}];function cH(){var e,n,t,r,i=(0,e6.Vv)(),o=oD(),a=(e=(0,o9.N0)(),n=(0,o9.mh)(),t=rm(nb),r=cM(),(0,d.useCallback)(function(){var i=new Map,o=new Set(t().map(function(e){var n=(0,u._)(e,2);return(n[0],n[1]).type})),a=n().filter(function(e){return!o.has(e.type)});i.set("recent",a),i.set("configured",r),i.set("primary",cz);var l=!0,c=!1,s=void 0;try{for(var d,p=e()[Symbol.iterator]();!(l=(d=p.next()).done);l=!0){var f=d.value,h=cN.has(f.type)?"deprioritized":"other",g=i.get(h);g?g.push(f):i.set(h,[f])}}catch(e){c=!0,s=e}finally{try{l||null==p.return||p.return()}finally{if(c)throw s}}return i},[n,e,r,t]));return(0,d.useCallback)(function(){var e=a(),n=new Set,t=e.get("recent")||[],r=e.get("configured")||[],l=e.get("other")||[],u=e.get("deprioritized")||[],s=t.slice(0,3),d=!0,p=!1,f=void 0;try{for(var h,g=s[Symbol.iterator]();!(d=(h=g.next()).done);d=!0){var m=h.value;n.add(m.type)}}catch(e){p=!0,f=e}finally{try{d||null==g.return||g.return()}finally{if(p)throw f}}var v=[],w=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e.length){var a=[],l=!0,u=!1,s=void 0;try{for(var d,p=e[Symbol.iterator]();!(l=(d=p.next()).done);l=!0){var f=d.value;n.has(f.type)||(n.add(f.type),a.push(f))}}catch(e){u=!0,s=e}finally{try{l||null==p.return||p.return()}finally{if(u)throw s}}v.push({data:{type:"group",key:t},commands:function(e){return r.hideUntilSearch&&!e.searchQuery?[]:a.map(function(e){return{match:oK.KK,data:{type:"action",label:i.getTitle(e),icon:(0,c.Y)(i.Icon,{pane:e}),run:function(){o({pane:e})}}}})}})}};return w(t,"recent"),w(r,"configured"),w(cz,"primary"),w(l,"other",{hideUntilSearch:!0}),w(u,"deprioritized",{hideUntilSearch:!0}),v},[o,i,a])}function cB(){var e=cH();return(0,d.useMemo)(function(){return{match:oK.KK,data:{type:"context",label:"All tools",icon:(0,c.Y)(cG,{})},commands:function(n){return n.active?e():[]}}},[e])}var cW=t(97962),cj=t(48139),c$=t(18134),cq=t(70244),cV=t(39521),cK=t(69735),cZ=t(17339),cJ=t(16008),cQ=t(80575),cX=t(75109),c0=t(30653),c1=t(65848),c2=Object.values(cU);let c4=(0,d.memo)(function(e){var n,t,r,i,o,a,l,u,s,p,f,h,g,m,v=e.isAdmin,w=e.isSubscribed,y=as(),b=(0,tW.Sx)(),x=(0,o1.A)(),_=x.fs,S=x.container,Y=(0,cW.Z)(),A=Y.fork,I=Y.isForking,C=(0,cR.lO)(),k=C.isOffline,E=C.isWorkflowsLoading,D=C.isRunning,R=(0,cR.qP)(),F=(0,o8.J)(),U=oU(),P=rg(t9),O=rg(re),T=rg(t5),L=rg((n=(0,tW.Ru)(),(0,$.A)(function(){return(0,ei.eU)(null,function(e,t){var r=n();if(r){t(t6,[r.pane]);var i=e(e9);i&&t(nn,i)}})},[n]))),M=rg(ij),G=rg(rn),N=rg(nn),z=rf(e9),H=rf((0,$.A)(function(){return(0,ei.eU)(function(e){var n=e(e9);if(!n)return null;var t=ek(e(nf),n);return t?t.paneGroup.id:null})},[])),W=rg(iZ),j=oP().toggleMaximizePane,q=rg(tN),K=rg(tM),Z=rg(iW),J=rg(tz),Q=(0,o6.eq)(z),X=(0,V.pE)("replUrl","string"),ee=(0,er.A)(),en=(0,ca.A)(),et=rm(nx),eo=oD(),ea=(0,aD.A)(),el=(0,cE.A)(),eu=(0,aF.A)(S).url,ec=(0,ak.A)().showNotice,es=(0,cD.A)("vscode"),ed=es.openEditor,ep=es.onConfirmConfig,ef=es.isConfigModalOpen,eh=es.closeConfigModal,eg=(0,B.jt)(),em=cr()(function(e){return(0,oq.u4)(oq.AZ.PROJECT_RAN,{replId:ee,placement:e})},500);(0,al.SJ)(function(){return[cU.saveAllFiles.id,function(){_.flush(void 0,tQ.sT.MANUAL_SAVE)}]},[_]),(0,al.SJ)(function(){return[cU.newTab.id,function(){return P()}]},[P]),(0,al.SJ)(function(){return[cU.nextTab.id,function(){return G("next")}]},[G]),(0,al.SJ)(function(){return[cU.previousTab.id,function(){return G("previous")}]},[G]),(0,al.SJ)(function(){return[cU.closeTab.id,function(){var e=O();return e||et()>0}]},[O,et]),(0,al.SJ)(function(){return[cU.reopenClosedTab.id,function(){return L()}]},[L]),(0,al.SJ)(function(){return[cU.moveTabUpGroup.id,function(){return T("above")}]},[T]),(0,al.SJ)(function(){return[cU.moveTabRightGroup.id,function(){return T("rightOf")}]},[T]),(0,al.SJ)(function(){return[cU.moveTabLeftGroup.id,function(){return T("leftOf")}]},[T]),(0,al.SJ)(function(){return[cU.moveTabDownGroup.id,function(){return T("below")}]},[T]),(0,al.SJ)(function(){return z?[cU.keepTab.id,function(){return N(z)}]:void 0},[z,N]),(0,al.SJ)(function(){return z?[cU.insertPaneGroupUp.id,function(){return J({paneId:z,placement:"above",autoFocus:!0})}]:void 0},[z]),(0,al.SJ)(function(){return z?[cU.insertPaneGroupRight.id,function(){return J({paneId:z,placement:"rightOf",autoFocus:!0})}]:void 0},[z]),(0,al.SJ)(function(){return z?[cU.insertPaneGroupLeft.id,function(){return J({paneId:z,placement:"leftOf",autoFocus:!0})}]:void 0},[z]),(0,al.SJ)(function(){return z?[cU.insertPaneGroupDown.id,function(){return J({paneId:z,placement:"below",autoFocus:!0})}]:void 0},[z]),(0,al.SJ)(function(){return[ag.id,function(){return y()}]},[y]);var ev=(0,al.Jn)(cU.findFile.id),ew=(0,rl.p)();(0,al.SJ)(function(){return[cU.findFile.id,function(){return y(o2.g({openFile:U,fs:_,shouldHideFile:F,getRecentFiles:b,keyboardShortcut:ev}))}]},[y]);var ey=ai({type:"files"});am((t=cB(),r=cH(),(0,d.useMemo)(function(){return{data:{type:"group",key:"global"},commands:function(){return(0,eA._)(r()).concat([t])}}},[r,t]))),am(o2.g({openFile:U,fs:_,shouldHideFile:F,getRecentFiles:b,getCurrentlyOpenFilePanesCommands:ey,keyboardShortcut:ev,lazyLoad:!!ew}));var eb=(0,al.Jn)(cU.searchFileContents.id),ex=oD();(0,al.SJ)(function(){return[cU.searchFileContents.id,function(){(0,oq.u4)(oq.AZ.SEARCH_PANE_USED,{action:"opened_via_shortcut"});var e,n=void 0;(null==Q?void 0:Q.type)==="codeEditor"&&(n=null==(e=Q.getCurrentSelectionText)?void 0:e.call(Q)),ex({pane:{type:"searchReplace",data:{initialQuery:n}}})}]},[Q,ex]),(0,al.SJ)(function(){return z?[cU.toggleFloatPaneGroup.id,function(){return W(z)}]:void 0},[z]),(0,al.SJ)(function(){return z?[cU.toggleMaximizePaneGroup.id,function(){return j(z)}]:void 0},[z]),(0,al.SJ)(function(){return H?[cU.removePaneGroup.id,function(){q({paneGroupId:H}),Z()}]:void 0},[H]),(0,al.SJ)(function(){return z?[cU.removeOthersInPaneGroup.id,function(){K(z)}]:void 0},[z]),(0,al.SJ)(function(){return[cU.moveFocusUp.id,function(){return M("above")}]},[]),(0,al.SJ)(function(){return[cU.moveFocusDown.id,function(){return M("below")}]},[]),(0,al.SJ)(function(){return[cU.moveFocusRight.id,function(){return M("rightOf")}]},[]),(0,al.SJ)(function(){return[cU.moveFocusLeft.id,function(){return M("leftOf")}]},[]),am(o0(eo)),am(oQ(eo),{enabled:!eg&&!ew}),am(o4.Y({container:S,activeOnly:!0,keyboardShortcut:eb,openFile:U})),(0,al.SJ)(function(){if(!k&&!E)return[cU.run.id,function(){R(cC.QG.KEYBOARD_SHORTCUT),em("shortcut_cmd_enter")}]},[R]);var e_=(0,al.Jn)(cU.run.id);am({match:oK.KK,data:{type:"action",icon:(0,c.Y)(cK.A,{}),label:"New window",keyboardShortcut:"Cmd-Shift-n",description:"Open a new window",run:function(){co.M.openNewWindow()}}},{enabled:en}),am({match:oK.KK,data:{type:"action",icon:(0,c.Y)(cZ.A,{}),label:"Run",description:"Run Repl",run:function(){R(cC.QG.KEYBOARD_SHORTCUT)},keyboardShortcut:e_}},{enabled:!D}),am({match:oK.KK,data:{type:"action",icon:(0,c.Y)(c0.A,{}),label:"Stop",description:"Stop Repl",run:function(){R(cC.QG.KEYBOARD_SHORTCUT)}}},{enabled:D}),am({match:oK.KK,data:{type:"action",icon:(0,c.Y)(cJ.A,{}),label:"Kill 1",description:"Kill the Repl pid1 process if it's in a bad state (admin only)",run:function(){S.exec("kill","1")}}},{enabled:v}),am({match:oK.KK,data:{type:"action",icon:(0,c.Y)(cq.A,{}),label:"Open development URL",run:function(){if(!eu)throw Error("Expected dotdevUrl");window.open(eu,"_blank","noopener")}}}),am({match:oK.KK,data:{type:"action",icon:(0,c.Y)(cV.A,{}),label:"Open in desktop app",description:"Open this Repl in the desktop app",run:function(){if(!X)throw Error("Expected Repl URL query param");var e="".concat(window.location.origin,"/desktopApp/open?replUrl=").concat(X);window.open(e,"_blank")}}},{enabled:!en}),am({match:oK.KK,data:{type:"action",icon:(0,c.Y)(c1.A,{}),label:"Open in VS Code",description:"Connect to this Repl in VS Code via SSH",run:function(){(0,oq.u4)(oq.AZ.OPEN_IN_VSCODE_CLICKED,{source:"command_bar",editor:"vscode"}),ed()}}},{enabled:!!ea&&w}),am({match:oK.KK,data:{type:"action",icon:(0,c.Y)(c$.A,{}),label:"Copy SSH Command",description:"Copy a shell command to connect to this Repl via SSH",run:function(){if(!ea)throw Error("Expected sshConfig");var e=ea.sshPort,n=ea.sshUser,t=ea.sshHostname,r="ssh -i ".concat(el,"/.ssh/replit -p ").concat(e," ").concat(n,"@").concat(t);(0,oq.u4)(oq.AZ.COPY_SSH_KEY_COMMAND_CLICKED,{source:"command_bar"}),(0,cl.default)(r),ec("Copied SSH command")}}},{enabled:!!ea&&w}),am((o=(i={description:"Jump to another Repl",onRun:function(e){window.location.href=e.url}}).description,a=i.onRun,l=(0,oe.A)(a),(0,$.A)(function(){return{match:(0,oK.u4)({defaultScore:oZ.q.myRepls}),data:{type:"context",label:"My Apps",icon:(0,c.Y)(cw.A,{}),description:o},commands:function(e){return(0,tS._)(function(e){var n;return(0,tY.YH)(this,function(t){switch(t.label){case 0:var r;if(n=e.searchQuery,!e.active)return[2,[]];return[4,(r={query:n,count:50},(0,tS._)(function(){var e;return(0,tY.YH)(this,function(n){switch(n.label){case 0:if(!tA.V)throw Error("Expected apolloClient");return[4,tA.V.query({query:cf,variables:r})];case 1:return[2,(null==(e=n.sent().data.currentUser)?void 0:e.search.repls.filter(function(e){return!!e.owner}))||[]]}})})())];case 1:return[2,t.sent().map(function(e){var t,r,i,o;return r=(t={repl:e,searchQuery:n,run:function(){return l.current(e)}}).repl,i=t.searchQuery,o=t.run,{match:function(){return{score:1,render:{height:44,content:(0,c.Y)(cb,{repl:r,height:44,searchQuery:i})}}},data:{type:"action",label:r.title,icon:(0,c.Y)(cm.Ay,{alt:r.title,size:16,iconUrl:r.iconUrl}),run:function(){return o(r)}}}})]}})}).apply(this,arguments)}}},[o,l]))),am({match:(0,oK.u4)({defaultScore:oZ.q.fork}),data:{type:"action",label:"Remix",icon:(0,c.Y)(cQ.A,{}),description:"Remix App",run:function(){I||A()}}}),s=(u=uO.g.apply(void 0,(0,eA._)(cI))).preferences,p=u.update,f=function(e){Object.keys(e).forEach(function(n){var t=e[n];(0,oq.u4)(oq.AZ.SETTINGS_TOGGLED,{settingChanged:n,updatedValue:t,isCommandBar:!0})}),p(e)},g=(h=(0,lQ.D)()).setActiveTheme,m=h.theme,am({match:(0,oK.u4)({defaultScore:oZ.q.settings,matchScoreMultiplier:oZ.B.settings}),data:{type:"context",label:"Settings",description:"Change Replit Settings",icon:(0,c.Y)(cA.A,{})},commands:function(e){var n=e.active,t=e.searchQuery;if(!n&&!t)return[];var r={match:(0,oK.u4)({defaultScore:oZ.q.settings,matchScoreMultiplier:oZ.B.settings}),data:{type:"context",label:"Theme",icon:(0,c.Y)(cY.A,{}),description:"Change Replit Theme"},commands:function(){return c_.U.map(function(e){return{match:(0,oK.u4)({defaultScore:oZ.q.settings,matchScoreMultiplier:oZ.B.settings}),data:{type:"action",label:e.title,icon:m.id===e.id?(0,c.Y)(cS.A,{}):(0,c.Y)(cA.A,{opacity:0}),description:"Use "+e.title+" theme "+(m.id===e.id?" (current)":""),run:function(){g(e.id)}}}})}},i=Object.values(cx.KY).filter(function(e){return -1!==cI.indexOf(e.editorPreferencesKey)}).map(function(e){return{match:(0,oK.u4)({defaultScore:oZ.q.settings,matchScoreMultiplier:oZ.B.settings}),data:{type:"context",label:e.name,icon:(0,c.Y)(cA.A,{}),description:e.description},commands:function(){return e.options.map(function(n){var t=s[e.editorPreferencesKey],r=!!e.editorPreferencesKey&&n.editorPreferencesValue===t;return{match:(0,oK.u4)({defaultScore:oZ.q.settings,matchScoreMultiplier:oZ.B.settings}),data:{type:"action",label:n.title,icon:r?(0,c.Y)(cS.A,{}):(0,c.Y)(cA.A,{opacity:0}),description:n.description,run:function(){return(0,tS._)(function(){return(0,tY.YH)(this,function(t){switch(t.label){case 0:if(!e.editorPreferencesKey)throw Error("editorPreferencesKey is not defined");return[4,f((0,ty._)({},e.editorPreferencesKey,n.editorPreferencesValue))];case 1:return t.sent(),[2]}})})()}}}})}}});return(0,eA._)(i).concat([r])}},{enabled:!0});var eS=(0,B.Wq)();am({match:oK.KK,data:{type:"action",label:"[Admin] Enable ".concat(ci.g$),icon:(0,c.Y)(cX.A,{}),run:function(){eS()}}},{enabled:v&&!eg});var eY=oH(),eI=(0,uf.A)(eY.agentFiletreeOrder);return am({match:oK.KK,data:{type:"action",label:"filetree-agent"===eI?"Move Agent to left":"Move Agent to right",icon:"filetree-agent"===eI?(0,c.Y)(cj.A,{}):(0,c.Y)(cS.A,{}),run:function(){eY.setAgentFiletreeOrder("filetree-agent"===eI?"agent-filetree":"filetree-agent")}}},{enabled:v&&ew}),(0,c.Y)(c.FK,{children:(0,c.Y)(ap.a,{isOpen:ef,onRequestClose:eh,centered:!0,children:(0,c.Y)(ck.A,{onConfirm:ep})})})});var c5=t(73321),c7=t(37202),c3=t(4029),c8=t(30608),c6=t(56939),c9=(0,uw.i7)({"0%":{transform:"translate(0, 0)"},"8.33%, 25%":{transform:"translate(-50%, 0)"},"33.33%, 50%":{transform:"translate(-50%, -50%)"},"58.33%, 75%":{transform:"translate(0, -50%)"},"83.33%, 100%":{transform:"translate(0, 0)"}}),se=(0,rC.x)({root:[ol.wp.color.foregroundDimmest,ol.wp.position.relative,ol.wp.width("100%"),ol.wp.height("100%"),{overflow:"hidden"}],arrows:[ol.wp.position.absolute,ol.wp.top(0),ol.wp.left(0),ol.wp.flex.row,ol.wp.flex.wrap,ol.wp.width("200%"),ol.wp.height("200%"),{animationName:c9,animationDirection:"normal",animationTimingFunction:"ease-out",animationIterationCount:"infinite"}],arrow:[ol.wp.width("50%"),ol.wp.height("50%"),ol.wp.center]});function sn(e){var n=e.delay,t=e.duration;return(0,c.Y)(ou.S,{css:se.root,children:(0,c.FD)(ou.S,{css:se.arrows,style:{animationDelay:n?n+"ms":void 0,animationDuration:t?t+"ms":"8000ms"},children:[(0,c.Y)(ou.S,{css:se.arrow,children:(0,c.Y)(c8.A,{size:12})}),(0,c.Y)(ou.S,{css:se.arrow,children:(0,c.Y)(cj.A,{size:12})}),(0,c.Y)(ou.S,{css:se.arrow,children:(0,c.Y)(cS.A,{size:12})}),(0,c.Y)(ou.S,{css:se.arrow,children:(0,c.Y)(c6.A,{size:12})})]})})}var st=t(17459),sr=t(4883),si=(0,rC.x)({root:[ol.wp.position.relative],circle:[ol.wp.top(-6),ol.wp.right(-6),ol.wp.minWidth(12),ol.wp.borderRadius(8),ol.wp.position.absolute,ol.wp.backgroundColor.backgroundHighest,ol.wp.shadow(3),{textAlign:"center",fontSize:10,border:"1px solid",borderColor:rI.LU.outlineDefault}],count:[{textAlign:"center",fontSize:10}]});function so(e){var n=e.count,t=(0,st._)(e,["count"]);return(0,c.FD)(ou.S,{css:si.root,children:[(0,c.Y)(sr.A,(0,p._)({},t)),(0,c.Y)(ou.S,{css:[si.circle,si.count],children:n})]})}function sa(){return(0,c.FD)(ou.S,{css:si.root,children:[(0,c.Y)(sr.A,{}),(0,c.Y)(ou.S,{css:si.circle,children:(0,c.Y)(cS.A,{size:6})})]})}function sl(e){var n,t=e.paneId,r=e.paneGroupId,i=(0,e6.Vv)(),o=oI(t),a=rg(tL),l=rg(tG),u=rg(tM),s=rf((0,$.A)(function(){return(0,ei.eU)(function(e){var n=ek(e(nf),t);return n?n.paneGroup.panes.findIndex(function(e){return e===t}):null})},[t])),d=rf((n=({paneGroupId:({paneGroupId:r}).paneGroupId}).paneGroupId,(0,$.A)(function(){return(0,ei.eU)(function(e){var t=eD(e(nf),n);return t?t.panes.length:null})},[n])));return(0,$.A)(function(){var e=i.getTitle(o),n=[{match:oK.G2,data:{type:"action",label:"Close "+e,icon:(0,c.Y)(sr.A,{}),run:function(){a(t)}}}];return d&&d>1&&(null!==s&&s<d-1&&n.push({match:oK.G2,data:{type:"action",label:"Close to the right",icon:(0,c.Y)(sa,{}),run:function(){l(t)}}}),n.push({match:oK.G2,data:{type:"action",label:"Close all other tabs",icon:(0,c.Y)(so,{count:d-1}),run:function(){u(t)}}})),n},[i,o,d,s,a,t,l,u])}function su(){var e=oC(),n=rg(nn);return(0,d.useCallback)(function(t){var r=e(t),i=r.isCommitted,o=r.pane;return!i&&(0,e6.xS)(o)?{match:oK.G2,data:{type:"action",label:"Keep open",icon:(0,c.Y)(l9.A,{}),run:function(){return n(t)}}}:null},[e,n])}var sc=t(73620),ss=new Map([["left",{label:"Move Left",icon:(0,c.Y)(cj.A,{})}],["right",{label:"Move Right",icon:(0,c.Y)(cS.A,{})}],["up",{label:"Move Up",icon:(0,c.Y)(c6.A,{})}],["down",{label:"Move Down",icon:(0,c.Y)(c8.A,{})}]]),sd=t(37087),sp=new Map([["leftOf",{label:"Move Left",icon:(0,c.Y)(cj.A,{})}],["rightOf",{label:"Move Right",icon:(0,c.Y)(cS.A,{})}],["above",{label:"Move Up",icon:(0,c.Y)(c6.A,{})}],["below",{label:"Move Down",icon:(0,c.Y)(c8.A,{})}]]),sf=t(39848);function sh(e){return(0,c.Y)(oc.Ay,(0,r9._)((0,p._)({},e),{children:(0,c.Y)("path",{fillRule:"evenodd",d:"M2.25 7A4.75 4.75 0 0 1 7 2.25h10A4.75 4.75 0 0 1 21.75 7v10A4.75 4.75 0 0 1 17 21.75H7A4.75 4.75 0 0 1 2.25 17V7ZM7 3.75A3.25 3.25 0 0 0 3.75 7v10A3.25 3.25 0 0 0 7 20.25h4.25V3.75H7Zm5.75 0v16.5H17A3.25 3.25 0 0 0 20.25 17V7A3.25 3.25 0 0 0 17 3.75h-4.25Z",clipRule:"evenodd"})}))}var sg=new Map([["leftOf",{commandId:cU.insertPaneGroupUp.id,label:"Insert Left",icon:(0,c.Y)(op,{})}],["rightOf",{commandId:cU.insertPaneGroupRight.id,label:"Insert Right",icon:(0,c.Y)(of,{})}],["above",{commandId:cU.insertPaneGroupLeft.id,label:"Insert Up",icon:(0,c.Y)(oh,{})}],["below",{commandId:cU.insertPaneGroupDown.id,label:"Insert Down",icon:(0,c.Y)(od,{})}]]),sm=t(59559);function sv(e){return(0,c.Y)(oc.Ay,(0,r9._)((0,p._)({},e),{children:(0,c.Y)("path",{fillRule:"evenodd",d:"M21.53 2.47a.75.75 0 0 1 0 1.06l-5.72 5.72H20a.75.75 0 0 1 0 1.5h-6a.75.75 0 0 1-.75-.75V4a.75.75 0 0 1 1.5 0v4.19l5.72-5.72a.75.75 0 0 1 1.06 0ZM4 14.75a.75.75 0 0 1 0-1.5h6a.75.75 0 0 1 .75.75v6a.75.75 0 0 1-1.5 0v-4.19l-5.72 5.72a.75.75 0 0 1-1.06-1.06l5.72-5.72H4Z",clipRule:"evenodd"})}))}function sw(e){return(0,c.Y)(oc.Ay,(0,r9._)((0,p._)({},e),{children:(0,c.Y)("path",{fillRule:"evenodd",d:"M20.483 14.37v2.871a4.259 4.259 0 0 1-4.259 4.259H7.26A4.259 4.259 0 0 1 3 17.241V8.276a4.259 4.259 0 0 1 4.259-4.259h2.87A3.059 3.059 0 0 1 13.007 2h6.436A3.057 3.057 0 0 1 22.5 5.057v6.437c0 1.324-.84 2.45-2.017 2.876ZM9.948 5.362h-2.69a2.914 2.914 0 0 0-2.913 2.914v8.965a2.914 2.914 0 0 0 2.914 2.914h8.965a2.914 2.914 0 0 0 2.914-2.914v-2.69h-6.132a3.057 3.057 0 0 1-3.058-3.057V5.362ZM17 4.75a.75.75 0 0 0-1.5 0V7.5h-2.75a.75.75 0 0 0 0 1.5h2.75v2.75a.75.75 0 0 0 1.5 0V9h2.75a.75.75 0 0 0 0-1.5H17V4.75Z",clipRule:"evenodd"})}))}var sy=t(67401),sb=t(43355),sx=t(2431),s_=t(71597);function sS(e){return(0,c.Y)(oc.Ay,(0,r9._)((0,p._)({},e),{children:(0,c.Y)("path",{fillRule:"evenodd",d:"M16.47.47a.75.75 0 0 1 1.06 0l4 4a.75.75 0 0 1 0 1.06l-4 4a.75.75 0 1 1-1.06-1.06l2.72-2.72H7A3.25 3.25 0 0 0 3.75 9v2a.75.75 0 0 1-1.5 0V9A4.75 4.75 0 0 1 7 4.25h12.19l-2.72-2.72a.75.75 0 0 1 0-1.06ZM20.25 15v-2a.75.75 0 0 1 1.5 0v2A4.75 4.75 0 0 1 17 19.75H4.81l2.72 2.72a.75.75 0 1 1-1.06 1.06l-4-4a.75.75 0 0 1 0-1.06l4-4a.75.75 0 0 1 1.06 1.06l-2.72 2.72H17A3.25 3.25 0 0 0 20.25 15Z",clipRule:"evenodd"})}))}function sY(e){var n,t,r,i,o,a,l,u,s=e.paneId,p=(n=(0,e6.Vv)(),t=(0,o9.N0)(),r=rg(rt),(0,d.useCallback)(function(){return{data:{type:"context",label:an.Ve,icon:(0,c.Y)(ar.A,{})},commands:function(){return t().map(function(e){return{match:oK.G2,data:{type:"action",label:n.getTitle(e),icon:n.Icon({pane:e}),run:function(){(0,oq.u4)(oq.AZ.TOOL_OPENED,{source:"Tab Menu",tool:e.type}),r({paneId:s,pane:e})}}}})}}},[t,n,r,s])),f=(i=(0,tW.Sx)(),o=(0,tW.L4)(),a=rg(rt),(0,d.useCallback)(function(){var e=o(),n=i().filter(function(n){return!e.includes(n)});return{data:{type:"context",label:"Recent",icon:(0,c.Y)(s_.A,{})},commands:function(e){var t=e.searchQuery;return(0,o2.h)({paths:n,searchQuery:t,run:function(e){a({paneId:s,pane:{type:(0,e6.QY)({path:e}),data:{path:e}}})}})}}},[i,a,s,o])),h=(l=(0,o1.A)().fs,u=rg(rt),(0,$.A)(function(){return{match:oK.G2,data:{type:"context",label:"Files",icon:(0,c.Y)(l9.A,{})},commands:function(e){return(0,tS._)(function(e){var n,t,r;return(0,tY.YH)(this,function(i){switch(i.label){case 0:if(n=e.searchQuery,t=e.active,!n&&!t)return[2,[]];return[4,l.listFiles()];case 1:if((r=i.sent()).error)return[2,[]];if(!r.files)throw Error("Expected files");return[2,(0,o2.h)({paths:r.files,searchQuery:n,run:function(e){u({paneId:s,pane:{type:(0,e6.QY)({path:e}),data:{path:e}}})}})]}})}).apply(this,arguments)}}},[l,u,s]));return(0,$.A)(function(){return{match:oK.G2,data:{type:"context",label:"Change tab",icon:(0,c.Y)(sS,{})},commands:function(e){var n=e.searchQuery,t=e.active;return n||t?[f(),h,p()]:[]}}},[f,p,h])}var sA=(0,uw.AH)(ol.wp.center,{fontSize:rI.LU.fontSizeSmall,border:"1px solid",borderColor:rI.LU.outlineDefault,width:20,height:20,marginTop:-2,marginLeft:-2},ol.wp.borderRadius(8));function sI(e){return(0,c.Y)(ou.S,{css:sA,children:(0,c.Y)(ou.S,{css:{lineHeight:1},children:e.count})})}var sC=t(38084),sk=(0,ei.eU)([]);function sE(e,n){var t=n.run,r=n.enabled,i=void 0===r||r,o=(0,tm.Xr)(sk);(0,d.useEffect)(function(){if(i){var n=(Array.isArray(e)?e:[e]).map(function(e){return{shortcut:e,run:t}});return o(function(e){return(0,eA._)(e).concat((0,eA._)(n))}),function(){o(function(e){return e.filter(function(e){return!n.includes(e)})})}}},[e,t,o,i])}function sD(){var e=(0,tm.md)(sk);return(0,d.useEffect)(function(){var n=function(n){var t=!0,r=!1,i=void 0;try{for(var o,a=e[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l,u=o.value,c=u.shortcut,s=u.run;!!c.cmdOrCtrlKey==!!(0,uT.T$)(n)&&!!c.altKey==!!n.altKey&&!!c.shiftKey==!!n.shiftKey&&(null==(l=c.key)?void 0:l.toLowerCase())===n.key.toLowerCase()&&(n.preventDefault(),s(c))}}catch(e){r=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}};return document.addEventListener("keydown",n),function(){document.removeEventListener("keydown",n)}},[e]),null}var sR=t(24323),sF=(0,rC.x)({overlay:[ol.wp.position.absolute,ol.wp.overflow("hidden"),ol.wp.zIndex(rA.W.overlay)],surface:[ol.wp.position.relative,ol.wp.borderRadius(8),ol.wp.flex.shrink(1),{maxHeight:"100%",maxWidth:"100%",border:"1px solid",borderColor:rI.LU.outlineDefault,opacity:0},ol.wp.shadow(3)],innerSurface:[ol.wp.borderRadius(8)]}),sU=(0,rC.x)({root:[{borderTop:"1px solid",borderColor:rI.LU.outlineDimmer}],row:[ol.wp.rowWithGap(2),ol.wp.align.center,ol.wp.justify.spaceBetween]});function sP(){var e=(0,ad.Kg)();return(0,c.FD)(ou.S,{css:sU.root,p:8,gap:8,children:[(0,c.FD)(ou.S,{css:sU.row,children:[(0,c.Y)(aA.EY,{color:"dimmest",variant:"small",multiline:!1,children:"Move focus"}),(0,c.FD)(ou.S,{row:!0,gap:4,children:[(0,c.Y)(al._y,{keyCombo:"".concat(e),small:!0}),(0,c.Y)(sC.Js,{text:(0,c.Y)(sn,{duration:6e3,delay:6e3})})]})]}),(0,c.FD)(ou.S,{css:sU.row,children:[(0,c.Y)(aA.EY,{color:"dimmest",variant:"small",multiline:!1,children:"Move pane"}),(0,c.FD)(ou.S,{row:!0,gap:4,children:[(0,c.Y)(al._y,{keyCombo:"".concat(e,"Shift-"),small:!0}),(0,c.Y)(sC.Js,{text:(0,c.Y)(sn,{duration:6e3,delay:1500})})]})]})]})}var sO=(0,d.memo)(function(){var e=function(){var e=rf(nC),n=rf(iG);if(n){var t={width:n.width,height:n.height,transform:"translate(".concat(n.x,"px, ").concat(n.y,"px)")},r=t.width,i=t.height,o=t.transform,a={border:"1px solid",borderColor:rI.LU.accentPrimaryStronger,borderRadius:rI.LU.borderRadius6,boxShadow:rI.LU.shadow3,transitionProperty:"transform, height, width",transitionDuration:sR.Ds.duration,transitionTimingFunction:sR.Ds.timingFunction};return(0,p._)({width:r,height:i,transform:o},e?void 0:a)}}(),n=rg(iW),t=(0,c7.A)(n,[]);return(0,d.useEffect)(function(){var e=setTimeout(function(){(0,c3.U)(t,"opacity","1")});return function(){clearTimeout(e)}},[t]),(0,c.Y)(c5.n1,{restoreFocus:!0,autoFocus:!0,contain:!0,children:(0,c.Y)(ou.S,{style:e,css:sF.overlay,p:16,align:"end",children:(0,c.Y)(af.ui,{innerRef:t,elevated:!0,css:sF.surface,children:(0,c.Y)(af.ui,{css:sF.innerSurface,grow:!0,shrink:!0,elevated:!0,children:(0,c.Y)(sG,{})})})})})}),sT={ArrowUp:"above",ArrowDown:"below",ArrowRight:"rightOf",ArrowLeft:"leftOf"},sL={ArrowUp:"up",ArrowDown:"down",ArrowRight:"right",ArrowLeft:"left"},sM=Object.keys(sT),sG=(0,d.memo)(function(){var e=rg(ij),n=rg(i$),t=rg(iz),r=rf(nC);sE({key:"Escape"},{run:function(){t()}}),sE(sM.map(function(e){return{key:e,cmdOrCtrlKey:!0}}),{run:function(n){e(sT[n.key])},enabled:!r}),sE(sM.map(function(e){return{key:e,cmdOrCtrlKey:!0,shiftKey:!0}}),{run:function(e){n({direction:sL[e.key]})},enabled:!r});var i=rf(iM);return i&&"sidebar"!==i.target?(0,c.Y)(sN,{paneGroupId:i.paneGroupId,paneId:i.paneId}):null});function sN(e){var n,t,r,i,o,a,l,s,d,f,h,g,m,v,w,y,b,x,_,S,Y,A=rf(nC),I=rg(iW),C=rg(iz),k=(n=e.paneGroupId,i=(r={paneId:t=e.paneId,paneGroupId:n}).paneId,o=r.paneGroupId,a=(0,e6.Vv)(),l=oI(i),s=(0,o6.eq)(i),d=su(),f=sl({paneId:i,paneGroupId:o}),h=(0,$.A)(function(){var e=a.getTitle(l),n=function(e){return!!e&&(void 0===e?"undefined":(0,eI._)(e))==="object"&&"data"in e},t=[{data:{type:"group",key:"pane-actions"},commands:function(){var e,t;return(null!=(t=null==s||null==(e=s.commands)?void 0:e.flatMap(function(e){return e.commands}))?t:[]).filter(n)}},{data:{type:"group",key:"pane-close"},commands:function(){return[d(i)].concat((0,eA._)(f)).filter(n)}}];return{match:oK.G2,data:{type:"context",label:e,icon:(0,c.Y)(a.Icon,{pane:l})},commands:function(e){var n=e.active,r=e.searchQuery;return n||r?t:[]}}},[l,s,a,i,f,d]),m=(g={paneId:t,paneGroupId:n}).paneGroupId,v=g.paneId,w=rf((0,$.A)(function(){return(0,ei.eU)(function(e){var n=e(e4),t=[],r=[],i=!0,o=!1,a=void 0;try{for(var l,u=n[Symbol.iterator]();!(i=(l=u.next()).done);i=!0){var c=l.value,s=c.panes.map(function(n){return[n,e(e(eX(n)).dataAtom)]}),d="floating"===c.path[0];(d?t:r).push({activeIndex:c.activeIndex,paneGroupId:c.id,isFloating:d,panes:s})}}catch(e){o=!0,a=e}finally{try{i||null==u.return||u.return()}finally{if(o)throw a}}return{floating:t,tiling:r}})},[])),y=(0,e6.Vv)(),b=rg(tO),x=rg(tZ),_=sY({paneId:v}),S=(0,$.A)(function(){var e=w.tiling,n=w.floating,t=e.reduce(function(e,n){return e+n.panes.length},0)+n.reduce(function(e,n){return e+n.panes.length},0),r={match:oK.G2,data:{type:"action",label:"New tab",icon:(0,c.Y)(at.A,{}),run:function(){x({paneGroupId:m,activate:!0,panes:[{type:"commands",data:{autoFocus:!0}}]})}}};return t?[_,{match:oK.G2,data:{type:"context",label:(0,sy.A)("Tab",t),icon:(0,c.Y)(sI,{count:t})},commands:function(t){var i=t.active,o=t.searchQuery;if(!(i||o))return[];var a=(0,eA._)(e).concat((0,eA._)(n)).map(function(e,n){return{data:{type:"group",key:"paneGroups"+n},commands:function(){return e.panes.map(function(e){var n=(0,u._)(e,2),t=n[0],r=n[1];return{match:oK.G2,data:{type:"action",label:y.getTitle(r),icon:(0,c.Y)(y.Icon,{pane:r}),run:function(){b({paneId:t,activate:!0})}}}})}}});return a.unshift(r),a}}]:[_,r]},[w,y,b,x,m,_]),Y=function(e){var n,t,r,i,o,a,l,s,d,f,h,g,m,v,w,y,b,x,_,S,Y,A,I,C,k,E,D,R,F,U,P,O,T,L,M,G,N=e.paneGroupId,z=e.paneId,H=function(e){var n,t,r=e.paneId,i=oM(e.paneGroupId),o=(0,uf.A)(i.isMaximized),a=(0,uf.A)(i.isFloating),l=!o&&!a,s=(n=(0,sf.RI)(),t=rg(tz),(0,$.A)(function(){return(0,eA._)(sg.entries()).map(function(e){var i,o,a=(0,u._)(e,2),l=a[0],c=a[1],s=c.commandId,d=c.label,p=c.icon;return{match:oK.G2,data:{label:d,icon:p,type:"action",keyboardShortcut:null!=(o=null==(i=n.get(s))?void 0:i.shortcut)?o:void 0,run:function(){t({placement:l,paneId:r,autoFocus:!0}),(0,oq.u4)(oq.AZ.WS_SPLIT_USED,{action:"opened",placement:l})}}}})},[n,t,r]));return(0,$.A)(function(){return l?[{match:oK.G2,data:{type:"context",label:"Add pane",icon:(0,c.Y)(sh,{})},commands:function(e){var n=e.active,t=e.searchQuery;return n||t?s:[]}}]:[]},[l,s])}({paneId:z,paneGroupId:N}),B=(n=oL(z),t=rf(nC),r=(0,uf.A)(n.isFloating),i=!t&&!r,o=rg(t5),(0,$.A)(function(){var e=(0,eA._)(sp.entries()).map(function(e){var n=(0,u._)(e,2),t=n[0],r=n[1],i=r.label,a=r.icon;return{match:oK.G2,data:{label:i,icon:a,type:"action",run:function(){o(t)}}}});return i?[{match:oK.G2,data:{type:"context",label:"Move tab",icon:(0,c.Y)(sd.A,{})},commands:function(n){var t=n.active,r=n.searchQuery;return t||r?e:[]}}]:[]},[i,o])),W=(a=oM(N),l=(0,uf.A)(a.isMaximized),s=(0,uf.A)(a.isFloating),d=!l&&!s,f=rg(i$),(0,$.A)(function(){var e=(0,eA._)(ss.entries()).map(function(e){var n=(0,u._)(e,2),t=n[0],r=n[1],i=r.label,o=r.icon;return{match:oK.G2,data:{label:i,icon:o,type:"action",run:function(){f({direction:t})}}}});return d?[{match:oK.G2,data:{type:"context",label:"Move group",icon:(0,c.Y)(sc.A,{})},commands:function(n){var t=n.active,r=n.searchQuery;return t||r?e:[]}}]:[]},[d,f])),j=(g=(h=oP()).maximizePaneGroup,m=h.restoreMaximizedPaneGroup,v=oM(N),w=(0,uf.A)(v.isMaximized),y=rf(nl),b=(0,al.Jn)(cU.toggleMaximizePaneGroup.id),(0,$.A)(function(){return w?y?[]:[{match:oK.G2,data:{type:"action",label:"Restore",icon:(0,c.Y)(sv,{}),run:function(){return m()},keyboardShortcut:b}}]:[{match:oK.G2,data:{type:"action",label:"Maximize",icon:(0,c.Y)(sm.A,{}),run:function(){return g({paneGroupId:N})},keyboardShortcut:b}}]},[w,b,y,m,g,N])),q=(x=rg(tN),_=rg(iW),S=rf(nl),Y=(0,al.Jn)(cU.removePaneGroup.id),(0,$.A)(function(){return S?[]:[{match:oK.G2,data:{type:"action",label:"Close",icon:(0,c.Y)(sr.A,{}),run:function(){_(),x({paneGroupId:N})},keyboardShortcut:Y}}]},[_,x,S,Y,N])),V=(I=(A={paneId:z,paneGroupId:N}).paneId,C=A.paneGroupId,k=rg(iZ),E=oM(C),D=(0,uf.A)(E.isMaximized),R=(0,uf.A)(E.isFloating),F=(0,al.Jn)(cU.toggleFloatPaneGroup.id),(0,$.A)(function(){return D?[]:[{match:oK.G2,data:{type:"action",label:R?"Unfloat":"Float",icon:R?(0,c.Y)(os,{}):(0,c.Y)(cK.A,{}),keyboardShortcut:F,run:function(){k(I)}}}]},[I,k,F,R,D])),K=(P=oM((U={paneId:z,paneGroupId:N}).paneGroupId),O=oL(U.paneId),T=oO(U.paneGroupId),L=rm(nb),M=rg(na),G=(0,uf.A)(P.isMaximized),(0,$.A)(function(){return G?[]:[{match:oK.G2,data:{type:"action",label:"New window",icon:(0,c.Y)(sw,{}),run:function(){var e=(0,tb.A)(),n=L().filter(function(e){var n=(0,u._)(e,1)[0];return T.panes.current.includes(n)});M({popupId:e,state:{type:"saved",layout:{floating:[],tiling:{id:(0,tb.A)(),type:"paneGroup",percent:100,activeIndex:T.activeIndex.current,panes:T.panes.current}},data:n.reduce(function(e,n){var t=(0,u._)(n,2),r=t[0],i=t[1];return(0,r9._)((0,p._)({},e),(0,ty._)({},r,i))},{})}}),window.open("".concat(window.location.origin+window.location.pathname,"?popupId=").concat(e),"_blank","popup=1,height=".concat(O.size.current.height,"px,width=").concat(O.size.current.width,"px")),(0,oq.u4)(oq.AZ.WS_POPOUT_OPENED,{ai:n.some(function(e){var n=(0,u._)(e,2);return"ghostwriterChat"===(n[0],n[1]).type}),console:n.some(function(e){var n=(0,u._)(e,2);return"runnerOutput"===(n[0],n[1]).type}),editor:n.some(function(e){var n=(0,u._)(e,2);return"codeEditor"===(n[0],n[1]).type}),shell:n.some(function(e){var n=(0,u._)(e,2);return"shell"===(n[0],n[1]).type}),paneData:n})}}}]},[G,T.activeIndex,T.panes,L,M,O.size]));return(0,$.A)(function(){return[{data:{type:"group",key:"pane-group"},commands:function(){return(0,eA._)(H).concat((0,eA._)(B),(0,eA._)(W),(0,eA._)(j),(0,eA._)(V),(0,eA._)(K),(0,eA._)(q))}}]},[H,B,W,j,V,K,q])}({paneGroupId:n,paneId:t}),(0,$.A)(function(){return{data:{type:"group",key:"root",description:"Search"},commands:function(){return[h].concat((0,eA._)(S),(0,eA._)(Y))}}},[h,S,Y]));return(0,c.Y)(ah.r,{iconBreadcrumbs:!0,command:k,onAction:function(){return I()},onKeyDown:function(e,n){var t=n.inputValue,r=n.hasHighlightedItem;if("Enter"===e.key&&!t&&!r){e.preventDefault(),C();return}(0,uT.T$)(e)&&e.preventDefault()},footer:A?null:(0,c.Y)(sP,{}),compact:!0})}var sz={id:"paneMenu.toggle",name:"Toggle pane context menu",default:(0,ad.FM)({cmdOrCtrl:!0,key:"j"})};function sH(){var e=rg(iH),n=rf(iB);return((0,al.SJ)(function(){return[sz.id,function(){return e()}]},[e]),n)?(0,c.Y)(sO,{}):null}var sB=t(93386),sW=t(10569),sj=t(3428),s$=t(38882),sq=[u8,ag,sz].concat((0,eA._)(c2),(0,eA._)(uu.ke),(0,eA._)(sW.$f),[s$.B,sB.G,sj.Ws]),sV=t(26717);function sK(e){var n=(0,sV.O)();return(0,c.Y)(al.jM,{commands:sq,onChange:n,keybindings:e.keybindings,children:e.children})}var sZ=t(65935),sJ=t(69683);function sQ(e){var n=e.children,t=(0,$.A)(function(){return new ua.Y(ni.A.get("stateCache","object"))},[]);return(0,c.Y)(ua.H.Provider,{value:t,children:n})}function sX(e){var n,t,r=e.ui,i=e.repl,o=e.services,a=e.userKeybindings,l=e.children;return(0,c.Y)(sK,{keybindings:a,children:(0,c.Y)(e6.lQ,{value:r,children:(0,c.Y)(sQ,{children:(0,c.Y)(sZ.A.Provider,{value:o,children:(0,c.Y)(ul.F,{replId:i.id,orgId:null==(n=i.org)?void 0:n.id,container:o.container,fs:o.fs,dotReplit:o.dotReplit,ports:o.ports,secrets:o.secrets,children:(0,c.Y)(cW.B,{repl:i,forkParams:{trackingData:{forkSource:"replEnvironmentDesktop"}},teamContext:(null==(t=i.owner)?void 0:t.__typename)==="Team"?i.owner.id:void 0,children:(0,c.Y)(lJ.Ey,{children:(0,c.Y)(sJ.A,{children:l})})})})})})})})}var s0=t(78940),s1=t(38495),s2=function(e){return(0,tS._)(function(){var n,t,r,i;return(0,tY.YH)(this,function(o){switch(o.label){case 0:if(!(0,s1.Fp)())return[2,null];return[4,(0,s1.Eb)(e)];case 1:if(t=(n=o.sent()).path,r=n.line,i=n.col,!t)return[2,null];return[2,{path:t,line:r,col:i}]}})})()};function s4(e){var n,t,r,i,o,a,l,c,s,f,h,g,m,v,w,y=e.repl;return t=(n=(0,o1.A)()).fs,r=n.dotReplit,i=rf(nt),o=(0,oe.A)(i),l=(a=(0,u._)((0,d.useState)(!1),2))[0],c=a[1],s=oU(),f=(0,d.useCallback)(function(e){var n;(0,ix.e$)(e.path.toLowerCase())?n={paneType:"markdown"}:(0,ix.Zy)(e.path.toLowerCase())&&(n={paneType:"csvPreview"}),s((0,r9._)((0,p._)({},e),{opener:n}))},[s]),h=W(y),g=rf(nI),m=rf(nl),v=(0,B.jt)(),w=(0,d.useRef)(!1),(0,d.useEffect)(function(){if(l&&!w.current){if(!i){if(!window.location.hash)return;var e=new URL(window.location.href);history.pushState((0,r9._)((0,p._)({},history.state),{as:e.pathname}),document.title,window.location.origin+window.location.pathname+window.location.search);return}var n=(0,s1.cg)({path:i}),t=window.location.hash;if(!(t.slice(1)===i||t.startsWith(n+":"))){var r=new URL(window.location.href);r.hash=n,window.history.pushState((0,r9._)((0,p._)({},history.state),{as:r.pathname+r.hash}),"",r)}}},[l,i]),(0,d.useEffect)(function(){if(!l){var e=!1;return(0,tS._)(function(){var n,i;return(0,tY.YH)(this,function(a){switch(a.label){case 0:if(!g)return[2];if(o.current)return c(!0),[2];return[4,s2(t)];case 1:if(n=a.sent(),e)return[2];if(n)return f(n),c(!0),[2];if(o.current||"saved"===g||m||v)return c(!0),[2];return[4,(0,s0.o)({fs:t,dotReplit:r})];case 2:return i=a.sent().entrypoint,e||!i||h||f({path:i}),c(!0),[2]}})})(),function(){e=!0}}},[t,f,r,o,g,l,m,h,v]),(0,d.useEffect)(function(){if(g){var e=function(){return(0,tS._)(function(){var e;return(0,tY.YH)(this,function(n){switch(n.label){case 0:return w.current=!0,[4,s2(t)];case 1:return(e=n.sent())&&f(e),w.current=!1,[2]}})})()};return window.addEventListener("hashchange",e),function(){window.removeEventListener("hashchange",e)}}},[g,t,f]),null}function s5(){var e=(0,uH.W9)(),n=(0,uH.gi)(),t=(0,o1.A)().fs,r=function(){n(null)};return(0,c.Y)(ap.a,{isOpen:!!e,onRequestClose:r,children:e?(0,c.Y)(u2.A,{name:e,description:e,entityType:"file",hideModal:r,delete:function(){e&&(t.deleteFile(e),n(null))}}):null})}var s7=t(84682),s3=t(11894),s8=t(62760);function s6(){var e,n,t=(0,s.useRouter)(),r=(0,q.ME)(t,"mobileBridge"),i=oN(),o=(0,uv.A)(),a=o.isSaving,l=o.isOffline,u=(0,d.useRef)(null),c=(0,s8.d)(),p=oD(),f=as(),h=(e=(0,cR.g3)(),n=(0,cR.qP)(),{runState:(0,d.useMemo)(function(){return e?e.step:cC.ll.OFFLINE},[e]),toggleRunState:(0,d.useCallback)(function(){n()},[n])}),g=h.runState,m=h.toggleRunState,v=(0,d.useCallback)(function(e){var n=function(e){switch(e){case s7.TK.OPEN_FILETREE:i.toggle();break;case s7.TK.TOGGLE_RUN_STATE:m();break;case s7.TK.TOGGLE_ALLPANES:f();break;case s7.TK.OPEN_NEW_PANE:case s7.TK.TOGGLE_DRAWER:break;default:(0,sb.A)(e)}},t=function(e){c(e)},r=function(e){var n=e.type,t=e.messageId;try{p({pane:{type:n}})}catch(e){(0,s3.Cf)(t)}};(0,s3.E6)(e,function(e){var i=e.type;switch(i){case s7.tF.SET_KEYBOARD_STATE:t(e.keyboardState);break;case s7.tF.WORKSPACE_REQUEST_ACTION:n(e.action);break;case s7.tF.WORKSPACE_REQUEST_OPEN_PANE:r({messageId:e.id,type:e.paneType});break;default:(0,sb.A)(i)}})},[m,c,p,f,i]);return(0,d.useEffect)(function(){if(r){var e={messageType:s7.tF.WORKSPACE_STATE,isDrawerOpen:!1,isShowingAllPanes:!0,isSaving:a,isOffline:l,runState:g,activePaneType:null,activePaneFilePath:null,isInAgentMode:!1,insets:{top:0,bottom:0}},n=u.current;return(null==n||JSON.stringify(e)!==JSON.stringify(n))&&((0,s3._z)(e,(0,tb.A)()),u.current=e),window.addEventListener("message",v),function(){window.removeEventListener("message",v)}}},[r,v,g,a,l,u]),null}var s9=t(7368),de=t(51937),dn=t(46434),dt=t(90629),dr=t(72198),di=t(41288);function da(){var e=oU(),n=oD();return(0,d.useCallback)(function(t){return(0,e6.xS)(t)&&t.data.path?e((0,r9._)((0,p._)({},t.data),{path:t.data.path})):n({pane:t})},[n,e])}var dl=t(46214),du=t(48749),dc=t(29351),ds=t(75060),dd=t.n(ds);function dp(e){var n=e.text,t=Math.floor(100*e.progress);return(0,c.FD)(c.FK,{children:[(0,c.FD)(ou.S,{row:!0,align:"center",justify:"center",gap:8,style:{cursor:"not-allowed"},children:[(0,c.Y)(dc.A,{}),(0,c.Y)(aA.EY,{children:n})]}),(0,c.Y)(ou.S,{clsx:dd().progressBarContainer,children:(0,c.Y)(ou.S,{clsx:dd().progressBarTrack,children:(0,c.Y)(ou.S,{clsx:dd().progressBarFill,style:{width:"".concat(t,"%")}})})}),(0,c.Y)(ou.S,{justify:"center",align:"center",children:(0,c.FD)(aA.EY,{variant:"small",color:"dimmer",children:[t,"%"]})})]})}function df(e){var n=e.errorMessage;return(0,c.FD)(ou.S,{align:"center",gap:8,children:[(0,c.Y)(aA.EY,{children:n}),(0,c.Y)(aA.EY,{children:"Please try again or contact support"}),(0,c.Y)(cc(),{href:"/~",children:(0,c.Y)(aA.EY,{children:"Return to Home"})})]})}function dh(e){var n=e.onClick;return(0,c.FD)(ou.S,{align:"center",gap:16,children:[(0,c.Y)(aA.EY,{children:"You must login again to continue importing"}),(0,c.Y)(aY.$n,{text:"Reconnect to Figma",onClick:n,colorway:"primary",iconRight:(0,c.Y)(cS.A,{})})]})}function dg(){var e,n,t,r,i,o,a,l,s,f,h,v,w,y,b,x,_,S,A,E,D,R,F=(e=(0,er.A)(),t=(0,u._)((n=(0,p._)({},Y,void 0),m.n(C,n)),1)[0],i=(0,u._)((r=(0,p._)({},Y,void 0),m.n(k,r)),1)[0],a=(o=(0,u._)((0,d.useState)({status:"not_started"}),2))[0],l=o[1],s=da(),f=(0,B.NC)(),h=(0,d.useRef)(!1),v=(0,d.useCallback)(function(){return(0,tS._)(function(){var e;return(0,tY.YH)(this,function(n){switch(n.label){case 0:if(h.current)return[2];return h.current=!0,[4,f.sessions.create({sessionType:el.dF3.AGENT_SESSION})];case 1:if(!(e=n.sent()).ok)throw Error("Failed to create Agent session");return s({type:"agentChat",data:{sessionId:e.payload.id}}),[4,e.payload.appendEvent({kind:"setupImportedProject",importSource:el.aJd.PROJECT_IMPORT_SOURCE_FIGMA})];case 2:return n.sent(),[2]}})})()},[f,s]),y=(w=(0,u._)((0,d.useState)(0),2))[0],b=w[1],A=(x={variables:{replId:e}},_=(0,p._)({},Y,x),S=g.I(I,_)).data,E=!S.loading&&A&&"Repl"===A.getRepl.__typename&&A.getRepl.config.figmaImportStatus===cF.u4D.Started?A.getRepl.config.figmaUrl:null,D=(0,d.useCallback)(function(n){var r=n.errorMessage;return(0,tS._)(function(){return(0,tY.YH)(this,function(n){switch(n.label){case 0:return l({status:"error",errorMessage:r}),[4,t({variables:{input:{id:e,figmaImportStatus:cF.u4D.Failed}}})];case 1:return n.sent(),[2]}})})()},[e,t]),((0,di.b)(function(n,r){var o=r.signal;return(0,tS._)(function(){var r,a,u,c,s,d,p,f,h,g,m,w,y,x,_,S;return(0,tY.YH)(this,function(Y){switch(Y.label){case 0:if(!E)return[2];return[4,i({variables:{input:{figmaUrl:E}}})];case 1:if((null==(r=Y.sent().data)?void 0:r.getFigmaIntermediateToken.__typename)==="NoOAuthFoundError")return l({status:"needs_auth",retryAuth:function(){return b(function(e){return e+1})}}),[2];if((null==r?void 0:r.getFigmaIntermediateToken.__typename)==="InvalidFigmaUrlError"||(null==r?void 0:r.getFigmaIntermediateToken.__typename)==="FigmaRateLimitError")return dt.Cp(r.getFigmaIntermediateToken,{extra:{replId:e,figmaUrl:E}}),lK.vF.error("Failed to get Figma intermediate token",{repl:e,figmaUrl:E,payload:r.getFigmaIntermediateToken}),D({errorMessage:r.getFigmaIntermediateToken.message}),[2];if(!(a=null==r?void 0:r.getFigmaIntermediateToken)||"FigmaImportIntermediateToken"!==a.__typename)return lK.vF.error("Failed to get Figma intermediate token",{repl:e,figmaUrl:E,payload:r}),D({errorMessage:"Something went wrong while importing. Please try again."}),[2];return u=a.token,l(function(e){return"in_progress"===e.status?e:{status:"in_progress",progress:0,text:"Preparing Figma import..."}}),[4,n.figmaImport.startImport.rpc({intermediateToken:u},{signal:o})];case 2:if(!(c=Y.sent()).ok)switch(s=c.payload.code){case"INVALID_REQUEST":case"UNCAUGHT_ERROR":return D({errorMessage:"Something went wrong while importing. Please try again."}),[2];case"UNEXPECTED_DISCONNECT":case"CANCEL":return[2];default:(0,sb.A)(s)}d=n.figmaImport.status.subscribe({},{signal:o}).resReadable,p=void 0,f=!1,h=!1,Y.label=3;case 3:Y.trys.push([3,8,9,14]),m=function(){var n=y.value;if(!n.ok){var t=n.payload.code;switch(t){case"FIGMA_TOKEN_EXPIRED":case"FIGMA_INVALID_TOKEN":return l({status:"needs_auth",retryAuth:function(){return b(function(e){return e+1})}}),{v:void 0};case"FIGMA_NODE_NOT_FOUND":return D({errorMessage:"The selected Figma component could not be found, please ensure you have selected a frame and copied the link to the frame."}),{v:void 0};case"FIGMA_FILE_NOT_FOUND":return D({errorMessage:"The Figma file could not be accessed, please ensure you have copied the link to the file."}),{v:void 0};case"FIGMA_SELECTION_TOO_LARGE":return D({errorMessage:"Your Figma selection is too large to process, please make sure you have selected a single frame."}),{v:void 0};case"FIGMA_RATE_LIMIT_EXCEEDED":return D({errorMessage:"Too many requests. Please wait a moment and try again."}),{v:void 0};case"NO_CODE_GENERATED":return D({errorMessage:"No code could be generated from your frame. Please try a different link."}),{v:void 0};case"TIMEOUT":return D({errorMessage:"The import took too long. Please try again, or try a different component."}),{v:void 0};case"FIGMA_NODE_NOT_SUPPORTED":return D({errorMessage:"The selected Figma component is not supported. Please make sure you have selected a frame and copied the link to the frame."}),{v:void 0};case"FIGMA_PAGE_WITH_MULTIPLE_CHILDREN":return D({errorMessage:"The selected Figma page has multiple children. Please make sure you have selected a single frame."}),{v:void 0};case"FIGMA_PAGE_WITH_NO_VALID_CHILDREN":return D({errorMessage:"The selected Figma page doesn't have any content we can convert to code. Please make sure you've selected a page with visible designs then try again."}),{v:void 0};case"INVALID_REQUEST":case"UNKNOWN":case"UNCAUGHT_ERROR":return D({errorMessage:"Something went wrong while importing. Please try again."}),{v:void 0};case"NOT_STARTED":return lK.vF.error("Figma Import: Failed to import from Figma",{repl:e,figmaUrl:E,payload:n.payload}),dt.Cp(Error("Figma import: not started"),{extra:{replId:e,figmaUrl:E,payload:n.payload}}),D({errorMessage:"Something went wrong while importing. Please try again."}),{v:void 0};case"READABLE_BROKEN":case"CANCEL":case"UNEXPECTED_DISCONNECT":return{v:void 0};default:(0,sb.A)(t)}}var r=n.payload;"progress"===r.kind?l(function(e){return"in_progress"===e.status&&e.progress>=r.number?e:{status:"in_progress",progress:r.number,text:r.statusText}}):"success"===r.kind&&(p=function(e){var n=e.file,t=e.frame,r="".concat(n," (").concat(t,")");if(r.length<=dr.z)return r;var i=dr.z-3;if(n.length<=i-1){var o=i-n.length,a=t.length>o?t.substring(0,o-1)+"…":t;return"".concat(n," (").concat(a,")")}var l=i-Math.min(t.length,10),u=n,c=t;n.length>l&&(u=n.substring(0,l-1)+"…");var s=i-u.length;return t.length>s&&(c=t.substring(0,s-1)+"…"),"".concat(u," (").concat(c,")")}({file:r.figmaFileName,frame:r.figmaSelectedFrameName}))},w=(0,dn._)(d),Y.label=4;case 4:return[4,w.next()];case 5:if(!(f=!(y=Y.sent()).done))return[3,7];if(x=m(),"object"===(0,eI._)(x))return[2,x.v];Y.label=6;case 6:return f=!1,[3,4];case 7:return[3,14];case 8:return _=Y.sent(),h=!0,g=_,[3,14];case 9:if(Y.trys.push([9,,12,13]),!(f&&null!=w.return))return[3,11];return[4,w.return()];case 10:Y.sent(),Y.label=11;case 11:return[3,13];case 12:if(h)throw g;return[7];case 13:return[7];case 14:return l({status:"in_progress",progress:1,text:"Creating checkpoint"}),[4,n.git.init.rpc({initialCommit:!0,includeAllInitialFiles:!0},{signal:o})];case 15:if(!(S=Y.sent()).ok)switch(S.payload.code){case"ALREADY_INITIALIZED":break;case"CANCEL":case"UNEXPECTED_DISCONNECT":return[2];default:dt.v4(function(e){e.setExtra("gitInitError",S.payload),dt.Cp(Error("figma import: git init failed"))})}return l({status:"in_progress",progress:1,text:"Handing off to Agent"}),[4,v()];case 16:return Y.sent(),[4,t({variables:{input:{id:e,title:p,makeTitleUnique:!0,figmaImportStatus:cF.u4D.Completed}}})];case 17:return Y.sent(),(0,oq.u4)(oq.AZ.FIGMA_IMPORT_USED,{action:"completed"}),l({status:"success"}),[2]}})})()},[E,e,t,v,y,i,D]),A&&"Repl"===A.getRepl.__typename&&A.getRepl.config.figmaImportStatus===cF.u4D.Failed)?{status:"error",errorMessage:"Something went wrong"}:a),U=(0,de.m)({onAuth:function(){"needs_auth"===F.status&&F.retryAuth(),(0,oq.u4)(oq.AZ.FIGMA_AUTH_COMPLETE,{source:"workspace"})}});return"not_started"===F.status||"success"===F.status?null:("in_progress"===F.status?R=(0,c.Y)(dp,{text:F.text,progress:F.progress}):"error"===F.status?R=(0,c.Y)(df,{errorMessage:F.errorMessage}):"needs_auth"===F.status&&(R=(0,c.Y)(dh,{onClick:U})),(0,c.Y)(dl.Z,{children:(0,c.Y)(ou.S,{clsx:dd().overlay,style:{cursor:"in_progress"===F.status?"wait":"default"},children:(0,c.Y)(s9.Ay,{children:(0,c.FD)(ou.S,{clsx:dd().animationWrapper,tabIndex:-1,children:[(0,c.FD)(ou.S,{align:"center",gap:16,children:[(0,c.Y)(du.H,{}),(0,c.Y)(aA.EY,{multiline:!1,variant:"subheadBig",dataCy:"figma-lock-screen",children:"Importing from Figma..."})]}),(0,c.Y)(ou.S,{pt:16,px:16,gap:4,children:R})]})})})}))}var dm=t(17896),dv=t(45711);function dw(){var e=(0,o1.A)().replspaceApi,n=(0,u._)((0,d.useState)(!1),2),t=n[0],r=n[1],i=rg(t1),o=oU(),a=da();return(0,dm.D)({insertConfigPlugin:function(){return i({pane:{type:"config",flow:"githubImport"},focusIfExists:!0})},setConfigScreenLockIsOpen:r,openFile:o,openPane:a}),(0,d.useEffect)(function(){if(t)return e.onConfirmSendToken(function(e){e&&e(!0,!1)})},[t,e]),t?(0,c.Y)(dv.A,{reason:"Importing…"}):null}var dy=t(17342);function db(){var e=(0,f._)(["\n  fragment MarkLessonCompleteLesson on UserCourseLesson {\n    id\n    lessonSlug\n    timeCompleted\n    course {\n      id\n      courseSlug\n    }\n  }\n"]);return db=function(){return e},e}function dx(){var e=(0,f._)(["\n  mutation MarkLessonAsComplete($input: CompleteUserCourseLessonInput!) {\n    completeUserCourseLesson(input: $input) {\n      ... on UpdatedUserCourseLesson {\n        __typename\n        userCourseLesson {\n          id\n          timeCompleted\n        }\n      }\n      ... on NotFoundError {\n        __typename\n        message\n      }\n      ... on UnauthorizedError {\n        __typename\n        message\n      }\n      ... on UserError {\n        __typename\n        message\n      }\n    }\n  }\n"]);return dx=function(){return e},e}var d_={},dS=(0,h.J1)(db()),dY=(0,h.J1)(dx());function dA(){var e=(0,f._)(["\n  fragment ReplEnvironmentHeaderCurrentUser on CurrentUser {\n    id\n    ...OrgSwitcherCurrentUser\n  }\n  ","\n"]);return dA=function(){return e},e}function dI(){var e=(0,f._)(["\n  fragment ReplEnvironmentHeaderRepl on Repl {\n    id\n    org {\n      id\n      type\n    }\n    authorizations {\n      viewPermissions {\n        isAuthorized\n      }\n      viewDeploymentConfig {\n        isAuthorized\n      }\n    }\n    owner {\n      ... on Team {\n        id\n      }\n      ... on User {\n        id\n      }\n    }\n    lesson {\n      id\n      ...MarkLessonCompleteLesson\n    }\n    config {\n      isInPlanningPhase\n    }\n    ...ReplEnvironmentHeaderLeftRepl\n  }\n  ","\n  ","\n"]);return dI=function(){return e},e}function dC(){var e=(0,f._)(["\n  query ReplEnvironmentHeader($id: String!) {\n    getRepl(id: $id) {\n      ... on Repl {\n        id\n        ...ReplEnvironmentHeaderRepl\n      }\n    }\n    currentUser {\n      id\n      ...ReplEnvironmentHeaderCurrentUser\n    }\n  }\n  ","\n  ","\n"]);return dC=function(){return e},e}var dk={},dE=(0,h.J1)(dA(),dy.ks),dD=(0,h.J1)(dI(),dS,y.c),dR=(0,h.J1)(dC(),dD,dE),dF=t(51481),dU=t(90639),dP=(0,uw.AH)([ol.wp.dragRegion,ol.wp.flex.growAndShrink(1),ol.wp.height(32)]);function dO(){return(0,c.Y)(ou.S,{css:dP})}var dT=t(15268),dL=t(59271),dM=t(73553),dG=t(30048),dN=t(31083),dz=t(82368),dH=t(15736),dB=t(8356);function dW(e){var n=e.title,t=e.current,r=e.max,i=e.unit,o=e.isUbbV2,a=function(e){return i?"".concat(i).concat(e):e.toString()},l=r>0?t/r:0,u=(0,dH.d8)({decimal:l});return(0,c.FD)(ou.S,{gap:6,children:[(0,c.FD)(ou.S,{css:dj.usageMeterAndTitle,children:[(0,c.Y)(ou.S,{row:!0,align:"center",gap:4,children:(0,c.Y)(aA.EY,{height:"singleLine",children:n})}),(0,c.Y)(aA.EY,{height:"singleLine",color:"dimmer",children:void 0!==o&&o?"".concat(Math.floor(100*l),"%"):"".concat(a(t),"/").concat(a(r))})]}),(0,c.Y)("div",{children:(0,c.Y)(dN.W,{css:dj.measureBar,total:r,current:t,color:u,tooltipHidden:!0})})]})}var dj=(0,rC.x)({measureBar:[ol.wp.height(8),{pointerEvents:"none"}],usageMeterAndTitle:[ol.wp.display.flex,ol.wp.flex.row,ol.wp.justify.spaceBetween,ol.wp.align.center]});function d$(e){var n=e.limit,t=e.usage;if(!n||void 0===t)return(0,c.Y)(dc.A,{});var r=100*Math.min(1,t/n),i="",o="primary";return r>dG.Kd?(i="You've exceeded the ".concat(dL.Lm," plan usage limit."),o="negative"):r===dG.Kd?(i="You've reached the ".concat(dL.Lm," plan usage limit."),o="negative"):r>=dG.a6?(i="You're nearing the ".concat(dL.Lm," plan usage limit."),o="orange"):r>=dG.s7&&(i="You're approaching the ".concat(dL.Lm," plan usage limit."),o="yellow"),(0,c.FD)(c.FK,{children:[(0,c.Y)(ou.S,{gap:4,children:(0,c.Y)(dW,{title:"Usage",current:t,max:n,unit:"$",isUbbV2:!0})}),i?(0,c.Y)(dz.N,{text:i,colorway:o}):null,(0,c.Y)(dM.A,{text:"Upgrade for more",colorway:"primary",variant:"outlined",context:"agent_freemium_quota",iconLeft:(0,c.Y)(dB.A,{}),highlightUpsell:"agent"})]})}var dq=t(30899),dV=t(17376),dK=t(94679),dZ=(0,rC.x)({root:[ol.wp.px(8),dV.b.nofill,ol.wp.height(32),ol.wp.align.center,ol.wp.rowWithGap(4),ol.wp.px(6),ol.wp.borderRadius(),ol.wp.color.foregroundDefault],measureBar:[ol.wp.width(50),ol.wp.height(8),{pointerEvents:"none"}],popoverWrapper:[ol.wp.width(280)],header:[ol.wp.fontWeight.bold]});function dJ(){var e,n,t=(0,u._)((0,d.useState)(!1),2),r=t[0],i=t[1],o=(0,dq.i)().agentUsage;(0,dG.Nk)({usage:null==o?void 0:o.usage,limit:null==o?void 0:o.limit,percentThreshold:dG.s7,onHitThreshold:function(){i(!0)}}),(0,dG.Nk)({usage:null==o?void 0:o.usage,limit:null==o?void 0:o.limit,percentThreshold:dG.a6,onHitThreshold:function(){i(!0)}}),(0,dG.Nk)({usage:null==o?void 0:o.usage,limit:null==o?void 0:o.limit,percentThreshold:dG.Kd,onHitThreshold:function(){i(!0),(0,oq.u4)(oq.AZ.AGENT_USED,{action:"hit_freemium_quota"})}});var a=(0,d.useMemo)(function(){return(null==o?void 0:o.usage)&&(null==o?void 0:o.limit)?Math.min(1,o.usage/o.limit):0},[null==o?void 0:o.usage,null==o?void 0:o.limit]),l=(0,d.useMemo)(function(){return(0,dH.d8)({decimal:a})},[a]);return(0,c.FD)(dK.Wv,{isOpen:r,onOpenChange:function(e){i(e)},label:"Agent Usage",placement:"bottom start",children:[(0,c.Y)(aY.SC,{css:dZ.root,children:(0,c.FD)(ou.S,{row:!0,align:"center",gap:8,children:[(0,c.Y)(dN.W,{css:dZ.measureBar,total:null!=(e=null==o?void 0:o.limit)?e:0,current:null!=(n=null==o?void 0:o.usage)?n:0,color:l,tooltipHidden:!0}),(0,c.FD)(aA.EY,{color:"dimmer",variant:"small",children:[Math.floor(100*a),"% used"]})]})}),(0,c.Y)(ou.S,{css:dZ.popoverWrapper,p:8,children:(0,c.FD)(ou.S,{gap:12,children:[(0,c.FD)(aA.EY,{css:dZ.header,children:[ci.g$," usage"]}),(0,c.Y)(d$,{limit:null==o?void 0:o.limit,usage:null==o?void 0:o.usage})]})})]})}var dQ=t(68160),dX=t(72473);function d0(){var e=(0,f._)(["\n  query ProjectHeaderMenu($id: String!, $input: ProjectReplsInput!) {\n    getRepl(id: $id) {\n      __typename\n      ... on Repl {\n        id\n        title\n        ...CreateProjectForkRepl\n        project {\n          id\n          mainRepl {\n            id\n            title\n            ...CreateProjectForkRepl\n          }\n          repls(input: $input) {\n            items {\n              id\n              title\n              ...ReplLinkRepl\n            }\n            pageInfo {\n              hasNextPage\n              nextCursor\n            }\n          }\n        }\n      }\n    }\n  }\n  ","\n  ","\n"]);return d0=function(){return e},e}var d1={},d2=(0,h.J1)(d0(),dX.T,dQ.r),d4=t(12955),d5=t(91918),d7=t(53862),d3=t(15033),d8=t(46892),d6=t(91427),d9=t(98192),pe=t(69673),pn=t(17279),pt=t(7617),pr=t(20203),pi=t(73116),po=t(19530),pa=t(47925),pl=t(36967),pu=(0,rC.x)({self:[ol.wp.display.grid,ol.wp.p(4),{gap:4,alignItems:"stretch"}],list:[ol.wp.maxHeight(640)],listItem:[pn.iF.item,ol.wp.px(8),ol.wp.height(28),{span:ol.wp.color.foregroundDefault}],listItemLabel:{flex:1},listButtonLink:[ol.wp.height(28),ol.wp.px(6),ol.wp.transition.none],currentReplIcon:[ol.wp.color.foregroundDimmer],tourWrapper:[ol.wp.p(8)]});function pc(e){var n=e.label,t=e.icon,r=(0,st._)(e,["label","icon"]);return(0,c.FD)(pn.if,(0,r9._)((0,p._)({css:pu.listItem},r),{textValue:n,children:[(0,c.Y)(pn.PX,{css:pu.listItemLabel,children:n}),(0,c.Y)(oc.Z_,{size:16,children:t})]}))}var ps=(0,d.forwardRef)(function(e,n){var t,r,i,o,a,l,s,f,h,m,v,w,y=(0,er.A)(),b=(0,u._)((0,d.useState)(""),2),x=b[0],_=b[1],S=(0,d6.Os)(d8.X.id,d8.F.Forks),Y=(t={variables:{id:y,input:{}},notifyOnNetworkStatusChange:!0},r=(0,p._)({},d1,t),g.I(d2,r)),A=Y.refetch,I=(0,ak.A)(),C=I.showConfirm,k=I.showError,E=(0,u._)((0,d3.B)({onFork:function(){C("App forked, redirecting...")},onError:function(){k("Error creating fork - please try again")}}),2),D=E[0],R=E[1].loading;(0,d4.A)(function(){A({input:{filters:{title:{search:x}}},id:y})},[x],300);var F=(null==(i=Y.data)?void 0:i.getRepl.__typename)==="Repl"?Y.data.getRepl.project:null,U=(null==(o=Y.previousData)?void 0:o.getRepl.__typename)==="Repl"?null==(a=Y.previousData.getRepl.project)?void 0:a.repls.items:null,P=null!=(m=null==F?void 0:F.mainRepl)?m:(null==(l=Y.previousData)?void 0:l.getRepl.__typename)==="Repl"&&null!=(h=null==(s=Y.previousData.getRepl.project)?void 0:s.mainRepl)?h:null,O=(null==(f=Y.data)?void 0:f.getRepl.__typename)==="Repl"?Y.data.getRepl:null,T=(0,d5.Si)({orgId:e.org.id,projectId:e.projectId}),L=(0,d6.mR)();return(0,c.FD)("div",{css:pu.self,ref:n,children:[(0,c.FD)(pr.U,{children:[(0,c.Y)(pi.L,{"aria-label":"Search Apps in Project",placeholder:"Search by App title...",onChange:_,isLoading:Y.loading,autoFocus:!0}),(0,c.Y)(pn.qF,{isLoading:Y.loading,items:null!=(w=null!=(v=null==F?void 0:F.repls.items)?v:U)?w:[],css:pu.list,children:function(e){var n;return(0,c.Y)(pc,(0,r9._)((0,p._)({icon:e.id===y?(0,c.Y)(uy.m_,{tooltip:"You are here",placement:"right",children:(0,c.Y)(pl.A,{css:pu.currentReplIcon})}):void 0,isDisabled:e.id===y,id:e.id,label:e.title},(0,pa.q1)(e)),{sessions:null!=(n=T[e.id])?n:[]}),e.id)}})]}),(0,c.Y)(pe.a,{}),(0,c.FD)(ou.S,{children:[(0,c.Y)(d9.v,(0,r9._)((0,p._)({alignment:"start"},(0,d7.gm)({org:e.org,projectId:e.projectId})),{target:"_blank",iconLeft:(0,c.Y)(cq.A,{}),text:"Project dashboard",variant:"nofill",css:pu.listButtonLink})),(0,c.FD)(pt.in,{elevated:!1,placement:"right top",trigger:(0,c.Y)(aY.$n,{alignment:"start",variant:"nofill",text:"New fork",iconLeft:R?(0,c.Y)(dc.A,{}):(0,c.Y)(at.A,{}),loading:R,css:pu.listButtonLink}),children:[O?(0,c.Y)(pt.Dr,{label:"From here (".concat(O.title,")"),isDisabled:R,onAction:function(){D({forkSource:"projectHeaderMenu",orgId:e.org.id,repl:O})}}):null,O&&P&&O.id!==P.id?(0,c.Y)(pt.Dr,{label:"From main App (".concat(P.title,")"),isDisabled:!P||R,onAction:function(){P&&D({orgId:e.org.id,repl:P,forkSource:"projectHeaderMenu"})}}):null]}),S.isActive&&L?(0,c.Y)("div",{css:pu.tourWrapper,children:(0,c.Y)(po.p,{content:L.content,title:L.title,onDismiss:S.next,onCurrentStepChange:S.goto,currentStepIndex:d8.X.steps.findIndex(function(e){return e.id===d8.F.Forks}),totalSteps:d8.X.steps.length})}):null]})]})}),pd=t(5190),pp=t(80335),pf=(0,rC.x)({container:[ol.wp.position.relative],loadingGeneratedIcon:[pp.S.foregroundPulse(rI.LU.blurpleDimmest,rI.LU.blurpleDefault),ol.wp.borderRadius()]});function ph(e){var n=e.replId,t=e.replIconUrl,r=e.size,i=(0,pd.b)({replId:n,replIconUrl:t}),o=i.loading,a=i.generatedIconUrl;return(0,c.Y)(ou.S,{css:pf.container,children:(0,c.Y)(ou.S,{css:o&&pf.loadingGeneratedIcon,children:(0,c.Y)(cm.Ay,{iconUrl:a||t,size:void 0===r?20:r,alt:""})})})}var pg=t(86063),pm=(0,rC.x)({projectLinkTooltip:[ol.wp.maxWidth(400),ol.wp.flex.shrink(2)],projectLink:[ol.wp.px(6),ol.wp.noDragRegion,ol.wp.flex.growAndShrink(1)],inheritanceChevron:[ol.wp.color.outlineStrongest,{marginInline:-1}]});function pv(e){var n=e.repl,t=(0,u._)((0,d.useState)(!1),2),r=t[0],i=t[1];return n.project&&n.org?(0,c.FD)(c.FK,{children:[(0,c.Y)(uy.m_,{tooltip:"Project forks",css:pm.projectLinkTooltip,isOpen:!r&&void 0,children:(0,c.FD)(dK.Wv,{label:"Project Menu",isOpen:r,onOpenChange:i,placement:"bottom start",children:[(0,c.Y)(aY.$n,{iconLeft:(0,c.Y)(ph,{replId:n.id,replIconUrl:n.iconUrl}),text:n.project.title,variant:"nofill",css:pm.projectLink}),(0,c.Y)(ps,{org:n.org,projectId:n.project.id})]})}),(0,c.Y)(pg.A,{size:12,css:pm.inheritanceChevron})]}):null}var pw=t(74999),py=t.n(pw);function pb(){return(0,c.Y)(af.ui,{background:"higher",clsx:py().root,children:(0,c.Y)(aA.EY,{children:"Planning"})})}var px=t(99501),p_=t(67277),pS={backgroundDefault:"var(--background-default)",backgroundHigher:"var(--background-higher)"},pY={primary:{strongest:"var(--accent-primary-strongest)",stronger:"var(--accent-primary-stronger)",default:"var(--accent-primary-default)",dimmer:"var(--accent-primary-dimmer)",dimmest:"var(--accent-primary-dimmest)"},positive:{strongest:"var(--accent-positive-strongest)",stronger:"var(--accent-positive-stronger)",default:"var(--accent-positive-default)",dimmer:"var(--accent-positive-dimmer)",dimmest:"var(--accent-positive-dimmest)"},negative:{strongest:"var(--accent-negative-strongest)",stronger:"var(--accent-negative-stronger)",default:"var(--accent-negative-default)",dimmer:"var(--accent-negative-dimmer)",dimmest:"var(--accent-negative-dimmest)"},red:{strongest:"var(--accent-red-strongest)",stronger:"var(--accent-red-stronger)",default:"var(--accent-red-default)",dimmer:"var(--accent-red-dimmer)",dimmest:"var(--accent-red-dimmest)"},orange:{strongest:"var(--accent-orange-strongest)",stronger:"var(--accent-orange-stronger)",default:"var(--accent-orange-default)",dimmer:"var(--accent-orange-dimmer)",dimmest:"var(--accent-orange-dimmest)"},yellow:{strongest:"var(--accent-yellow-strongest)",stronger:"var(--accent-yellow-stronger)",default:"var(--accent-yellow-default)",dimmer:"var(--accent-yellow-dimmer)",dimmest:"var(--accent-yellow-dimmest)"},lime:{strongest:"var(--accent-lime-strongest)",stronger:"var(--accent-lime-stronger)",default:"var(--accent-lime-default)",dimmer:"var(--accent-lime-dimmer)",dimmest:"var(--accent-lime-dimmest)"},green:{strongest:"var(--accent-green-strongest)",stronger:"var(--accent-green-stronger)",default:"var(--accent-green-default)",dimmer:"var(--accent-green-dimmer)",dimmest:"var(--accent-green-dimmest)"},teal:{strongest:"var(--accent-teal-strongest)",stronger:"var(--accent-teal-stronger)",default:"var(--accent-teal-default)",dimmer:"var(--accent-teal-dimmer)",dimmest:"var(--accent-teal-dimmest)"},blue:{strongest:"var(--accent-blue-strongest)",stronger:"var(--accent-blue-stronger)",default:"var(--accent-blue-default)",dimmer:"var(--accent-blue-dimmer)",dimmest:"var(--accent-blue-dimmest)"},blurple:{strongest:"var(--accent-blurple-strongest)",stronger:"var(--accent-blurple-stronger)",default:"var(--accent-blurple-default)",dimmer:"var(--accent-blurple-dimmer)",dimmest:"var(--accent-blurple-dimmest)"},purple:{strongest:"var(--accent-purple-strongest)",stronger:"var(--accent-purple-stronger)",default:"var(--accent-purple-default)",dimmer:"var(--accent-purple-dimmer)",dimmest:"var(--accent-purple-dimmest)"},magenta:{strongest:"var(--accent-magenta-strongest)",stronger:"var(--accent-magenta-stronger)",default:"var(--accent-magenta-default)",dimmer:"var(--accent-magenta-dimmer)",dimmest:"var(--accent-magenta-dimmest)"},pink:{strongest:"var(--accent-pink-strongest)",stronger:"var(--accent-pink-stronger)",default:"var(--accent-pink-default)",dimmer:"var(--accent-pink-dimmer)",dimmest:"var(--accent-pink-dimmest)"},grey:{strongest:"var(--accent-grey-strongest)",stronger:"var(--accent-grey-stronger)",default:"var(--accent-grey-default)",dimmer:"var(--accent-grey-dimmer)",dimmest:"var(--accent-grey-dimmest)"},brown:{strongest:"var(--accent-brown-strongest)",stronger:"var(--accent-brown-stronger)",default:"var(--accent-brown-default)",dimmer:"var(--accent-brown-dimmer)",dimmest:"var(--accent-brown-dimmest)"},warning:{strongest:"var(--accent-orange-strongest)",stronger:"var(--accent-orange-stronger)",default:"var(--accent-orange-default)",dimmer:"var(--accent-orange-dimmer)",dimmest:"var(--accent-orange-dimmest)"},brand:{strongest:"var(--brand-accent-strongest)",stronger:"var(--brand-accent-stronger)",default:"var(--brand-accent-default)",dimmer:"var(--brand-accent-dimmer)",dimmest:"var(--brand-accent-dimmest)"}},pA=new Map,pI=new Map,pC=new Map;Object.keys(pY),Object.keys(pY[Object.keys(pY)[0]]);var pk=!0,pE=!1,pD=void 0;try{for(var pR,pF=Object.entries({borderRadius1:"--border-radius-1",borderRadius2:"--border-radius-2",borderRadius4:"--border-radius-4",borderRadius6:"--border-radius-6",borderRadius8:"--border-radius-8",borderRadius12:"--border-radius-12",borderRadius16:"--border-radius-16",borderRadiusDefault:"--border-radius-default",borderRadiusContainer:"--border-radius-container",borderRadiusRound:"--border-radius-round",space1:"--space-1",space2:"--space-2",space4:"--space-4",space6:"--space-6",space8:"--space-8",space12:"--space-12",space16:"--space-16",space24:"--space-24",space32:"--space-32",space40:"--space-40",space48:"--space-48",space56:"--space-56",space64:"--space-64",space80:"--space-80",space96:"--space-96",space128:"--space-128",space256:"--space-256",spaceDefault:"--space-default",shadow1:"--shadow-1",shadow2:"--shadow-2",shadow3:"--shadow-3",shadowDefault:"--shadow-default",fontFamilyDefault:"--font-family-default",fontFamilyCode:"--font-family-code",fontSizeSmall:"--font-size-small",fontSizeDefault:"--font-size-default",fontSizeSubheadDefault:"--font-size-subhead-default",fontSizeSubheadBig:"--font-size-subhead-big",fontSizeHeaderDefault:"--font-size-header-default",fontSizeHeaderBig:"--font-size-header-big",fontWeightRegular:"--font-weight-regular",fontWeightMedium:"--font-weight-medium",fontWeightBold:"--font-weight-bold",lineHeightSmall:"--line-height-small",lineHeightDefault:"--line-height-default",lineHeightSubheadDefault:"--line-height-subhead-default",lineHeightSubheadBig:"--line-height-subhead-big",lineHeightHeaderDefault:"--line-height-header-default",lineHeightHeaderBig:"--line-height-header-big",transitionDurationSnappy:"--transition-duration-snappy",transitionDurationChill:"--transition-duration-chill",transitionTimingFunctionSnappy:"--transition-timing-function-snappy",transitionTimingFunctionChill:"--transition-timing-function-chill",borderWidthDefault:"--border-width-default",singleLine:"--single-line",backgroundRoot:"--background-root",backgroundDefault:"--background-default",backgroundHigher:"--background-higher",backgroundHighest:"--background-highest",backgroundOverlay:"--background-overlay",foregroundDefault:"--foreground-default",foregroundDimmer:"--foreground-dimmer",foregroundDimmest:"--foreground-dimmest",outlineDimmest:"--outline-dimmest",outlineDimmer:"--outline-dimmer",outlineDefault:"--outline-default",outlineStronger:"--outline-stronger",outlineStrongest:"--outline-strongest",accentPrimaryStrongest:"--accent-primary-strongest",accentPrimaryStronger:"--accent-primary-stronger",accentPrimaryDefault:"--accent-primary-default",accentPrimaryDimmer:"--accent-primary-dimmer",accentPrimaryDimmest:"--accent-primary-dimmest",accentPositiveStrongest:"--accent-positive-strongest",accentPositiveStronger:"--accent-positive-stronger",accentPositiveDefault:"--accent-positive-default",accentPositiveDimmer:"--accent-positive-dimmer",accentPositiveDimmest:"--accent-positive-dimmest",accentNegativeStrongest:"--accent-negative-strongest",accentNegativeStronger:"--accent-negative-stronger",accentNegativeDefault:"--accent-negative-default",accentNegativeDimmer:"--accent-negative-dimmer",accentNegativeDimmest:"--accent-negative-dimmest",redStrongest:"--accent-red-strongest",redStronger:"--accent-red-stronger",redDefault:"--accent-red-default",redDimmer:"--accent-red-dimmer",redDimmest:"--accent-red-dimmest",orangeStrongest:"--accent-orange-strongest",orangeStronger:"--accent-orange-stronger",orangeDefault:"--accent-orange-default",orangeDimmer:"--accent-orange-dimmer",orangeDimmest:"--accent-orange-dimmest",yellowStrongest:"--accent-yellow-strongest",yellowStronger:"--accent-yellow-stronger",yellowDefault:"--accent-yellow-default",yellowDimmer:"--accent-yellow-dimmer",yellowDimmest:"--accent-yellow-dimmest",limeStrongest:"--accent-lime-strongest",limeStronger:"--accent-lime-stronger",limeDefault:"--accent-lime-default",limeDimmer:"--accent-lime-dimmer",limeDimmest:"--accent-lime-dimmest",greenStrongest:"--accent-green-strongest",greenStronger:"--accent-green-stronger",greenDefault:"--accent-green-default",greenDimmer:"--accent-green-dimmer",greenDimmest:"--accent-green-dimmest",tealStrongest:"--accent-teal-strongest",tealStronger:"--accent-teal-stronger",tealDefault:"--accent-teal-default",tealDimmer:"--accent-teal-dimmer",tealDimmest:"--accent-teal-dimmest",blueStrongest:"--accent-blue-strongest",blueStronger:"--accent-blue-stronger",blueDefault:"--accent-blue-default",blueDimmer:"--accent-blue-dimmer",blueDimmest:"--accent-blue-dimmest",blurpleStrongest:"--accent-blurple-strongest",blurpleStronger:"--accent-blurple-stronger",blurpleDefault:"--accent-blurple-default",blurpleDimmer:"--accent-blurple-dimmer",blurpleDimmest:"--accent-blurple-dimmest",purpleStrongest:"--accent-purple-strongest",purpleStronger:"--accent-purple-stronger",purpleDefault:"--accent-purple-default",purpleDimmer:"--accent-purple-dimmer",purpleDimmest:"--accent-purple-dimmest",magentaStrongest:"--accent-magenta-strongest",magentaStronger:"--accent-magenta-stronger",magentaDefault:"--accent-magenta-default",magentaDimmer:"--accent-magenta-dimmer",magentaDimmest:"--accent-magenta-dimmest",pinkStrongest:"--accent-pink-strongest",pinkStronger:"--accent-pink-stronger",pinkDefault:"--accent-pink-default",pinkDimmer:"--accent-pink-dimmer",pinkDimmest:"--accent-pink-dimmest",greyStrongest:"--accent-grey-strongest",greyStronger:"--accent-grey-stronger",greyDefault:"--accent-grey-default",greyDimmer:"--accent-grey-dimmer",greyDimmest:"--accent-grey-dimmest",brownStrongest:"--accent-brown-strongest",brownStronger:"--accent-brown-stronger",brownDefault:"--accent-brown-default",brownDimmer:"--accent-brown-dimmer",brownDimmest:"--accent-brown-dimmest",white:"--white",black:"--black",surfaceBackground:"--surface-background",interactiveBackground:"--interactive-background",interactiveBackgroundActive:"--interactive-background--active",interactiveBorder:"--interactive-border",interactiveBorderHover:"--interactive-border--hover",brandText:"--brand-text",brandTextSecondary:"--brand-secondary-text",brandTextLight:"--brand-text-light",brandBackground:"--brand-background",brandBackgroundDarker:"--brand-background-darker",brandBorder:"--brand-border",brandAccentStrongest:"--brand-accent-strongest",brandAccentStronger:"--brand-accent-stronger",brandAccentDefault:"--brand-accent-default",brandAccentDimmer:"--brand-accent-dimmer",brandAccentDimmest:"--brand-accent-dimmest",brandBlack:"--brand-black",fontFamilyBrand:"--font-family-brand",fontFamilyBrandVariable:"--font-family-brand-variable",fontFamilyBrandPixel:"--font-family-brand-pixel",breakpointMobileMin:"--breakpoint-mobile-min",breakpointMobileMax:"--breakpoint-mobile-max",breakpointTabletMin:"--breakpoint-tablet-min",breakpointTabletMax:"--breakpoint-tablet-max"})[Symbol.iterator]();!(pk=(pR=pF.next()).done);pk=!0){var pU=(0,u._)(pR.value,2),pP=pU[0],pO=pU[1];pA.set(pP,pO),pI.set(pO,pP),pC.set(pP,"var(".concat(pO,")"))}}catch(e){pE=!0,pD=e}finally{try{pk||null==pF.return||pF.return()}finally{if(pE)throw pD}}var pT=t(32034),pL=t(96693),pM=(0,rC.x)({metadata:[],iconWrapper:[ol.wp.position.relative,ol.wp.display.none,(0,ty._)({},ol.$_.min("tabletMax"),[ol.wp.display.flex])],dimIcon:[{opacity:.2}],diconnectedIcon:[ol.wp.position.absolute,{left:0,right:0,top:0,bottom:0,margin:"auto"}],title:[ol.wp.flex.shrink(1),ol.wp.truncate],placeholderTitle:[ol.wp.width(100),ol.wp.borderRadius("default"),{alignSelf:"stretch"},pp.S.foregroundPulse(pS.backgroundDefault,pS.backgroundHigher)]});function pG(e){var n,t=e.repl,r=(0,pT.A)().didDisconnect;return(0,c.FD)(ou.S,{grow:!0,shrink:!0,row:!0,gap:6,align:"center",children:[(0,c.FD)(ou.S,{css:pM.iconWrapper,children:[(null==(n=t.project)?void 0:n.id)?null:(0,c.Y)(ou.S,{css:r&&pM.dimIcon,children:(0,c.Y)(ph,{replId:t.id,replIconUrl:t.iconUrl})}),r?(0,c.Y)(uy.m_,{tooltip:"Reconnecting",children:(0,c.Y)(pL.A,{size:16,css:pM.diconnectedIcon})}):null]}),(0,c.Y)(aA.EY,{multiline:!1,css:pM.title,"data-cy":"header-repl-title",color:r?"dimmer":"default",children:t.title})]})}var pN=(0,rC.x)({popover:[ol.wp.maxWidth(460),ol.wp.width("100%")],button:[dV.b.nofill,ol.wp.height(32),ol.wp.flex.growAndShrink(1),ol.wp.align.center,ol.wp.rowWithGap(4),ol.wp.px(6),ol.wp.borderRadius(),ol.wp.color.foregroundDefault,{'&[aria-expanded="true"]':{backgroundColor:rI.LU.interactiveBackgroundActive}}]});function pz(e){var n=e.repl,t=e.getDesktopLayoutState,r=(0,u._)((0,d.useState)(!1),2),i=r[0],o=r[1];return(0,c.FD)(dK.Wv,{isOpen:i,onOpenChange:function(e){o(e),e&&(0,oq.u4)(oq.AZ.MODAL_VIEWED,{modal_name:"repl_metadata_popover"})},placement:"bottom start",label:"Repl info",css:pN.popover,children:[(0,c.Y)(ou.D.button,{dataCy:"ws-repl-info-container",css:pN.button,onClick:function(){(0,oq.u4)(oq.AZ.REPL_METADATA_OPENED)},"aria-expanded":i,children:(0,c.Y)(pG,{repl:n})}),(0,c.Y)(p_.A,{getDesktopLayoutState:t,setIsEditing:o})]})}var pH=t(48264),pB=t(75016),pW=t(87793);function pj(e){var n=oN(),t=(0,uf.A)(n.isOpen),r=(0,al.Jn)(u8.id),i=n.toggle;(0,al.SJ)(function(){return[u8.id,function(){return i()}]},[i]);var o=!!e.flipped!==t?(0,c.Y)(pW.A,{}):(0,c.Y)(pB.A,{});return(0,c.Y)(u1.K0,{onClick:function(){return i()},alt:"Toggle files",tooltipContents:(0,c.Y)(p$,{isOpen:t,shortcut:r}),size:32,children:o})}function p$(e){var n=(e.isOpen?"Close":"Open")+" files";return(0,c.FD)(ou.S,{row:!0,gap:8,align:"center",children:[(0,c.Y)(aA.EY,{multiline:!1,variant:"small",children:n}),e.shortcut?(0,c.Y)(al._y,{fontSize:10,keyCombo:e.shortcut}):null]})}function pq(){var e=(0,f._)(["\n  query WorkspaceRunButton($id: String!) {\n    getRepl(id: $id) {\n      ... on Repl {\n        id\n        title\n        rootOriginReplUrl\n        source {\n          release {\n            id\n            repl {\n              id\n              title\n              owner {\n                ... on User {\n                  id\n                  username\n                }\n                ... on Team {\n                  id\n                  username\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n    currentUser {\n      id\n    }\n  }\n"]);return pq=function(){return e},e}var pV={},pK=(0,h.J1)(pq()),pZ=t(37412),pJ=t(79164),pQ=t(26413),pX=t(16381),p0=t(74902),p1=function(e){return e.Welcome="Welcome",e.AiFirstWorkspace="AiFirstWorkspace",e.Assistant="Assistant",e.Agent="Agent",e.SidebarDock="SidebarDock",e.Run="Run",e.Deploy="Deploy",e}({}),p2=function(e){return"/public/videos/workspace-onboarding/".concat(e,".mp4")},p4=(0,rC.x)({tooltipContainer:[ol.wp.width("100%"),ol.wp.maxWidth(300),ol.wp.center,ol.wp.position.relative,ol.wp.colWithGap(8),ol.wp.pb(8)],image:[ol.wp.borderRadius(8)],textContent:[ol.wp.width("100%")]}),p5={id:"AiFirstWorkspace",title:"Welcome to the Workspace",isModal:!0,content:function(){return(0,c.Y)(ou.S,{css:p4.tooltipContainer,"data-cy":"workspace-tour-welcome",children:(0,c.Y)(aA.EY,{css:p4.textContent,children:"This is where all the magic happens. Let's take a look around!"})})}},p7={id:"AiFirstWorkspace",title:"The AI-first Workspace",isModal:!0,content:function(){return(0,c.FD)(ou.S,{css:p4.tooltipContainer,"data-cy":"workspace-tour-welcome",children:[(0,c.FD)(aA.EY,{css:p4.textContent,children:["Your workspace has a powerful AI chat called"," ",(0,c.Y)("strong",{children:ci.BP})," which can be used in all your projects."]}),(0,c.Y)(uB.A,{css:p4.image,src:"/public/images/ai/assistant.png",alt:"Assistant available",layout:"fixed",width:300,height:168})]})}},p3={id:"Assistant",title:"".concat(ci.BP,": Chat & quick edits"),icon:function(){return(0,c.Y)(oJ.A,{size:16})},content:function(){return(0,c.FD)(ou.S,{css:p4.tooltipContainer,children:[(0,c.FD)(aA.EY,{css:p4.textContent,children:[(0,c.Y)("strong",{children:ci.BP})," is a general AI chat for your project."]}),(0,c.Y)(pQ.A,{src:p2("assistant-dark"),autoPlay:!0,loop:!0}),(0,c.Y)(pX.s,{css:p4.textContent,children:(0,c.FD)("p",{children:["Use ",(0,c.Y)("strong",{children:ci.BP})," when you want to…",(0,c.FD)("ul",{children:[(0,c.Y)("li",{children:"Chat with AI about any topic"}),(0,c.Y)("li",{children:"Request quick, one-off edits to code"}),(0,c.Y)("li",{children:"Ask questions about your project"})]})]})}),(0,c.FD)(aA.EY,{color:"dimmer",variant:"small",multiline:!1,children:[pJ.a7," cents per ",pJ.go]})]})},autoSkipIfNoTarget:!0},p8={id:"Agent",title:"".concat(ci.g$,": Automated developer"),icon:function(){return(0,c.Y)(p0.A,{size:16})},content:function(){return(0,c.FD)(ou.S,{css:p4.tooltipContainer,children:[(0,c.FD)(aA.EY,{css:p4.textContent,children:[(0,c.Y)("strong",{children:ci.g$})," is an automated developer that plans and generates entire projects, occasionally pausing to ask you for feedback."]}),(0,c.Y)(pQ.A,{src:p2("agent-dark"),autoPlay:!0,loop:!0}),(0,c.Y)(pX.s,{css:p4.textContent,children:(0,c.FD)("p",{children:["Use ",(0,c.Y)("strong",{children:ci.g$})," when you want to…",(0,c.FD)("ul",{children:[(0,c.Y)("li",{children:"Build a new project from scratch"}),(0,c.Y)("li",{children:"Generate a build plan for your project"}),(0,c.Y)("li",{children:"Make complex, multi-step changes"})]})]})}),(0,c.FD)(aA.EY,{color:"dimmer",variant:"small",multiline:!1,children:["Variable pricing per ",pJ.v7]})]})},autoSkipIfNoTarget:!0},p6={id:"SidebarDock",title:"Dock: Open files & tools",icon:function(){return(0,c.Y)(sc.A,{size:16})},content:function(){return(0,c.FD)(ou.S,{css:p4.tooltipContainer,children:[(0,c.Y)(aA.EY,{css:p4.textContent,children:"In addition to AI tools, you can access code files and other workspace features via the Dock."}),(0,c.Y)(pQ.A,{src:p2("sidebar"),autoPlay:!0,loop:!0}),(0,c.FD)(aA.EY,{css:p4.textContent,children:["Notice that ",(0,c.Y)("strong",{children:"Files"})," has its own button at the top left."]})]})}},p9={id:"Run",title:"Run Button: Preview your App",icon:function(){return(0,c.Y)(cZ.A,{size:16})},content:function(){return(0,c.FD)(ou.S,{css:p4.tooltipContainer,children:[(0,c.FD)(aA.EY,{css:p4.textContent,children:["Click the ",(0,c.Y)("strong",{children:"Run button"})," at any time to see the output of your app."]}),(0,c.Y)(pQ.A,{src:p2("run-button"),autoPlay:!0,loop:!0})]})},advanceOnTargetClick:!0},fe="workspace-desktop-tour-2024",fn=(r={},(0,ty._)(r,cC.ll.IDLE,"Run"),(0,ty._)(r,cC.ll.RUNNING,"Stop"),(0,ty._)(r,cC.ll.STOPPING,"Stopping"),(0,ty._)(r,cC.ll.OFFLINE,"Working"),(0,ty._)(r,cC.ll.BEFORE_RUN,"Working"),r),ft=t(7227),fr=t(44371),fi=t(24537);function fo(e){return e[e.length-1]}var fa=(0,rC.x)({root:[ol.wp.colWithGap(4)],menuItem:[],menuItemSelector:[ol.wp.height(28),ol.wp.pl(4),{flex:1,transition:"none",span:{flex:1,textAlign:"left"}}],iconInvisible:[ol.wp.visibility.hidden],playControl:[ol.wp.height(28),ol.wp.width(28),ol.wp.color.foregroundDimmer,ol.wp.hover(ol.wp.color.foregroundDefault)],metadata:[],pid1MenuItem:[ol.wp.py(4),ol.wp.flex.row,ol.wp.justify.spaceBetween,ol.wp.borderRadius(),ol.wp.align.center,ol.wp.rowWithGap(8),ol.wp.cursor.pointer,{"&[data-hovered],&[data-focused]":{backgroundColor:rI.LU.interactiveBackground},"&[data-selected]":{backgroundColor:rI.LU.interactiveBackgroundActive},"&[aria-disabled]":{cursor:"not-allowed"}}]});function fl(e){var n=e.setDefault,t=e.onAction,r=e.name,i=e.isRunning,o=e.isRunButton?null:{css:fa.iconInvisible},a=(0,cC.y$)(r);return(0,c.FD)(ou.S,{row:!0,"aria-label":r,children:[(0,c.Y)(aY.$n,{css:fa.menuItemSelector,onClick:function(){return n(r)},text:r,iconLeft:(0,c.Y)(pl.A,(0,p._)({},o)),variant:"nofill"}),(0,c.Y)(u1.K0,{css:fa.playControl,alt:"".concat(i?fn[cC.ll.RUNNING]+" ".concat(a):fn[cC.ll.IDLE]+" ".concat(a)),onClick:t,children:i?(0,c.Y)(fi.A,{}):(0,c.Y)(fr.A,{})})]})}function fu(){var e,n,t,r,i,o=(0,cR.g3)(),a=(0,cR.wS)(),l=(0,cR.z1)(),u=(0,cR.OK)(),s=(0,cR.If)(),p=(0,cR.MP)(),f=null==o?void 0:o.workflowId,h=!!(null==u||null==(t=u.workflow)||null==(n=t.find(function(e){return e.name===f}))||null==(e=n.metadata)?void 0:e.generated),g=null==u||null==(i=u.workflow)||null==(r=i.find(function(e){var n;return null==(n=e.metadata)?void 0:n.dotReplitRun}))?void 0:r.name,m=(0,ft.I)(function(e){return function(n){return p(cC.QG.RUN_BUTTON_CLICKED),(0,oq.u4)(oq.AZ.WORKFLOW_RAN,{source:"dropdownMenu"}),e.workflows.runWorkflow.rpc({workflowId:n})}},[p]),v=(0,ft.I)(function(e){return function(n){return(0,oq.u4)(oq.AZ.WORKFLOW_STOPPED,{source:"dropdownMenu"}),e.workflows.stopRun.rpc({runId:n})}},[]),w=function(e){(0,oq.u4)(oq.AZ.RUN_BUTTON_DEFAULT_CHANGED,{runner:e?"workflows":"pid1"}),l(e),a()},y=(0,d.useMemo)(function(){var e;return(null==u?void 0:u.workflow)&&null!=(e=null==u?void 0:u.workflow.filter(function(e){var n,t;return!(null!=(t=null==(n=e.metadata)?void 0:n.generated)&&t)}).map(function(e){var n=Object.values(null!=s?s:{}).filter(function(n){return n.workflow.name===e.name}).sort(function(e,n){return e.startTime-n.startTime});return{workflowConfig:e,workflowRunState:fo(n)}}))?e:[]},[u,s]),b=(0,d.useMemo)(function(){if(g)return fo(Object.values(null!=s?s:{}).filter(function(e){return g===e.workflow.name}).sort(function(e,n){return e.startTime-n.startTime}))},[s,g]);return(0,c.FD)(ou.S,{"aria-label":"Workflows",gap:4,children:[(0,c.Y)(aA.EY,{variant:"small",color:"dimmest",children:"Workflows"}),(0,c.FD)(ou.S,{children:[g?(0,c.Y)(fl,{isRunButton:h,isRunning:(null==b?void 0:b.step)==="RUNNING",onAction:function(){(null==b?void 0:b.step)!=="RUNNING"?null==m||m(g):b&&(null==v||v(b.runId))},setDefault:function(e){w()},name:g}):null,y.map(function(e,n){var t,r=e.workflowConfig,i=e.workflowRunState,o=(null==i?void 0:i.step)==="RUNNING";return(0,c.Y)(fl,{onAction:function(){o?i&&(null==v||v(i.runId)):null==m||m(r.name)},setDefault:w,name:r.name,isRunning:o,isRunButton:r.name===f},r.name+"-"+n+"-"+(null!=(t=null==i?void 0:i.step)?t:"not-started"))})]})]})}var fc=t(11838),fs=(0,rC.x)({dropDown:[{'&[data-visible="true"]':{visibility:"visible",maxWidth:"100px",transform:"translateX(-4px)",opacity:1},'&[data-visible="false"]':{visibility:"hidden",maxWidth:0,transform:"translateX(-20px)",opacity:0},zIndex:0,transition:"\ntransform 0.2s linear,\nopacity 0.2s linear\n"}],dropDownButton:[ol.wp.reset.button,dV.b.filled,ol.wp.color.foregroundDimmer,ol.wp.height(32),ol.wp.minWidth(20),ol.wp.flex.column,ol.wp.justify.center,ol.wp.pr(2),ol.wp.pl(4),ol.wp.borderRadius(0,"default","default",0),{backgroundColor:"transparent"}],popoverWrapper:[ol.wp.minWidth(240)],popoverSection:[ol.wp.p(8),{":not(:last-of-type)":{borderBottom:"1px solid "+rI.LU.outlineDimmest}}]});function fd(e){var n=e.isVisible,t=e.triggerElement,r=(0,u._)((0,d.useState)(!1),2),i=r[0],o=r[1],a=da(),l=(0,d.useCallback)(function(){(0,oq.u4)(oq.AZ.WORKFLOWS_SETTINGS_OPENED,{source:"runButton"}),a({type:"workflows"}),o(!1)},[a]);return(0,c.Y)(ou.S,{css:fs.dropDown,"data-visible":void 0===n||n?"true":"false",children:(0,c.FD)(dK.Wv,{isOpen:i,onOpenChange:function(e){(0,oq.u4)(oq.AZ.RUN_BUTTON_DROPDOWN_OPENED),o(e)},label:"Workflows",placement:"bottom start",children:[t||(0,c.Y)(ou.D.button,{css:fs.dropDownButton,children:(0,c.Y)(uy.m_,{tooltip:"Configure Run Button",children:(0,c.Y)(fc.A,{})})}),(0,c.FD)(ou.S,{css:fs.popoverWrapper,children:[(0,c.Y)(ou.S,{css:fs.popoverSection,children:(0,c.Y)(fu,{})}),(0,c.Y)(ou.S,{css:fs.popoverSection,children:(0,c.Y)(aY.$n,{text:"Manage Workflows",onClick:l,iconLeft:(0,c.Y)(cA.A,{})})})]})]})})}var fp=[ol.wp.rowWithGap(4),ol.wp.justify.center,ol.wp.align.center,ol.wp.height(32),ol.wp.minWidth(48),ol.wp.px(8),ol.wp.borderRadius(4),ol.wp.cursor.pointer,ol.wp.position.relative,ol.wp.fontWeight.medium,ol.wp.zIndex(1)],ff=(0,rC.x)({wrapper:[ol.wp.noDragRegion,ol.wp.position.relative,ol.wp.borderRadius("default")],runButtonLabel:[ol.wp.display.none,(0,ty._)({},"@media (min-width: ".concat(sR.LO.tabletMax,"px)"),[ol.wp.display.block])],runButtonIdle:(0,eA._)(fp).concat([ol.wp.color.accentPositiveStrongest,ol.wp.backgroundColor.accentPositiveDimmer,{border:"1px solid",borderColor:"transparent","&:disabled":[ol.wp.color.foregroundDimmer,ol.wp.backgroundColor.backgroundHighest,ol.wp.cursor.default],"&:hover:not(:disabled)":[{color:"white"},ol.wp.backgroundColor.accentPositiveDefault],":focus-visible":{outlineColor:"".concat(rI.LU.accentPositiveStrongest)}}]),runButtonRunning:(0,eA._)(fp).concat([ol.wp.color.foregroundDimmer,ol.wp.backgroundColor.backgroundHighest,{border:"1px solid",borderColor:"transparent","&:hover":[ol.wp.color.foregroundDefault,ol.wp.backgroundColor.greyDimmest],"&:active":[{borderColor:rI.LU.accentPrimaryDefault}]}]),runButtonRunByAgent:(0,eA._)(fp).concat([ol.wp.color.foregroundDefault,ol.wp.backgroundColor.blurpleDimmer,ol.wp.maxWidth(68),{border:"1px solid",borderColor:"transparent","&:before":[{content:'"Running"'}],"&:hover":[ol.wp.color.foregroundDimmer,ol.wp.backgroundColor.blurpleDimmest,ol.wp.minWidth(68),{"&::before":[{content:'"Stop"'}]}],"&:active":[{borderColor:rI.LU.accentPrimaryDefault}]}]),agentBanner:[ol.wp.colorMixBg(rI.LU.blurpleDimmest,"transparent",.6),ol.wp.borderRadius("default",0,0,"default"),{'&[data-visible="false"]':{visibility:"hidden",transform:"translateX(30px)",position:"absolute",maxWidth:0,opacity:0},'&[data-visible="true"]':{transform:"translateX(4px)",opacity:1,visibility:"visible",justifyContent:"center",height:"32px",maxWidth:"32px",paddingY:"4px",padding:"4px 8px 4px 6px"},transition:"\ntransform 0.2s linear,\nopacity 0.2s linear\n"}]});function fh(e){var n=e.isOffline,t=e.isAgentRunningWorkflow,r=e.isDisabled,i=e.isRunning,o=e.runButtonName,a=e.shortcut,l=e.isAgentRunButtonNotConfigured,u=e.isStatusButton;if(n)return"Connecting to the workspace";if(t)return u?"Stop App (Agent is running it)":"Agent is running your App";if(l)return"Agent hasn't configured the run button yet";if(r)return"Run button is not configured";var s=(0,cC.y$)(o);return(0,c.FD)(ou.S,{px:4,gap:4,justify:"center",align:"center",children:[o?(0,c.Y)(aA.EY,{color:"dimmer",variant:"small",children:i?fn[cC.ll.RUNNING]+" all workflows":fn[cC.ll.IDLE]+" ".concat(s)}):null,a?(0,c.Y)(al._y,{keyCombo:a,fontSize:12}):null]})}function fg(e){var n=e.stop,t=e.cancel;return(0,c.FD)(ou.S,{children:[(0,c.Y)(aA.EY,{children:"Stopping your project while the agent is working can lead to unexpected interruptions that incur additional costs. Are you sure you want to stop?"}),(0,c.FD)(ou.S,{pt:12,row:!0,gap:12,justify:"end",children:[(0,c.Y)(aY.$n,{text:"Cancel",onClick:t}),(0,c.Y)(aY.$n,{iconLeft:(0,c.Y)(fi.A,{}),text:"Stop",onClick:function(){n(),t()},colorway:"negative"})]})]})}function fm(e){var n=e.isRunning,t=e.isAgentRunningWorkflow,r=e.isDisabled,i=e.isAgentRunButtonNotConfigured,o=e.handleRunButtonClick,a=(0,u._)((0,d.useState)(!1),2),l=a[0],s=a[1];return t?(0,c.FD)(c.FK,{children:[(0,c.Y)(ap.a,{isOpen:l,onRequestClose:function(){return s(!1)},children:(0,c.Y)(fg,{stop:o,cancel:function(){return s(!1)}})}),(0,c.Y)(ou.S,{tag:"button",css:ff.runButtonRunByAgent,onClick:function(){return s(!0)}})]}):n?(0,c.FD)(ou.S,{tag:"button",css:ff.runButtonRunning,onClick:o,children:[(0,c.Y)(fi.A,{size:16}),(0,c.Y)(aA.EY,{multiline:!1,css:ff.runButtonLabel,children:fn[cC.ll.RUNNING]})]}):(0,c.FD)(ou.S,{tag:"button",disabled:r||i,css:ff.runButtonIdle,onClick:o,children:[(0,c.Y)(fr.A,{size:16}),(0,c.Y)(aA.EY,{multiline:!1,css:ff.runButtonLabel,children:fn[cC.ll.IDLE]})]})}function fv(){var e,n,t,r,i,o=(r={variables:{id:(0,er.A)()}},i=(0,p._)({},pV,r),g.I(pK,i)).data,a=(null==o?void 0:o.getRepl.__typename)==="Repl"?o.getRepl:null,l=(n=null==(e=(0,d6.Os)(fe,p1.Run))?void 0:e.isActive,{tourRefs:e.tourRef,isAnyTourStepActive:n}).tourRefs,c=(0,al.Jn)(cU.run.id),s=(0,u._)((0,d.useState)(!1),2),f=s[0],h=s[1],m=(0,cR.g3)(),v=null!=(t=null==m?void 0:m.workflowId)?t:cC.Ov,w=(0,cR.lO)(),y=w.isRunning,b=w.isAgentRunningWorkflow,x=w.isOffline,_=w.isWorkflowsLoading,S=w.isDisabled,Y=(0,d.useMemo)(function(){return x||_},[x,_]),A=(0,pZ.F)(),I=(0,cR.qP)();return(0,d.useEffect)(function(){b&&f&&h(!1)},[b,f]),{tourRefs:l,isAgentRunningWorkflow:b,isOffline:x,isOfflineOrLoading:Y,isWorkflowsLoading:_,runButtonName:v,runShortcut:c,isRunning:y,isDisabled:S,handleRunButtonClick:(0,d.useCallback)(function(){if(a){var e,n,t,r,i,o,l;(0,oq.u4)(oq.AZ.PROJECT_RAN,{placement:"primary_btn",replId:a.id,replTitle:a.title,rootOriginReplUrl:a.rootOriginReplUrl,templateTitle:null==(t=a.source)||null==(n=t.release)||null==(e=n.repl)?void 0:e.title,templateOwner:null==(l=a.source)||null==(o=l.release)||null==(i=o.repl)||null==(r=i.owner)?void 0:r.username})}(0,oq.u4)(oq.AZ.RUN_BUTTON_CLICKED,{source:"header",runner:"workflows"}),I()},[a,I]),dropdownEnabled:!Y&&!A,isAgentRunButtonNotConfigured:A}}function fw(e){var n=e.attachTourRefs,t=fv(),r=t.tourRefs,i=t.isAgentRunningWorkflow,o=t.isOffline,a=t.isOfflineOrLoading,l=t.runButtonName,u=t.runShortcut,s=t.isRunning,d=t.isDisabled,p=t.handleRunButtonClick,f=t.dropdownEnabled,h=t.isAgentRunButtonNotConfigured;return(0,c.FD)(ou.S,{innerRef:void 0!==n&&n?r:void 0,css:ff.wrapper,row:!0,align:"center",children:[(0,c.Y)(ou.S,{css:ff.agentBanner,"data-visible":i&&!o?"true":"false",children:(0,c.Y)(p0.A,{})}),(0,c.Y)(uy.m_,{placement:"bottom",tooltip:fh({isRunning:s,isAgentRunningWorkflow:i,isDisabled:d,isOffline:a,runButtonName:l,shortcut:u,isAgentRunButtonNotConfigured:h}),children:a?(0,c.FD)(ou.S,{tag:"button",disabled:!0,css:ff.runButtonRunning,children:[(0,c.Y)(dc.A,{size:16}),(0,c.Y)(aA.EY,{multiline:!1,css:ff.runButtonLabel,children:"Loading"})]}):(0,c.Y)(ou.S,{dataCy:"ws-run-btn",children:(0,c.Y)(fm,{isRunning:s,isAgentRunningWorkflow:i,isDisabled:d,isAgentRunButtonNotConfigured:h,handleRunButtonClick:p})})}),f?(0,c.Y)(fd,{isVisible:!i}):null]})}var fy=t(15430),fb=t.n(fy);function fx(e){var n,t={running:e.isAgentRunningWorkflow?(0,c.Y)(c0.A,{color:rI.LU.blurpleDefault}):(0,c.Y)(fi.A,{color:rI.LU.foregroundDimmest}),stopped:(0,c.Y)(fr.A,{color:e.disabled?rI.LU.foregroundDimmest:rI.LU.accentPositiveStronger}),loading:(0,c.Y)(dc.A,{color:rI.LU.foregroundDimmest})}[e.status];return(0,c.FD)(af.ui,{elevated:e.elevated,clsx:[fb().root,(n={},(0,ty._)(n,fb().running,"running"===e.status),(0,ty._)(n,fb().agent,e.isAgentRunningWorkflow),n)],children:[(0,c.Y)(u1.K0,{disabled:e.disabled,dataCy:"ws-run-btn",alt:"Run or stop the app",tooltipContents:e.tooltip,onClick:e.onClick,size:32,children:t}),e.isAgentRunningWorkflow?(0,c.Y)(ou.S,{clsx:fb().agentStatusIcon,align:"center",justify:"center",children:(0,c.Y)(fi.A,{size:12,color:rI.LU.foregroundDimmest})}):null]})}function f_(){var e=fv(),n=e.isOfflineOrLoading,t=e.isRunning,r=e.handleRunButtonClick,i=e.isAgentRunningWorkflow,o=e.isDisabled,a=e.runButtonName,l=e.runShortcut,s=e.isAgentRunButtonNotConfigured,p=(0,u._)((0,d.useState)(!1),2),f=p[0],h=p[1],g=t?"running":"stopped";n&&(g="loading");var m=i?function(){return h(!0)}:r;return(0,c.FD)(c.FK,{children:[(0,c.Y)(fx,{disabled:o||s,status:g,isAgentRunningWorkflow:i,onClick:m,tooltip:fh({isRunning:t,isAgentRunningWorkflow:i,isDisabled:o,isOffline:n,runButtonName:a,shortcut:l,isAgentRunButtonNotConfigured:s,isStatusButton:!0})}),(0,c.Y)(ap.a,{isOpen:f,onRequestClose:function(){return h(!1)},children:(0,c.Y)(fg,{stop:r,cancel:function(){return h(!1)}})})]})}var fS=(0,rC.x)({replInfo:[ol.wp.maxWidth(530),{"& > span":[ol.wp.viewStyle,ol.wp.flex.shrink(1)]}]});function fY(e){var n,t=e.repl,r=e.isAgentCentered,i=rm(tI),o="centeredVisualPlanner"===oG(),a=(0,rl.p)(),l=oH(),u=(0,uf.A)(l.agentFiletreeOrder),s=(0,pH.F)().isFreemiumStarterPlanUsersOwnRepl;return(0,c.FD)(ou.S,{row:!0,gap:4,align:"center",justify:"start",css:ol.wp.noDragRegion,children:[(0,c.Y)(dT.A,{}),(0,c.Y)(px.C,{org:null!=(n=t.org)?n:void 0}),(0,c.Y)(pv,{repl:t}),(0,c.Y)(ou.S,{row:!0,align:"center",justify:"start",children:r?(0,c.Y)(fA,{repl:t}):(0,c.FD)(ou.S,{row:!0,gap:4,children:[(0,c.FD)(ou.S,{row:!0,align:"center",css:fS.replInfo,shrink:!0,children:[(0,c.Y)(pz,{repl:t,getDesktopLayoutState:i}),a&&!o?(0,c.FD)(c.FK,{children:[(0,c.Y)(f_,{}),"agent-filetree"!==u?(0,c.Y)(pj,{flipped:!0}):null]}):null]}),o?(0,c.Y)(pb,{}):null]})}),s?(0,c.Y)(dJ,{}):null,(0,c.Y)(dO,{})]})}function fA(e){var n=e.repl;return(0,c.Y)(ou.S,{px:12,children:(0,c.Y)(aA.EY,{children:n.title})})}var fI=t(56611),fC=t(78519),fk=(0,rC.x)({brokenNixButton:[ol.wp.noDragRegion,ol.wp.backgroundColor.orangeDimmest,ol.wp.color.orangeStrongest,ol.wp.height(32),ol.wp.p(8),ol.wp.borderRadius(4),ol.wp.cursor.pointer,{border:"1px solid",borderColor:"transparent","&:hover":[ol.wp.backgroundColor.orangeDimmer],"&:active":[{borderColor:rI.LU.orangeDefault}]}],brokenNixButtonLabel:[ol.wp.display.none,(0,ty._)({},"@media (min-width: ".concat(sR.LO.tabletMax,"px)"),[ol.wp.display.block])]});function fE(e){var n=e.nixState,t=(0,u._)((0,d.useState)(!1),2),r=t[0],i=t[1],o=da(),a=(0,d.useCallback)(function(e){o({type:"codeEditor",data:{path:e}})},[o]);return(0,c.FD)(c.FK,{children:[(0,c.FD)(ou.S,{align:"center",css:fk.brokenNixButton,row:!0,gap:8,tag:"button",onClick:function(){i(!0)},children:["error"===n.status?(0,c.Y)(fC.A,{}):null,"rebuilding-after-error"===n.status?(0,c.Y)(dc.A,{}):null,(0,c.Y)(ou.S,{css:fk.brokenNixButtonLabel,children:"App is in recovery mode"})]}),(0,c.Y)(fI.E,{isOpen:r,setIsOpen:i,nixState:n,openFile:a})]})}var fD=t(19086),fR=t(83033),fF=t(95439),fU=t(62873),fP=t.n(fU);function fO(){var e=oG(),n=(rg(ta),(0,T._P)({controlName:"flag-agent-debug-info-button"})),t=(0,B.NC)(),r=(0,eu.Rj)(function(){return t.sessions.agent.current},[t.sessions.agent]);return(0,c.FD)(ou.S,{row:!0,align:"center",gap:4,children:[(0,c.Y)(fT,{icon:(0,c.Y)(fF.A,{size:12}),text:"Plan",isActive:"centeredVisualPlanner"===e,onClick:void 0}),(0,c.Y)(ou.S,{clsx:fP().dividerContainer,children:(0,c.Y)(pe.a,{clsx:fP().divider})}),(0,c.Y)(fT,{icon:(0,c.Y)(cA.A,{size:12}),text:"Build",isActive:"tilingLayout"===e,onClick:void 0}),n&&r?(0,c.FD)(c.FK,{children:[(0,c.Y)(ou.S,{clsx:fP().dividerContainer,children:(0,c.Y)(pe.a,{clsx:fP().divider})}),(0,c.Y)(fD.O,{sessionId:r.id,sessionType:el.dF3.AGENT_SESSION})]}):null]})}function fT(e){var n=e.icon,t=e.text,r=e.isActive,i=e.onClick;return(0,c.FD)(ou.S,{row:!0,align:"center",gap:4,clsx:[(0,ty._)({},fP().stepInteractive,null!=i)],onClick:i,children:[(0,c.Y)(fR.a,{iconLeft:n,colorway:r?"positive":"grey",clsx:[fP().pill,(0,ty._)({},fP().pillActive,r)]}),(0,c.Y)(aA.EY,{color:r?"default":"dimmer",clsx:fP().text,children:t})]})}var fL=t(85139),fM=t(17322),fG=t(97612),fN=t(83213),fz=t(98628),fH=t(41151);function fB(){var e=(0,f._)(["\n  fragment ReplMultiplayerOrg on Org {\n    ...OrgMetadata\n    membersCount\n  }\n  ","\n"]);return fB=function(){return e},e}function fW(){var e=(0,f._)(["\n  fragment ReplMultiplayerOrgGroup on OrgGroup {\n    ...OrgGroupsOrgGroup\n  }\n  ","\n"]);return fW=function(){return e},e}function fj(){var e=(0,f._)(["\n  fragment ReplMultiplayerGroup on ReplMultiplayerGroupScope {\n    group {\n      __typename\n      ...ReplMultiplayerOrgGroup\n    }\n    options {\n      __typename\n      role\n      status\n    }\n  }\n  ","\n"]);return fj=function(){return e},e}function f$(){var e=(0,f._)(["\n  fragment ReplMultiplayerIndividual on ReplMultiplayerIndividualScope {\n    group {\n      __typename\n      ...ReplMultiplayerOrgGroup\n    }\n    user {\n      __typename\n      id\n      displayName\n      image\n      username\n    }\n    options {\n      __typename\n      role\n      status\n    }\n  }\n  ","\n"]);return f$=function(){return e},e}function fq(){var e=(0,f._)(["\n  fragment ReplMultiplayerStatus on Repl {\n    id\n    title\n    isPrivate\n    url\n    org {\n      ...ReplMultiplayerOrg\n    }\n    multiplayerStatus {\n      __typename\n      groups {\n        __typename\n        ...ReplMultiplayerGroup\n      }\n      individuals {\n        __typename\n        ...ReplMultiplayerIndividual\n      }\n    }\n    authorizations {\n      editPermissions {\n        isAuthorized\n        message\n      }\n      editVisibility {\n        isAuthorized\n        message\n      }\n      removeSelf {\n        isAuthorized\n        message\n      }\n      viewPermissions {\n        isAuthorized\n        message\n      }\n    }\n  }\n  ","\n  ","\n  ","\n"]);return fq=function(){return e},e}function fV(){var e=(0,f._)(["\n  query ReplMultiplayerStatus($replId: String!) {\n    getRepl(id: $replId) {\n      __typename\n      ... on Repl {\n        __typename\n        ...ReplMultiplayerStatus\n      }\n    }\n  }\n  ","\n"]);return fV=function(){return e},e}function fK(){var e=(0,f._)(["\n  mutation UpdateOrgReplVisibility($input: UpdateReplInput!) {\n    updateRepl(input: $input) {\n      repl {\n        id\n        ...ReplMultiplayerStatus\n      }\n    }\n  }\n  ","\n"]);return fK=function(){return e},e}var fZ={},fJ=(0,h.J1)(fB(),fH.wW),fQ=(0,h.J1)(fW(),fz.Um),fX=(0,h.J1)(fj(),fQ),f0=(0,h.J1)(f$(),fQ),f1=(0,h.J1)(fq(),fJ,fX,f0),f2=(0,h.J1)(fV(),f1),f4=(0,h.J1)(fK(),f1),f5=t(79391),f7=t(57117),f3=t(16703),f8=t(50957),f6=t(35728),f9=t(94807),he=t(30484),hn=t(29904),ht=(0,rC.x)({section:[ol.wp.colWithGap(12),ol.wp.px(12)],sectionWithBorders:[ol.wp.colWithGap(12),ol.wp.p(12),ol.wp.border({direction:"top"}),ol.wp.border({direction:"bottom"}),{"&:last-of-type":{borderBottom:0,paddingBottom:0}}],sectionTitle:[ol.wp.fontWeight.medium],subtitle:[ol.wp.fontWeight.medium],item:[ol.wp.rowWithGap(16),ol.wp.align.center,ol.wp.justify.spaceBetween],groupName:[ol.wp.colWithGap(6),ol.wp.justify.center],visibilitySelector:[ol.wp.position.relative,ol.wp.justify.start,ol.wp.align.center]}),hr=function(e){var n,t,r,i,o,a,l,u,s,d,f,h=e.replId,m=(0,aS.T)(),v=(0,ca.A)(),w=(n={variables:{replId:h}},t=(0,p._)({},fZ,n),g.I(f2,t)),y=w.data,b=w.loading,x=w.error,_=w.refetch,S=(null==y||null==(r=y.getRepl)?void 0:r.__typename)==="Repl"?y.getRepl:void 0,Y=(null!=(s=null==S||null==(i=S.multiplayerStatus)?void 0:i.groups)?s:[]).filter(function(e){return"custom"!==e.group.type}),A=(null!=(d=null==S||null==(o=S.multiplayerStatus)?void 0:o.groups)?d:[]).filter(function(e){return"custom"===e.group.type}),I=null!=(f=null==S||null==(a=S.multiplayerStatus)?void 0:a.individuals)?f:[],C=Y.map(function(e){return e.group}).concat(A.map(function(e){return e.group})).concat(I.map(function(e){return e.group})),k=function(){return(0,tS._)(function(){return(0,tY.YH)(this,function(e){switch(e.label){case 0:return[4,_()];case 1:return e.sent(),[2]}})})()};return(null==x?void 0:x.message)?(0,c.Y)(ou.S,{gap:12,children:(0,c.Y)(dz.N,{colorway:"negative",text:x.message})}):b||!S?(0,c.Y)(ou.S,{px:12,align:"center",justify:"center",children:(0,c.Y)(dc.A,{})}):(0,c.FD)(ou.S,{gap:12,children:[(0,c.FD)(ou.S,{tag:"header",px:12,gap:2,children:[(0,c.Y)(aA.EY,{variant:"subheadDefault",children:"Share App"}),(0,c.FD)(ou.S,{css:ht.subtitle,row:!0,gap:4,children:[S.org?(0,c.FD)(aA.EY,{variant:"small",color:"dimmer",children:[S.org.name," /"]}):null,(0,c.Y)(aA.EY,{variant:"small",children:S.title})]})]}),(null==(l=S.org)?void 0:l.id)&&S.authorizations.editPermissions.isAuthorized?(0,c.Y)(ou.S,{css:ht.sectionWithBorders,children:(0,c.Y)(hl,{orgId:S.org.id,selectedGroups:C,repl:S,onScopeChange:k})}):null,(0,c.FD)(ou.S,{css:ht.section,children:[(0,c.Y)(aA.EY,{variant:"small",css:ht.sectionTitle,children:"Groups with access"}),S.org?(0,c.Y)(ha,{org:S.org}):null,(0,c.Y)(ou.S,{pl:24,gap:12,children:Y.map(function(e){var n=e.group,t=e.options;return(0,c.Y)(ho,{repl:S,group:n,options:t,onScopeChange:k},n.id)})}),A.map(function(e){var n=e.group,t=e.options;return(0,c.Y)(ho,{repl:S,group:n,options:t,onScopeChange:k},n.id)})]}),I.length>0?(0,c.FD)(ou.S,{css:ht.section,children:[(0,c.Y)(aA.EY,{variant:"small",css:ht.sectionTitle,children:"People with access"}),I.map(function(e){var n=e.group,t=e.user,r=e.options;return(0,c.Y)(hi,{currentUserId:m,repl:S,group:n,user:t,options:r,onScopeChange:k},t.id)})]}):null,(0,c.Y)(ou.S,{css:ht.section,children:(0,c.Y)(f8.R,{type:"repl"})}),(null==(u=S.org)?void 0:u.id)?(0,c.Y)(ou.S,{css:ht.sectionWithBorders,children:(0,c.FD)(ou.S,{row:!0,justify:"space-between",children:[(0,c.Y)(hu,{repl:S,org:S.org}),v?null:(0,c.Y)(d9.v,(0,r9._)((0,p._)({prefetch:!1},(0,pa.z9)(S)),{iconRight:(0,c.Y)(cq.A,{}),variant:"outlined",text:"Cover page",target:"_blank",style:{pointerEvents:"auto"}}))]})}):null]})},hi=function(e){var n=e.user,t=e.currentUserId,r=e.repl,i=e.group,o=e.options,a=e.onScopeChange,l=t===n.id;return(0,c.FD)(ou.S,{css:ht.item,children:[(0,c.FD)(ou.S,{row:!0,gap:8,children:[(0,c.Y)(f9.e,{src:n.image,username:n.username,fullName:n.displayName,size:24}),(0,c.FD)(ou.S,{css:ht.groupName,children:[(0,c.FD)(ou.S,{row:!0,gap:8,children:[(0,c.Y)(aA.EY,{height:"singleLine",children:n.username}),l?(0,c.Y)(aA.EY,{height:"singleLine",color:"dimmest",children:"(You)"}):null]}),n.username!==n.displayName?(0,c.Y)(aA.EY,{variant:"small",color:"dimmest",height:"singleLine",children:n.displayName}):null]})]}),(0,c.Y)(ou.S,{children:(0,c.Y)(f6.A,{repl:r,group:i,options:o,onScopeChange:a})})]})},ho=function(e){var n=e.repl,t=e.group,r=e.options,i=e.onScopeChange;return(0,c.FD)(ou.S,{css:ht.item,children:[(0,c.FD)(ou.S,{row:!0,gap:8,children:[(0,c.Y)(f7.A,{group:t}),(0,c.FD)(ou.S,{css:ht.groupName,children:[(0,c.Y)(aA.EY,{height:"singleLine",children:t.name}),(0,c.FD)(ou.S,{row:!0,gap:8,children:[t.isMember?(0,c.Y)(aA.EY,{variant:"small",color:"dimmest",height:"singleLine",children:"(you)"}):null,null!=t.memberCount?(0,c.Y)(aA.EY,{variant:"small",color:"dimmest",height:"singleLine",children:(0,sy.A)("member",t.memberCount,!0)}):null]})]})]}),(0,c.Y)(ou.S,{children:(0,c.Y)(f6.A,{repl:n,group:t,options:r,onScopeChange:i})})]})},ha=function(e){var n,t=e.org;return(0,c.Y)(ou.S,{css:ht.item,children:(0,c.FD)(ou.S,{row:!0,gap:8,children:[(0,c.Y)(f9.e,{src:null!=(n=t.image)?n:null,username:t.name,size:32,layout:"responsive",isOrg:!0}),(0,c.FD)(ou.S,{css:ht.groupName,children:[(0,c.FD)(aA.EY,{height:"singleLine",children:["Everyone at ",t.name]}),(0,c.Y)(ou.S,{children:null!=t.membersCount?(0,c.Y)(aA.EY,{variant:"small",color:"dimmest",height:"singleLine",children:(0,sy.A)("member",t.membersCount,!0)}):null})]})]})})},hl=function(e){var n,t,r,i,o,a,l,s=e.orgId,p=e.selectedGroups,f=e.repl,h=e.onScopeChange,g="group-search-".concat((0,d.useId)()),m=(0,u._)((0,d.useState)(),2),v=m[0],w=m[1],y=(0,u._)((0,d.useState)(""),2),b=y[0],x=y[1],_=(0,u._)((0,f5.qO)(),2),S=_[0],Y=_[1],A=Y.data,I=Y.error,C=Y.loading,k=A&&(null==(t=A.currentUser)||null==(n=t.org)?void 0:n.__typename)==="Org"&&"OrgGroup"===A.currentUser.org.group.__typename&&(null==(r=A.currentUser.org.group.replScopeOptions)?void 0:r.__typename)==="OrgGroupReplScopeOptions"?A.currentUser.org.group.replScopeOptions.items[0].options:void 0,E=(null==A?void 0:A.currentUser)&&"Org"!==A.currentUser.org.__typename?A.currentUser.org.message:void 0,D=(null==A?void 0:A.currentUser)&&"Org"===A.currentUser.org.__typename&&"OrgGroup"!==A.currentUser.org.group.__typename?A.currentUser.org.group.message:void 0,R=(null==A?void 0:A.currentUser)&&"Org"===A.currentUser.org.__typename&&"OrgGroup"===A.currentUser.org.group.__typename&&(null==(i=A.currentUser.org.group.replScopeOptions)?void 0:i.__typename)!=="OrgGroupReplScopeOptions"?null==(o=A.currentUser.org.group.replScopeOptions)?void 0:o.message:void 0,F=null!=(l=null!=(a=null!=E?E:D)?a:R)?l:null==I?void 0:I.message;return(0,c.FD)(c.FK,{children:[(0,c.FD)(ou.S,{row:!0,gap:8,children:[(0,c.Y)(ou.S,{grow:!0,shrink:!0,children:(0,c.Y)(f3.A,{inputId:g,orgId:s,types:[fN.Oi9.Custom,fN.Oi9.SystemIndividual],selectedGroups:p,value:b,setValue:x,onSelect:function(e){w(e),x(e.name),S({variables:{orgId:s,groupId:e.id,input:{replIds:[f.id]}}})},onClear:function(){return w(void 0)},placeholder:"Share with groups or other members"})}),v&&k||C?(0,c.FD)(ou.S,{pl:24,row:!0,align:"center",children:[v&&k&&!C?(0,c.Y)(f6.A,{group:v,repl:f,options:k,onScopeChange:function(){return(0,tS._)(function(){return(0,tY.YH)(this,function(e){switch(e.label){case 0:return[4,h()];case 1:return e.sent(),x(""),w(void 0),[2]}})})()}}):null,C?(0,c.Y)(dc.A,{size:24}):null]}):null]}),F?(0,c.Y)(dz.N,{colorway:"negative",text:F}):null]})},hu=function(e){var n,t,r,i=e.repl,o=e.org,a=(0,u._)((0,d.useState)(),2),l=a[0],s=a[1],f=(0,u._)((0,d.useState)(),2),h=f[0],g=f[1],v=(0,u._)((n={variables:{input:{id:i.id}},onError:function(e){g(e.message)}},t=(0,p._)({},fZ,n),m.n(f4,t)),2),w=v[0],y=v[1].loading,b="repl-visibility-".concat((0,d.useId)()),x=i.authorizations.editVisibility.isAuthorized,_=i.authorizations.editVisibility.message,S=[{id:"private",icon:(0,c.Y)(hn.A,{}),name:"Internal to ".concat(o.name),selected:i.isPrivate,description:"Only selected organization members can view or edit."},{id:"public",icon:(0,c.Y)(he.A,{}),name:"Public on Replit",selected:!i.isPrivate,description:"Anyone on Replit can see or fork. You choose who can edit."}],Y=S.find(function(e){return e.selected}),A=Y?(0,c.FD)(ou.S,{row:!0,gap:8,align:"center",children:[Y.icon," ",Y.name]}):void 0;return r=h?(0,c.Y)(uy.m_,{tooltip:h,children:(0,c.Y)(fC.A,{size:24,color:rI.LU.accentNegativeDefault})}):y?(0,c.Y)(dc.A,{size:24}):l?(0,c.Y)(pl.A,{size:24,color:rI.LU.accentPositiveDefault}):null,(0,c.FD)(ou.S,{css:ht.visibilitySelector,grow:!0,shrink:!0,row:!0,gap:4,children:[(0,c.Y)(uy.m_,{tooltip:_,isDisabled:x,children:(0,c.Y)(pt.in,{id:b,trigger:(0,c.Y)(aY.$n,{iconRight:(0,c.Y)(fc.A,{}),text:null!=A?A:"Control Repl visibility",disabled:!x}),"aria-label":"Control ".concat(i.title," visibility"),onAction:function(e){var n="private"===e;n!==i.isPrivate&&(g(void 0),w({variables:{input:{id:i.id,isPrivate:n}},optimisticResponse:{__typename:"RootMutationType",updateRepl:{__typename:"UpdateReplPayload",repl:(0,r9._)((0,p._)({},i),{isPrivate:n})}},onCompleted:function(e){"UpdateReplPayload"===e.updateRepl.__typename&&(s(!0),setTimeout(function(){return s(!1)},2e3))}}))},items:S,disallowEmptySelection:!0,isDisabled:!x,children:function(e){return(0,c.Y)(pt.Dr,{id:e.id,label:e.name,description:e.description,icon:e.icon},e.id)}})}),r?(0,c.Y)(ou.S,{children:r}):null]})},hc=t(7576),hs=t.n(hc),hd=t(85218);function hp(){var e=(0,f._)(["\n  query TeamMultiplayerManagerMultiplayers($replId: String!) {\n    currentUser {\n      id\n    }\n    getRepl(id: $replId) {\n      ... on Repl {\n        id\n        isOwner\n        collaborators {\n          type\n          permission\n          user {\n            ...MultiplayerUser\n          }\n        }\n        authorizations {\n          editPermissions {\n            isAuthorized\n          }\n          inviteGuests {\n            isAuthorized\n          }\n        }\n        multiplayerInvites {\n          email\n          type\n        }\n        owner {\n          ... on User {\n            id\n          }\n          ... on Team {\n            id\n            username\n            displayName\n            capabilities {\n              isBusinessPlan\n              hasValidSubscription\n              availableSeats\n            }\n            members {\n              id\n              permissions\n              user {\n                id\n                ...MultiplayerUser\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return hp=function(){return e},e}var hf={},hh=(0,h.J1)(hp(),hd._9),hg=t(6171),hm=(0,rC.x)({root:[ol.wp.color.foregroundDefault,ol.wp.p(24),ol.wp.display.grid,{gap:rI.LU.space24}],controls:[ol.wp.display.grid,{gap:rI.LU.space8,gridAutoFlow:"column"}],message:[ol.wp.pb(16)],textContainer:[ol.wp.textAlign.center]});function hv(e){var n=e.email,t=e.onInvite,r=e.onCancel;return(0,c.FD)("div",{css:hm.root,children:[(0,c.Y)(aA.Y9,{level:3,textAlign:"center",variant:"subheadBig",children:"Are you sure?"}),(0,c.Y)("div",{css:hm.textContainer,children:(0,c.FD)(aA.EY,{variant:"text",children:[(0,c.Y)("p",{css:hm.message,children:"Adding an external user as a guest to this repl will give the user read and write access. Please confirm the below email address before inviting the user as a guest."}),(0,c.Y)("p",{children:n})]})}),(0,c.FD)("div",{css:hm.controls,children:[(0,c.Y)(aY.$n,{onClick:r,text:"Cancel"}),(0,c.Y)(aY.$n,{colorway:"primary",onClick:t,text:"Invite"})]})]})}var hw=t(51206),hy=t(98748),hb=t(33288),hx=t(45716);function h_(e){var n,t,r,i,o,a,l,f,h,m,v,w,y=e.replId,b=(0,s.useRouter)(),x=(0,q.Po)(b),_=(0,uH.Q4)(),S=(0,u._)((0,d.useState)(null),2),Y=S[0],A=S[1],I=(n={variables:{replId:y}},t=(0,p._)({},hf,n),g.I(hh,t)),C=I.data,k=I.loading,E=(null==C||null==(r=C.currentUser)?void 0:r.id)||null,D=(null==C?void 0:C.getRepl.__typename)==="Repl"?C.getRepl:null,R=(0,hg.A)({isMobileApp:x,isTeam:!0,replId:y}),F=R.addOrInviteReplMultiplayer,U=R.loadingAddMutation;if(D&&!D.owner)throw Error("Cannot manage members on anon repls");if((null==D?void 0:D.owner)&&(null==D?void 0:D.owner.__typename)!=="Team")throw Error("Expect repl owned by a team");var P=(null==D||null==(i=D.owner)?void 0:i.__typename)==="Team"?D.owner:null,O=!(null==P||null==(o=P.capabilities)?void 0:o.hasValidSubscription)&&!(null==P||null==(a=P.capabilities)?void 0:a.isBusinessPlan),T=(null!=(l=null==D?void 0:D.collaborators)?l:[]).reduce(function(e,n){var t=n.user.username;return -1===e.indexOf(t)&&e.push(),e},[]),L=null==D?void 0:D.multiplayerInvites,M=(null!=(f=null==D?void 0:D.collaborators)?f:[]).filter(function(e){return"guest"===e.type}).map(function(e){return e.user}),G=M.length,N=(null!=(h=null==D?void 0:D.collaborators)?h:[]).filter(function(e){return"member"===e.type}).map(function(e){return e.user}),z=(null!=(m=null==D?void 0:D.collaborators)?m:[]).filter(function(e){return"admin"===e.type}).map(function(e){return e.user}),H=z.some(function(e){return e.id===E}),B=N.filter(function(e){return _.some(function(n){return n.id===e.id})}),W=N.filter(function(e){return!_.some(function(n){return n.id===e.id})}),j=null!=(v=null==D?void 0:D.authorizations.editPermissions.isAuthorized)&&v,$=null!=(w=null==D?void 0:D.authorizations.inviteGuests.isAuthorized)&&w;return k?(0,c.Y)(af.ui,{css:[fG.Nx.root],background:"default",children:(0,c.FD)(ou.S,{css:fG.Nx.loading,children:[(0,c.Y)(dc.A,{color:rI.LU.foregroundDimmer}),(0,c.Y)(aA.EY,{color:"dimmer",multiline:!1,children:"Loading..."})]})}):(0,c.FD)(af.ui,{css:fG.Nx.root,background:"default",children:[(0,c.Y)(ou.S,{css:[fG.Nx.header,x&&fG.Nx.header_mobile],children:(0,c.Y)(ou.S,{css:fG.Nx.titleContainer,children:(0,c.Y)(aA.EY,{variant:"subheadDefault",multiline:!1,children:"Team Multiplayers"})})}),$?(0,c.Y)(ou.S,{css:fG.Nx.searchContainer,children:(0,c.Y)(hy.A,{existingUsernames:T,onSubmit:function(e){if(!U){if(hs()(e))return void A(e);F({variables:{input:{replId:y,target:{method:fN.LIG.Username,value:e},level:fN.Hy.Rw}}})}},isDisabled:k})}):null,!$&&O?(0,c.Y)(ou.S,{px:16,children:(0,c.Y)(hb.d,{iconLeft:(0,c.Y)(hx.A,{}),text:'You can add people to this App by inviting them to the "'.concat(null==P?void 0:P.displayName,'" Friends Team.'),href:"/teams/".concat(null==P?void 0:P.username),target:"_blank"})}):null,(0,c.Y)(ap.a,{isOpen:!!Y,onRequestClose:function(){return A(null)},children:Y?(0,c.Y)(hv,{email:Y,onInvite:function(){F({variables:{input:{replId:y,target:{method:fN.LIG.Email,value:Y},level:fN.Hy.Rw}}}),A(null)},onCancel:function(){return A(null)}}):null}),(0,c.FD)(af.ui,{css:fG.Nx.userList,children:[(null==L?void 0:L.length)?(0,c.FD)(ou.S,{css:fG.Nx.userGroup.root,children:[(0,c.Y)(fG.jl,{title:"Pending Invitations",color:rI.LU.outlineStrongest,count:G}),null==L?void 0:L.map(function(e){return(0,c.Y)(hw.A,{canEditMultiplayers:H||!1,email:e.email,isPendingInvitation:!0,replId:y},e.email)})]}):null,M.length?(0,c.FD)(ou.S,{css:fG.Nx.userGroup.root,children:[(0,c.Y)(fG.jl,{title:"External Guests",color:rI.LU.outlineStrongest,count:null==M?void 0:M.length,tooltip:"External Guests are not members of your team and were invited via a Join Link or by username."}),M.map(function(e){return(0,c.Y)(hw.A,{canEditMultiplayers:H||!1,isPendingInvitation:!1,replId:y,user:e},e.id)})]}):null,B.length?(0,c.FD)(ou.S,{css:fG.Nx.userGroup.root,children:[(0,c.Y)(fG.jl,{title:"Online Members",color:rI.LU.greenStrongest,count:null==B?void 0:B.length}),B.map(function(e){return(0,c.Y)(hw.A,{isPendingInvitation:!1,canEditMultiplayers:!!H,replId:y,user:e},e.id)})]}):null,W.length?(0,c.FD)(ou.S,{css:fG.Nx.userGroup.root,children:[(0,c.Y)(fG.jl,{title:"Offline Members",color:rI.LU.outlineStrongest,count:null==W?void 0:W.length}),W.map(function(e){return(0,c.Y)(hw.A,{isPendingInvitation:!1,canEditMultiplayers:!!H,replId:y,user:e},e.id)})]}):null,z.length?(0,c.FD)(ou.S,{css:fG.Nx.userGroup.root,children:[(0,c.Y)(fG.jl,{title:"Admins",color:rI.LU.accentPrimaryStronger,count:z.length}),z.map(function(e){return(0,c.Y)(hw.A,{canEditMultiplayers:!1,isPendingInvitation:!1,user:e,replId:y},e.id)})]}):null,j||k?null:(0,c.Y)(aA.EY,{color:"dimmer",variant:"small",multiline:!1,children:"Only admins can add and remove members to multiplayer"})]})]})}var hS=t(39358),hY=t(4024),hA=function(){var e=(0,hY.A)(),n=e.showPrivateUpsell,t=e.refetch,r=(0,u._)((0,d.useState)(!1),2),i=r[0],o=r[1];return n?(0,c.FD)(ou.S,{px:12,children:[(0,c.Y)(ou.S,{tag:"button",css:hI.bannerWrapper,onClick:function(){return o(!0)},children:(0,c.Y)(dz.N,{icon:(0,c.Y)(uj.A,{}),colorway:"yellow",text:"This App is publicly visible. Upgrade for unlimited private Apps, better AI, more storage, speed, and more."})}),(0,c.Y)(hS.default,{isOpen:i,onClose:function(){return o(!1)},onPurchaseComplete:function(){return t()},reloadPageAfterPurchaseComplete:!0,type:"purchase",contextualUpsell:(0,c.FD)(c.FK,{children:[(0,c.Y)(aA.EY,{variant:"subheadBig",children:"Upgrade for private Apps"}),(0,c.Y)(aA.EY,{multiline:!0,children:"Keep your code secure and private"})]}),headingText:"Upgrade for private Apps",subHeadingText:"Keep your code secure and private",analyticsContext:{upgrade:{context:"workspace_multiplayer_header"}},highlightUpsell:"replLimit"})]}):null},hI=(0,rC.x)({bannerWrapper:[ol.wp.cursor.pointer,ol.wp.borderRadius(),ol.wp.textAlign.left]}),hC=(0,rC.x)({self:[ol.wp.borderRadius(8),ol.wp.align.stretch,ol.wp.flex.growAndShrink(1),ol.wp.maxHeight("calc(100vh - ".concat(ru.uF+12,"px)")),ol.wp.backgroundColor.backgroundDefault]});let hk=function(e){var n,t=e.replId,r=e.handleUpgradeTriggered,i=e.isTeamRepl,o=e.org;return n=o?(0,c.Y)(hr,{replId:t}):i?(0,c.Y)(h_,{replId:t}):(0,c.Y)(fG.Ay,{replId:t,handleUpgradeTriggered:r}),(0,c.FD)(ou.S,{css:hC.self,py:12,gap:12,children:[n,o&&"personal"!==o.type?null:(0,c.Y)(hA,{}),o?null:(0,c.FD)(c.FK,{children:[(0,c.Y)(pe.a,{}),(0,c.Y)(fM.A,{replId:t})]})]})};var hE={owner:"Owner",editor:"Can edit"};function hD(){var e=(0,f._)(["\n  fragment UsersOnlineOverflowMenuUser on User {\n    id\n    username\n    image\n  }\n"]);return hD=function(){return e},e}function hR(){var e=(0,f._)(["\n  query UsersOnlineOverflowMenu($replId: String!) {\n    getRepl(id: $replId) {\n      ... on Repl {\n        id\n        user {\n          id\n          ...UsersOnlineOverflowMenuUser\n        }\n        multiplayers {\n          id\n          ...UsersOnlineOverflowMenuUser\n        }\n      }\n      ... on ReplRedirect {\n        replUrl\n      }\n    }\n    currentUser {\n      id\n    }\n  }\n  ","\n"]);return hR=function(){return e},e}var hF={},hU=(0,h.J1)(hD()),hP=(0,h.J1)(hR(),hU),hO=t(169),hT=(0,rC.x)({container:[ol.wp.pl(8),ol.wp.pr(16),ol.wp.py(4),ol.wp.flex.row,ol.wp.align.center,ol.wp.justify.start],button:[ol.wp.display.flex,ol.wp.align.center],img:[ol.wp.width(32),ol.wp.height(32),ol.wp.borderRadius("full"),ol.wp.backgroundColor.white,ol.wp.border({width:3,style:"solid"}),{objectFit:"cover"}],usernameContainer:[ol.wp.display.flex,ol.wp.flex.column,ol.wp.justify.center,ol.wp.ml(8),ol.wp.flex.growAndShrink(1),ol.wp.colWithGap(2)]});let hL=function(e){var n=e.id,t=e.username,r=e.image,i=e.isOwner,o=e.color,a=e.hideModal,l=e.canClickAvatar,u=e.isCurrentUser,s=e.onAvatarClick,d=function(){l&&(s({username:t,id:n}),a())};return(0,c.FD)("div",{css:[hT.container,i&&dV.b.listItem],style:(0,p._)({cursor:l?"pointer":"auto"},l&&dV.b.listItem),role:"button",onClick:d,onKeyDown:d,tabIndex:0,children:[(0,c.FD)("div",{css:hT.button,children:[(0,c.Y)(uB.A,{src:r,alt:"",css:hT.img,style:{borderColor:o},width:32,height:32}),l?(0,c.FD)(hO.s,{children:["Observe ",t]}):null]}),(0,c.FD)("div",{css:hT.usernameContainer,children:[(0,c.FD)(aA.EY,{multiline:!1,children:["@",t,u?" (you)":null]}),(0,c.Y)(aA.EY,{variant:"small",color:"dimmer",multiline:!1,children:i?hE.owner:hE.editor})]})]})};var hM=(0,rC.x)({loaded:[ol.wp.maxHeight(330),{overflowY:"auto"}]});let hG=function(e){var n,t,r=e.replId,i=e.activeUsers,o=e.hideModal,a=e.onAvatarClick,l=(n={variables:{replId:r}},t=(0,p._)({},hF,n),g.I(hP,t)),u=l.data,s=l.loading,d=l.error;if(s)return(0,c.Y)(ou.S,{p:32,row:!0,justify:"center",children:(0,c.Y)(dc.A,{})});if(d)return(0,c.Y)("div",{children:d.message});if((null==u?void 0:u.getRepl.__typename)==="Repl"){var f=u.getRepl,h=u.currentUser,m=f.user,v=m&&i.find(function(e){return e.username===m.username}),w=f.multiplayers.filter(function(e){var n;return e&&(n=e.id,i.some(function(e){return e.id===n}))}).slice(2);return(0,c.Y)(ou.S,{css:hM.loaded,py:8,gap:8,children:(0,c.FD)(ou.S,{children:[m?(0,c.Y)(hL,(0,r9._)((0,p._)({},m),{color:v?v.color:"transparent",isOwner:!0,hideModal:o,isCurrentUser:m.id===(null==h?void 0:h.id),canClickAvatar:!!v&&m.id!==(null==h?void 0:h.id),onAvatarClick:a})):null,w.map(function(e){if(!e)throw Error("Expected user");var n=i.find(function(n){return n.username===e.username});if(!n)throw Error("Expected user online");var t=e.id!==(null==h?void 0:h.id);return(0,c.Y)(hL,(0,r9._)((0,p._)({isCurrentUser:e.id===(null==h?void 0:h.id)},e),{canClickAvatar:t,color:n.color,hideModal:o,isOwner:!1,onAvatarClick:a}),"chat-user-list-".concat(e.username))})]})})}return(null==u?void 0:u.getRepl.__typename)==="ReplRedirect"?(0,c.FD)("div",{children:["This App has moved to"," ",(0,c.Y)("a",{href:u.getRepl.replUrl,children:u.getRepl.replUrl})]}):(null==u?void 0:u.getRepl.__typename)==="ReplSubscriptionExpired"?(0,c.FD)("div",{children:["Your subscription has expired.",(0,c.Y)("a",{href:"/pricing",children:"Upgrade here"})]}):null};var hN=t(13394),hz=t(17449);let hH=function(e){var n=e.isOpen,t=e.hideModal,r=e.children,i=e.onAvatarClick,o=(0,er.A)(),a=(0,hN.Q4)();return(0,c.FD)(hz.A,{isOpen:n,padding:0,onClickOutside:t,children:[r,(0,c.Y)(hG,{replId:o,activeUsers:a,hideModal:t,onAvatarClick:i})]})};var hB=t(68698),hW=(0,rC.x)({root:[ol.wp.backgroundColor.backgroundDefault],userStack:[(0,ty._)({},ol.$_.max(sR.LO.mobileMax+100),[ol.wp.display.none])],userStackListItem:{listStyleType:"none"},overflowContainer:{backgroundColor:"transparent"},overflowButton:[ol.wp.borderRadius("full"),ol.wp.minWidth(24),ol.wp.height(24),ol.wp.fontSize(10),ol.wp.border({color:rI.LU.outlineDefault})]});function hj(e){var n=(0,u._)((0,d.useState)(!1),2),t=n[0],r=n[1],i=(0,uH.Q4)();if(0===i.length)return null;var o=i.slice(0,2),a=i.length-2;return(0,c.Y)(ou.S,{css:hW.root,row:!0,align:"center",children:(0,c.FD)(ou.S,{tag:"ul",css:hW.userStack,px:8,py:4,row:!0,gap:4,align:"center","aria-live":"polite","aria-relevant":"additions removals","aria-label":"online users",children:[o.map(function(n){return(0,c.Y)("li",{css:hW.userStackListItem,children:(0,c.Y)(hB.A,{user:n,onClick:function(){return e.onAvatarClick(n)}})},n.id)}),a>0?(0,c.Y)("li",{css:hW.userStackListItem,children:(0,c.Y)(ou.S,{children:(0,c.Y)(hH,{isOpen:t,hideModal:function(){return r(!1)},onAvatarClick:e.onAvatarClick,children:(0,c.Y)(af.ui,{background:"root",css:hW.overflowContainer,children:(0,c.Y)(aY.$n,{size:"small",onClick:function(){return r(!t)},text:a.toString(),css:hW.overflowButton})})})})}):null]})})}function h$(){var e=as(),n=(0,al.Jn)(ag.id),t=n?"".concat(ac," (").concat(n,")"):ac;return(0,c.Y)(u1.K0,{alt:t,onClick:function(){return e()},size:32,children:(0,c.Y)(oX.A,{})})}var hq=t(80081),hV=t(23657),hK=t(91883),hZ=t(92977),hJ=t(13167),hQ=t(55908),hX=t(96696),h0=t(36557),h1=(0,rC.x)({self:[ol.wp.position.relative,ol.wp.borderRadius(4,0,0,4)],dotWrapper:[ol.wp.position.absolute,ol.wp.top("-3px"),ol.wp.right("-3px"),ol.wp.width("10px"),ol.wp.height("10px"),ol.wp.borderRadius("full"),ol.wp.border({color:rI.LU.backgroundDefault,width:2})],dot:[ol.wp.width("100%"),ol.wp.height("100%"),ol.wp.borderRadius("full")]});function h2(e){var n=e.color;return(0,c.FD)(ou.S,{css:h1.self,children:[(0,c.Y)(hX.A,{}),(0,c.Y)(ou.S,{tag:"span",css:h1.dotWrapper,children:(0,c.Y)(ou.S,{tag:"span",css:h1.dot,style:{backgroundColor:n,boxShadow:"0 0 6px ".concat(n)}})})]})}var h4=(0,uw.AH)([ol.wp.flex.growAndShrink(1),ol.wp.borderRadius(4,0,0,4),(0,ty._)({},ol.$_.max("tabletMin"),{"div span":[ol.wp.display.none],"div svg":[ol.wp.mr(0)]})]),h5=(0,uw.AH)([h4,ol.wp.borderRadius()]),h7={base:{self:h4,loading:(0,uw.AH)([h4,pp.S.backgroundPulse()])},rounded:{self:h5,loading:(0,uw.AH)([h5,pp.S.backgroundPulse()])}};function h3(e){var n=e.text,t=e.icon,r=e.disabled,i=e.rounded,o=e.onClick,a=e.tooltip,l=e.loading,u=(0,c.Y)(aY.$n,{text:n,iconLeft:t,css:h7[i?"rounded":"base"][l?"loading":"self"],disabled:r,onClick:o});return a?(0,c.Y)(uy.m_,{tooltip:a,children:u}):u}function h8(){var e,n,t,r,i,o,a=(0,hV.u)(),l=(0,hK.jp)(),s=!1,p=!1;switch(a){case hZ.d.Ready:case hZ.d.Suspended:case hZ.d.ProcessingLifecycleCommand:i="Deploy",o=(0,c.Y)(hX.A,{});break;case hZ.d.Loading:i="Deploy",o=(0,c.Y)(hX.A,{}),s=!0;break;case hZ.d.Preparing:i="Preparing",o=(0,c.Y)(hX.A,{}),s=!0,p=!0;break;case hZ.d.PreparingDatabase:l?(i="Approve",o=(0,c.Y)(h0.A,{color:rI.LU.orangeStronger}),p=!0,s=!1):(i="Preparing",o=(0,c.Y)(dc.A,{}),p=!0,s=!0);break;case hZ.d.Deploying:i="Deploying",o=(0,c.Y)(dc.A,{}),p=!0;break;default:(0,sb.A)(a)}var f=oD(),h=!!(0,hQ.Q)(),g=(e=(0,o1.A)().dotReplit,t=(n=(0,u._)((0,d.useState)(null),2))[0],r=n[1],(0,d.useEffect)(function(){return e.watch(function(e){var n;if(e.error)return r(null);r((null==(n=e.config.deployment)?void 0:n.target)||null)})},[e]),t);return(0,c.Y)(h3,{text:i,icon:o,onClick:function(){a===hZ.d.Ready&&(0,oq.u4)(oq.AZ.DEPLOY_PROJECT_SELECTED,{source:"deploy_button",has_agent_session:h}),f({pane:{type:"deployments",flow:{skipIntro:null!==g&&h,isAgentDeployment:null!==g&&h}}})},disabled:s,loading:p,rounded:!0})}var h6={self:ol.wp.rowWithGap(1),open:(0,uw.AH)([ol.wp.borderRadius(0,4,4,0),ol.wp.px(4)])};function h9(){var e,n,t=(0,hV.u)(),r=(0,hq.Jz)(),i=(0,hq.GQ)(),o=oD(),a=(0,hq.Tp)({openDeploymentsPane:function(){o({pane:{type:"deployments"}})}}).redeployWithNoNewOptions,l=(0,ak.A)().showError,s=(0,hK.jp)(),p=(0,B.jt)(),f=(0,u._)((0,d.useState)(void 0),2),h=f[0],g=f[1];(0,d.useEffect)(function(){if(i&&"HostingBuildDeployStatusAction"===i.__typename)switch(i.status){case fN.nHS.Success:case fN.nHS.Failed:g(i.status)}},[i]),(0,d.useEffect)(function(){t===hZ.d.Deploying&&g(void 0)},[t]);var m=void 0,v=!1,w=!1;switch(t){case hZ.d.Ready:e="Redeploy",n=(0,c.Y)(hX.A,{}),h&&(h===fN.nHS.Success?(n=(0,c.Y)(h2,{color:rI.LU.accentPositiveDefault}),m="Success"):(n=(0,c.Y)(h2,{color:rI.LU.accentNegativeDefault}),m="An error occurred"));break;case hZ.d.Suspended:e="Redeploy",n=(0,c.Y)(h2,{color:rI.LU.greyDefault}),m="Deployment suspended";break;case hZ.d.Loading:e="Redeploy",n=(0,c.Y)(hX.A,{}),v=!0,w=!0;break;case hZ.d.ProcessingLifecycleCommand:e="Redeploy",n=(0,c.Y)(h2,{color:rI.LU.orangeStronger}),w=!0,m="Updating deployment";break;case hZ.d.Preparing:e="Preparing",n=(0,c.Y)(dc.A,{}),w=!0,v=!0;break;case hZ.d.PreparingDatabase:s?(e="Approve",n=(0,c.Y)(h0.A,{color:rI.LU.orangeStronger}),w=!0,v=!1):(e="Preparing",n=(0,c.Y)(dc.A,{}),w=!0,v=!0);break;case hZ.d.Deploying:e="Deploying",n=(0,c.Y)(dc.A,{}),w=!0;break;default:(0,sb.A)(t)}return r&&(e="Error",n=(0,c.Y)(h2,{color:rI.LU.accentNegativeDefault}),m=r),(0,c.FD)(ou.S,{css:h6.self,children:[(0,c.Y)(h3,{text:e,icon:n,tooltip:m,onClick:function(){return(0,tS._)(function(){return(0,tY.YH)(this,function(e){switch(e.label){case 0:if(t===hZ.d.Deploying||t===hZ.d.Suspended||t===hZ.d.ProcessingLifecycleCommand||t===hZ.d.Preparing||t===hZ.d.PreparingDatabase)return o({pane:{type:"deployments"}}),[2];if(h&&(g(void 0),h===fN.nHS.Failed)||r)return o({pane:{type:"deployments",data:{view:hJ.P.Deployment}}}),[2];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,a({hasAgentSession:p})];case 2:return e.sent(),[3,4];case 3:return l(e.sent().message),[3,4];case 4:return[2]}})})()},disabled:v,loading:w}),(0,c.Y)(uy.m_,{tooltip:"Open Deployments pane",children:(0,c.Y)(aY.$n,{text:"",iconLeft:(0,c.Y)(cK.A,{}),onClick:function(){o({pane:{type:"deployments"}})},css:h6.open})})]})}var ge=function(){var e=oD();return(0,c.Y)(aY.$n,{text:"Redeploy",iconLeft:(0,c.Y)(hX.A,{}),onClick:function(){e({pane:{type:"deployments"}})}})};function gn(){var e=(0,hq.i$)(),n=(0,hq.cF)(),t=(0,hq.mj)().deployability;return e&&n?t.deploy.isAuthorized||t.redeploy.isAuthorized?(0,c.Y)(h9,{}):(0,c.Y)(ge,{}):(0,c.Y)(h8,{})}var gt=t(92796),gr=t.n(gt),gi=t(28572),go=t(45146),ga=t(75729);function gl(e){var n=e?1560:1400;return(0,rC.x)({desktopButton:(0,ty._)({},ol.$_.max(n),[ol.wp.display.none]),mobileButton:(0,ty._)({},ol.$_.min(n),[ol.wp.display.none])})}let gu=function(e){var n,r,i=e.lesson,o=(0,ak.A)().showError,a=(0,go.mO)().fireCircularBurstFrom,l=(0,d.useRef)(null),s=(0,gi.j)(),f=(0,u._)((0,d.useState)(!1),2),h=f[0],g=f[1],v=(0,hY.A)().showPrivateUpsell,w=(0,u._)((n={onError:function(){return o("Something went wrong")},onCompleted:function(e){var n,t;(null==(n=e.completeUserCourseLesson)?void 0:n.__typename)!=="UpdatedUserCourseLesson"?o((null==(t=e.completeUserCourseLesson)?void 0:t.message)||"Something went wrong"):e.completeUserCourseLesson.userCourseLesson.id===i.id?(l.current&&!s&&a({element:l.current}),g(!0)):o("Something went wrong")}},r=(0,p._)({},d_,n),m.n(dY,r)),2),y=w[0],b=w[1].loading,x="Lesson completed \uD83C\uDF89",_="Mark lesson completed",S=function(){(0,ga._)({action:"completed",lessonSlug:i.lessonSlug,courseSlug:i.course.courseSlug}),y({variables:{input:{userLessonId:i.id}}})},Y=gr()(function(){return Promise.all([t.e(5693),t.e(176)]).then(t.bind(t,176))},{loadableGenerated:{webpack:function(){return[176]}},ssr:!1});return(0,c.FD)(c.FK,{children:[null!==i.timeCompleted?(0,c.FD)(c.FK,{children:[(0,c.Y)(aY.$n,{ref:l,disabled:!0,text:x,colorway:"primary",css:gl(v).desktopButton}),(0,c.Y)(uy.m_,{tooltip:x,css:gl(v).mobileButton,children:(0,c.Y)(aY.$n,{ref:l,disabled:!0,text:"\uD83C\uDF89",colorway:"primary"})})]}):(0,c.FD)(c.FK,{children:[(0,c.Y)(aY.$n,{onClick:S,text:b?"Verifying…":_,colorway:"primary",loading:b,css:gl(v).desktopButton}),(0,c.Y)(uy.m_,{tooltip:_,css:gl(v).mobileButton,children:(0,c.Y)(aY.$n,{iconLeft:(0,c.Y)(pl.A,{}),onClick:S,text:"",colorway:"primary",loading:b})})]}),(0,c.Y)(ap.a,{isOpen:h,onRequestClose:function(){return g(!1)},children:(0,c.Y)(Y,{lessonSlug:i.lessonSlug,courseSlug:i.course.courseSlug})})]})};var gc=t(57506);function gs(e){var n,t=e.lesson,r=(n="tutorial",rf((0,$.A)(function(){return(0,ei.eU)(function(e){return e(e0).find(function(t){return!t.isHidden&&e(t.dataAtom).type===n})})},[n]))),i=rg(i4),o=(0,hY.A)().showPrivateUpsell,a="Show tutorial",l=(0,c.Y)(gc.A,{}),u=function(){return i()};return r?(0,c.Y)(gu,{lesson:t}):(0,c.FD)(c.FK,{children:[(0,c.Y)(aY.$n,{colorway:"primary",iconLeft:l,text:a,css:gl(o).desktopButton,onClick:u}),(0,c.Y)(uy.m_,{tooltip:a,css:gl(o).mobileButton,children:(0,c.Y)(aY.$n,{colorway:"primary",iconLeft:l,text:"",onClick:u})})]})}var gd=t(88571),gp=t(56602),gf=t(34917),gh=t(92441);function gg(e){var n=e.repl,t=e.currentUser,r=e.hideRightActions,i=(0,rl.p)(),o=oH(),a=(0,uf.A)(o.agentFiletreeOrder);return(0,c.FD)(ou.S,{row:!0,gap:6,align:"center",justify:"end",css:ol.wp.noDragRegion,children:[(0,c.Y)(dO,{}),r?null:(0,c.FD)(c.FK,{children:[i&&"agent-filetree"===a?(0,c.Y)(pj,{}):null,i?null:(0,c.Y)(h$,{}),(0,c.Y)(gv,{repl:n}),i?(0,c.Y)(c.FK,{children:(0,c.Y)(gp.A,{})}):null]}),(0,c.Y)(gw,{currentUser:t,hideNotifications:r})]})}var gm={socialGroup:(0,uw.AH)([ol.wp.rowWithGap(1),ol.wp.align.stretch,ol.wp.borderRadius(),ol.wp.overflow("hidden")]),invitePopover:(0,uw.AH)([ol.wp.width(400)]),inviteButton:(0,uw.AH)([dV.b.filled,(i={borderTopLeftRadius:0,borderBottomLeftRadius:0},(0,ty._)(i,ol.$_.max("tabletMax"),{svg:[ol.wp.mr(0)],span:[ol.wp.display.none]}),(0,ty._)(i,'&[aria-expanded="true"]',{backgroundColor:rI.LU.interactiveBackgroundActive}),i)])};function gv(e){var n,t,r,i,o,a,l,s,p,f=e.repl,h=(0,u._)((0,d.useState)(!1),2),g=h[0],m=h[1],v=(0,u._)((0,d.useState)(!1),2),w=v[0],y=v[1],b=oD(),x=(n=oU(),t=(0,o1.A)().presence,r=(0,tW.w1)(),i=(0,oe.A)(n),(0,d.useCallback)(function(e){var n=e.username,o=e.id,a=t.getFollowedUser();if((null==a?void 0:a.username)===n)return void t.unfollowUser();t.followUser(n);var l=t.getActiveFileForUser(o),u=r();l&&l!==u&&i.current({path:l})},[i,r,t])),_=(0,l1.oR)(),S=(null==(o=f.owner)?void 0:o.__typename)==="Team",Y=f.authorizations.viewPermissions.isAuthorized,A=(null==(a=f.org)?void 0:a.type)==="team"?"Access":"Invite",I=(null==f||null==(s=f.authorizations)||null==(l=s.viewDeploymentConfig)?void 0:l.isAuthorized)&&!_;return(0,al.SJ)(function(){return[cU.toggleInviteDialog.id,function(){return m(function(e){return!e})}]},[m]),(0,c.FD)(c.FK,{children:[(null==f?void 0:f.lesson)?(0,c.Y)(gs,{lesson:f.lesson}):null,(0,c.FD)(af.ui,{css:gm.socialGroup,background:"root",children:[(0,c.Y)(hj,{onAvatarClick:x}),Y?(0,c.Y)(c.FK,{children:(0,c.Y)(ou.S,{css:{"&:only-child .invite-button":[ol.wp.borderRadius()]},children:(0,c.FD)(dK.Wv,{isOpen:g,placement:"bottom end",label:A,css:gm.invitePopover,onOpenChange:function(e){if(g&&!w)return void m(!1);e&&(0,oq.u4)(oq.AZ.INVITE_MODAL_OPENED,{replId:f.id,source:"replEnvironment"}),m(e)},children:[(0,c.Y)(aY.$n,{iconLeft:(0,c.Y)(gh.A,{}),css:gm.inviteButton,className:"invite-button",text:A,"aria-expanded":g}),(0,c.Y)(hk,{handleUpgradeTriggered:function(e){return y(e)},replId:f.id,isTeamRepl:S,org:null!=(p=f.org)?p:void 0})]})})}):null]}),I&&f?(0,c.Y)(ou.S,{children:(0,c.Y)(gn,{})}):null,_?(0,c.Y)(aY.$n,{text:"Extension Devtools",iconLeft:(0,c.Y)(l7.A,{}),onClick:function(){b({pane:{type:"extensionDevtools"}})}}):null]})}function gw(e){var n=e.currentUser,t=e.hideNotifications,r=(0,s.useRouter)(),i=(0,ca.A)();return(0,c.Y)(c.FK,{children:i?(0,c.Y)(fL.L,{}):(0,c.FD)(c.FK,{children:[t?null:(0,c.Y)(ou.S,{row:!0,children:(0,c.Y)(gf.A,{pathname:r.pathname,showCount:!1})}),(0,c.Y)(gd.Ay,{currentUser:n,hideTeamInHeader:!0})]})})}var gy=t(72165),gb=t(19012),gx=t(2207);function g_(e){var n=e.isInLayout,t=(0,st._)(e,["isInLayout"]),r=(0,eu.J2)((0,gb.S)()),i=(0,eu.J2)((0,gy.e)()),o=(0,u._)((0,d.useState)(!1),2),a=o[0],l=o[1];(0,d.useEffect)(function(){if(!i||r||n)return void l(!1);var e=setTimeout(function(){return l(!a)},a?1e3:5e3);return function(){clearTimeout(e)}},[a,i,r,n]);var s=!n&&r||a;return(0,c.Y)(gx.l,(0,p._)({loading:s},t))}var gS=t(11234),gY={38:20,36:16,32:16,20:14},gA=(0,rk.v)(["toolIconButtonSize","toolIconBorderRadius"]),gI=gA.cssVars,gC=gA.styleTokens,gk=[ol.wp.position.relative,ol.wp.center,{borderRadius:gC.toolIconBorderRadius}],gE=(0,eA._)(gk).concat([ol.wp.reset.button,{width:gC.toolIconButtonSize,height:gC.toolIconButtonSize,borderRadius:gC.toolIconBorderRadius}]),gD=(0,rC.x)({static:gk,buttonFilled:[ol.wp.display.inlineFlex,{button:(0,eA._)(gE).concat([dV.b.filled])}],button:[ol.wp.display.inlineFlex,{button:(0,eA._)(gE).concat([dV.b.nofill])}]});function gR(e){var n=e.indicator,t=e.children,r=e.size;return(0,c.FD)(c.FK,{children:[(0,d.cloneElement)(t,{size:gY[void 0===r?38:r]}),n?(0,c.Y)(gS.b,{color:n}):null]})}function gF(e){var n=e.indicator,t=e.children,r=e.className,i=e.size,o=void 0===i?38:i,a=e.backgroundColor;return(0,c.Y)(af.ui,{elevated:!0,className:r,css:gD.static,style:(0,ty._)({width:o,height:o,backgroundColor:a},gI.toolIconBorderRadius,20===o?"4px":"8px"),children:(0,c.Y)(gR,{indicator:n,size:o,children:t})})}var gU=(0,d.forwardRef)(function(e,n){var t,r=e.children,i=e.alt,o=e.size,a=void 0===o?38:o,l=e.filled,u=e.indicator,s=e.backgroundColor,d=e.tooltipContents,f=(0,st._)(e,["children","alt","size","filled","indicator","backgroundColor","tooltipContents"]);return(0,c.Y)(ou.S,{css:void 0===l||l?gD.buttonFilled:gD.button,style:(t={},(0,ty._)(t,gI.toolIconButtonSize,a+"px"),(0,ty._)(t,gI.toolIconBorderRadius,20===a?"4px":"8px"),t),children:(0,c.Y)(u1.K0,(0,r9._)((0,p._)({},f),{alt:i,ref:n,style:{backgroundColor:s},isTooltipOpen:f.isTooltipOpen,tooltipContents:(0,c.Y)(ou.S,{grow:!0,shrink:!0,children:null!=d?d:i}),children:(0,c.Y)(gR,{indicator:u,size:a,children:r})}))})}),gP=(0,rC.x)({tooltipTitle:[ol.wp.flex.growAndShrink(1)]});function gO(e){var n=e.title,t=e.subtitle,r=e.description,i=e.icon,o=e.titleInfoIcon;return(0,c.FD)(ou.S,{grow:!0,shrink:!0,p:2,gap:4,children:[(0,c.FD)(ou.S,{row:!0,gap:4,align:"center",children:[(0,c.Y)(gF,{size:20,children:i}),(0,c.Y)(aA.EY,{css:gP.tooltipTitle,children:n}),o]}),t?(0,c.Y)(aA.EY,{children:(0,c.Y)("strong",{children:t})}):null,r]})}var gT=t(71183),gL=t(21640);function gM(e){var n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).onDragStart,t=rg(oR),r=(0,u._)((0,gT.i)({type:gL.N.NewPane,item:function(){return{type:gL.N.NewPane,pane:e,grid:!0}},end:function(){t()},collect:function(e){return{isDragging:e.isDragging()}}}),3),i=r[0],o=r[1],a=r[2],l=i.isDragging;return(0,d.useEffect)(function(){l&&(null==n||n())},[l,n]),{dragRef:o,dragPreview:a}}var gG=(0,rC.x)({dockItem:[ol.wp.position.relative,ol.wp.width(36)],inLayoutIndicator:[ol.wp.position.absolute,ol.wp.top("50%"),ol.wp.left(4),ol.wp.width(3),ol.wp.height(3),ol.wp.borderRadius("full"),ol.wp.shadow(1),{transform:"translate(0, -50%)",backgroundColor:rI.LU.foregroundDimmest,pointerEvents:"none"}]});function gN(e){var n,t,r,i,o,a,l=e.pane,u=e.tooltipPlacement,s=e.indicatorPlacement,d=void 0===s?"right":s,p=(t=(n=(0,e6.Vv)()).Icon({pane:l}),r=n.getTitle(l),i=(0,e6.qo)(l),o=(0,uH.F9)({paneType:l.type}),a=oD(),{icon:t,title:r,description:i,indicator:o,onClick:function(){a({pane:l,commit:!0,reveal:!0})}}),f=p.title,h=p.description,g=p.indicator,m=p.onClick,v=p.icon,w=oT(l.type),y=gM(l).dragRef,b=(0,rl.p)(),x=h?(0,c.Y)(gO,{title:f,icon:v,description:(0,c.Y)(aA.EY,{multiline:!0,children:h})}):null,_=(0,d6.Jw)(fe,p1.Assistant),S=(0,d6.Jw)(fe,p1.Agent);return(0,c.FD)(ou.S,{css:gG.dockItem,style:b?{width:32}:{},innerRef:(0,e6.GN)(l)?S:(0,e6.N5)(l)?_:void 0,children:[(0,c.Y)(gU,{ref:y,filled:!1,alt:f,indicator:g,size:b?32:36,onClick:m,tooltipContents:x,tooltipPlacement:void 0===u?"right-start":u,children:"agentChat"===l.type?(0,c.Y)(g_,{isInLayout:w}):v}),w&&null!==d?(0,c.Y)(ou.S,{css:gG.inLayoutIndicator,style:"bottom"===d?{bottom:-2,left:"50%",transform:"translateX(-50%)"}:{right:-2}}):null]})}function gz(){var e,n,t=(e=oT("webview"),n=cM(),{panes:(0,d.useMemo)(function(){var t=(0,eA._)(n);return e&&t.unshift({type:"webview"}),t},[n,e]),isWebviewInLayout:e}),r=t.panes,i=t.isWebviewInLayout,o=oD(),a=as(),l=cB(),u=(0,B.jt)();return(0,c.FD)(ou.S,{row:!0,gap:4,align:"center",pr:8,children:[i?null:(0,c.Y)(aY.$n,{variant:"outlined",iconLeft:(0,c.Y)(cV.A,{}),text:"Preview",onClick:function(){return o({pane:{type:"webview"}})}}),(0,c.FD)(ou.S,{row:!0,align:"center",children:[u?null:(0,c.Y)(gN,{pane:{type:"ghostwriterChat"},indicatorPlacement:null,tooltipPlacement:"bottom"}),r.map(function(e){return(0,c.Y)(gN,{pane:e,indicatorPlacement:null,tooltipPlacement:"bottom"},e.type)}),(0,c.Y)(u1.K0,{size:32,tooltipBehavior:"hidden",alt:"",onClick:function(){return a(l)},children:(0,c.Y)(cG,{})})]})]})}var gH=t(17887),gB=t.n(gH);function gW(){var e=as(),n=(0,al.Jn)(ag.id),t=(0,dF.vm)();return(0,c.FD)(ou.S,{row:!0,gap:4,align:"center",grow:!0,shrink:!0,children:[(0,c.FD)(af.ui,{elevated:!0,grow:2,shrink:!0,clsx:gB().search,children:[(0,c.Y)(aY.$n,{variant:"outlined",text:"Search...",onClick:function(){return e()}}),n?(0,c.Y)(aA.EY,{color:"dimmest",variant:"small",clsx:gB().shortcut,children:(0,al.LH)(n,t)}):null]}),(0,c.Y)(gz,{})]})}var gj=t(91521),g$=t.n(gj),gq=(0,rI.CK)("index.module.css",["--height"]);let gV=(0,d.memo)(function(){var e,n,t,r=(n={variables:{id:(0,er.A)()},context:{noBatch:!0}},t=(0,p._)({},dk,n),g.I(dR,t)).data,i=(null==r?void 0:r.getRepl.__typename)==="Repl"?r.getRepl:null,o=null==r?void 0:r.currentUser,a=(0,ca.A)(),l=(0,dF.d0)(),u="centeredVisualPlanner"===oG(),s=(0,B.jt)()&&(null==i||null==(e=i.config)?void 0:e.isInPlanningPhase)===!0,d=(0,rl.p)();return(0,c.Y)(af.ui,{tag:"header",px:d?6:12,pl:d?void 0:8,style:(0,ty._)({backgroundColor:d?void 0:"transparent"},gq.height,ru.uF+"px"),clsx:[g$().root,(0,ty._)({},g$().desktopAppWindowsOs,a&&l)],children:i&&o?(0,c.FD)(c.FK,{children:[(0,c.Y)("div",{clsx:(0,ty._)({},g$().opaqueOnHover,u),children:(0,c.Y)(fY,{repl:i,currentUser:o,isAgentCentered:u})}),(0,c.Y)(gK,{isAgentCentered:u,isVisualPlanningLayout:s}),(0,c.Y)("div",{clsx:(0,ty._)({},g$().opaqueOnHover,u),children:(0,c.Y)(gg,{repl:i,currentUser:o,hideRightActions:u||s})})]}):null})});function gK(e){var n=e.isAgentCentered,t=e.isVisualPlanningLayout,r=(0,dU.A)(),i=(0,rl.p)();return t?(0,c.Y)(fO,{}):n?(0,c.Y)(ou.S,{}):(null==r?void 0:r.status)==="error"||(null==r?void 0:r.status)==="rebuilding-after-error"?(0,c.Y)(fE,{nixState:r}):i?(0,c.Y)(gW,{}):(0,c.Y)(fw,{attachTourRefs:!0})}var gZ=(0,rk.v)(["opacity","pointerEvents"]),gJ=gZ.cssVars,gQ=gZ.styleTokens,gX=(0,uw.i7)({from:{transform:"translateY(-20%)"},to:{transform:"translateY(0)"}}),g0=(0,uw.i7)({from:{opacity:0},to:{opacity:1}}),g1={root:(0,uw.AH)([ol.wp.width("100%"),ol.wp.top(0),ol.wp.left(0),ol.wp.px(12),ol.wp.pl(8),ol.wp.pt(4),ol.wp.position.absolute,ol.wp.dragRegion,ol.wp.noSelect,ol.wp.flex.row,ol.wp.justify.spaceBetween,{alignItems:"center",pointerEvents:gQ.pointerEvents,opacity:gQ.opacity},{"@media(prefers-reduced-motion: no-preference)":{animation:"".concat(gX," 0.2s ease-in-out, ").concat(g0," 0.2s ease-in-out")},animation:"".concat(g0," 0.2s ease-in-out")}]),left:(0,uw.AH)([ol.wp.minWidth(100),ol.wp.align.start]),right:(0,uw.AH)([ol.wp.minWidth(100),ol.wp.align.end])};let g2=(0,d.memo)(function(e){var n,t=e.doesBonsaiSupportWorkspace2,r="centeredVisualPlanner"===oG();return t?(0,c.FD)(ou.S,{style:(n={},(0,ty._)(n,gJ.opacity,r?.5:1),(0,ty._)(n,gJ.pointerEvents,r?"none":"all"),n),tag:"header",css:g1.root,children:[(0,c.Y)(ou.S,{css:g1.left}),r?(0,c.Y)(ou.S,{}):(0,c.Y)(fw,{attachTourRefs:!0}),(0,c.Y)(ou.S,{css:g1.right,children:r?null:(0,c.Y)(h$,{})})]}):null});var g4=t(98507);function g5(){var e=(0,f._)(["\n  query BrowserNotifications($username: String!) {\n    user: userByUsername(username: $username) {\n      id\n      image\n    }\n  }\n"]);return g5=function(){return e},e}var g7=(0,h.J1)(g5());function g3(){return"Notification"in window?"true"===ni.A.get(g8,"string")?"dismissed":window.Notification.permission:"denied"}var g8="notifications/dismissedModal";function g6(e){ni.A.set(g8,String(e))}var g9={};function me(e){return(0,tS._)(function(e){var n,t,r,i,o,a,l,u,c,s,d;return(0,tY.YH)(this,function(p){switch(p.label){case 0:if(n=e.title,t=e.body,r=e.badge,i=e.icon,o=e.iconByUsername,a=e.tag,l=e.onClick,c=void 0===(u=e.cacheDuration)?0:u,!document.hidden&&document.hasFocus()||"granted"!==g3()||(s=Date.now(),a in g9&&g9[a]+c>s))return[2];if(!o)return[3,2];return[4,(0,tS._)(function(){var e,n;return(0,tY.YH)(this,function(t){switch(t.label){case 0:if(null===tA.V)return[2];return[4,tA.V.query({query:g7,variables:{username:o}})];case 1:return[2,null==(n=t.sent().data)||null==(e=n.user)?void 0:e.image]}})})()];case 1:i=p.sent(),p.label=2;case 2:return d=new window.Notification(n,{body:t,badge:r||"/public/images/logo-grayscale.png",icon:i||"/public/images/icon-square.png",tag:a}),setTimeout(function(){d.close()},1e4),d.addEventListener("click",function(){window.focus(),d.close()}),l&&d.addEventListener("click",l),g9[a]=s,[2]}})}).apply(this,arguments)}var mn=t(13877),mt=t(98700),mr=t.n(mt),mi=(0,rI.CK)("Border.module.css",["--header-height"]);let mo=(0,d.memo)(function(e){var n,t=e.paneId,r=e.headerHeight,i=oL(t),o=(0,uf.A)(i.isFloating),a=(0,uf.A)(i.isActive),l=(0,uf.A)(i.isBeingDragged),u=(0,uf.A)(i.hasBorder),s=(0,uf.A)(i.highlight),d=(0,rl.p)();return(u||d)&&(o||s||l||d)?(0,c.Y)(ou.S,{style:(0,ty._)({},mi.headerHeight,"".concat(r,"px")),clsx:[mr().root,(n={},(0,ty._)(n,mr().base,d),(0,ty._)(n,mr().floating,o),(0,ty._)(n,mr().active,a),(0,ty._)(n,mr().dragging,l),(0,ty._)(n,mr().highlight,s),n)]}):null});var ma=ou.D.div,ml=(0,uw.AH)([ol.wp.width("100%"),ol.wp.position.absolute,ol.wp.left(0),{cursor:"ns-resize",zIndex:1,":hover":{transform:"scaleY(4)"}}]),mu=(0,uw.AH)([ol.wp.height("100%"),ol.wp.position.absolute,ol.wp.top(0),{cursor:"ew-resize",zIndex:1,":hover":{transform:"scaleX(4)"}}]),mc=(0,uw.AH)([ol.wp.position.absolute,{zIndex:2,transform:"scale(2)",":hover":{transform:"scale(4)"}}]);function ms(e){return{transformOrigin:"".concat("topLeft"===e||"bottomLeft"===e?"right":"left"," ").concat("topLeft"===e||"topRight"===e?"bottom":"top")}}var md={topLeft:(0,uw.AH)([ol.wp.top(0),ol.wp.left(0),ms("topLeft")]),topRight:(0,uw.AH)([ol.wp.top(0),ol.wp.right(0),ms("topRight")]),bottomLeft:(0,uw.AH)([ol.wp.bottom(0),ol.wp.left(0),ms("bottomLeft")]),bottomRight:(0,uw.AH)([ol.wp.bottom(0),ol.wp.right(0),ms("bottomRight")])};function mp(e){var n=e.edge,t=e.size,r=e.onPointerDown;if("top"===n||"bottom"===n)return(0,c.Y)(ma,{onPointerDown:r,style:(0,ty._)({height:t},n,-t),css:ml});if("right"===n||"left"===n)return(0,c.Y)(ma,{onPointerDown:r,style:(0,ty._)({width:t},n,-t),css:mu});var i="topLeft"===n||"bottomRight"===n?"nwse-resize":"nesw-resize";return(0,c.Y)(ma,{onPointerDown:r,style:{height:t,width:t,cursor:i},css:[mc,md[n]]})}var mf=["bottom","right","left","bottomRight","bottomLeft"],mh=(0,d.memo)(function(e){var n=rg(iK);return(0,c.Y)(c.FK,{children:mf.map(function(t){return(0,c.Y)(mp,{size:8,edge:t,onPointerDown:function(r){(0,uh.j)(r,{start:function(){n({type:"start",paneId:e.paneId,edge:t})},move:function(e){n({type:"update",moveDelta:e.delta})},end:function(){n({type:"end"})}})}},t)})})}),mg=["top","right","left","topRight","topLeft"],mm=(0,d.memo)(function(e){var n=rg(iK);return(0,c.Y)(c.FK,{children:mg.map(function(t){return(0,c.Y)(mp,{size:8,edge:t,onPointerDown:function(r){(0,uh.j)(r,{start:function(){n({type:"start",paneId:e.paneId,edge:t})},move:function(e){n({type:"update",moveDelta:e.delta})},end:function(){n({type:"end"})}})}},t)})})}),mv=t(9542),mw=t(58912),my=t(83022),mb=t.n(my),mx=(0,rI.CK)("index.module.css",["--transform-x","--transform-y","--scale","--transform-origin-x","--width","--height","--opacity","--interaction-blanket-display","--pointer-events","--user-select","--border-top-left-radius","--border-top-right-radius","--border-gap","--iframe-pointer-events"]),m_=(0,d.memo)(function(e){var n,t,r,i,o,a,l,u=e.paneId,s=(0,e6.Vv)().Content,p=oL(u),f=(0,uf.A)(p.isHidden),h=(0,uf.A)(p.data),g=(0,uf.A)(p.isActive),m=(0,uf.A)(p.isCommitted);(0,tW.a$)(u,h);var v=(n=aE(),t=rg(r1),r=rg(tT),i=rg(nn),o=rg(tL),(0,$.A)(function(){return function(e){switch(e.operation){case"commit":i(u);return;case"open":if(e.floating)return void t(e.pane,{commit:!0,location:"center"});n({pane:e.pane,activate:!0,placement:e.secondary?{type:"secondary",relativeTo:u}:{type:"after",paneId:u}});return;case"replace":r({paneId:u,pane:e.pane});return;case"remove":o(e.pane.id);return;case"openPip":return;default:(0,sb.A)(e)}}},[i,u,r,o,n,t])),w=(a=(0,o1.A)().container,l=(0,mv.A)({container:a,service:"panetracker"}).channel,(0,d.useCallback)(function(e,n){l&&l.send({paneMetricsTracker:{pane:e,flow:n}})},[l]));return(0,c.Y)(s,{pane:h,options:{paneId:u,isHidden:f,performPaneOperation:v,isActive:g,isCommitted:m,emitPaneMetrics:w}})});let mS=(0,d.memo)(function(e){var n=e.paneId,t=oE(),r=function(e){var n,t=e.paneId,r=(0,u._)((0,mn.H)({accept:[tQ.pt.File,gL.N.Pane,gL.N.NewPane],collect:function(e){return{isOver:e.isOver()}},hover:function(e,n){var r=n.getClientOffset();r&&a.drag({pageX:r.x,pageY:r.y,over:t})},drop:function(e,n){var r=n.getClientOffset();if(r){if(e.type===gL.N.Pane)return void a.drop({type:"pane",paneId:e.paneId,pageX:r.x,pageY:r.y,over:t});if("nodes"===e.type){var i=(0,e6.u9)(e.nodes);i.length>0&&a.drop({type:"newPaneGroup",panes:i,pageX:r.x,pageY:r.y,over:t})}if(e.type===gL.N.NewPane){var o=e.pane;a.drop({type:"newPaneGroup",panes:[o],pageX:r.x,pageY:r.y,over:t})}}}}),2),i=r[0].isOver,o=r[1],a=(n=rg(rE),(0,d.useEffect)(function(){i||n(null)},[i,n]),{drag:rg(iC),drop:rg(ik)});return o}({paneId:n}),i=oL(n),o=(0,uf.A)(i.isActive),a=(0,uf.A)(i.isFloating),l=(0,uf.A)(i.isModal),s=(0,uf.A)(i.paneType),p=(0,ca.A)(),f=(0,dF.vm)(),h=(0,dF.d0)(),g=(f||h)&&p?ru.uF:0,m=(0,d.useRef)(null);(0,rY.d)(m,up(i.properties,i.getTransitionEnabled),function(e){var n,t=e.width,r=e.height,i=e.x,o=e.y,a=e.scale,l=e.opacity;return n={},(0,ty._)(n,mx.width,t+"px"),(0,ty._)(n,mx.height,r+"px"),(0,ty._)(n,mx.transformX,i+"px"),(0,ty._)(n,mx.transformY,o+"px"),(0,ty._)(n,mx.scale,a.toString()),(0,ty._)(n,mx.opacity,l.toString()),n}),(0,rY.d)(m,i.transformOriginXAtom,function(e){return(0,ty._)({},mx.transformOriginX,e)}),(0,rY.d)(m,i.viewportInset,function(e){return{"--fixed-position-offset-x":-e.x+"px","--fixed-position-offset-y":-e.y-g+"px"}}),(0,rY.d)(m,i.isHidden,function(e){return(0,ty._)({},mx.pointerEvents,e?"none":"auto")}),(0,rY.d)(m,i.zIndex,function(e){return{"z-index":e.toString()}}),(0,rY.d)(m,i.disableInteractions,function(e){var n;return n={},(0,ty._)(n,mx.interactionBlanketDisplay,e?"block":"none"),(0,ty._)(n,mx.userSelect,e?"none":"auto"),(0,ty._)(n,mx.iframePointerEvents,e?"none":"auto"),n});var v=o?void 0:function(){t(n,{commit:"codeEditor"!==s})},w=(0,o6.kg)(),y=oG(),b="agentChat"===s,x=(0,ty._)({},mx.borderGap,"".concat(4,"px")),_=(0,uf.A)(i.isOnlyPane),S="webview"===s&&_,Y=(0,rl.p)();Y&&S&&(x.borderTopLeftRadius=4,x.borderTopRightRadius=4,x.overflow="hidden");var A=(0,aM.S)([m,a?void 0:r],{breadcrumb:"client/replEnvironmentDesktop/Pane/index.tsx:324"}),I=rg(oA),C=(0,uf.A)(i.headerHeight);return(0,c.Y)(c.FK,{children:(0,c.Y)(o6.ph,{value:n,children:(0,c.Y)(af.ui,{role:"tabpanel",id:n,"aria-labelledby":"tab-".concat(n),innerRef:A,clsx:mb().root,style:x,elevated:!(b&&"centeredVisualPlanner"===y)&&!Y,onMouseEnter:function(){return I(n)},onMouseLeave:function(){return I(null)},children:(0,c.FD)(mw.A,{origin:"ErrorBoundary: PaneContainer",bsod:!0,tags:(0,$.A)(function(){return{paneType:s}},[s]),children:[(0,c.FD)(ou.S,{clsx:mb().container,onMouseDown:v,onContextMenu:v,innerRef:function(e){return w(n,e)},style:"agentChat"===s?{overflowX:"hidden"}:void 0,children:[(0,c.Y)(ou.S,{tabIndex:-1}),(0,c.Y)(m_,{paneId:n})]}),(0,c.Y)(mo,{headerHeight:Y&&S?0:C,paneId:n}),a&&!l?(0,c.Y)(mh,{paneId:n}):null,(0,c.Y)(ou.S,{clsx:mb().interactionBlanket})]},n)})})})});var mY=t(5934);let mA=(0,d.memo)(function(){var e=rf(nY),n=(0,mY.A)();return e&&n?(0,c.Y)("div",{css:[ol.wp.position.absolute,ol.wp.width(e.width),ol.wp.height(e.height),ol.wp.borderRadius(4),{boxShadow:"0 0 0 3px ".concat(n.color),pointerEvents:"none",zIndex:3,transform:"translate(".concat(Math.round(e.x),"px, ").concat(Math.round(e.y),"px)")}]}):null});function mI(){var e=(0,o1.A)().presence,n=(0,u._)((0,d.useState)(e.getFollowingUsers()),2),t=n[0],r=n[1];return(0,d.useEffect)(function(){return r(e.getFollowingUsers()),e.onFollowingUsersChanged(function(e){r(e.followingUsers)})},[e]),t}function mC(){var e=(0,f._)(["\n  query WorkspaceActiveUserImages($userIds: [Int!]!) {\n    usersByIds(ids: $userIds) {\n      id\n      image\n    }\n  }\n"]);return mC=function(){return e},e}var mk={},mE=(0,h.J1)(mC()),mD=t(88197);function mR(e){var n,t,r=(n={variables:{userIds:e.slice(0,mD.Ry)},skip:0===e.length},t=(0,p._)({},mk,n),g.I(mE,t)).data;return r?new Map(r.usersByIds.map(function(e){return[e.id,e.image]})):null}var mF={root:(0,uw.AH)([ol.wp.rowWithGap(4),ol.wp.align.center]),text:(0,uw.AH)([ol.wp.flex.shrink(1),ol.wp.align.center]),username:(0,uw.AH)([ol.wp.flex.shrink(2),ol.wp.maxWidth(140),ol.wp.truncate])};function mU(){var e=mI();return 0===e.length?null:1===e.length?(0,c.Y)(mP,{user:e[0]}):(0,c.FD)(aA.EY,{variant:"small",color:"dimmest",css:mF.text,multiline:!1,children:[e.length," users are observing you"]})}function mP(e){var n=e.user,t=n.id,r=n.username,i=n.color,o=mR([t]),a={id:t,username:r,color:i,image:null==o?void 0:o.get(t)};return(0,c.FD)(ou.S,{css:mF.root,children:[(0,c.Y)(f9.e,{size:16,src:a.image||null,username:a.username,ringColor:a.color}),(0,c.Y)(aA.EY,{variant:"small",color:"dimmer",css:mF.username,multiline:!1,children:r}),(0,c.Y)(aA.EY,{variant:"small",color:"dimmest",css:mF.text,multiline:!1,children:"is observing you"})]})}var mO={root:(0,uw.AH)([ol.wp.rowWithGap(4),ol.wp.align.center]),text:(0,uw.AH)([ol.wp.flex.shrink(1),ol.wp.align.center]),username:(0,uw.AH)([ol.wp.flex.shrink(2),ol.wp.maxWidth(140),ol.wp.truncate])};function mT(e){var n=e.id,t=e.username,r=e.color,i=mR([n]),o=(0,o1.A)().presence,a={id:n,username:t,color:r,image:null==i?void 0:i.get(n)};return(0,c.FD)(ou.S,{css:mO.root,children:[(0,c.Y)(f9.e,{size:16,src:a.image||null,username:a.username,ringColor:a.color}),(0,c.Y)(aA.EY,{css:mO.text,variant:"small",color:"dimmest",multiline:!1,children:"Observing"}),(0,c.Y)(aA.EY,{css:mO.username,variant:"small",color:"dimmer",multiline:!1,children:t}),(0,c.Y)(u1.K0,{alt:"Stop observing",size:18,onClick:function(){o.unfollowUser()},children:(0,c.Y)(sr.A,{})})]})}var mL=(0,rC.x)({root:[ol.wp.height("100%"),ol.wp.border({color:rI.LU.outlineDimmest,direction:"bottom"}),ol.wp.highRes({borderBottomWidth:.5}),ol.wp.align.center]});function mM(e){var n,t,r,i=e.paneId,o=oI(i),a=(n=(0,mY.A)(),t=ok({paneId:i}),n&&t?n:null),l=(r=mI(),ok({paneId:i})&&r.length>0?r:null),u=(0,e6.xS)(o)?o.data.path:null,s=null;return(a&&(s=(0,c.Y)(mT,{id:a.id,username:a.username,color:a.color})),null!==s||l)?(0,c.FD)(ou.S,{css:mL.root,px:4,row:!0,gap:8,children:[l&&u?(0,c.Y)(mU,{}):null,s]}):null}var mG=(0,rC.x)({handle:[ol.wp.minWidth(16),ol.wp.height("100%")]});function mN(e){var n=e.paneGroupId,t=e.activeTabPaneId,r=oF({paneGroupId:n}),i=r.isDragging,o=r.dnd,a=oP().toggleMaximizedPaneGroup,l=oM(n),u=(0,uf.A)(l.isMaximized),s=oE();return o?(0,c.Y)(ou.S,{grow:!0,shrink:!0,onDoubleClick:function(){a({paneGroupId:n})},title:u?"Double click to restore.":"Double click to maximize. Drag to move.",css:mG.handle,style:{cursor:u?void 0:i?"grabbing":"grab"},onPointerDown:function(e){s(t),!u&&"button"in e&&0===e.button&&(0,uh.j)(e,{start:o.start,move:o.update,end:o.end})}}):null}var mz=(0,rC.x)({container:[ol.wp.width("100%"),ol.wp.height("100%")],iconAndTitle:[ol.wp.height("100%"),ol.wp.align.center,ol.wp.border({direction:"bottom",color:rI.LU.outlineDimmest}),ol.wp.highRes({borderBottomWidth:.5})],text:[ol.wp.fontSize(13)]});function mH(e){var n=e.headerId,t=e.paneId,r=oI(t),i=(0,e6.Vv)(),o=i.getTitle(r),a=i.Icon({pane:r,size:16});return(0,c.FD)(ou.S,{css:mz.container,row:!0,children:[(0,c.FD)(ou.S,{css:mz.iconAndTitle,pl:6,row:!0,gap:6,children:[a,(0,c.Y)(aA.EY,{css:mz.text,children:o})]}),(0,c.Y)(mN,{paneGroupId:n,activeTabPaneId:t})]})}var mB=t(81843),mW=t(36294),mj=t(17177),m$=t(82898),mq=t(77898),mV=t(35791),mK=t.n(mV),mZ=(0,rI.CK)("Tab.module.css",["--font-style"]),mJ=(0,d.memo)(function(e){var n=e.paneId,t=e.paneGroupId,r=e.isActive,i=e.selectTab,o=e.removePane,a=e.dragGroup,l=oL(n),s=(0,uf.A)(l.isCommitted),p=rg(nn),f=oI(n),h=(0,e6.Vv)(),g=h.getTitle(f),m=h.Icon({pane:f,size:16}),v=(0,uf.A)(l.isActivePane),w=(0,uH.F9)({paneType:f.type}),y=(0,tW.WM)((0,e6.xS)(f)?f.data.path:null),b=void 0;(0,e6.xS)(f)&&f.data.path&&(b=f.data.path);var x=(0,gi.j)(),_=(0,d.useRef)(null),S=(0,u._)((0,gT.i)({type:gL.N.Pane,item:function(){var e,t=(null==(e=_.current)?void 0:e.getBoundingClientRect().width)||80;return{type:gL.N.Pane,paneId:n,width:t}},collect:function(e){return{isDragging:e.isDragging()}}}),2),Y=S[0].isDragging,A=S[1],I=rg(t7);(0,d.useEffect)(function(){return I(Y)},[I,Y]);var C=oF({paneGroupId:t}).dnd,k=(0,d.useCallback)(function(e){1!==e.button&&(L.current=v,C&&a&&(0,uh.j)(e,{start:C.start,move:C.update,end:C.end}),v||(dt.ZQ({category:"pane",message:"Tab clicked: "+f.type}),(0,oq.u4)(oq.AZ.WS_TAB_OPENED,{paneType:f.type}),i(n)))},[f.type,C,a,v,n,i]);(0,d.useEffect)(function(){r&&_.current&&(0,mq.A)(_.current,{behavior:x?"auto":"smooth",scrollMode:"if-needed"},!0)},[r,x,_]);var E=function(e){var n,t,r,i,o,a=e.paneId,l=e.paneGroupId,u=(0,o6.gB)(),s=oC(),p=sY({paneId:a}),f=sl({paneId:a,paneGroupId:l}),h=(n=oC(),t=rg(th),r=rg(tf),i=rm(tp),o=(0,d.useCallback)(function(e){var n,t,r;return n=i(),t=n.primaryTools,r=n.secondaryTools,t.some(function(n){return tg(n)===tg(e)})||(0,e6.xS)(e)||"commands"===e.type?"notAllowed":r.some(function(n){return tg(n)===tg(e)})?"remove":"add"},[i]),(0,d.useCallback)(function(){var e=n(a).pane,i=o(e);switch(i){case"notAllowed":return null;case"add":return{match:oK.G2,data:{label:"Add to dock",type:"action",icon:(0,c.Y)(at.A,{}),run:function(){t({pane:e})}}};case"remove":return{match:oK.G2,data:{label:"Remove from dock",type:"action",icon:(0,c.Y)(sx.A,{}),run:function(){r(e.type)}}};default:(0,sb.A)(i)}},[a,o,n,t,r])),g=su(),m=(0,e6.Vv)();return(0,d.useCallback)(function(){var e=s(a).pane,n=u(a),t=function(e){return!!e&&(void 0===e?"undefined":(0,eI._)(e))==="object"&&"data"in e};return{data:{type:"context",label:"Search actions",icon:(0,c.Y)(m.Icon,{pane:e})},commands:function(){return[{data:{type:"group",key:"pane-actions"},commands:function(){var e,r;return(null!=(r=null==n||null==(e=n.commands)?void 0:e.flatMap(function(e){return e.commands}))?r:[]).filter(t)}},{data:{type:"group",key:"secondary"},commands:function(){return[h(),g(a),p].concat((0,eA._)(f)).filter(t)}}]}}},[u,m,s,a,p,f,h,g])}({paneId:n,paneGroupId:t}),D=(0,uJ.EF)().onContextMenu,R=(0,d.useRef)(null),F=(0,u._)((0,mW.A9)(R,!1),4),U=F[0],P=F[1],O=F[2],T=F[3],L=(0,d.useRef)(!1);return(0,mW.xK)(P,R),(0,c.Y)(mQ,{dragRef:a?void 0:A,uniquePath:y,title:g,icon:"commands"!==f.type?m:void 0,isActive:r,isActivePane:v,isDragging:Y,italicizeTitle:!s&&"commands"!==f.type,tooltip:b,id:n,controls:n,indicatorColor:w,onTabClick:function(){if(T(),r&&!s)return function(){L.current&&p(n)}},onTabContextMenu:function(e){return D(e,{command:E()})},onTabPointerDown:k,handleClose:function(e){void 0===e?dt.ZQ({category:"pane",message:"Tab closed: "+f.type}):dt.ZQ({category:"pane",message:"Tab closed: "+f.type,data:{reason:e}}),(0,oq.u4)(oq.AZ.WS_TAB_CLOSED,{paneType:f.type}),o(n)},onTabKeyDown:O,tabIndex:U,tabRef:R,tabFocused:P,rootRef:_})});function mQ(e){var n,t={delay:1e3,isDisabled:!e.tooltip,closeDelay:0},r=(0,mj.O)(t),i=(0,m$.D)(t,r,e.tabRef),o=i.triggerProps,a=i.tooltipProps,l=(0,aM.S)([e.dragRef,e.rootRef]),u=(0,rl.p)();return(0,c.FD)(af.ui,{elevated:e.isActive&&!u,innerRef:l,style:(0,ty._)({},mZ.fontStyle,e.italicizeTitle?"italic":"inherit"),clsx:[mK().tab,(n={},(0,ty._)(n,mK().dragging,e.isDragging),(0,ty._)(n,mK().active,e.isActive),n)],row:!0,align:"stretch",onMouseUp:function(n){1===n.button&&(n.preventDefault(),n.stopPropagation(),e.handleClose("middle click"))},children:[(0,c.FD)(ou.S,(0,r9._)((0,p._)({},o),{tag:"button",role:"tab",innerRef:e.tabRef,tabIndex:e.tabIndex,onKeyDown:e.onTabKeyDown,onClick:e.onTabClick,onPointerDown:e.onTabPointerDown,onContextMenu:e.onTabContextMenu,clsx:mK().tabButton,"aria-selected":e.isActive,"aria-controls":e.controls,id:"tab-".concat(e.id),"data-pane-tab-primary-button":!0,row:!0,align:"center",gap:6,px:6,grow:!0,shrink:!0,children:[e.icon?(0,c.Y)(ou.S,{clsx:mK().tabIcon,children:e.icon}):null,(0,c.FD)(ou.S,{row:!0,gap:4,align:"center",children:[(0,c.Y)(aA.EY,{multiline:!1,clsx:mK().tabTitle,title:e.title,children:e.title}),e.uniquePath?(0,c.Y)(aA.EY,{variant:"small",color:"dimmest",multiline:!1,clsx:mK().uniquePath,children:e.uniquePath}):null]})]})),r.isOpen?(0,c.Y)(uy._m,{placement:"bottom",state:r,target:e.tabRef.current,tooltip:e.tooltip,tooltipProps:a,maxWidth:600}):null,e.indicatorColor?(0,c.Y)(ou.S,{clsx:mK().indicator,children:(0,c.Y)(gS.b,{color:e.indicatorColor})}):null,(0,c.Y)(u1.K0,{onClick:function(){return e.handleClose()},alt:"Close tab",tabIndex:e.tabFocused?0:-1,size:12,clsx:mK().closeButton,children:(0,c.Y)(sr.A,{})}),e.isActivePane?(0,c.Y)(ou.S,{clsx:mK().activeLine,"data-active-pane-line":!0}):null]})}var mX=t(15831),m0=t.n(mX);function m1(e){var n,t,r,i,o,a,l=e.headerId,s=rg(tX),p=rg(tZ),f=rg(t4),h=rg(tL),g=(0,d.useRef)(null),m=oO(l),v=(0,uf.A)(m.activeIndex),w=(0,uf.A)(m.activeTabPaneId),y=(0,uf.A)(m.panes),b=(0,d.useCallback)(function(e){if(g.current&&0!==e.deltaY&&0===e.deltaX){e.preventDefault();var n=e.deltaY,t=g.current.scrollLeft,r=Math.max(0,Math.min(g.current.scrollWidth,t+n));g.current.scrollLeft=r}},[]),x=(0,u._)((0,mn.H)({accept:[tQ.pt.File,gL.N.Pane,gL.N.NewPane],hover:function(e,n){var t=n.getSourceClientOffset();t&&I({item:e,panes:y,sourceClientOffset:t.x})},collect:function(e){return{isOver:e.isOver()}},drop:function(e,n){if(!n.didDrop()){var t=(null==C?void 0:C.index)!==null?null==C?void 0:C.index:y.length;if("nodes"===e.type){var r=(0,e6.u9)(e.nodes);r.length>0&&p({activate:!0,commit:!0,paneGroupId:l,index:t,panes:r});return}if(e.type===gL.N.NewPane)return void p({activate:!0,paneGroupId:l,index:t,panes:[e.pane]});if("paneId"in e){var i=y.includes(e.paneId)?y.length-1:y.length;f({paneId:e.paneId,index:void 0!==t&&t<i?t:i,toPaneGroupId:l})}}}}),2),_=x[0],S=x[1],Y=(n=({isOver:_.isOver}).isOver,r=(t=(0,u._)((0,d.useState)(null),2))[0],i=t[1],o=(0,d.useRef)(null),a=(0,d.useRef)([]),(0,d.useEffect)(function(){if(!n){a.current=[],i(null);return}o.current&&(a.current=(0,eA._)(o.current.children).map(function(e){var n=e.getBoundingClientRect();return n.x+n.width/2}))},[n]),{tabContainerRef:o,hover:(0,d.useCallback)(function(e){if(0!==a.current.length){var n=e.item.type===gL.N.Pane?e.item:null,t=(null==n?void 0:n.paneId)||null,r=t?e.panes.indexOf(t):-1,o=(null==n?void 0:n.width)||80,l=a.current.map(function(e,n){return -1===r||r>n?e:e+o/2}).findIndex(function(n){return n>e.sourceClientOffset}),u=-1===r?e.panes.length:e.panes.length-1;i({index:-1===l?u:Math.min(l,u),paneId:t,width:o})}},[]),dropState:r}),A=Y.tabContainerRef,I=Y.hover,C=Y.dropState,k=C?C.index:null;if((null==C?void 0:C.paneId)&&null!==k){var E=y.indexOf(C.paneId);E>-1&&E<k&&k++}var D=C&&null!==k?(0,eA._)(y.slice(0,k)).concat([C],(0,eA._)(y.slice(k))):y;return(0,c.FD)(ou.S,{clsx:m0().container,row:!0,align:"center",innerRef:S,role:"tablist",children:[(0,c.FD)(mW.Se,{children:[(0,c.FD)(mB.bL,{clsx:m0().tabScrollAreaRoot,onWheel:b,children:[(0,c.Y)(mB.LM,{clsx:m0().tabScrollAreaViewport,ref:g,children:(0,c.Y)(ou.S,{innerRef:A,clsx:m0().tabContainer,row:!0,children:D.map(function(e,n){return"string"!=typeof e?(0,c.Y)(ou.S,{p:4,children:(0,c.Y)(ou.S,{style:{width:e.width},clsx:m0().tabPreview})},"preview"):(0,c.Y)(mJ,{dragGroup:1===y.length,paneId:e,paneGroupId:l,isActive:v===n,selectTab:s,removePane:h},e)})})}),(0,c.Y)(mB.Ze,{clsx:m0().tabScrollAreaScrollbar,orientation:"horizontal",children:(0,c.Y)(mB.zi,{clsx:m0().tabScrollAreaThumb})})]}),(0,c.Y)(u1.K0,{clsx:m0().newTabButton,alt:"New tab",tooltipBehavior:"hidden",size:12,onClick:function(){p({paneGroupId:l,activate:!0,panes:[{type:"commands",data:{autoFocus:!0}}]})},children:(0,c.Y)(at.A,{})})]}),(0,c.Y)(mN,{paneGroupId:l,activeTabPaneId:w})]})}var m2=t(78540),m4=t(73388),m5=t.n(m4),m7=(0,d.memo)(function(e){var n=e.headerId,t=oM(n),r=(0,uf.A)(t.isMaximized),i=oP().restoreMaximizedPaneGroup,o=(0,uf.A)(t.isModal),a=(0,uf.A)(t.isFloating),l=rg(iZ),u=rg(tL),s=oO(n),d=(0,uf.A)(s.activeTabPaneId),p=(0,uf.A)(s.panes),f=p.length>1,h=(0,uf.A)(t.isBeingDragged),g=rg(iN),m=(0,al.Jn)(sz.id),v=(0,c.Y)(u1.K0,{clsx:m5().headerContentMoreActions,onClick:function(){return g(d)},alt:"Pane actions",tooltipBehavior:void 0===m?"hidden":void 0,tooltipPlacement:"left",tooltipContents:m?(0,c.Y)(al._y,{fontSize:12,keyCombo:m}):null,children:(0,c.Y)(m2.A,{color:rI.LU.foregroundDimmest})}),w=(0,c.Y)(u1.K0,{alt:"Close pane",onClick:function(){return p.forEach(u)},children:(0,c.Y)(sr.A,{color:rI.LU.foregroundDimmest})}),y=h?null:(0,c.FD)(c.FK,{children:[a?(0,c.Y)(u1.K0,{alt:"Unfloat",onClick:function(){return l(d)},children:(0,c.Y)(os,{color:rI.LU.foregroundDimmest})}):null,r?(0,c.Y)(u1.K0,{alt:"Restore pane",onClick:i,children:(0,c.Y)(sv,{color:rI.LU.foregroundDimmest})}):null,o?w:v]});return(0,c.FD)(c.FK,{children:[(0,c.Y)(ou.S,{clsx:m5().left,grow:!0,shrink:!0,align:"center",row:!0,children:o&&!f?(0,c.Y)(mH,{headerId:n,paneId:d}):(0,c.Y)(m1,{headerId:n})}),(0,c.Y)(mM,{paneId:d}),(0,c.Y)(ou.S,{clsx:m5().right,row:!0,children:y})]})}),m3=(0,rI.CK)("index.module.css",["--left","--top","--scale","--transform-origin-x","--width","--height","--z-index","--transform-x","--transform-y","--border-radius","--background-color","--controls-opacity","--opacity"]);let m8=(0,d.memo)(function(e){var n,t=e.headerId,r=oO(t),i=(0,uf.A)(r.activeTabPaneId),o=oM(t),a=(0,uf.A)(o.isFloating),l=(0,uf.A)(o.isModal),u=(0,d.useRef)(null);(0,rY.d)(u,up(o.properties,o.getTransitionEnabled),function(e){var n,t,r,i=e.width,o=e.height,a=e.x,l=e.y,u=e.scale,c=e.opacity,s=e.positioning;return(0,p._)((n={},(0,ty._)(n,m3.width,i+"px"),(0,ty._)(n,m3.height,o+"px"),(0,ty._)(n,m3.scale,u.toString()),(0,ty._)(n,m3.opacity,c.toString()),n),"transform"===s?(t={},(0,ty._)(t,m3.transformX,Math.round(a)+"px"),(0,ty._)(t,m3.transformY,Math.round(l)+"px"),(0,ty._)(t,m3.top,"0px"),(0,ty._)(t,m3.left,"0px"),t):(r={},(0,ty._)(r,m3.transformX,"0px"),(0,ty._)(r,m3.transformY,"0px"),(0,ty._)(r,m3.top,Math.round(l)+"px"),(0,ty._)(r,m3.left,Math.round(a)+"px"),r))}),(0,rY.d)(u,o.transformOriginX,function(e){return(0,ty._)({},m3.transformOriginX,e)}),(0,rY.d)(u,o.zIndex,function(e){return{"z-index":e.toString()}});var s=rg(oA);(0,rY.d)(u,rh((0,d.useMemo)(function(){return(0,ei.eU)(function(e){return e(oA)===i})},[i])),function(e){return(0,ty._)({},m3.controlsOpacity,e?"1":"0")});var f=(0,rl.p)();return(0,c.FD)(af.ui,{innerRef:u,clsx:m5().surface,row:!0,align:"center",style:(n={},(0,ty._)(n,m3.borderRadius,"4px"),(0,ty._)(n,m3.backgroundColor,f?void 0:uk.s),n),onMouseEnter:function(){return s(i)},onMouseLeave:function(){return s(null)},children:[(0,c.Y)(m7,{headerId:t}),a&&!l?(0,c.Y)(mm,{paneId:i}):null]})});var m6=t(42028),m9=t(77815),ve=t(31171),vn=t(51676),vt={Content:function(e){var n,t=(0,u._)((0,d.useState)(null),2),r=t[0],i=t[1];(0,o6.HP)(function(){return r},[r]),(0,o6.Qt)(function(){return{type:"agentChat",focusInput:function(){return null==r?void 0:r.focus()}}},[r]);var o=e.options.performPaneOperation,a=(0,d.useCallback)(function(e){return o({operation:"open",pane:e,secondary:"ghostwriterChat"!==e.type})},[o]),l=(0,d.useCallback)(function(e){o({operation:"openPip",data:e})},[o]),s=(0,m9.n)(null==(n=e.pane.data)?void 0:n.sessionId),p=s.session,f=s.setSession,h=(0,d.useCallback)(function(e){o({operation:"replace",pane:{type:"agentChat",data:{sessionId:e.id}}}),f(e)},[o,f]),g=oG(),m=rg(ta),v=rf(tl),w=(0,o1.A)(),y=w.secrets,b=w.fs;return(0,c.Y)(ve.j,{secrets:y,readFile:b.readFile,session:p,setSession:h,inputRef:i,openPane:a,onPlanApproval:function(){return m("tilingLayout")},isDesktopOrTabletAgentPresentationCentered:"centeredVisualPlanner"===g,isDesktopLayoutAgentPresentationTransitionInProgress:v,openPip:l})},Icon:function(e){var n=e.size;return(0,c.Y)(gx.l,{size:n})},getTitle:function(){return"Agent"},description:ci.RB,category:e6.bY.WorkspaceFeatures,decode:function(e){return m6.T(vn.V,e)}},vr=t(10527);function vi(){var e=(0,f._)(["\n  query Threads2Inbox {\n    currentUser {\n      id\n      username\n      image\n    }\n  }\n"]);return vi=function(){return e},e}var vo={},va=(0,h.J1)(vi()),vl=t(80301),vu=t(65216);function vc(e,n){var t=n.onReceiveAnnotationUpdate,r=void 0===t?function(){}:t,i=(0,ak.A)().showError,o=(0,u._)((0,d.useState)(null),2),a=o[0],l=o[1],c=(0,vl.d1)({variables:{replId:e}}),s=function(){var e,n=null==(e=c.data)?void 0:e.currentUser;return n?{user:{__typename:"User",id:n.id,username:n.username,fullName:n.fullName,image:n.image}}:null},f=function(n,t){var r=n.readQuery({query:vl.FL,variables:{replId:e}});if(!r)throw Error("expected data");if("Repl"!==r.getRepl.__typename)throw Error("expected repl");var i=[],o=r.getRepl.annotationAnchors,a=o.findIndex(function(e){return e.id===t.id});i=-1===a?(0,eA._)(o).concat([t]):(0,eA._)(o.slice(0,a)).concat([t],(0,eA._)(o.slice(a+1))),n.writeQuery({query:vl.FL,variables:{replId:e},data:(0,r9._)((0,p._)({},r),{getRepl:(0,r9._)((0,p._)({},r.getRepl),{annotationAnchors:i})})})},h=(0,u._)((0,vl.tD)({onError:function(e){return i(e.message)},update:function(e,n){if(n.errors)return void n.errors.forEach(function(e){return i(e.message)});var t,r=null==(t=n.data)?void 0:t.createAnnotationAnchor;r&&("UserError"===r.__typename?i(r.message):"AnnotationAnchor"===r.__typename&&f(e,r))}}),1)[0],g=(0,u._)((0,vl.lb)({onError:function(e){return i(e.message)},update:function(e,n){if(n.errors)return void n.errors.forEach(function(e){return i(e.message)});var t,r=null==(t=n.data)?void 0:t.createAnnotationMessage;r&&("UserError"===r.__typename?i(r.message):"AnnotationAnchor"===r.__typename&&f(e,r))}}),1)[0],m=(0,u._)((0,vl.CX)({onError:function(e){return i(e.message)},update:function(e,n){if(n.errors)return void n.errors.forEach(function(e){return i(e.message)});var t,r=null==(t=n.data)?void 0:t.updateAnnotationAnchor;r&&("UserError"===r.__typename?i(r.message):"AnnotationAnchor"===r.__typename&&f(e,r))}}),1)[0],v=(0,u._)((0,vu.F)(),1)[0],w=(0,u._)((0,vl.CY)(),1)[0];(0,vl.oh)({variables:{replId:e},onData:function(e){var n=e.data.data,t=e.client,i=null==n?void 0:n.updatedAnnotation;i&&(f(t,i),r(i))}});var y=(0,u._)((0,d.useState)([]),2),b=y[0],x=y[1];(0,d.useEffect)(function(){var e,n=[];(null==(e=c.data)?void 0:e.getRepl.__typename)==="Repl"&&n.push.apply(n,(0,eA._)(c.data.getRepl.annotationAnchors)),a&&n.push((0,r9._)((0,p._)({},a),{isGeneral:!!a.isGeneral,messages:[],isResolved:!1,__typename:"AnnotationAnchor"})),x(n)},[c,a]);var _=(0,d.useMemo)(function(){return b.find(function(e){return e.isGeneral})},[b]),S=(0,d.useMemo)(function(){return b.reduce(function(e,n){return n.isResolved?e:n.messages.some(function(e){return!1===e.seen})?e+1:e},0)},[b]),Y=function(e){var n=e.annotationAnchor,t=e.annotationMessage;h({variables:{annotationAnchor:n,annotationMessage:t,highlight:e.highlight},optimisticResponse:{__typename:"RootMutationType",createAnnotationAnchor:(0,r9._)((0,p._)({},s(),n),{isGeneral:!!n.isGeneral,__typename:"AnnotationAnchor",messages:t?[(0,r9._)((0,p._)({},s(),t),{content:{text:t.text,__typename:"TextMessageContentType"},anchor:{id:n.id,__typename:"AnnotationAnchor"},__typename:"AnnotationMessage",timeCreated:new Date().toISOString(),currentUserIsAuthor:!0,seen:!0})]:[],isResolved:!1})}})},A=(0,$.A)(function(){return cr()(w,1e3,{trailing:!1})},[w]);return{annotations:b,loading:c.loading,generalThread:_,unreadThreadCount:S,placeholderAnchorId:null==a?void 0:a.id,createAnnotationAnchorPlaceholder:function(e){l(e.annotationAnchor)},deleteAnnotationAnchorPlaceholder:function(){l(null)},createAnnotationAnchor:Y,createAnnotationMessage:function(n){var t=n.anchor,r=n.annotationMessage,i=n.highlight;(null==a?void 0:a.id)===t.id?(l(null),Y({annotationAnchor:(0,p._)({},a),annotationMessage:r,highlight:i})):g({variables:{replId:e,anchorId:t.id,annotationMessage:r,highlight:i},optimisticResponse:{__typename:"RootMutationType",createAnnotationMessage:(0,r9._)((0,p._)({},t),{messages:(0,eA._)(t.messages.filter(function(e){return!e.id.startsWith("chat-")})).concat([(0,r9._)((0,p._)({},s(),r),{content:{text:r.text,__typename:"TextMessageContentType"},anchor:{id:t.id,__typename:"AnnotationAnchor"},__typename:"AnnotationMessage",timeCreated:new Date().toISOString(),currentUserIsAuthor:!0,seen:!0})])})}})},updateAnnotationAnchor:function(e){var n=e.annotationAnchor,t=e.changes;m({variables:{id:n.id,changes:t},optimisticResponse:{__typename:"RootMutationType",updateAnnotationAnchor:(0,r9._)((0,p._)({},n,t),{isResolved:"boolean"==typeof t.isResolved?t.isResolved:n.isResolved})}})},updateThreadPreview:function(e){A({variables:{threadId:e.threadId,messageId:e.messageId}})},markAllMessagesInReplAsSeenByUser:function(){v({variables:{replId:e}})}}}var vs=t(96599),vd=t(26756),vp=["TextMessageContentType","PreviewMessageContentType"],vf=t(64093),vh=t(39295),vg=t(24562),vm=t(35230);function vv(e){var n=e.message,t=(0,d.useMemo)(function(){var e=n.timeCreated;return e?(0,vh.A)(new Date(e),"do MMM, hh:mm a"):""},[n]),r=n.user;return(0,c.Y)("div",{className:"resolved-message",children:(0,c.FD)(vg.z,{align:"center",spacing:1,children:[r?(0,c.Y)(vm.A,{url:r.image,size:"m",username:r.username,fullName:r.fullName}):null,(0,c.Y)(pl.A,{color:rI.LU.foregroundDefault,size:24}),(0,c.FD)(aA.EY,{variant:"small",multiline:!1,children:["Resolved ",t]})]})})}var vw=t(24176),vy=(0,uw.i7)({"0%":[ol.wp.backgroundColor.foregroundDimmest],"50%":[ol.wp.backgroundColor.foregroundDimmest],"100%":[ol.wp.backgroundColor.foregroundDimmest]}),vb=(0,rC.x)({message:[ol.wp.backgroundColor.backgroundHigher,ol.wp.py(4),ol.wp.px(8),ol.wp.borderRadius(8),ol.wp.fontSize("default"),ol.wp.width("fit-content"),ol.wp.maxWidth("100%"),{overflowWrap:"break-word",whiteSpace:"pre-wrap","&.userhighlight":{background:"transparent"}}],typingIndicator:[ol.wp.minHeight("1em"),ol.wp.display.grid,ol.wp.align.center,{gridAutoFlow:"column",gridGap:rI.LU.space8}],dot:[ol.wp.width(6),ol.wp.height(6),ol.wp.borderRadius(6),ol.wp.display.inlineBlock,ol.wp.backgroundColor.foregroundDimmest,{animation:"".concat(vy," 0.6s infinite"),"&:nth-child(1)":{animationDelay:"0s"},"&:nth-child(2)":{animationDelay:"0.2s"},"&:nth-child(3)":{animationDelay:"0.4s"}}]});function vx(e){var n=e.message,t=e.messageStyle,r=(0,d.useMemo)(function(){return"TextMessageContentType"===n.content.__typename?(0,vw.vY)(n.content.text,{}):"PreviewMessageContentType"===n.content.__typename&&"string"==typeof n.content.preview?(0,vw.vY)(n.content.preview,{}):null},[n.content]),i="PreviewMessageContentType"===n.content.__typename&&"string"!=typeof n.content.preview;return n.user&&(r||i)?(0,c.Y)("div",{children:(0,c.FD)("div",{className:t,css:vb.message,children:[r?(0,c.Y)(vw.JX,{message:r,codeStyles:{color:rI.LU.orangeStronger,background:rI.LU.backgroundHighest}}):null,i?(0,c.FD)("span",{css:vb.typingIndicator,children:[(0,c.Y)("span",{css:vb.dot}),(0,c.Y)("span",{css:vb.dot}),(0,c.Y)("span",{css:vb.dot})]}):null]})}):null}function v_(e){var n=e.message,t=(0,d.useMemo)(function(){var e=n.timeCreated;return e?(0,vh.A)(new Date(e),"do MMM, hh:mm a"):""},[n]),r=n.user;return(0,c.Y)("div",{className:"resolved-message",children:(0,c.FD)(vg.z,{align:"center",spacing:1,children:[r?(0,c.Y)(vm.A,{url:r.image,username:r.username,fullName:r.fullName,size:"m"}):null,(0,c.Y)(pl.A,{size:24,color:rI.LU.foregroundDimmest}),(0,c.FD)(aA.EY,{variant:"small",multiline:!1,children:["Unresolved ",t]})]})})}var vS=function(e){var n=new Date(e),t=new Date;return 60>(0,vf.A)(t,n)?"now":(0,cg.K)(n,!0)},vY=(0,rC.x)({root:[ol.wp.display.grid,ol.wp.backgroundColor.backgroundDefault,ol.wp.color.foregroundDefault,ol.wp.position.relative,{gridTemplateRows:"auto auto",gridRowGap:rI.LU.space8,gridTemplateColumns:"minmax(0, 1fr)"}],messageInfo:[ol.wp.display.flex,ol.wp.align.center,ol.wp.fontSize("small")],messages:[ol.wp.display.grid,{gridRowGap:rI.LU.space4,gridTemplateColumns:"minmax(0, 1fr)"}],avatar:{marginRight:"5px"},username:[ol.wp.color.foregroundDimmer,{marginRight:"3px"}],time:[ol.wp.color.foregroundDimmest]});function vA(e){var n=e.messageGroup,t=n.messages,r=n.user,i=n.timeCreated;return r?(0,c.FD)("div",{css:vY.root,children:[(0,c.FD)("div",{css:vY.messageInfo,children:[(0,c.Y)("div",{css:vY.avatar,children:(0,c.Y)(vm.A,{username:r.username,fullName:r.fullName,url:r.image,size:"xs",style:{minHeight:"15px",minWidth:"15px",height:"15px",width:"15px"}})}),(0,c.Y)("div",{css:vY.username,children:r.username}),(0,c.Y)("div",{css:vY.time,children:vS(i)})]}),(0,c.Y)("div",{css:vY.messages,children:t.map(function(e){return(0,c.Y)(vx,{message:e},e.id)})})]}):null}function vI(e){var n=e.messageGroup;if("TextMessageContentType"===n.messageType||"PreviewMessageContentType"===n.messageType)return(0,c.Y)(vA,{messageGroup:n});if("StatusMessageContentType"===n.messageType){var t=n.messages[0];if("StatusMessageContentType"===t.content.__typename&&"resolved"===t.content.status)return(0,c.Y)(vv,{message:t});if("StatusMessageContentType"===t.content.__typename&&"unresolved"===t.content.status)return(0,c.Y)(v_,{message:t})}return null}var vC=t(11374),vk=t(39695);function vE(){var e=(0,f._)(["\n  query AnnotationThreadInput {\n    currentUser {\n      id\n    }\n  }\n"]);return vE=function(){return e},e}var vD={},vR=(0,h.J1)(vE());let vF=function(e){var n={},t=!0,r=!1,i=void 0;try{for(var o,a=e.messages[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=o.value;l.user&&(n[l.user.id]=l.user)}}catch(e){r=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}return Object.values(n)};var vU=t(72319),vP=t(15923),vO=t(51332),vT=(0,rC.x)({inputGroup:{display:"grid",gridTemplateColumns:"1fr min-content",gridGap:"10px",alignItems:"center",justifyContent:"start"},inputBox:[ol.wp.backgroundColor.backgroundHigher,ol.wp.color.foregroundDefault,ol.wp.borderRadius(8),ol.wp.p(8),ol.wp.fontSize("default"),ol.wp.font.default,ol.wp.overflowY("auto"),ol.wp.maxHeight("calc(".concat(rI.LU.fontSizeDefault," * 18)")),{border:"none",outline:"none",resize:"none",lineHeight:"16px","&::placeholder":{whiteSpace:"pre"},"&:not(:empty)":{borderRadius:"6px"}}],mentionSuggestionsContainer:[ol.wp.display.grid,ol.wp.overflow("hidden"),{paddingTop:"1em",gridRowGap:rI.LU.space4}],mentionSuggestion:[ol.wp.display.grid,ol.wp.align.center,ol.wp.py(8),ol.wp.cursor.pointer,ol.wp.color.foregroundDefault,{gridTemplateColumns:"min-content max-content",gridColumnGap:rI.LU.space8,'&[data-selected="true"]':[ol.wp.backgroundColor.backgroundRoot,{"& > *":{transform:"scale(1.1)"}}]}]}),vL=(0,d.forwardRef)(function(e,n){var t,r,i,o=e.annote,a=e.placeholder,l=e.onChangeMessage,s=e.onFinalizeMessage,f=function(){""!==v.trim()&&(s({messageId:Y||(0,tb.A)(),message:v.trim()}),A(null),w(""))},h=null==(i=(t=(0,p._)({},vD,void 0),g.I(vR,t)).data)||null==(r=i.currentUser)?void 0:r.id,m=(0,u._)((0,d.useState)(""),2),v=m[0],w=m[1],y=(0,u._)((0,d.useState)(!1),2),b=y[0],x=y[1],_=(0,d.useRef)(null),S=(0,u._)((0,d.useState)(null),2),Y=S[0],A=S[1],I=(0,vs.A)(),C=(0,vU.A)().ref,k=(0,u._)((0,vP.A)({"@":function(e){return(0,tS._)(function(){var n,t;return(0,tY.YH)(this,function(r){return n=I.filter(function(e){return e.id!==h}),e&&(t=e.toLowerCase(),n=n.filter(function(e){return e.username.toLowerCase().startsWith(t)})),[2,n.slice(0,5).map(function(e){return{icon:(0,c.Y)(vm.A,{fullName:e.fullName,username:e.username,url:e.image,style:{height:"24px",width:"24px",minWidth:"24px",minHeight:"24px"}}),value:e.username}})]})})()}}),2),E=k[0].suggestions,D=k[1],R=(0,vk.Bp)({items:(null==E?void 0:E.results)||[],defaultHighlightedIndex:0,isOpen:!!(null==E?void 0:E.results.length),onSelectedItemChange:function(e){var n=e.selectedItem;if(E&&n){var t=E.applySuggestion({targetValue:v,suggestionValue:n.value}),r=t.fullValue,i=t.cursorIndex;w(r),setTimeout(function(){_.current&&(_.current.setSelectionRange(i,i),_.current.focus())})}}}),F=R.isOpen,U=R.getInputProps,P=R.getMenuProps,O=R.getItemProps,T=R.highlightedIndex,L=R.getComboboxProps;(0,d.useEffect)(function(){var e="threads/drafts/".concat(o.id),n=ni.A.get(e,"string");n&&w(n);var t=_.current;return function(){if(t){var n=t.value;if(0===n.length)return void ni.A.remove(e);ni.A.set(e,n)}}},[]),(0,d.useEffect)(function(){setTimeout(function(){_.current&&_.current.focus()})},[_]);var M=vF(o).filter(function(e){return e.id!==h}),G="Add a comment";return 1===M.length?G="Reply to @".concat(M[0].username):M.length>1&&(G="Reply"),o.isResolved&&(G="Reply to unresolve this thread"),a&&(G=a),(0,c.FD)("div",{children:[(0,c.FD)("div",(0,r9._)((0,p._)({css:vT.inputGroup},L()),{children:[(0,c.Y)("textarea",(0,p._)({css:vT.inputBox},U({autoFocus:!0,placeholder:G,value:v,onCompositionStart:function(){return x(!0)},onCompositionEnd:function(){return x(!1)},onChange:function(e){var n=e.target.value,t=Y||(0,tb.A)();Y||A(t),w(n),l({messageId:t,message:n})},onKeyDown:function(e){e.stopPropagation(),!F&&(e.nativeEvent.preventDownshiftDefault=!0,"Enter"!==e.key||e.shiftKey||b||(e.preventDefault(),f()))},rows:1,ref:function(e){_.current=e,n&&(void 0===n?"undefined":(0,eI._)(n))==="object"&&(n.current=e),D(e),C(e)}}))),(0,c.Y)(u1.K0,{alt:"Send message",onClick:f,disabled:0===v.length,children:(0,c.Y)(vO.A,{})})]})),(0,c.Y)("div",(0,r9._)((0,p._)({},P({})),{children:F&&E?(0,c.Y)("div",{css:vT.mentionSuggestionsContainer,children:E.results.map(function(e,n){return(0,vC.n)("div",(0,r9._)((0,p._)({css:vT.mentionSuggestion,"data-selected":T===n},O({item:e,index:n})),{key:e.value,children:[e.icon,(0,c.Y)("div",{children:e.value})]}))})}):null}))]})});vL.displayName="ThreadInputForwarded";var vM=t(9069),vG=(0,rC.x)({generalThread:[ol.wp.pt(0),ol.wp.borderRadius(8,8,0,0),ol.wp.backgroundColor.backgroundDefault,ol.wp.flex.column,ol.wp.flex.growAndShrink(1),ol.wp.overflow("hidden"),ol.wp.height("100%"),{gridTemplateRows:"min-content 1fr min-content",gridGap:rI.LU.space8}],messageGroupContainerContainer:[ol.wp.scrollbar.thin,ol.wp.flex.column,ol.wp.height(0),ol.wp.flex.grow(1),ol.wp.overflow("hidden")],messageGroupContainer:[ol.wp.p(12),ol.wp.display.grid,ol.wp.overflowY("auto"),{gridRowGap:rI.LU.space16}],threadInputContainer:[ol.wp.width("100%"),ol.wp.border({color:rI.LU.outlineDimmer,width:1,direction:"top"}),ol.wp.py(8),ol.wp.px(12)]});function vN(e){var n=e.generalThreadsOpen,t=e.setGeneralThreadsOpen,r=e.generalThread,i=e.handleChangeMessage,o=void 0===i?function(){}:i,a=e.handleFinalizeMessage,l=void 0===a?function(){}:a,u=e.createAnnotationAnchorPlaceholder,s=void 0===u?function(){}:u,p=(0,er.A)(),f=(0,d.useMemo)(function(){return r?function(e){var n=[],t=null,r=!0,i=!1,o=void 0;try{for(var a,l=e[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var u,c,s,d,p=a.value;!t||(null==p||null==(u=p.user)?void 0:u.id)!==(null==t||null==(c=t.user)?void 0:c.id)||(null==p||null==(s=p.anchor)?void 0:s.id)!==(null==t?void 0:t.anchorId)||!vp.includes(t.messageType)||!vp.includes(p.content.__typename)||new Date(p.timeCreated).getTime()-new Date(t.timeCreated).getTime()>6e5?(t&&n.push(t),t={user:p.user,timeCreated:p.timeCreated,anchorId:null==p||null==(d=p.anchor)?void 0:d.id,messages:[p],messageType:p.content.__typename}):t.messages.push(p)}}catch(e){i=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}return t&&n.push(t),n}((0,eA._)(r.messages).sort(function(e,n){return new Date(e.timeCreated).getTime()-new Date(n.timeCreated).getTime()})):[]},[r]);(0,d.useEffect)(function(){r||s({annotationAnchor:{id:(0,tb.A)(),replId:p,isGeneral:!0,indexStart:null,indexEnd:null,isResolved:!1,otVersion:null,path:null}})},[r,p,s]),(0,d.useEffect)(function(){r||s({annotationAnchor:{id:(0,tb.A)(),replId:p,isGeneral:!0,indexStart:null,indexEnd:null,isResolved:!1,otVersion:null,path:null}})},[r,p,s]);var h=(0,d.useRef)(null);(0,vM.A)(n&&r||null);var g=function(){h.current&&(h.current.scrollTop=h.current.scrollHeight)};return((0,d.useEffect)(function(){g()},[h,r]),r)?(0,c.FD)("div",{css:vG.generalThread,onClick:function(){return t(!0)},children:[(0,c.Y)("div",{css:vG.messageGroupContainerContainer,children:(0,c.Y)("div",{css:vG.messageGroupContainer,ref:h,children:f.map(function(e){return(0,c.Y)(vI,{messageGroup:e},e.messages[0].id)})})}),(0,c.Y)("div",{css:vG.threadInputContainer,children:(0,c.Y)(vL,{placeholder:"Send message",annote:r,onChangeMessage:function(e){o({anchor:r,message:e.message,messageId:e.messageId}),t(!0)},onFinalizeMessage:function(e){l({anchor:r,message:e.message,messageId:e.messageId}),t(!0),(0,oq.u4)(oq.AZ.MESSAGE_SENT,{replId:p,source:"chat",newThread:0===r.messages.length})}})})]}):null}var vz=t(52346),vH=t(70467),vB=t(1756),vW={title:"Threads",filters:{inbox:{key:"toggle-inbox",label:"Inbox",icon:(0,c.Y)(vH.A,{})},unread:{key:"toggle-unread",label:"Unread",icon:(0,c.Y)(vz.A,{})},participating:{key:"toggle-participating",label:"Participating",icon:(0,c.Y)(vB.A,{})},resolved:{key:"toggle-resolved",label:"Resolved",icon:(0,c.Y)(pl.A,{})}},sorts:{chronological:{key:"toggle-chronological",label:"Chronological",icon:(0,c.Y)(s_.A,{})},codeOrder:{key:"toggle-codeOrder",label:"Code order",icon:(0,c.Y)(function(e){return(0,c.Y)(oc.Ay,(0,r9._)((0,p._)({},e),{children:(0,c.Y)("path",{fillRule:"evenodd",d:"M19 9.75a2.25 2.25 0 1 0 0 4.5 2.25 2.25 0 0 0 0-4.5Zm-3.675 1.5a3.751 3.751 0 0 1 7.425.75 3.75 3.75 0 0 1-7.425.75h-4.678a2.751 2.751 0 0 1-5.293 0H2a.75.75 0 0 1 0-1.5h3.354a2.751 2.751 0 0 1 5.292 0h4.679ZM8 10.75a1.25 1.25 0 1 0 0 2.5 1.25 1.25 0 0 0 0-2.5Z",clipRule:"evenodd"})}))},{})}},search:{placeholder:"Search threads…"},markAsRead:"Mark as read",empty:{image:{alt:"an illustration of an escape key that resembles a sunny beach, with an umbrella and palm tree"},noThreadsCreated:{text:{primary:"You haven’t started any threads yet.",secondary:function(e){return(0,c.FD)(c.FK,{children:["Select code and press ",(0,c.Y)(al._y,{keyCombo:e,small:!0})," ","to get started."]})}}},noThreadsFound:{text:{primary:"No threads found.",secondary:"Try adjusting your search or filters."}}}},vj=t(92702),v$=t(98091),vq=t(59503),vV=t(51410),vK=t(96400),vZ=t(40403);let vJ=function(e){var n=(0,vZ.A)(e,null,null).updateThread;return{handleToggleResolved:function(e){return n({changes:{isResolved:e}})}}};var vQ=t(72877),vX=t(98006);let v0=function(e){var n,t,r,i,o,a,l=e.thread,u=e.onClick,s=l.messages.filter(function(e){return!e.seen}).length,p=null==(a=(0,vq.zn)(l.path?l:null))?void 0:a.snippet,f=(0,vZ.A)(l.id,null,null).thread,h=(0,vQ.Ln)(),g=vJ(l.id).handleToggleResolved,m=l.messages[0],v=(0,d.useMemo)(function(){return(null==m?void 0:m.timeCreated)?(0,vK.G)(m.timeCreated):"some time ago"},[m]);return l.user?(0,c.FD)(af.ui,{css:[dV.b.filled,ol.wp.overflow("hidden"),h===l.id&&{borderColor:rI.LU.accentPrimaryDefault}],onClick:function(){u(l)},children:[(0,c.FD)(af.ui,{elevated:!0,grow:!0,px:8,py:8,row:!0,align:"center",justify:"space-between",children:[(0,c.Y)(ou.S,{row:!0,align:"center",gap:4,children:(0,c.Y)(aA.EY,{color:"dimmer",variant:"small",multiline:!1,children:(n=v,t=l.user.username,"Opened ".concat(n," by ").concat(t))})}),(0,c.FD)(ou.S,{row:!0,align:"center",gap:4,children:[p&&l.path?(0,c.Y)(u1.K0,{alt:"Jump to code",onClick:function(){return u(l)},children:(0,c.Y)(vX.A,{})}):null,l.isResolved?(0,c.Y)(aY.$n,{text:"Re-open",size:"small",colorway:"primary",onClick:function(){g(!1)}}):(0,c.Y)(u1.K0,{alt:"Resolve this thread",onClick:function(){g(!0)},children:(0,c.Y)(pl.A,{})})]})]}),p&&l.path?(0,c.Y)(vj.f,{elevation:"root",path:l.path,initialDoc:p.lines.join("\n"),startLineNumber:p.startLineNumber,fontSize:12,maxHeight:"42px",minHeight:"42px",allowScroll:!1}):null,m?(0,c.Y)(ou.S,{p:8,py:12,children:(0,c.Y)(vV.A,{thread:f,message:m},m.id)}):null,l.messages.length>1&&(0,c.FD)(ou.S,{css:[ol.wp.color.foregroundDimmer],pb:12,px:8,row:!0,align:"center",gap:4,children:[(0,c.Y)(ou.S,{css:[ol.wp.position.relative],children:(0,c.Y)(v$.A,{unreadDot:s>0})}),(0,c.Y)(aA.EY,{variant:"small",multiline:!1,children:(r=l.messages.length,i=s,o=function(e){return 1===e?"reply":"replies"},r<=1?"View ".concat(1===i?"unread":""," thread"):i?"View ".concat(i," unread ").concat(o(i)):"View ".concat(r-1," ").concat(o(r-1)))})]})]}):null};var v1=t(27059);let v2=function(e){var n=e.path,t=e.threads,r=e.onThreadClick,i=t.some(function(e){return e.messages.some(function(e){return!e.seen})});return(0,c.Y)(ou.S,{pb:8,children:(0,c.Y)(v1.A,{css:[rI.LU.singleLine,ol.wp.px(8)],headerContent:(0,c.FD)(ou.S,{css:[ol.wp.mr(8)],grow:!0,shrink:!0,row:!0,align:"center",justify:"space-between",children:[(0,c.FD)(ou.S,{grow:!0,shrink:!0,row:!0,align:"center",gap:8,children:[(0,c.Y)(ae.A,{path:n,size:20}),(0,c.Y)(aA.EY,{css:[ol.wp.flex.shrink(1)],multiline:!1,children:n})]}),i?(0,c.Y)("div",{css:[ol.wp.flex.shrink(0),ol.wp.width(8),ol.wp.height(8),ol.wp.backgroundColor.redStronger,ol.wp.borderRadius("full")]}):null]}),children:(0,c.Y)("div",{css:[ol.wp.mt(8),ol.wp.colWithGap(8)],children:t.map(function(e){return(0,c.Y)(v0,{thread:e,onClick:r},e.id)})})})})};var v4=t(84516),v5=t(85105),v7=function(e){return e.CHRONOLOGICAL="chronological",e.CODE_ORDER="codeOrder",e}(v7||{}),v3=function(e){return e.PARTICIPATING="participating",e.RESOLVED="resolved",e.UNREAD="unread",e.INBOX="inbox",e}(v3||{});let v8=function(e){var n,t,r=e.isChatOnly,i=e.openFile,o=(0,er.A)(),a=vc(o,{onReceiveAnnotationUpdate:function(){}}),l=a.annotations,s=a.loading,f=a.generalThread,h=a.createAnnotationAnchorPlaceholder,m=a.createAnnotationMessage,v=a.updateThreadPreview,w=(n=(0,p._)({},vo,void 0),g.I(va,n)),y=w.data,b=w.loading,x=s||b,_=(0,u._)((0,d.useState)(!1),2),S=_[0],Y=_[1],A=(0,vQ.li)(),I=(0,u._)((0,d.useState)(""),2),C=I[0],k=I[1],E=(0,u._)((0,d.useState)("INBOX"),2),D=E[0],R=E[1],F=(0,u._)((0,d.useState)("CHRONOLOGICAL"),2),U=F[0],P=F[1],O=(0,d.useMemo)(function(){var e,n=null==y||null==(e=y.currentUser)?void 0:e.id;return l.filter(function(e){if("INBOX"===D)return!e.isResolved;if("RESOLVED"===D)return e.isResolved;if("PARTICIPATING"===D){var t;return!n||(null==(t=e.user)?void 0:t.id)===n||e.messages.some(function(e){var t=e.user;return(null==t?void 0:t.id)===n})}return"UNREAD"!==D||e.messages.some(function(e){return!e.seen})})},[y,l,D]),T=(0,d.useMemo)(function(){return O.filter(function(e){var n,t;return 0===C.length||null!=(t=null==(n=e.path)?void 0:n.toLowerCase().includes(C.toLowerCase()))&&t})},[C,O]),L=(0,d.useMemo)(function(){return(0,eA._)(T).sort(function(e,n){if("CHRONOLOGICAL"===U){var t,r,i=new Date(null==(t=e.messages[0])?void 0:t.timeCreated),o=new Date(null==(r=n.messages[0])?void 0:r.timeCreated);return i&&o?i<o?1:-1:0}return"CODE_ORDER"===U?(0,ix.yh)(e.path,n.path):0}).reduce(function(e,n){var t=n.path;return t&&void 0!==t&&(e[t]=e[t]||[],e[t].push(n)),e},{})},[T,U]),M=(0,d.useMemo)(function(){return Object.values((0,p._)({},L)).map(function(e){return(0,eA._)(e).sort(function(e,n){if("CHRONOLOGICAL"===U){var t,r,i,o,a,l,u=new Date(null==(a=e.messages[0])?void 0:a.timeCreated),c=new Date(null==(l=n.messages[0])?void 0:l.timeCreated);if(u&&c)return u<c?1:-1}else if("CODE_ORDER"===U)return(null!=(r=null!=(t=e.indexStart)?t:e.indexEnd)?r:0)<(null!=(o=null!=(i=n.indexStart)?i:n.indexEnd)?o:0)?-1:1;return 0})}).reduce(function(e,n,t){return e[Object.keys(L)[t]]=n,e},{})},[L,U]),G=(0,vs.A)().map(function(e){return e.username}),N=(t=(0,u._)((0,vu.F)(),1)[0],function(){t({variables:{replId:o}})}),z=(0,al.Jn)("editor.action.startThread");return r?(0,c.Y)(vN,{generalThreadsOpen:S,setGeneralThreadsOpen:Y,generalThread:f,handleChangeMessage:function(e){var n=e.anchor,t=e.messageId;v({threadId:n.id,messageId:t})},handleFinalizeMessage:function(e){var n=e.anchor,t=e.message,r=e.messageId,i=(0,vw.vY)(t,{users:(0,eA._)(G).concat(["everyone"])});m({anchor:n,annotationMessage:{id:r,text:t,mentions:i.mentions}})},createAnnotationAnchorPlaceholder:h}):(0,c.Y)(af.ui,{className:"threads-inbox",css:[ol.wp.height("100%"),ol.wp.width("100%"),ol.wp.overflow("hidden"),ol.wp.position.relative],"aria-busy":x,children:x?(0,c.Y)(ou.S,{css:[ol.wp.display.flex,ol.wp.align.center,ol.wp.justify.center,ol.wp.height("100%")],children:(0,c.Y)(dc.A,{size:24})}):(0,c.FD)(c.FK,{children:[(0,c.Y)(ou.S,{className:"threads-inbox-header",css:[ol.wp.position.sticky,ol.wp.top(0),ol.wp.backgroundColor.backgroundDefault,{zIndex:10}],py:12,px:8,children:(0,c.FD)(ou.S,{css:[ol.wp.flex.wrap,{gap:8}],row:!0,align:"center",children:[(0,c.Y)(v4.pd,{placeholder:vW.search.placeholder,value:C,onChange:function(e){return k(e.target.value)},css:[ol.wp.flex.grow(1)]}),(0,c.FD)(ou.S,{css:[ol.wp.maxWidth("100%"),{gap:8}],row:!0,children:[(0,c.Y)(ou.S,{shrink:!0,children:(0,c.Y)(v5.in,{cssProps:[ol.wp.flex.shrink(1),{span:ol.wp.flex.shrink(1)}],icon:vW.filters[v3[D]].icon,suffix:(0,c.Y)(fc.A,{}),label:vW.filters[v3[D]].label,onAction:function(e){switch(e){case"toggle-inbox":R("INBOX");break;case"toggle-unread":R("UNREAD");break;case"toggle-participating":R("PARTICIPATING");break;case"toggle-resolved":R("RESOLVED")}},children:Object.entries(vW.filters).map(function(e){var n=(0,u._)(e,2),t=(n[0],n[1]);return(0,c.Y)(vr.q,{"aria-label":t.label,children:(0,c.FD)(ou.S,{row:!0,gap:8,children:[t.icon,(0,c.Y)(aA.EY,{multiline:!1,children:t.label})]})},t.key)})})}),(0,c.Y)(ou.S,{shrink:!0,children:(0,c.Y)(v5.in,{cssProps:[ol.wp.flex.shrink(1),{span:ol.wp.flex.shrink(1)}],icon:vW.sorts[v7[U]].icon,suffix:(0,c.Y)(fc.A,{}),label:vW.sorts[v7[U]].label,onAction:function(e){switch(e){case vW.sorts.chronological.key:P("CHRONOLOGICAL");break;case vW.sorts.codeOrder.key:P("CODE_ORDER")}},children:Object.entries(vW.sorts).map(function(e){var n=(0,u._)(e,2),t=(n[0],n[1]);return(0,c.Y)(vr.q,{"aria-label":t.label,children:(0,c.FD)(ou.S,{row:!0,gap:8,children:[t.icon,(0,c.Y)(aA.EY,{multiline:!1,children:t.label})]})},t.key)})})}),(0,c.Y)(ou.S,{shrink:!0,children:(0,c.Y)(aY.$n,{iconLeft:(0,c.Y)(pl.A,{}),text:vW.markAsRead,onClick:N,css:{span:ol.wp.flex.shrink(1)}})})]})]})}),0===l.length?(0,c.Y)(vd.A,{pane:{type:"threadInbox"},maxWidth:450,bodyText:(0,c.FD)(c.FK,{children:[vW.empty.noThreadsCreated.text.primary,z?(0,c.FD)(c.FK,{children:[(0,c.Y)("br",{}),vW.empty.noThreadsCreated.text.secondary(z)]}):void 0]})}):(0,c.Y)(c.FK,{children:Object.keys(M).length>0?(0,c.Y)(ou.S,{css:[ol.wp.overflowY("auto"),ol.wp.scrollbar.thin],grow:!0,shrink:!0,children:Object.keys(M).map(function(e,n){return(0,c.Y)(v2,{path:e||"-",threads:Object.values(M)[n],onThreadClick:function(e){var n=window.getSelection();(null==n?void 0:n.type)!=="Range"&&(0,tS._)(function(){return(0,tY.YH)(this,function(n){return e.path&&(i(e.path),A(e.id)),[2]})})()}},e)})}):(0,c.Y)(vd.A,{pane:{type:"threadInbox"},maxWidth:450,asciiArt:"Binoculars",headerText:vW.empty.noThreadsFound.text.primary,bodyText:vW.empty.noThreadsFound.text.secondary})})]})})};var v6=ec.ZU.Object({type:ec.ZU.Literal("chat")}),v9=t(51011),we=(0,uw.AH)([ol.wp.flex.growAndShrink(1)]),wn={Content:function(e){var n=e.options;return(0,c.Y)(af.ui,{background:"default",css:we,children:(0,c.Y)(v8,{isChatOnly:!0,openFile:function(e){n.performPaneOperation({operation:"open",secondary:!0,pane:{type:"codeEditor",data:{path:e}}})}})})},Icon:function(e){var n=e.size;return(0,c.Y)(oc.Vx.Provider,{value:{color:rI.LU.blueStronger,size:n},children:(0,c.Y)(v9.A,{})})},getTitle:function(){return"Chat"},description:"Chat with collaborators in this Repl",category:e6.bY.Collaboration,decode:function(e){return m6.T(v6,e)}},wt=t(90703),wr={Content:function(e){var n=e.options,t=n.performPaneOperation,r=n.paneId,i=e.pane.data.autoFocus,o=rg(nn),a=(0,d.useRef)(null);(0,o6.HP)(function(){return{focus:function(){var e;return null==(e=a.current)?void 0:e.call(a)}}},[]);var l=(0,d.useCallback)(function(e){t({operation:"replace",pane:e.pane}),o(r),(0,oq.u4)(oq.AZ.TOOL_OPENED,{source:"New Tab",tool:e.pane.type})},[t,r,o]),u=aa({currentPaneId:r,openPane:l});return(0,c.Y)(ah.r,{autoFocus:i,command:u,focusRef:a,showToolDescriptions:!0})},Icon:function(){return null},getTitle:function(){return"New tab"},category:e6.bY.Other,decode:wt.D},wi=t(769),wo=t(6030),wa=t(61890),wl={Content:function(e){var n=e.options,t=n.paneId,r=n.performPaneOperation,i=e.pane.flow,o=oN(),a=o.isOpen,l=o.toggle,u=(0,d.useCallback)(function(){a.current||l()},[a,l]);return(0,c.Y)(wo.A,{flow:i,closeConfigPane:function(){return r({operation:"remove",pane:{id:t}})},useReadFile:wi.A,openSidebar:u,onNewPaneSelected:function(e){return r({operation:"open",pane:e})},openConsole:function(){return r({operation:"open",pane:{type:"runnerOutput"}})}})},Icon:function(){return(0,c.Y)(cA.A,{})},getTitle:function(){return"Configure Repl"},category:e6.bY.WorkspaceFeatures,decode:wa.D},wu=t(93064),wc=(0,uw.AH)([ol.wp.border({color:rI.LU.outlineDimmest,width:1,style:"solid"}),ol.wp.width("100%"),ol.wp.height("100%"),ol.wp.overflow("hidden"),{borderBottomLeftRadius:"4px",borderBottomRightRadius:"4px",borderTop:"none"}]),ws={Content:function(e){var n,t=e.pane;return(0,c.Y)(af.ui,{css:wc,children:(0,c.Y)("iframe",{title:"Replit Docs",src:(null==t||null==(n=t.data)?void 0:n.url)||tx.ik.HOME,width:"100%",height:"100%",frameBorder:"0"})})},Icon:function(e){var n=e.size;return(0,c.Y)(oc.Vx.Provider,{value:{color:rI.LU.yellowStrongest,size:n},children:(0,c.Y)(l5.A,{})})},getTitle:function(){return"Docs"},description:"View Replit Documentation to learn about workspace features, AI, Deployments, and more",category:e6.bY.Other,decode:wu.D},wd=t(22764),wp=(0,uw.AH)([ol.wp.backgroundColor.backgroundDefault,ol.wp.height("100%"),ol.wp.borderRadius(4),{overflow:"hidden"}]),wf=(0,uw.AH)([ol.wp.width("100%"),ol.wp.height("100%"),ol.wp.justify.center,ol.wp.align.center,ol.wp.display.flex]);function wh(e){var n=e.paneId,t=e.extensionPaneData,r=e.environmentAPIs,i=(0,aU.Z_)(t.installationId),o=(0,aU.X_)(t.installationId),a=lX({extension:i,environmentAPIs:r,sandboxTitle:t.name,sandboxUrl:(0,aO.sU)(t.baseUrl,t.path),paneId:n,filePath:t.filePath||null}),l=a.didConnectOnce,u=a.isValidExtensionPaneUrl,s=a.getIframeProps,d=a.reloadSandbox;return(0,o6.Qt)(function(){return{type:"extension",commands:[{name:"Actions",commands:[{match:oK.G2,data:{icon:(0,c.Y)(cJ.A,{}),label:"Refresh",type:"action",description:"Refresh extension",key:"refresh",run:function(){d()}}}]}]}},[d]),(0,c.Y)(ou.S,{className:"extension-pane",css:wp,children:o&&l?(0,c.Y)(c.FK,{children:u()?(0,c.Y)("iframe",(0,p._)({},s({css:{width:"100%",height:"100%",border:"none"}}))):(0,c.Y)(ou.S,{p:12,children:(0,c.FD)(aA.EY,{children:["Invalid url:"," ",(0,c.Y)(wd.R,{children:t.baseUrl+t.path}),". Please contact the extension author, or Replit support."]})})}):(0,c.Y)(ou.S,{css:wf,children:(0,c.Y)(dc.A,{})})})}var wg=ec.ZU.Object({extensionId:ec.ZU.Unsafe(ec.ZU.String()),installationId:ec.ZU.Unsafe(ec.ZU.String()),baseUrl:ec.ZU.String(),path:ec.ZU.String(),name:ec.ZU.String(),filePath:ec.ZU.Optional(ec.ZU.Union([ec.ZU.String(),ec.ZU.Null(),ec.ZU.Undefined()])),icon:ec.ZU.Optional(ec.ZU.Union([ec.ZU.String(),ec.ZU.Null(),ec.ZU.Undefined()]))}),wm=ec.ZU.Object({type:ec.ZU.Literal("extension"),data:wg}),wv={Content:function(e){var n=e.pane,t=e.options,r=aR();return(0,c.Y)(wh,{extensionPaneData:n.data,paneId:t.paneId,environmentAPIs:r})},Icon:function(e){var n=e.pane,t=e.size;return n.data.icon?(0,c.Y)(uB.A,{src:(0,aO.sU)(n.data.baseUrl,n.data.icon),layout:"fill",alt:""}):(0,c.Y)(l7.A,{size:t})},getTitle:function(e){return e.data.filePath?e.data.filePath+" — "+e.data.name:e.data.name},category:e6.bY.WorkspaceExtensions,decode:function(e){return m6.T(wm,e)}},ww=t(77111),wy=t(45731),wb=t(90083),wx=t(61825),w_=t(18177);function wS(){var e=(0,f._)(["\n  query ExtensionOwnerDetails($extensionId: String!) {\n    extension(id: $extensionId) {\n      ... on Extension {\n        id\n        isListed\n        user {\n          id\n          username\n        }\n      }\n      ... on NotFoundError {\n        message\n      }\n    }\n  }\n"]);return wS=function(){return e},e}function wY(){var e=(0,f._)(["\n  query currentExtensionStatus($id: String!) {\n    extension(id: $id) {\n      ... on Extension {\n        id\n        isListed\n        user {\n          id\n        }\n      }\n    }\n  }\n"]);return wY=function(){return e},e}var wA={};wS();var wI=(0,h.J1)(wY()),wC=t(97329),wk=t(23349),wE=(0,rC.x)({codeBlock:[ol.wp.borderRadius(8),ol.wp.position.relative],codeBlockCopyButton:[ol.wp.position.absolute,ol.wp.top(4),ol.wp.right(4)],selectionContainer:[ol.wp.maxHeight(400),ol.wp.overflowY("scroll")],fsNode:[ol.wp.flex.row,ol.wp.rowWithGap(8),ol.wp.align.center,ol.wp.px(4),ol.wp.py(2),ol.wp.borderRadius(8),ol.wp.cursor.pointer],fsNodeActive:[ol.wp.backgroundColor.backgroundHigher]});function wD(e){var n=e.content,t=(0,ak.A)().showConfirm;return(0,c.FD)(af.ui,{tag:"code",elevated:!0,css:wE.codeBlock,p:8,children:[n,(0,c.Y)(u1.K0,{alt:"Copy",tooltipBehavior:"hidden",css:wE.codeBlockCopyButton,onClick:function(){return navigator.clipboard.writeText(n).then(function(){return t("Copied")})},children:(0,c.Y)(c$.A,{})})]})}function wR(e){var n,t=e.glob,r=e.openFile,i=e.children,o=(0,u._)((0,d.useState)([]),2),a=o[0],l=o[1],s=(0,u._)((0,d.useState)(""),2),f=s[0],h=s[1],g=(0,wC.c)(),m=(0,o1.A)().fs,v=(0,l1.s_)(),w=(0,d.useMemo)(function(){return(0,uc.tL)(t)},[t]);return((0,d.useEffect)(function(){w&&m.listFiles().then(function(e){e.files&&l(e.files.filter(function(e){return e.match(w)}).map(function(e){var n=e.split("/");return{path:e,dir:n.slice(0,n.length-1).join("/"),filename:n[n.length-1]||""}}))})},[w,v]),w)?(0,c.FD)(ou.S,{css:wE.selectionContainer,gap:16,children:[(0,c.Y)(aA.EY,{variant:"subheadDefault",children:(0,c.FD)(ou.S,{gap:12,children:[(0,c.Y)(aA.EY,{variant:"subheadDefault",children:"Choose an image"}),v?(0,c.Y)(dz.N,{icon:(0,c.Y)(wk.A,{}),colorway:"primary",text:(0,c.FD)(ou.S,{gap:2,children:[(0,c.FD)(aA.EY,{children:["Images must be served from"," ",(0,c.Y)("span",{css:[ol.wp.font.code,ol.wp.backgroundColor.accentPrimaryDimmer,ol.wp.borderRadius(4),ol.wp.px(4),ol.wp.py(2),ol.wp.mr(2),ol.wp.border({color:rI.LU.accentPrimaryDefault})],children:v.path}),"."]}),(0,c.Y)(aA.EY,{css:[ol.wp.fontWeight.normal],children:"You can change your extension's static directory in the .replit file."})]})}):null,(0,c.FD)(aA.EY,{css:[ol.wp.fontWeight.normal],color:"dimmer",children:["Supported file types:"," ",(0,c.Y)("span",{css:[ol.wp.font.code,ol.wp.fontSize("small"),ol.wp.backgroundColor.backgroundHigher,ol.wp.borderRadius(4),ol.wp.px(4),ol.wp.py(2),ol.wp.mr(2),ol.wp.border({color:rI.LU.outlineDefault})],children:null==(n=t.match(/\{(.*)\}/))?void 0:n[1].split(",").map(function(e){return e.replace(".","")}).join(", ")})]})]})}),i,(0,c.Y)(vk.Ay,{onChange:function(e){return r(e.path)},initialHighlightedIndex:0,defaultHighlightedIndex:0,itemToString:function(e){return(null==e?void 0:e.path)||""},children:function(e){var n=e.getInputProps,r=e.getItemProps,i=e.highlightedIndex,o=e.getRootProps,l=e.getMenuProps;return(0,c.FD)(ou.S,(0,r9._)((0,p._)({},o({refKey:"innerRef"})),{gap:16,children:[(0,c.Y)(ou.S,{css:[ol.wp.position.relative],children:(0,c.Y)(v4.pd,(0,p._)({id:g("file-search")},n({ref:null,value:f,onChange:function(e){return h(e.currentTarget.value)},placeholder:"Find a file",autoComplete:"off",autoFocus:!0})))}),(0,c.Y)(ou.S,{children:a&&a.length?(0,c.Y)(ou.S,(0,r9._)((0,p._)({elevated:!0,tag:"ul",css:(ol.wp.pt(8),ol.wp.colWithGap(8))},l({refKey:"innerRef"})),{children:a.filter(function(e){return e.path.includes(f)}).filter(function(e){return!v||e.path.startsWith(v.relativePath)||e.path.startsWith("public")}).map(function(e,n){return(0,c.FD)(ou.S,(0,r9._)((0,p._)({tag:"li",css:[wE.fsNode,n===i&&wE.fsNodeActive]},r({item:e,index:n,disabled:!!v&&!e.path.startsWith(v.relativePath)})),{children:[(0,c.Y)(ae.A,{path:e.path,size:16}),(0,c.Y)(aA.EY,{children:e.filename}),(0,c.Y)(aA.EY,{variant:"small",color:"dimmest",children:e.dir})]}),n)})})):(0,c.Y)(ou.S,{pt:8,children:(0,c.Y)(aA.EY,{color:"dimmer",children:(0,c.FD)("em",{children:["No files found matching ",(0,c.Y)("code",{children:t})]})})})})]}))}})]}):(0,c.FD)(ou.S,{css:[ol.wp.flex.column,ol.wp.colWithGap(16)],children:[(0,c.Y)(aA.EY,{variant:"subheadDefault",children:"Invalid Glob Pattern"}),(0,c.FD)(aA.EY,{children:["The glob pattern ",(0,c.Y)("code",{children:t})," could not be parsed."]}),(0,c.Y)(ou.S,{css:ol.wp.border({direction:"bottom",color:rI.LU.backgroundHigher})}),(0,c.FD)(ou.S,{gap:8,children:[(0,c.Y)(aA.EY,{children:(0,c.Y)("strong",{children:"Match all Javascript Files"})}),(0,c.Y)(wD,{content:"**/*.js"})]}),(0,c.FD)(ou.S,{gap:8,children:[(0,c.Y)(aA.EY,{children:(0,c.Y)("strong",{children:"Match JSON files at root level"})}),(0,c.Y)(wD,{content:"*.json"})]}),(0,c.FD)(ou.S,{gap:8,children:[(0,c.Y)(aA.EY,{children:(0,c.Y)("strong",{children:"Match specified file extensions"})}),(0,c.Y)(wD,{content:"**/*.{js,ts,jsx,tsx}"})]})]})}var wF=t(87089),wU=t(5940),wP=function(e){return e.Installing="Installing",e.Loading="Loading",e.Failed="Failed",e.Success="Success",e}(wP||{}),wO={Installing:"Installing Extension...",Loading:"Loading Asset...",Failed:"Failed to load asset from Extension URL",Success:"Asset loaded successfully"};function wT(e){var n=e.isOpen,t=e.close,r=e.onSubmit,i=(0,l2.mN)(),o=(0,l2.FS)(),a=(0,u._)((0,d.useState)(null),2),l=a[0],s=a[1],p=(0,u._)((0,d.useState)(!0),2),f=p[0],h=p[1],g=(0,u._)((0,d.useState)(null),2),m=g[0],v=g[1],w=(0,u._)((0,d.useState)(null),2),y=w[0],b=w[1],x=(0,d.useRef)(null),_=(0,u._)((0,d.useState)(null),2),S=_[0],Y=_[1],A=(0,u._)((0,d.useState)(null),2),I=A[0],C=A[1],k=(y||I||"").startsWith("/")?y||I:"/"+(y||I),E=(0,u._)((0,d.useState)(null),2),D=E[0],R=E[1],F=function(){C(null),s(null),b(null),Y(null),R(null),v(null)},U=function(){h(!0),s(null)};(0,d.useEffect)(function(){b(I)},[I]);var P=(0,d.useCallback)(function(e){return(0,tS._)(function(){var n,t,r,a;return(0,tY.YH)(this,function(u){switch(u.label){case 0:if(!k||!f||"Success"===l||"Failed"===l)return[2];if(n=function(e,n){return(0,tS._)(function(){var t;return(0,tY.YH)(this,function(r){switch(r.label){case 0:return s("Loading"),v(t=(0,aO.sU)(e.baseUrl,n)),[4,fetch(t)];case 1:if(r.sent().ok)return R(n),s("Success"),h(!1),[2,!0];return[2,!1]}})})()},t=e||o)return[3,8];s("Installing"),u.label=1;case 1:return u.trys.push([1,5,,8]),[4,i()];case 2:if(!(r=u.sent()))return[3,4];return[4,P(r)];case 3:case 6:return u.sent(),[2];case 4:case 7:return[3,8];case 5:if(u.sent(),!o)return[3,7];return[4,P(o)];case 8:if(!t)return[3,11];return a=k.replace(/^(\/public|\/static)/,""),[4,n(t,a.slice(1))];case 9:if(u.sent())return[3,11];return[4,n(t,k)];case 10:u.sent(),u.label=11;case 11:return[2]}})})()},[o,k,i,l,f]);(0,d.useEffect)(function(){if(S){var e=S.split("/"),n=e.pop(),t=e.findIndex(function(e){return["public","static"].includes(e)});C((-1!==t?"/".concat(S):"/".concat(e.slice(t+1).join("/"),"/").concat(n))||S),h(!0),P()}},[P,S]);var O=S?S.split("/"):[],T=O[O.length-1];return(0,c.Y)(ap.a,{isOpen:n,onRequestClose:t,children:S?(0,c.FD)(ou.S,{css:[ol.wp.flex.column,ol.wp.colWithGap(16)],children:[(0,c.FD)(ou.S,{row:!0,gap:8,align:"center",children:[(0,c.Y)(aY.$n,{text:"Back",size:"small",iconLeft:(0,c.Y)(wF.A,{}),onClick:function(){Y(null),F()}}),(0,c.FD)(ou.S,{row:!0,gap:4,align:"center",children:[(0,c.Y)(wU.A,{}),(0,c.Y)(aA.EY,{color:"dimmer",children:T||""})]})]}),(0,c.Y)(aA.EY,{multiline:!0,children:"Extension assets should be stored in the public asset directory. Move the image or modify the file path, or try again."}),(0,c.FD)(ou.S,{gap:4,children:[(0,c.Y)(v4.pd,{defaultValue:y||"",ref:x,placeholder:"/icon.png",onChange:function(e){return b(e.target.value)},autoFocus:!0,disabled:"Loading"===l||"Installing"===l||"Success"===l}),m&&("Loading"===l||"Success"===l||"Failed"===l)?(0,c.Y)("a",{href:m,target:"_blank",children:(0,c.FD)(aA.EY,{color:"dimmer",variant:"small",css:[ol.wp.rowWithGap(4),ol.wp.display.flex,{fontStyle:"italic"}],children:[(0,c.FD)("span",{css:[ol.wp.truncate],children:["Loading"===l?"Checking ":null,"Success"===l?"Found at ":null,"Failed"===l?"Failed to load ":null,m]}),(0,c.Y)(ou.S,{css:[ol.wp.display.inlineBlock],children:(0,c.Y)(cq.A,{})})]})}):null]}),(0,c.FD)(ou.S,{row:!0,justify:"space-between",align:"center",children:[(0,c.Y)(ou.S,{row:!0,gap:4,align:"center",children:l?(0,c.Y)(c.FK,{children:"Loading"===l?(0,c.Y)(dc.A,{}):(0,c.Y)(dz.N,{text:wO[l],colorway:"Failed"===l?"negative":"positive",icon:"Failed"===l?(0,c.Y)(fC.A,{}):(0,c.Y)(pl.A,{})})}):null}),"Failed"===l?(0,c.FD)(ou.S,{row:!0,gap:8,children:[(0,c.Y)(aY.$n,{text:"Add Anyways",onClick:function(){var e=I||S;null!==e&&r(e),F(),t()},size:"small"}),(0,c.Y)(aY.$n,{text:"Try Again",onClick:function(){U()},size:"small"})]}):null,D&&"Success"===l?(0,c.Y)(aY.$n,{text:"Continue",iconLeft:(0,c.Y)(pl.A,{}),colorway:"primary",onClick:function(){r(D),F(),t()}}):null]})]}):(0,c.Y)(wR,{openFile:Y,glob:"**/*.{png,jpg,jpeg,webp,svg,gif}"})})}var wL=t(62017),wM=t(65977),wG=(0,rC.x)({centerRowGap8:[ol.wp.rowWithGap(8),ol.wp.align.center],featureContainer:[ol.wp.flex.column,ol.wp.borderRadius(8),{overflow:"hidden"}],noFeaturesPlaceholder:[ol.wp.border({style:"dashed"}),ol.wp.borderRadius(8),ol.wp.p(16),ol.wp.colWithGap(8),ol.wp.center],featureDetails:[ol.wp.flex.column,ol.wp.colWithGap(4),ol.wp.flex.growAndShrink(1)],newFeatureFieldWrapper:[ol.wp.border({direction:"bottom",color:rI.LU.backgroundHighest})],inputCounterFlex:[ol.wp.flex.row,ol.wp.justify.spaceBetween,ol.wp.align.center]});function wN(e){var n=e.features,t=e.onCreate,r=e.onUpdate,i=e.onDelete,o=(0,u._)((0,d.useState)([]),2),a=o[0],l=o[1],s=(0,u._)((0,d.useState)(!1),2),p=s[0],f=s[1];return(0,c.FD)(ou.S,{children:[(0,c.FD)(ou.S,{pb:12,children:[(0,c.FD)(ou.S,{css:wG.centerRowGap8,children:[(0,c.FD)(ou.S,{css:wG.centerRowGap8,children:[(0,c.Y)(wM.A,{}),(0,c.Y)(aA.EY,{variant:"subheadDefault",children:"Feature Descriptions"})]}),(0,c.Y)(u1.K0,{onClick:function(){f(!p)},alt:"Add a new Feature",tooltipBehavior:p?"hidden":"default",disabled:p,children:(0,c.Y)(at.A,{})})]}),(0,c.Y)(aA.EY,{color:"dimmer",variant:"small",multiline:!0,children:"Describe what your extension can do. Descriptions will appear on the store listing page."})]}),(0,c.FD)(ou.S,{gap:8,children:[p?(0,c.Y)(wH,{onSubmit:function(e){t(e),f(!1)},onCancel:function(){return f(!1)}}):null,(0,c.Y)(ou.S,{css:wG.featureContainer,children:n.length>0?n.map(function(e,t){return a.includes(t)?(0,c.Y)(wH,{feature:e,isLast:t===n.length-1,onSubmit:function(e){r(e,t),l(function(e){return e.filter(function(e){return e!==t})})},onCancel:function(){return l(function(e){return e.filter(function(e){return e!==t})})}},t):(0,c.Y)(wz,{isLast:t===n.length-1,feature:e,onEdit:function(){return l(function(e){return(0,eA._)(e).concat([t])})},onDelete:function(){i(t)}},t)}):(0,c.Y)(c.FK,{children:p?null:(0,c.FD)(ou.S,{css:wG.noFeaturesPlaceholder,children:[(0,c.Y)(aA.EY,{color:"dimmest",multiline:!0,children:"You haven't added any features yet"}),(0,c.Y)(aY.$n,{variant:"outlined",text:"New Feature",iconLeft:(0,c.Y)(at.A,{}),onClick:function(){return f(!0)}})]})})})]})]})}function wz(e){var n=e.feature,t=e.onEdit,r=e.onDelete,i=e.isLast;return(0,c.FD)(af.ui,{elevated:!0,css:[ol.wp.flex.row,ol.wp.rowWithGap(8),ol.wp.align.center,ol.wp.p(8),i?null:ol.wp.border({direction:"bottom",color:rI.LU.backgroundHighest})],children:[(0,c.Y)(wB,{size:64,icon:n.image}),(0,c.FD)(ou.S,{css:wG.featureDetails,children:[(0,c.FD)(ou.S,{row:!0,gap:8,align:"center",justify:"space-between",children:[(0,c.Y)(aA.EY,{children:n.title}),(0,c.FD)(ou.S,{row:!0,gap:8,children:[(0,c.Y)(u1.K0,{alt:"Delete",tooltipBehavior:"hidden",onClick:r,children:(0,c.Y)(uV.A,{color:rI.LU.accentNegativeStronger})}),(0,c.Y)(u1.K0,{alt:"Edit",tooltipBehavior:"hidden",onClick:t,children:(0,c.Y)(wL.A,{})})]})]}),(0,c.Y)(aA.EY,{color:"dimmest",multiline:!0,maxLines:1,children:n.body})]})]})}function wH(e){var n=e.onSubmit,t=e.onCancel,r=e.feature,i=e.isLast,o=(0,u._)((0,d.useState)((null==r?void 0:r.title)||""),2),a=o[0],l=o[1],s=(0,u._)((0,d.useState)((null==r?void 0:r.body)||""),2),p=s[0],f=s[1],h=(0,u._)((0,d.useState)((null==r?void 0:r.image)||null),2),g=h[0],m=h[1],v=a.length>=3&&p.length>=16;return(0,c.FD)(af.ui,{css:[ol.wp.flex.column,i||r?null:ol.wp.borderRadius(8),r?ol.wp.border({color:rI.LU.outlineDefault}):[i?null:ol.wp.border({direction:"bottom",color:rI.LU.backgroundHighest})]],elevated:!0,children:[(0,c.FD)(ou.S,{css:wG.newFeatureFieldWrapper,p:8,row:!0,gap:8,align:"center",justify:"space-between",children:[(0,c.Y)(aA.EY,{children:a||"New Feature"}),(0,c.FD)(ou.S,{row:!0,gap:8,children:[(0,c.Y)(aY.$n,{text:"Cancel",onClick:t}),(0,c.Y)(aY.$n,{text:r?"Save":"Create",colorway:"primary",onClick:function(){return n({title:a,body:p,image:g})},disabled:!v})]})]}),(0,c.FD)(ou.S,{p:8,gap:8,children:[(0,c.FD)(ou.S,{gap:4,children:[(0,c.FD)(ou.S,{css:wG.inputCounterFlex,children:[(0,c.Y)(aA.EY,{color:"dimmer",children:"Title"}),(0,c.Y)(wW,{value:a.length,min:3})]}),(0,c.Y)(v4.pd,{value:a,onChange:function(e){return l(e.target.value)},placeholder:"Seamless Editing",maxLength:60})]}),(0,c.FD)(ou.S,{gap:4,children:[(0,c.FD)(ou.S,{css:wG.inputCounterFlex,children:[(0,c.Y)(aA.EY,{color:"dimmer",children:"Body"}),(0,c.Y)(wW,{value:p.length,min:16})]}),(0,c.Y)(v4.ov,{value:p,onChange:function(e){return f(e.target.value)},placeholder:"Describe what this feature does and how to use it (Markdown supported)",autoSize:!0,maxLength:2e3})]}),(0,c.FD)(ou.S,{row:!0,gap:8,children:[(0,c.FD)(ou.S,{gap:4,grow:!0,shrink:!0,children:[(0,c.Y)(aA.EY,{color:"dimmer",children:"Image (Recommended)"}),(0,c.Y)(aA.EY,{color:"dimmest",multiline:!0,children:"Choose a statically-served image from your App. The Recommended aspect ratio for a cover image is 800x600."})]}),(0,c.Y)(wB,{size:100,icon:g,editable:!0,onSubmit:function(e){m(e)}})]})]})]})}function wB(e){var n=e.size,t=e.icon,r=e.editable,i=void 0!==r&&r,o=e.onSubmit,a=(0,o1.A)().container,l=(0,aF.A)(a).url,s=l&&t?(0,aO.sU)(l,t):null,p=(0,u._)((0,d.useState)(!1),2),f=p[0],h=p[1];return(0,c.FD)(c.FK,{children:[(0,c.Y)(af.ui,{background:"default",css:[i?dV.b.filledAndOutlined:null,ol.wp.flex.row,ol.wp.center,ol.wp.width(n),ol.wp.height(.75*n),ol.wp.maxWidth(n),ol.wp.maxHeight(.75*n),ol.wp.borderRadius(4),ol.wp.border({color:rI.LU.backgroundHighest}),ol.wp.flex.grow(1),{background:s?"".concat(rI.LU.backgroundDefault," url(").concat(s,") no-repeat center center / cover"):rI.LU.backgroundDefault}],onClick:function(){return h(!0)},children:s?null:(0,c.Y)(wU.A,{color:rI.LU.foregroundDimmest,size:24})}),i?(0,c.Y)(wT,{isOpen:f,close:function(){return h(!1)},onSubmit:function(e){null==o||o(e)}}):null]})}function wW(e){var n=e.value,t=e.min;return(0,c.FD)(aA.EY,{css:{color:n>=t?rI.LU.accentPositiveStronger:rI.LU.foregroundDimmest},children:[n,"/",t]})}var wj={readFile:"Failed to read manifest file, please try again",noManifest:"No extension.json found",parseManifest:"Failed to parse manifest file",removedManifest:"extension.json was moved or deleted, please re-create it in your static directory",stateUndefined:"State should be defined"},w$=function(){var e=(0,u._)((0,d.useState)(null),2),n=e[0],t=e[1],r=(0,d.useCallback)(function(e){t(function(n){if(!n)throw Error(wj.stateUndefined);return(0,r9._)((0,p._)({},n),{manifestStr:e})})},[]);return{state:n,setState:t,updateString:r}},wq=function(){var e=(0,o1.A)(),n=e.fs,t=e.dotReplit,r=w$(),i=r.state,o=r.setState,a=r.updateString,l=(0,u._)((0,d.useState)(0),2),c=l[0],s=l[1],f=(0,u._)((0,d.useState)(!1),2),h=f[0],g=f[1],m=(0,d.useCallback)(function(){return(0,tS._)(function(){return(0,tY.YH)(this,function(e){switch(e.label){case 0:return[4,(0,tS._)(function(){return(0,tY.YH)(this,function(e){switch(e.label){case 0:return[4,n.writeFile("extension.json",JSON.stringify({name:"My Extension",description:"My Extension Description",version:"0"},null,2))];case 1:return e.sent(),[2]}})})()];case 1:return e.sent(),[2]}})})()},[n]);(0,d.useEffect)(function(){o(null);var e=!1,r=function(){};return(0,tS._)(function(){var i,l,c,s,d,p,f;return(0,tY.YH)(this,function(h){switch(h.label){case 0:return[4,Promise.all([n.listFiles(),t.getConfig()])];case 1:if(c=(l=u._.apply(void 0,[h.sent(),2]))[0],s=l[1],e)return[2];if(!c.files||s.error)return o({fileReadError:wj.readFile}),[2];if(p=(0,lj.me)(function(e){let n="/"===e.charAt(0),t="/"===e.slice(-1),r=(function(e,n){let t=0;for(let n=e.length-1;n>=0;n--){let r=e[n];"."===r?e.splice(n,1):".."===r?(e.splice(n,1),t++):t&&(e.splice(n,1),t--)}if(n)for(;t--;)e.unshift("..");return e})(e.split("/").filter(e=>!!e),!n).join("/");return r||n||(r="."),r&&t&&(r+="/"),(n?"/":"")+r}(null!=(d=null==(i=s.config.extension)?void 0:i.outputDirectory)?d:"dist")),!(f=function(e){var n,t=e.filePaths,r=e.outputDir,i=[],o=!0,a=!1,l=void 0;try{for(var u,c=t[Symbol.iterator]();!(o=(u=c.next()).done);o=!0){var s=u.value;if("extension.json"===s)return s;s.endsWith("/extension.json")&&i.push(s)}}catch(e){a=!0,l=e}finally{try{o||null==c.return||c.return()}finally{if(a)throw l}}var d=!0,p=!1,f=void 0;try{for(var h,g=i[Symbol.iterator]();!(d=(h=g.next()).done);d=!0){var m=h.value;if(!m.startsWith(r))return m}}catch(e){p=!0,f=e}finally{try{d||null==g.return||g.return()}finally{if(p)throw f}}return null!=(n=i[0])?n:null}({filePaths:c.files,outputDir:p})))return o({fileReadError:wj.noManifest}),[2];return r=n.watchTextFile(f,{onReady:function(e){o({fileReadError:null,writeChange:e.writeChange,manifestStr:e.initialContent,manifestPath:f})},onChange:function(e){a(e.latestContent)},onMoveOrDelete:function(){o({fileReadError:wj.removedManifest})},onError:function(){o({fileReadError:wj.readFile})}}),[2]}})})(),function(){r(),e=!0}},[n,a,t,c,o]);var v=(0,d.useMemo)(function(){if(!i||null!==i.fileReadError)return null;try{var e=wy._3(i.manifestStr);return(0,aO.Kf)(e)}catch(e){return{error:e,manifest:null}}},[i]),w=(0,d.useCallback)(function(e){if(!i||(null==v?void 0:v.error)||null!==i.fileReadError)throw Error(wj.parseManifest);var n=wy.F6(i.manifestStr,e);i.writeChange((0,wb.s)(i.manifestStr,n)),a(n)},[i,v,a]),y={retry:function(){s(function(e){return e+1})},creatingExtensionJson:h,setCreatingExtensionJson:g,createExtensionJson:m,updateString:a,updateManifest:w};return i?"string"==typeof i.fileReadError?(0,r9._)((0,p._)({},y),{__status:"fileReadError",state:{fileReadError:i.fileReadError},parsed:null}):v?v.manifest?(0,r9._)((0,p._)({},y),{__status:"success",state:{fileReadError:null,writeChange:i.writeChange,manifestStr:i.manifestStr,manifestPath:i.manifestPath},parsed:v}):(0,r9._)((0,p._)({},y),{__status:"fileParseError",state:i,parsed:{manifest:null,error:v.error}}):(0,r9._)((0,p._)({},y),{__status:"fileReadError",state:{fileReadError:wj.noManifest},parsed:null}):(0,r9._)((0,p._)({},y),{__status:"loading",state:null,parsed:null})},wV=function(e){return e.loading="loading",e.fileReadError="fileReadError",e.fileParseError="fileParseError",e.success="success",e}({}),wK=function(){return(0,c.Y)(ou.S,{css:[ol.wp.display.flex,ol.wp.width("100%"),ol.wp.height("100%")],justify:"center",align:"center",children:(0,c.Y)(dc.A,{})})},wZ=t(89394);function wJ(e){var n=e.children;return(0,c.Y)(ou.S,{gap:12,p:16,children:(0,c.Y)(af.ui,{elevated:!0,css:[ol.wp.borderRadius(8),ol.wp.colWithGap(8)],p:16,children:n})})}var wQ=t(65074),wX=function(e){var n=e.error,t=e.performPaneOperation,r=e.manifestPath;return(0,c.Y)(wJ,{children:(0,c.FD)(ou.S,{gap:16,p:8,children:[(0,c.FD)(ou.S,{row:!0,gap:8,css:[ol.wp.display.flex,ol.wp.align.center],children:[(0,c.Y)(fC.A,{}),(0,c.Y)(aA.EY,{variant:"headerDefault",children:"Error parsing extension.json"})]}),(0,c.Y)(aA.EY,{variant:"subheadDefault",children:"Details:"}),(0,c.Y)(ou.S,{gap:8,children:(0,az._)(n,wZ.yk)?n.issues.map(function(e,n){var t=e.path,r=e.message;return(0,c.FD)(ou.S,{css:[ol.wp.display.flex,ol.wp.flex.row,ol.wp.rowWithGap(4)],children:[(0,c.Y)(aA.EY,{css:[ol.wp.font.code,ol.wp.color.orangeStrongest,ol.wp.backgroundColor.orangeDimmest],children:t}),(0,c.Y)(aA.EY,{children:r})]},n)}):(0,c.Y)(ou.S,{tag:"pre",children:n.message})}),(0,c.FD)(ou.S,{row:!0,gap:8,children:[(0,c.Y)(aY.$n,{colorway:"primary",text:"Open extension.json",onClick:function(){t({operation:"open",secondary:!0,pane:(0,wQ.a)(r)})}}),(0,c.Y)(aY.$n,{iconLeft:(0,c.Y)(gc.A,{}),text:"Read extension.json docs",onClick:function(){window.open("https://docs.replit.com/extensions/api/manifest","_blank")}})]})]})})},w0=function(e){var n=e.message,t=wq(),r=t.createExtensionJson,i=t.creatingExtensionJson,o=t.retry,a=t.setCreatingExtensionJson;return(0,c.FD)(wJ,{children:[(0,c.FD)(ou.S,{row:!0,gap:8,css:[ol.wp.display.flex,ol.wp.align.center],children:[(0,c.Y)(fC.A,{}),(0,c.Y)(aA.EY,{variant:"subheadDefault",children:n})]}),(0,c.FD)(ou.S,{row:!0,gap:8,children:[(0,c.Y)(aY.$n,{colorway:"primary",text:"Create extension.json",loading:i,iconLeft:i?(0,c.Y)(dc.A,{}):(0,c.Y)(at.A,{}),onClick:function(){return(0,tS._)(function(){return(0,tY.YH)(this,function(e){switch(e.label){case 0:return a(!0),[4,r()];case 1:return e.sent(),o(),a(!1),[2]}})})()}}),(0,c.Y)(aY.$n,{text:"Retry",iconLeft:(0,c.Y)(cJ.A,{}),onClick:function(){o()}})]})]})},w1=t(61549),w2=t(38573),w4=t(7737),w5=t(4335),w7=t(29017),w3=(0,rC.x)({iconContainer:[ol.wp.position.relative,ol.wp.width(64),ol.wp.height(64),{"&:hover .edit-overlay":{opacity:1}}],iconWrapper:[ol.wp.flex.column,ol.wp.position.absolute,ol.wp.top(0),ol.wp.left(0)],iconOverlay:[ol.wp.flex.column,ol.wp.colWithGap(4),ol.wp.center,ol.wp.position.absolute,ol.wp.top(0),ol.wp.left(0),ol.wp.width("100%"),ol.wp.height("100%"),ol.wp.backgroundColor.backgroundOverlay,ol.wp.borderRadius(12),{transition:"0.25s",opacity:0,cursor:"pointer"}]});function w8(e){var n=e.performPaneOperation,t=e.setSelectedTab,r=(0,l2.FS)(),i=(0,l2.mN)(),o=(0,l2.WB)(),a=(0,l2.EF)(),l=(0,l1.HG)(),s=(0,u._)((0,d.useState)(!1),2),p=s[0],f=s[1],h=(0,u._)((0,d.useState)(!1),2),g=h[0],m=h[1];return(0,c.Y)(ou.S,{css:[ol.wp.flex.wrap,{rowGap:8}],row:!0,gap:8,children:(0,c.FD)(ou.S,{row:!0,gap:8,children:[r||g?(0,c.FD)(c.FK,{children:[(0,c.Y)(aY.$n,{size:"small",text:"Reload",iconLeft:g?(0,c.Y)(dc.A,{}):(0,c.Y)(cJ.A,{}),disabled:g,onClick:function(){return(0,tS._)(function(){return(0,tY.YH)(this,function(e){switch(e.label){case 0:if(!r)return[2];return m(!0),[4,o(r.installationId)];case 1:return e.sent(),m(!1),[2]}})})()}}),(0,c.Y)(aY.$n,{size:"small",text:"Unload",iconLeft:(0,c.Y)(sx.A,{}),disabled:!r,onClick:function(){r&&a(r.installationId)}})]}):(0,c.Y)(aY.$n,{size:"small",text:"Load locally",colorway:"primary",iconLeft:p?(0,c.Y)(dc.A,{}):(0,c.Y)(w4.A,{}),loading:p,onClick:function(){return(0,tS._)(function(){return(0,tY.YH)(this,function(e){switch(e.label){case 0:return f(!0),[4,i()];case 1:return e.sent(),f(!1),[2]}})})()}}),l?(0,c.Y)(aY.$n,{size:"small",text:"View on Store",iconLeft:(0,c.Y)(w7.A,{}),onClick:function(){return n({operation:"open",pane:{type:"extensionStore",data:{page:"cover",coverPageExtensionId:l}}})}}):null,(0,c.Y)(aY.$n,{size:"small",text:"Edit Store Listing",onClick:function(){t(1)},iconLeft:(0,c.Y)(wL.A,{})})]})})}function w6(e){var n=e.performPaneOperation,t=e.setSelectedTab,r=(0,o1.A)().container,i=(0,aF.A)(r).url,o=wq(),a=o.parsed,l=o.state,u=o.__status;if(u===wV.loading)return(0,c.Y)(wK,{});if(u===wV.fileReadError)return(0,c.Y)(w0,{message:l.fileReadError});var s=a.manifest,d=a.error;return d?(0,c.Y)(wX,{performPaneOperation:n,manifestPath:l.manifestPath,error:d}):(0,c.Y)(ou.S,{gap:16,css:[ol.wp.width("100%")],children:(0,c.FD)(af.ui,{elevated:!0,css:[ol.wp.borderRadius(8),ol.wp.colWithGap(8)],p:12,children:[(0,c.FD)(ou.S,{row:!0,gap:16,align:"center",children:[(0,c.Y)(ou.S,{css:[ol.wp.display.flex,ol.wp.flex.row],grow:0,children:(0,c.Y)(w2.B,{size:64,baseUrl:null!=i?i:null,icon:s.icon})}),(0,c.FD)(ou.S,{grow:!0,shrink:!0,children:[(0,c.Y)(vg.z,{align:"center",justify:"space-between",children:(0,c.Y)(aA.EY,{variant:"subheadDefault",children:s.name})}),(0,c.Y)(aA.EY,{variant:"text",color:"dimmest",children:s.description})]})]}),(0,c.Y)(w8,{setSelectedTab:t,performPaneOperation:n})]})})}function w9(e){var n,t,r,i,o,a,l,s,f,h,m=e.manifest,v=e.onSubmit,w=e.updateManifest,y=(0,l1.HG)(),b=(0,aS.T)(),x=(0,wC.c)(),_=(0,u._)((0,d.useState)(null!=(l=m.name)?l:""),2),S=_[0],Y=_[1],A=(0,u._)((0,d.useState)(null!=(s=m.description)?s:""),2),I=A[0],C=A[1],k=(0,u._)((0,d.useState)(null!=(f=m.longDescription)?f:void 0),2),E=k[0],D=k[1],R=(0,u._)((0,d.useState)(!1),2),F=R[0],U=R[1],P=(0,o1.A)().container,O=(0,aF.A)(P).url,T=(n={variables:{id:y||""},skip:!y},t=(0,p._)({},wA,n),g.I(wI,t)),L=T.data,M=T.loading,G=T.refetch,N=(0,u._)((0,w_.$I)(),2),z=N[0],H=N[1].loading,B=(null==L||null==(r=L.extension)?void 0:r.__typename)==="Extension"&&(null==L||null==(i=L.extension)?void 0:i.user.id)===b,W=(null==L||null==(o=L.extension)?void 0:o.__typename)==="Extension"&&(null==L||null==(a=L.extension)?void 0:a.isListed);return(0,c.FD)(ou.S,{tag:"form",gap:16,onSubmit:function(e){e.preventDefault(),v({name:S,description:I,longDescription:E})},children:[(0,c.FD)(ou.S,{grow:!0,shrink:!0,gap:4,children:[(0,c.Y)(aA.EY,{css:[ol.wp.fontWeight.medium],children:"Do you want to publish your extension on the store?"}),M||H?(0,c.Y)(dc.A,{}):(0,c.FD)(w1.z,{css:ol.wp.colWithGap(8),name:"extensionListingStatus",value:W?"listed":"unlisted",disabled:!B,onChange:function(e){z({variables:{extensionId:y||"",isListed:"listed"===e.target.value}}).then(function(){return G()})},children:[B?null:(0,c.Y)(ou.S,{css:[ol.wp.width("fit-content")],children:(0,c.Y)(dz.N,{text:"You need to release this extension before listing it.",icon:(0,c.Y)(wk.A,{}),colorway:"yellow"})}),(0,c.FD)(ou.S,{row:!0,gap:8,children:[(0,c.Y)(w1.s,{id:x("listed"),value:"listed"}),(0,c.Y)("label",{htmlFor:x("listed"),children:"Yes, list my extension publicly on the Store"})]},"listed"),(0,c.FD)(ou.S,{row:!0,gap:8,children:[(0,c.Y)(w1.s,{id:x("unlisted"),value:"unlisted"}),(0,c.Y)("label",{htmlFor:x("unlisted"),children:"No, I want to keep my listing page private"})]},"unlisted")]})]}),(0,c.Y)(pe.a,{}),(0,c.FD)(ou.S,{grow:!0,shrink:!0,gap:4,tag:"label",htmlFor:x("name"),children:[(0,c.Y)(aA.EY,{children:"Extension Name"}),(0,c.Y)(v4.pd,{id:x("name"),placeholder:"Give your extension a name",value:S,onChange:function(e){Y(e.currentTarget.value)},required:!0})]}),(0,c.FD)(ou.S,{grow:!0,shrink:!0,gap:4,children:[(0,c.Y)(aA.EY,{children:"Extension Icon"}),(0,c.FD)(ou.S,{row:!0,gap:12,align:"center",children:[(0,c.FD)(ou.S,{css:w3.iconContainer,children:[(0,c.Y)(ou.S,{css:w3.iconWrapper,children:(0,c.Y)(w2.B,{size:64,baseUrl:null!=O?O:null,icon:m.icon})}),(0,c.FD)(ou.S,{css:w3.iconOverlay,className:"edit-overlay",tag:"label",onClick:function(){return U(!0)},children:[(0,c.Y)(wL.A,{}),(0,c.Y)(aA.EY,{variant:"small",children:"Edit"})]})]}),(0,c.Y)(aY.$n,{text:"Choose from file system",iconLeft:(0,c.Y)(w5.A,{}),onClick:function(){return U(!0)}})]})]}),(0,c.FD)(ou.S,{grow:!0,shrink:!0,gap:4,tag:"label",htmlFor:x("tagline"),children:[(0,c.FD)(ou.S,{gap:0,children:[(0,c.Y)(aA.EY,{children:"Tagline"}),(0,c.Y)(aA.EY,{color:"dimmer",variant:"small",multiline:!0,children:"Provide a short description of what your Extension is for."})]}),(0,c.Y)(v4.pd,{id:x("tagline"),placeholder:"Give your extension a short tagline",value:I,onChange:function(e){C(e.currentTarget.value)},required:!0})]}),(0,c.FD)(ou.S,{grow:!0,shrink:!0,gap:4,tag:"label",htmlFor:x("longDescription"),children:[(0,c.FD)(ou.S,{gap:0,children:[(0,c.Y)(aA.EY,{children:"Description"}),(0,c.Y)(aA.EY,{color:"dimmer",variant:"small",multiline:!0,children:"Add more detail about the usage of your extension."})]}),(0,c.Y)(v4.ov,{id:x("longDescription"),placeholder:"Give your extension a long description, markdown formatting is supported",value:null!=E?E:"",onChange:function(e){D(e.currentTarget.value||void 0)},css:{resize:"vertical"},autoSize:!0})]}),(0,c.Y)(pe.a,{}),(0,c.Y)(wN,{features:null!=(h=m.features)?h:[],onDelete:function(e){if((null==(n=m.features)?void 0:n.length)===1&&0===e){var n,t,r=(0,p._)({},m);delete r.features,w(r)}else w((0,r9._)((0,p._)({},m),{features:null==(t=m.features)?void 0:t.filter(function(n,t){return t!==e})}))},onUpdate:function(e,n){var t,r,i,o;w((0,r9._)((0,p._)({},m),{features:(0,eA._)(null!=(i=null==(t=m.features)?void 0:t.slice(0,n))?i:[]).concat([e],(0,eA._)(null!=(o=null==(r=m.features)?void 0:r.slice(n+1))?o:[]))}))},onCreate:function(e){var n;w((0,r9._)((0,p._)({},m),{features:(0,eA._)(null!=(n=m.features)?n:[]).concat([e])}))}}),(0,c.Y)(ou.S,{row:!0,gap:12,css:[{alignSelf:"end"},ol.wp.pt(8)],children:(0,c.Y)(aY.$n,{text:"Continue",iconRight:(0,c.Y)(cS.A,{}),colorway:"primary",type:"submit",disabled:!S||!I||!E})}),(0,c.Y)(wT,{isOpen:F,close:function(){return U(!1)},onSubmit:function(e){w((0,r9._)((0,p._)({},m),{icon:e}))}})]})}function ye(e){var n=e.fileHandlers,t=e.onCreate,r=e.onUpdate,i=e.onOpen,o=e.onDelete,a=(0,u._)((0,d.useState)([]),2),l=a[0],s=a[1],p=(0,u._)((0,d.useState)(!1),2),f=p[0],h=p[1];return(0,c.FD)(ou.S,{children:[(0,c.FD)(ou.S,{pb:12,children:[(0,c.FD)(ou.S,{row:!0,gap:8,align:"center",children:[(0,c.FD)(ou.S,{row:!0,gap:8,align:"center",children:[(0,c.Y)(l9.A,{}),(0,c.Y)(aA.EY,{variant:"subheadDefault",multiline:!1,children:"File Handlers"})]}),(0,c.Y)(u1.K0,{onClick:function(){return h(!f)},alt:"Add a new File Handler",tooltipBehavior:f?"hidden":"default",disabled:f,children:(0,c.Y)(at.A,{})})]}),(0,c.Y)(aA.EY,{color:"dimmer",variant:"small",multiline:!1,children:"Custom file viewers and editors"})]}),(0,c.FD)(ou.S,{gap:8,children:[f?(0,c.Y)(yn,{onSubmit:function(e){t(e),h(!1)},onCancel:function(){h(!1)}}):null,n.length?n.map(function(e,n){var t;return l.includes(n)?(0,c.Y)(yn,{initialFileHandler:e,onSubmit:function(e){r(e,n),s(function(e){return e.filter(function(e){return e!==n})})},onCancel:function(){s(function(e){return e.filter(function(e){return e!==n})})}},n):(0,c.FD)(af.ui,{css:[ol.wp.borderRadius(8),ol.wp.flex.wrap,{rowGap:8}],p:8,row:!0,justify:"space-between",align:"center",elevated:!0,children:[(0,c.Y)(aA.EY,{multiline:!1,children:null!=(t=e.name)?t:"Unnamed"}),(0,c.FD)(ou.S,{row:!0,gap:12,align:"center",children:[(0,c.Y)(u1.K0,{alt:"Remove ".concat(e.name||"this file handler"),colorway:"red",onClick:function(){o(n)},children:(0,c.Y)(uV.A,{})}),(0,c.Y)(u1.K0,{alt:"Edit ".concat(e.name||"this file handler"),onClick:function(){s(function(e){return(0,eA._)(e).concat([n])})},children:(0,c.Y)(wL.A,{})}),(0,c.Y)(aY.$n,{iconLeft:(0,c.Y)(w5.A,{}),variant:"outlined",text:"Preview",onClick:function(){i(e)}})]})]},n)}):(0,c.Y)(c.FK,{children:f?null:(0,c.FD)(ou.S,{css:[ol.wp.border({style:"dashed"}),ol.wp.borderRadius(8),ol.wp.p(16),ol.wp.colWithGap(8),ol.wp.center],children:[(0,c.Y)(aA.EY,{color:"dimmest",children:"You haven't added a file handler yet"}),(0,c.Y)(aY.$n,{variant:"outlined",text:"New File Handler",iconLeft:(0,c.Y)(at.A,{}),onClick:function(){return h(!0)}})]})})]})]})}function yn(e){var n,t,r,i,o=e.onSubmit,a=e.onCancel,l=e.initialFileHandler,s=(0,u._)((0,d.useState)(null!=(n=null==l?void 0:l.name)?n:""),2),p=s[0],f=s[1],h=(0,u._)((0,d.useState)(null!=(t=null==l?void 0:l.icon)?t:""),2),g=h[0],m=h[1],v=(0,u._)((0,d.useState)(null!=(r=null==l?void 0:l.handler)?r:""),2),w=v[0],y=v[1],b=(0,u._)((0,d.useState)(null!=(i=null==l?void 0:l.glob)?i:""),2),x=b[0],_=b[1],S=(0,wC.c)();return(0,c.FD)(af.ui,{css:[ol.wp.borderRadius(8),ol.wp.border({color:rI.LU.outlineDimmest}),ol.wp.p(8),ol.wp.colWithGap(8)],tag:"form",onSubmit:function(e){e.preventDefault(),o({name:p,icon:g,handler:w,glob:x})},elevated:!0,children:[(0,c.FD)(ou.S,{css:[ol.wp.border({color:rI.LU.outlineDimmest,direction:"bottom"}),ol.wp.align.center,ol.wp.flex.wrap,{rowGap:8}],row:!0,gap:2,justify:"space-between",children:[(0,c.Y)(aA.EY,{multiline:!1,children:p||"New File Viewer"}),(0,c.FD)(ou.S,{row:!0,gap:8,children:[(0,c.Y)(aY.$n,{text:"Cancel",onClick:function(){a()}}),(0,c.Y)(aY.$n,{colorway:"primary",iconLeft:(0,c.Y)(pl.A,{}),text:"Save Changes",type:"submit"})]})]}),(0,c.FD)(ou.S,{gap:8,children:[(0,c.FD)(ou.S,{grow:!0,shrink:!0,gap:2,tag:"label",htmlFor:S("name"),children:[(0,c.Y)(aA.EY,{color:"dimmer",multiline:!1,children:"Name"}),(0,c.Y)(v4.pd,{id:S("name"),placeholder:"SVG Editor",value:p,onChange:function(e){f(e.currentTarget.value)},required:!0})]}),(0,c.FD)(ou.S,{grow:!0,shrink:!0,gap:2,tag:"label",htmlFor:S("handler"),children:[(0,c.Y)(aA.EY,{color:"dimmer",multiline:!1,children:"URL Path"}),(0,c.Y)(v4.pd,{id:S("handler"),placeholder:"/svg-editor",value:w,onChange:function(e){y(e.currentTarget.value)},required:!0})]}),(0,c.FD)(ou.S,{grow:!0,shrink:!0,gap:2,tag:"label",htmlFor:S("glob"),children:[(0,c.Y)(aA.EY,{color:"dimmer",multiline:!1,children:"Glob Pattern"}),(0,c.Y)(v4.pd,{id:S("glob"),placeholder:"*.svg",value:x,onChange:function(e){_(e.currentTarget.value)},required:!0})]}),(0,c.FD)(ou.S,{grow:!0,shrink:!0,gap:2,tag:"label",htmlFor:S("icon"),children:[(0,c.Y)(aA.EY,{color:"dimmer",multiline:!1,children:"Icon (path)"}),(0,c.Y)(v4.pd,{id:S("icon"),placeholder:"/svg-editor-logo.png",value:g,onChange:function(e){m(e.currentTarget.value)},required:!0})]})]})]})}function yt(e){var n=e.tools,t=e.onCreate,r=e.onUpdate,i=e.onOpen,o=e.onDelete,a=(0,u._)((0,d.useState)([]),2),l=a[0],s=a[1],p=(0,u._)((0,d.useState)(!1),2),f=p[0],h=p[1];return(0,c.FD)(ou.S,{children:[(0,c.FD)(ou.S,{pb:12,children:[(0,c.FD)(ou.S,{row:!0,gap:8,align:"center",children:[(0,c.FD)(ou.S,{row:!0,gap:8,align:"center",children:[(0,c.Y)(ar.A,{}),(0,c.Y)(aA.EY,{variant:"subheadDefault",multiline:!1,children:"Tools"})]}),(0,c.Y)(u1.K0,{onClick:function(){return h(!f)},alt:"Add a new tool",disabled:f,tooltipBehavior:f?"hidden":"default",children:(0,c.Y)(at.A,{})})]}),(0,c.Y)(aA.EY,{color:"dimmer",variant:"small",multiline:!1,children:"Custom user interfaces as a Pane"})]}),(0,c.FD)(ou.S,{gap:8,children:[f?(0,c.Y)(yr,{onSubmit:function(e){t(e),h(!1)},onCancel:function(){h(!1)}}):null,n.length?n.map(function(e,n){var t;return l.includes(n)?(0,c.Y)(yr,{initialTool:e,onSubmit:function(e){r(e,n),s(function(e){return e.filter(function(e){return e!==n})})},onCancel:function(){s(function(e){return e.filter(function(e){return e!==n})})}},n):(0,c.FD)(af.ui,{css:[ol.wp.borderRadius(8),ol.wp.flex.wrap,{rowGap:8}],p:8,row:!0,justify:"space-between",align:"center",elevated:!0,children:[(0,c.Y)(aA.EY,{multiline:!1,children:null!=(t=e.name)?t:"Unnamed"}),(0,c.FD)(ou.S,{row:!0,gap:12,align:"center",children:[(0,c.Y)(u1.K0,{alt:"Remove ".concat(e.name||"this tool"),colorway:"red",onClick:function(){o(n)},children:(0,c.Y)(uV.A,{})}),(0,c.Y)(u1.K0,{alt:"Remove ".concat(e.name||"this tool"),onClick:function(){s(function(e){return(0,eA._)(e).concat([n])})},children:(0,c.Y)(wL.A,{})}),(0,c.Y)(aY.$n,{iconLeft:(0,c.Y)(sd.A,{}),variant:"outlined",text:"Preview",onClick:function(){i(e)}})]})]},n)}):(0,c.Y)(c.FK,{children:f?null:(0,c.FD)(ou.S,{css:[ol.wp.border({style:"dashed"}),ol.wp.borderRadius(8),ol.wp.p(16),ol.wp.colWithGap(8),ol.wp.center],children:[(0,c.Y)(aA.EY,{color:"dimmest",children:"You haven't added any tools"}),(0,c.Y)(aY.$n,{variant:"outlined",text:"New Tool",iconLeft:(0,c.Y)(at.A,{}),onClick:function(){return h(!0)}})]})})]})]})}function yr(e){var n,t,r,i=e.onSubmit,o=e.onCancel,a=e.initialTool,l=(0,u._)((0,d.useState)(null!=(n=null==a?void 0:a.name)?n:""),2),s=l[0],p=l[1],f=(0,u._)((0,d.useState)(null!=(t=null==a?void 0:a.icon)?t:null),2),h=f[0],g=f[1],m=(0,u._)((0,d.useState)(null!=(r=null==a?void 0:a.handler)?r:""),2),v=m[0],w=m[1],y=(0,wC.c)();return(0,c.FD)(af.ui,{tag:"form",css:[ol.wp.borderRadius(8),ol.wp.border({color:rI.LU.outlineDimmest}),ol.wp.p(8)],elevated:!0,onSubmit:function(e){e.preventDefault(),i({name:s,icon:h,handler:v})},children:[(0,c.FD)(ou.S,{css:[ol.wp.border({color:rI.LU.outlineDimmest,direction:"bottom"}),ol.wp.align.center,ol.wp.flex.wrap,{rowGap:8}],row:!0,gap:2,justify:"space-between",children:[(0,c.Y)(aA.EY,{multiline:!1,children:s||"New Tool"}),(0,c.FD)(ou.S,{row:!0,gap:8,children:[(0,c.Y)(aY.$n,{text:"Cancel",onClick:function(){o()}}),(0,c.Y)(aY.$n,{colorway:"primary",iconLeft:(0,c.Y)(pl.A,{}),text:"Save Changes",type:"submit"})]})]}),(0,c.FD)(ou.S,{gap:8,children:[(0,c.FD)(ou.S,{grow:!0,shrink:!0,gap:2,tag:"label",htmlFor:y("name"),children:[(0,c.Y)(aA.EY,{color:"dimmer",multiline:!1,children:"Name"}),(0,c.Y)(v4.pd,{id:y("name"),placeholder:"SQL Viewer",value:s,onChange:function(e){p(e.currentTarget.value)},required:!0})]}),(0,c.FD)(ou.S,{grow:!0,shrink:!0,gap:2,tag:"label",htmlFor:y("handler"),children:[(0,c.Y)(aA.EY,{color:"dimmer",multiline:!1,children:"URL Path"}),(0,c.Y)(v4.pd,{id:y("handler"),placeholder:"/sql",value:v,onChange:function(e){w(e.currentTarget.value)},required:!0})]}),(0,c.FD)(ou.S,{grow:!0,shrink:!0,gap:2,tag:"label",htmlFor:y("icon"),children:[(0,c.Y)(aA.EY,{color:"dimmer",multiline:!1,children:"Icon (path)"}),(0,c.Y)(v4.pd,{id:y("icon"),placeholder:"/sql-logo.png",value:null!=h?h:"",onChange:function(e){g(e.currentTarget.value||null)},required:!0})]})]})]})}function yi(e){var n,t,r=e.manifest,i=e.performPaneOperation,o=e.update,a=(0,l2.FS)(),l=(0,l2.mN)(),s=(0,u._)((0,d.useState)(null),2),f=s[0],h=s[1];return(0,c.FD)(ou.S,{gap:24,css:[ol.wp.width("100%")],children:[(0,c.Y)(ye,{onOpen:function(e){return(0,tS._)(function(){return(0,tY.YH)(this,function(n){return h(e),[2]})})()},onDelete:function(e){var n;o((0,r9._)((0,p._)({},r),{fileHandlers:null==(n=r.fileHandlers)?void 0:n.filter(function(n,t){return t!==e})}))},onUpdate:function(e,n){var t,i,a,l;o((0,r9._)((0,p._)({},r),{fileHandlers:(0,eA._)(null!=(a=null==(t=r.fileHandlers)?void 0:t.slice(0,n))?a:[]).concat([e],(0,eA._)(null!=(l=null==(i=r.fileHandlers)?void 0:i.slice(n+1))?l:[]))}))},onCreate:function(e){var n;o((0,r9._)((0,p._)({},r),{fileHandlers:(0,eA._)(null!=(n=r.fileHandlers)?n:[]).concat([e])}))},fileHandlers:null!=(n=r.fileHandlers)?n:[]}),(0,c.Y)(yt,{onOpen:function(e){return(0,tS._)(function(){var n,t;return(0,tY.YH)(this,function(r){switch(r.label){case 0:if(n=a)return[3,2];return[4,l()];case 1:n=r.sent(),r.label=2;case 2:if(!n)throw Error("Expected current repl to be installed as an extension");return i({operation:"open",pane:{type:"extension",data:{extensionId:n.extensionId,installationId:n.installationId,name:null!=(t=e.name)?t:n.manifest.name,baseUrl:n.baseUrl,icon:e.icon,path:e.handler}}}),[2]}})})()},onDelete:function(e){var n;o((0,r9._)((0,p._)({},r),{tools:null==(n=r.tools)?void 0:n.filter(function(n,t){return t!==e})}))},onUpdate:function(e,n){var t,i,a,l;o((0,r9._)((0,p._)({},r),{tools:(0,eA._)(null!=(a=null==(t=r.tools)?void 0:t.slice(0,n))?a:[]).concat([e],(0,eA._)(null!=(l=null==(i=r.tools)?void 0:i.slice(n+1))?l:[]))}))},onCreate:function(e){var n;o((0,r9._)((0,p._)({},r),{tools:(0,eA._)(null!=(n=r.tools)?n:[]).concat([e])}))},tools:null!=(t=r.tools)?t:[]}),(0,c.Y)(ap.a,{isOpen:!!f,onRequestClose:function(){return h(null)},children:f?(0,c.Y)(wR,{glob:f.glob,openFile:function(e){return(0,tS._)(function(){var n,t;return(0,tY.YH)(this,function(r){switch(r.label){case 0:if(!f)throw Error("Expected pending file handler");if(n=a)return[3,2];return[4,l()];case 1:n=r.sent(),r.label=2;case 2:if(!n)throw Error("Expected current repl to be installed as an extension");return i({operation:"open",pane:{type:"extension",data:{extensionId:n.extensionId,installationId:n.installationId,name:null!=(t=f.name)?t:n.manifest.name,baseUrl:n.baseUrl,path:(0,aO.sU)(n.baseUrl,f.handler),filePath:e}}}),h(null),[2]}})})()}}):null})]})}var yo=t(91584),ya=t(5838),yl=t(8474),yu=(0,uw.AH)(dV.b.filled,ol.wp.position.relative,ol.wp.p(4),ol.wp.border({color:rI.LU.outlineDimmer}),ol.wp.backgroundColor.backgroundHigher,{"&[data-complete]":[ol.wp.backgroundColor.backgroundDefault,{pointerEvents:"none"}],button:{overflow:"hidden",margin:-1,borderWidth:0,padding:0,width:1,height:1,background:"none",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",cursor:"pointer","&::after":{content:'""',position:"absolute",top:0,right:0,bottom:0,left:0,display:"block",cursor:"pointer",zIndex:1}}}),yc=function(e){var n=e.complete,t=e.onClick,r=e.description,i=e.title,o=e.icon;return(0,c.Y)(ou.S,{tag:"li",css:yu,"data-complete":n,children:(0,c.FD)(ou.S,{p:4,children:[(0,c.FD)(ou.S,{row:!0,gap:6,align:"center",children:[n?(0,c.Y)(pl.A,{color:rI.LU.accentPositiveStrongest,size:16,css:[ol.wp.mr(4)]}):null!=o?o:null,(0,c.Y)(aA.EY,{variant:"small",color:n?"dimmer":"default",css:[ol.wp.fontWeight.medium],children:i})]}),r?(0,c.Y)(aA.EY,{color:"dimmer",variant:"small",children:r}):null,(0,c.Y)(ou.S,{children:(0,c.Y)("button",{onClick:function(){t&&"function"==typeof t&&t()},type:"button",children:"Start"})})]})})};let ys=function(e){var n=e.performPaneOperation,t=e.setSelectedTab,r=(0,yo.g)("extensions-onboarding-checklist"),i=r.isDone,o=r.setAsDone,a=(0,yo.g)("extensions-onboarding-checklist-create"),l=a.isDone,u=a.setAsDone,s=(0,yo.g)("extensions-onboarding-checklist-concepts"),f=s.isDone,h=s.setAsDone,g=(0,yo.g)("extensions-onboarding-checklist-api"),m=g.isDone,v=g.setAsDone,w=(0,yo.g)("extensions-onboarding-checklist-publish").isDone;if((0,d.useEffect)(function(){u()},[]),void 0===i||!0===i)return null;var y=[l,f,m,w].filter(Boolean).length,b=[{name:"create",title:"Create an Extension",complete:!!l,icon:(0,c.Y)(l7.A,{})},{name:"concepts",title:"Learn key concepts",complete:!!f,onClick:function(){n({operation:"open",secondary:!0,pane:{type:"docs",data:{url:tx.ik.EXTENSIONS}}}),(0,oq.u4)(oq.AZ.EXTENSION_DEVELOPER_ONBOARDING_COMPLETED,{step:"concepts"}),h()},icon:(0,c.Y)(ya.A,{})},{name:"learn",title:"Use the API",complete:!!m,onClick:function(){n({operation:"open",secondary:!0,pane:{type:"docs",data:{url:tx.ik.EXTENSIONS}}}),(0,oq.u4)(oq.AZ.EXTENSION_DEVELOPER_ONBOARDING_COMPLETED,{step:"learn"}),v()},icon:(0,c.Y)(vX.A,{})},{name:"publish",title:"Publish your Extension",complete:!!w,onClick:function(){t(1)},icon:(0,c.Y)(yl.A,{})}];return(0,c.Y)("section",{css:[ol.wp.width("100%")],children:(0,c.FD)(ou.S,{gap:12,children:[(0,c.Y)(ou.S,{gap:2,children:(0,c.FD)(ou.S,{row:!0,gap:12,css:[ol.wp.flex.wrap],align:"center",children:[(0,c.Y)(aA.EY,{variant:"subheadDefault",children:"Get started with Extensions"}),(0,c.FD)(ou.S,{row:!0,gap:12,align:"center",children:[(0,c.Y)(ou.S,{row:!0,gap:2,align:"center",justify:"center",children:Array.from({length:b.length}).map(function(e,n){return(0,c.Y)(ou.S,{css:[ol.wp.borderRadius(8),ol.wp.width(12),ol.wp.height(4),n<y?ol.wp.backgroundColor.accentPositiveDefault:ol.wp.backgroundColor.backgroundHighest]},n)})}),(0,c.Y)(aA.EY,{multiline:!1,variant:"small",color:"dimmer",children:"".concat(y,"/").concat(b.length)}),(0,c.Y)(u1.K0,{alt:"Hide section",onClick:o,children:(0,c.Y)(sr.A,{})})]})]})}),(0,c.Y)(ou.S,{tag:"ul",css:[ol.wp.flex.wrap,{listStyleType:"none",gap:rI.LU.space8}],row:!0,children:b.map(function(e,n){return(0,c.Y)(yc,(0,p._)({},e),n)})})]})})};var yd=t(85454);function yp(e){var n=e.performPaneOperation,t=e.setSelectedTab,r=wq(),i=r.__status,o=r.parsed,a=r.state,l=r.updateString;if("loading"===i)return(0,c.Y)(wK,{});if("fileReadError"===i)return(0,c.Y)(w0,{message:(null==a?void 0:a.fileReadError)||"Unknown error"});if("fileParseError"===i){var u=o.error;return(0,c.Y)(wX,{performPaneOperation:n,manifestPath:a.manifestPath,error:u})}var s=o.manifest;return"success"===i&&s?(0,c.FD)(ou.S,{css:[ol.wp.width("100%")],pt:12,gap:24,align:"center",children:[(0,c.Y)(w6,{performPaneOperation:n,setSelectedTab:t}),(0,c.Y)(ys,{performPaneOperation:n,setSelectedTab:t}),(0,c.Y)(ou.S,{css:[ol.wp.border({direction:"bottom",width:4,color:rI.LU.outlineDimmest}),ol.wp.width("100%")]}),(0,c.FD)(ou.S,{gap:8,css:[ol.wp.width("100%")],children:[(0,c.FD)(ou.S,{gap:2,children:[(0,c.FD)(ou.S,{row:!0,gap:8,align:"center",children:[(0,c.Y)(yd.A,{}),(0,c.Y)(aA.EY,{variant:"subheadDefault",multiline:!1,children:"Permission Scopes"})]}),(0,c.FD)(aA.EY,{variant:"small",color:"dimmer",children:["Let users know what your Extension can do with their data. For more information,"," ",(0,c.Y)("a",{onClick:function(){return n({operation:"open",secondary:!0,pane:{type:"docs",data:{url:tx.ik.EXTENSIONS+"/api/manifest#scopetype"}}})},children:"read the docs"}),"."]})]}),(0,c.Y)(ou.S,{css:[ol.wp.borderRadius(4),ol.wp.border({color:rI.LU.outlineDimmest,width:1}),ol.wp.flex.row,ol.wp.align.center,ol.wp.p(8),ol.wp.flex.wrap,{gap:12},ol.wp.width("fit-content")],children:wx.W.map(function(e){var n;return(0,c.FD)(ou.S,{row:!0,gap:6,align:"center",children:[(0,c.Y)(l8.S,{id:e.key,checked:null==(n=s.scopes)?void 0:n.some(function(n){return n.name===e.key}),onChange:function(n){var t,r,i,o=(null==(t=s.scopes)?void 0:t.some(function(n){return n.name===e.key}))&&!n?wy.F6(a.manifestStr,(0,r9._)((0,p._)({},s),{scopes:null==(r=s.scopes)?void 0:r.filter(function(n){return n.name!==e.key})})):wy.F6(a.manifestStr,(0,r9._)((0,p._)({},s),{scopes:(0,eA._)(null!=(i=s.scopes)?i:[]).concat([{name:e.key,reason:e.description}])}));a.writeChange((0,wb.s)(a.manifestStr,o)),l(o)}}),(0,c.Y)("label",{htmlFor:e.key,css:[ol.wp.fontSize(12),ol.wp.cursor.pointer],children:(0,c.Y)("abbr",{title:e.description,css:[{textDecorationColor:rI.LU.foregroundDimmest}],children:e.friendlyName})})]},e.key)})})]}),(0,c.Y)(yi,{performPaneOperation:n,manifest:s,update:function(e){var n=wy.F6(a.manifestStr,e);a.writeChange((0,wb.s)(a.manifestStr,n)),l(n)}})]}):(0,c.Y)("div",{children:"unknown state"})}var yf=t(82874),yh=t(20744),yg=t(4284),ym=t(653),yv=t(93717),yw=(0,rC.x)({logViewerTopLevel:[ol.wp.height("100%")],logsContainer:[ol.wp.scrollbar.thin,ol.wp.backgroundColor.backgroundDefault,ol.wp.overflowY("scroll"),ol.wp.flex.growAndShrink(1)],logViewerHeader:[ol.wp.border({direction:"bottom",width:rI.LU.borderWidthDefault}),ol.wp.display.flex,ol.wp.flex.row,ol.wp.rowWithGap(8),ol.wp.align.center],logViewerHeaderControl:[ol.wp.flex.row,ol.wp.rowWithGap(4),ol.wp.align.center],logLine:[ol.wp.font.code,dV.b.listItem,ol.wp.rowWithGap(2),ol.wp.align.center],logLineIcon:[{alignSelf:"flex-start"}],logMessage:{flex:"1 1 0"}});function yy(e){var n=e.log,t=e.prevLevel,r=e.isLast,i=e.isFirst,o=(0,u._)((0,d.useState)(!1),2),a=o[0],l=o[1],s=(0,yh.A)().ref;return(0,c.FD)(ou.S,{css:[ol.wp.flex.column,function(e){if(e===ym.$.warn)return{color:rI.LU.yellowStronger,background:"rgba(150, 125, 0, 0.2)",borderTop:i?void 0:"1px solid rgba(150, 125, 0, 0.5)",borderBottom:r?"1px solid rgba(150, 125, 0, 0.5)":void 0,"& .cm-gutter":{backgroundColor:"rgba(150, 125, 0, 0.2)"}};if(e===ym.$.error)return{color:rI.LU.accentNegativeStronger,backgroundColor:"rgba(229, 34, 34, 0.2)",borderTop:i?void 0:"1px solid rgba(229, 34, 34, 0.5)",borderBottom:r?"1px solid rgba(229, 34, 34, 0.5)":void 0,"& .cm-gutter":{backgroundColor:"rgba(229, 34, 34, 0.2)"}};var n=rI.LU.backgroundHigher;return t===ym.$.warn?n="rgba(150, 125, 0, 0.5)":t===ym.$.error&&(n="rgba(229, 34, 34, 0.5)"),{color:rI.LU.foregroundDefault,borderTop:i?void 0:"1px solid ".concat(n),borderBottom:r?"1px solid ".concat(n):void 0}}(n.logLevel)],children:[(0,c.FD)(ou.S,{css:yw.logLine,p:2,onClick:function(){return l(function(e){return!e})},children:[(0,c.Y)(ou.S,{css:yw.logLineIcon,p:4,children:(0,c.Y)(function(){return n.logLevel===ym.$.warn?(0,c.Y)(fC.A,{size:16}):n.logLevel===ym.$.error?(0,c.Y)(yv.A,{size:16}):(0,c.Y)(wk.A,{size:16,css:{opacity:0}})},{})}),(0,c.Y)(aA.EY,{maxLines:10,css:yw.logMessage,variant:"small",children:n.message}),a?(0,c.Y)(fc.A,{size:16}):(0,c.Y)(pg.A,{size:16})]}),a?(0,c.Y)(ou.S,{children:(0,c.Y)(yf.Ay,{ref:s,css:yg.$1,noHistory:!0,readOnly:!0,lineWrapping:!0,language:"json",fontSize:12,initialDoc:JSON.stringify(n,null,2)})}):null]})}let yb=function(){var e=(0,lJ.Du)(a7.MN),n=(0,lJ.Ol)(a7.KO),t=(0,u._)((0,lJ.Cj)(a7.gT),2),r=t[0],i=t[1],o=(0,d.useRef)(null);return(0,d.useEffect)(function(){var e,n=o.current;n&&(null==(e=n.children[n.children.length-1])||e.scrollIntoView({behavior:"smooth"}))},[e]),(0,c.FD)(ou.S,{css:yw.logViewerTopLevel,children:[(0,c.FD)(ou.S,{className:"log-viewer-header",css:yw.logViewerHeader,p:8,children:[(0,c.Y)(ou.S,{css:yw.logViewerHeaderControl,style:{flexGrow:1},children:(0,c.Y)(v4.pd,{type:"search",placeholder:"Filter logs",value:null!=r?r:"",onChange:function(e){return i(e.target.value)}})}),(0,c.FD)(ou.S,{css:yw.logViewerHeaderControl,children:[(0,c.Y)(u1.K0,{alt:"Clear logs",onClick:function(){return n()},children:(0,c.Y)(sr.A,{id:"clear-logs"})}),(0,c.Y)("label",{htmlFor:"clear-logs",children:"Clear logs"})]})]}),(0,c.Y)(ou.S,{css:yw.logsContainer,innerRef:o,children:e.map(function(n,t){var r;return(0,c.Y)(yy,{log:n,prevLevel:null==(r=e[t-1])?void 0:r.logLevel,isFirst:0===t,isLast:t===e.length-1},n.index)})})]})};var yx=t(68295),y_=t(57933);function yS(){var e=(0,f._)(["\n  subscription ExtensionBuildLogs($extensionId: String!) {\n    extensionBuildDeployActionUpdates(input: { extensionId: $extensionId }) {\n      ... on ExtensionBuildDeployLogAction {\n        log\n      }\n      ... on ExtensionBuildDeployStatusAction {\n        status\n        message\n        build {\n          id\n        }\n      }\n    }\n  }\n"]);return yS=function(){return e},e}function yY(){var e=(0,f._)(["\n  mutation DeployExtension2(\n    $extensionId: String!\n    $replId: String!\n    $outputDirectory: String!\n    $buildCommand: String!\n  ) {\n    deployExtension2(\n      extensionId: $extensionId\n      replId: $replId\n      outputDirectory: $outputDirectory\n      buildCommand: $buildCommand\n    ) {\n      ... on Extension {\n        ...TopLevelExtension\n      }\n      ... on TooManyRequestsError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return yY=function(){return e},e}function yA(){var e=(0,f._)(["\n  query Publish2Extension($extensionId: String!) {\n    extension(id: $extensionId) {\n      ... on Extension {\n        id\n        user {\n          id\n          username\n        }\n        name\n        description\n        canDeployExtension\n      }\n      ... on NotFoundError {\n        message\n      }\n    }\n  }\n"]);return yA=function(){return e},e}function yI(){var e=(0,f._)(["\n  mutation CreateExtension($name: String!, $description: String!) {\n    createExtension(name: $name, description: $description) {\n      ... on Extension {\n        id\n        url\n      }\n      ... on UserError {\n        message\n      }\n      ... on TooManyRequestsError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n"]);return yI=function(){return e},e}function yC(){var e=(0,f._)(["\n  mutation UpdateExtension(\n    $extensionId: String!\n    $name: String\n    $description: String\n  ) {\n    updateExtension(\n      extensionId: $extensionId\n      name: $name\n      description: $description\n    ) {\n      ... on Extension {\n        id\n        name\n        description\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n"]);return yC=function(){return e},e}var yk={},yE=(0,h.J1)(yS()),yD=(0,h.J1)(yY(),ay.Fz),yR=(0,h.J1)(yA()),yF=(0,h.J1)(yI()),yU=(0,h.J1)(yC()),yP=t(56185),yO=ou.D.button,yT=function(e){return e.Pending="pending",e.Active="active",e.Complete="complete",e.Error="error",e}({}),yL=function(){return(0,c.Y)(ou.S,{css:[ol.wp.border({color:rI.LU.outlineDimmest,direction:"top"})],grow:!0,row:!0})},yM=function(e){var n=e.text,t=e.size,r=void 0===t?"default":t,i=e.state,o=e.onClick,a=e.disabled,l=e.hideLoadingIcon,u=(0,aY.J)(r),s=(0,aY.Jt)(r);return(0,c.Y)(yO,{type:"button",css:[ol.wp.reset.button,ol.wp.position.relative,o&&dV.b.nofill,ol.wp.px(8),ol.wp.py(2),ol.wp.borderRadius(4),ol.wp.rowWithGap(4),ol.wp.align.center,{borderRadius:rI.LU.borderRadiusRound}].concat((0,eA._)("error"===i?[ol.wp.color.accentNegativeStronger]:"active"===i?[ol.wp.backgroundColor.accentPrimaryDimmer,ol.wp.color.accentPrimaryStrongest]:"complete"===i?[ol.wp.color.accentPositiveStronger]:[ol.wp.color.foregroundDimmest])),onClick:o,disabled:a,children:(0,c.Y)(aY.EE,{text:n,iconSize:s,textVariant:u,iconRight:function(){if("error"===i)return(0,c.Y)(fC.A,{});if("active"===i){if(l)return;return(0,c.Y)(dc.A,{})}return"complete"===i?(0,c.Y)(pl.A,{}):(0,c.Y)(yd.A,{})}()})})},yG=t(40282),yN=t(50908),yz=t(89889),yH=t(2438),yB=t(97955),yW=function(e){return e.Details="Details",e.Init="Init",e.CreatingExtension="CreatingExtension",e.CreatingExtensionError="CreatingExtensionError",e.Queued="Queued",e.Deploying="Deploying",e.DeployError="DeployError",e.Success="Success",e}(yW||{}),yj=["CreatingExtension","Deploying"],y$=function(e){return e.Details="Details",e.Init="Configure",e.Create="Create",e.Deploy="Deploy",e}(y$||{}),yq=["Details","Configure","Deploy"];function yV(e){var n,t,r,i,o,a=e.performPaneOperation,l=(0,o1.A)(),s=l.container,f=l.fs,h=l.dotReplit,g=(0,u._)((n=(0,p._)({},yk,void 0),y_._(yR,n)),1)[0],v=(0,yo.g)("extensions-onboarding-checklist-".concat("publish")).setAsDone,w=(0,u._)((0,d.useState)(null),2),y=w[0],b=w[1],x=(0,u._)((0,d.useState)("Details"),2),_=x[0],S=x[1],Y=(0,u._)((0,d.useState)(null),2),A=Y[0],I=Y[1],C=wq(),k=C.__status,E=C.parsed,D=C.state,R=C.updateManifest,F=(0,yP.W)("",function(e){return e?e.startsWith("/")?{message:'Folder must be relative to the root of your project (e.g. "extension" or "./extension")',severity:"error"}:null:{message:"Output folder is required",severity:"error"}}),U=F.value,P=F.setValue,O=F.error,T=F.validate,L=(0,u._)((0,d.useState)([]),2),M=L[0],G=L[1],N=(0,d.useCallback)(function(e){return a({operation:"open",secondary:!0,pane:{type:(0,e6.QY)(e),data:e}})},[a]),z=(0,u._)((0,yG.A)({openFile:N,listFiles:f.listFiles}),2),H=z[0],B=z[1],W=(0,yN.V)();t=(0,p._)({},yk,{variables:{extensionId:null!=y?y:""},onData:function(e){var n=e.data;if(n.data&&!n.error){var t=n.data.extensionBuildDeployActionUpdates;"ExtensionBuildDeployLogAction"===t.__typename&&G(function(e){return(0,eA._)(e).concat((0,eA._)(t.log))}),"ExtensionBuildDeployStatusAction"===t.__typename&&(t.status===fN.nHS.Success?S("Success"):t.status===fN.nHS.Failed&&S("DeployError"))}},skip:"Deploying"!==_||!y}),yx.R(yE,t),(0,d.useEffect)(function(){H&&(H.clear(),M.forEach(function(e){H.write(e.replaceAll("\n","\r\n"))}))},[M,H]);var j=(0,d.useCallback)(function(e){if(null==e?void 0:e.config){var n=e.config.extension;if(!n||!1===n.isExtension){b(null),I(null),P(null);return}n.buildCommand&&I(n.buildCommand),n.outputDirectory&&P(n.outputDirectory),n.extensionID&&b(n.extensionID)}},[P]);(0,d.useEffect)(function(){var e=!1;return(0,tS._)(function(){var n;return(0,tY.YH)(this,function(t){switch(t.label){case 0:return[4,h.getConfig()];case 1:if(n=t.sent(),e)return[2];return j(n),[2]}})})(),function(){e=!0}},[h,j]);var $=(0,d.useCallback)(function(e){return(0,tS._)(function(){return(0,tY.YH)(this,function(n){switch(n.label){case 0:return b(e),[4,h.updateDotReplit([{op:"add",path:"extension/extensionID",value:JSON.stringify(e)},{op:"add",path:"extension/isExtension",value:JSON.stringify(!0)}])];case 1:return n.sent(),[2]}})})()},[h]),q=(0,d.useCallback)(function(e){return(0,tS._)(function(){return(0,tY.YH)(this,function(n){switch(n.label){case 0:return I(e),[4,h.updateDotReplit([{op:"add",path:"extension/buildCommand",value:JSON.stringify(e)},{op:"add",path:"extension/isExtension",value:JSON.stringify(!0)}])];case 1:return n.sent(),[2]}})})()},[h]),V=(0,u._)((0,d.useState)(null),2),K=V[0],Z=V[1],J=(0,u._)((0,d.useState)(null),2),Q=J[0],X=J[1],ee=(0,u._)((0,d.useState)(null),2),en=ee[0],et=ee[1],ei=(0,u._)((0,d.useState)(null),2),eo=ei[0],ea=ei[1],el=(0,u._)((0,d.useState)(null),2),eu=el[0],ec=el[1],es=(0,u._)((r=(0,p._)({},yk,void 0),m.n(yD,r)),1)[0],ed=(0,er.A)(),ep=(0,u._)((i=(0,p._)({},yk,void 0),m.n(yF,i)),1)[0],ef=(0,u._)((0,d.useState)(null),2),eh=ef[0],eg=ef[1],em=(0,d.useCallback)(function(e){var n=e.name,t=e.description;return(0,tS._)(function(){var e,r,i;return(0,tY.YH)(this,function(o){switch(o.label){case 0:return[4,ep({variables:{name:n,description:t}})];case 1:if((r=o.sent()).errors)return[2,{error:r.errors.map(function(e){return e.message}).join(", "),result:null}];if(!(i=null==(e=r.data)?void 0:e.createExtension))return[2,{error:"Failed to create extension",result:null}];if("TooManyRequestsError"===i.__typename||"UserError"===i.__typename||"UnauthorizedError"===i.__typename)return[2,{error:"Failed to create extension: "+i.message,result:null}];if("Extension"===i.__typename)return[2,{error:null,result:i}];throw Error("Unexpected response from createExtension mutation")}})})()},[ep]),ev=(0,u._)((o=(0,p._)({},yk,void 0),m.n(yU,o)),1)[0],ew=(0,d.useCallback)(function(){return(0,tS._)(function(){var e,n,t,r,i,o,a,l,u,c,d,p,h,m,w,b,x,_;return(0,tY.YH)(this,function(Y){switch(Y.label){case 0:return e=y,[4,T()];case 1:if(null==(n=Y.sent())?void 0:n.message)return et(null==n?void 0:n.message),[2];if(!U)throw Error("expected output folder");return t=(0,lj.Fd)(U),(r=function(){S("Init"),G([]),ec(null),et(null),X(null),Z(null)})(),[4,f.flush()];case 2:if(Y.sent(),!e)return[3,11];return[4,g({variables:{extensionId:e}})];case 3:if((i=Y.sent()).error||!i.data)throw Error("Encountered an unknown error. Please contact support.");if((null==(o=i.data.extension)?void 0:o.__typename)!=="NotFoundError")return[3,5];return[4,new Promise(function(n){eg({message:"The extension referenced in .replit (".concat(e,") does not exist. Would you like to create a new extension?"),callback:function(e){eg(null),n(e)}})})];case 4:case 6:if(!Y.sent())return r(),[2];return e=null,[3,11];case 5:if(!((null==o?void 0:o.__typename)==="Extension"&&!o.canDeployExtension))return[3,7];return[4,new Promise(function(n){eg({message:"You do not have the permissions to deploy the extension referenced in .replit (".concat(e,"). Would you like to create a new extension?"),callback:function(e){eg(null),n(e)}})})];case 7:if(!((null==o?void 0:o.__typename)==="Extension"&&o.canDeployExtension))return[3,10];if(u=null==E||null==(a=E.manifest)?void 0:a.name,c=null==E||null==(l=E.manifest)?void 0:l.description,!(u&&u!==o.name||c&&c!==o.description))return[3,9];return[4,ev({variables:{extensionId:e,description:null!=c?c:void 0,name:null!=u?u:void 0}})];case 8:Y.sent(),Y.label=9;case 9:return[3,11];case 10:throw Error("Encountered an unknown error. Please contact support.");case 11:if(e)return[3,13];return S("CreatingExtension"),[4,em({name:null!=(h=null==E||null==(d=E.manifest)?void 0:d.name)?h:"My extension",description:null!=(m=null==E||null==(p=E.manifest)?void 0:p.description)?m:"My extension's description"})];case 12:if(null!==(w=Y.sent()).error)return S("CreatingExtensionError"),ea(w.error),[2];$(e=w.result.id),Y.label=13;case 13:var I;if(!e)throw Error("expected extension id to be set");return[4,(I=t,new Promise(function(e){var n=s.openChannel({service:"gcsfiles"},function(t){return t.channel.request({persistMirror:{path:I}}).then(function(t){t.ok,n(),e()}),function(e){e.willReconnect&&n()}})}))];case 14:Y.sent(),S("Queued"),Y.label=15;case 15:return Y.trys.push([15,17,,18]),[4,es({variables:{extensionId:e,replId:ed,outputDirectory:t,buildCommand:null!=A?A:""}})];case 16:return b=Y.sent(),[3,18];case 17:if(x=Y.sent(),S("DeployError"),x.message.includes("received message larger than max"))return ec("Your extension's size is too large. Please compress assets or remove files, and try again."),[2];return ec(x.message),[2];case 18:if(b.errors)return S("DeployError"),ec("Internal error. Please contact support: "+b.errors.map(function(e){return e.message}).join(", ")),[2];if(!b.data)return S("DeployError"),ec("Encountered an unknown error. Please contact support."),[2];if("Extension"===(_=b.data.deployExtension2).__typename)return S("Deploying"),v(),(0,oq.u4)(oq.AZ.EXTENSION_DEVELOPER_ONBOARDING_COMPLETED,{step:"publish"}),Z(_),[2];if("message"in _)return S("DeployError"),ec(_.message),[2];return S("DeployError"),ec("Encountered an unknown error. Please contact support."),[2]}})})()},[A,s,U,T,ed,f,S,es,g,ev,y,em,$,v,E]),ey=function(e){switch(e){case"Details":default:return"Details";case"Init":return"Configure";case"CreatingExtension":case"CreatingExtensionError":return"Create";case"Queued":case"Deploying":case"DeployError":return"Deploy"}}(_),eb=yq.indexOf(ey);function ex(){return Q?"Build error: ".concat(Q):en?"Validation error: ".concat(en):en?"Create extension error: ".concat(eo):eu?"Deploy error: ".concat(eu):void 0}var e_=(0,aU.Ot)().find(function(e){return e.extensionId===y}),eS=(0,u._)((0,d.useState)(!1),2),eY=eS[0],eI=eS[1],eC=(0,aU.Sc)(),ek=(0,d.useMemo)(function(){return eY?(0,c.Y)(dc.A,{}):e_?(0,c.Y)(pl.A,{}):(0,c.Y)(w4.A,{})},[eY,e_]),eE=(0,lQ.D)().values.global,eD=(0,go.mO)().fireBurst,eR=(0,u._)((0,d.useState)(!1),2),eF=eR[0],eU=eR[1],eP=(0,d.useRef)(null);if((0,d.useEffect)(function(){eP.current&&!eF&&"Success"===_&&(eD({x:eP.current.getBoundingClientRect().left,y:eP.current.getBoundingClientRect().top,heading:-45,numParticles:160,lifetime:1,spread:80,velocity:function(){return(0,go.Im)(300,5e3)},size:function(){return{width:(0,go.Im)(8,16),height:(0,go.Im)(8,16)}},color:[eE.tealStronger,eE.blurpleStronger,eE.yellowStronger]}),eD({x:eP.current.getBoundingClientRect().right,y:eP.current.getBoundingClientRect().top,heading:225,numParticles:160,lifetime:1,velocity:function(){return(0,go.Im)(300,5e3)},size:function(){return{width:(0,go.Im)(8,16),height:(0,go.Im)(8,16)}},color:[eE.blueStronger,eE.greenStronger,eE.pinkStronger]}),eU(!0))},[_,eE,eD,eF]),k===wV.loading)return(0,c.Y)(wK,{});if(k===wV.fileReadError)return(0,c.Y)(w0,{message:D.fileReadError});var eO=E.manifest,eT=E.error;return eT?(0,c.Y)(wX,{performPaneOperation:a,manifestPath:D.manifestPath,error:eT}):(0,c.FD)(ou.S,{css:[ol.wp.flex.column,ol.wp.display.flex,ol.wp.height("100%"),ol.wp.justify.center,ol.wp.align.center,ol.wp.position.relative],children:[(0,c.Y)(ou.S,{css:[ol.wp.position.absolute,ol.wp.top(0),ol.wp.left(0),ol.wp.right(0)],className:"Confetti",innerRef:eP}),(0,c.FD)(ou.S,{css:[ol.wp.width("100%"),ol.wp.maxWidth(ww.R)],grow:!0,shrink:!0,p:12,pt:16,gap:24,children:["Success"!==_?(0,c.FD)(c.FK,{children:[(0,c.FD)(ou.S,{gap:16,children:[(0,c.Y)(aA.EY,{variant:"subheadBig",multiline:!0,children:"Create a new release"}),(0,c.Y)(ou.S,{row:!0,gap:4,align:"center",children:yq.map(function(e,n){var t;return(0,c.FD)(d.Fragment,{children:[0!==n&&(0,c.Y)(yL,{}),(0,c.Y)(yM,{state:(t=n)<eb?yT.Complete:t!==eb?yT.Pending:["CreatingExtensionError","DeployError"].includes(_)?yT.Error:yT.Active,text:e,hideLoadingIcon:"Configure"===e||"Details"===e})]},e)})})]}),"Details"===_?(0,c.Y)(ou.S,{css:[ol.wp.flex.column,ol.wp.colWithGap(8),ol.wp.width("100%")],children:(0,c.Y)(w9,{manifest:eO,updateManifest:R,onSubmit:function(e){R((0,p._)({},eO,e)),S("Init")}})}):null,"Details"!==_?(0,c.FD)(c.FK,{children:[(0,c.FD)(ou.S,{gap:16,children:[(0,c.FD)(ou.S,{row:!0,gap:8,align:"center",children:[(0,c.Y)(yB.A,{}),(0,c.Y)(aA.EY,{variant:"subheadDefault",children:"Build settings"}),(0,c.Y)(ou.S,{css:[ol.wp.border({color:rI.LU.backgroundHighest,direction:"y"})],grow:!0})]}),(0,c.FD)(ou.S,{gap:4,children:[(0,c.FD)("label",{htmlFor:"buildCommand",css:[ol.wp.display.flex,ol.wp.rowWithGap(4),ol.wp.align.center],children:[(0,c.Y)(aA.EY,{color:"dimmer",variant:"small",children:"Build command (optional)"}),(0,c.Y)(uy.m_,{tooltip:"This is the command that compiles your app at build time. Leave it blank if you don't need to build your app.",children:(0,c.Y)(wk.A,{size:12})})]}),(0,c.Y)(v4.pd,{value:null!=A?A:"",onChange:function(e){return q(e.target.value)},placeholder:"Example: npm run build",disabled:"Init"!==_&&yj.includes(_)})]}),(0,c.FD)(ou.S,{gap:4,children:[(0,c.FD)("label",{htmlFor:"outputFolder",css:[ol.wp.display.flex,ol.wp.rowWithGap(4),ol.wp.align.center],children:[(0,c.Y)(aA.EY,{color:"dimmer",variant:"small",children:"Output folder"}),(0,c.Y)(uy.m_,{tooltip:"This is where your build will live. There must be an extension.json file in this folder.",children:(0,c.Y)(wk.A,{size:12})})]}),(0,c.Y)(v4.pd,{id:"outputFolder",value:null!=U?U:"",disabled:"Init"!==_&&yj.includes(_),onChange:function(e){P(e.currentTarget.value),h.updateDotReplit([{op:"add",path:"extension/outputDirectory",value:JSON.stringify(e.currentTarget.value)},{op:"add",path:"extension/isExtension",value:JSON.stringify(!0)}])},placeholder:"./extension"}),O?(0,c.Y)(aA.EY,{css:[ol.wp.color.accentNegativeStronger],children:O.message}):null]}),(0,c.Y)(aY.$n,{text:"Init"===_||_.endsWith("Error")?"Deploy and Release":"Deploying…",iconLeft:"Init"===_||_.endsWith("Error")?(0,c.Y)(hX.A,{}):(0,c.Y)(dc.A,{}),onClick:ew,disabled:"Init"!==_&&yj.includes(_),colorway:"primary"}),(0,c.FD)(aA.EY,{multiline:!0,variant:"small",color:"dimmer",children:["By releasing an Extension, you agree to the"," ",(0,c.Y)("a",{href:tx.aC.EXTENSIONS_DEVELOPER_TERMS,children:"Developer Terms"})]})]}),M.length>0?(0,c.FD)(ou.S,{gap:8,children:[(0,c.FD)(ou.S,{row:!0,gap:8,align:"center",children:[(0,c.Y)(yH.A,{}),(0,c.Y)(aA.EY,{variant:"subheadDefault",children:"Build logs"}),(0,c.Y)(ou.S,{css:[ol.wp.border({color:rI.LU.backgroundHighest,direction:"y"})],grow:!0})]}),ex()?(0,c.Y)(dz.N,{text:ex(),colorway:"red",icon:(0,c.Y)(yv.A,{})}):null,(0,c.Y)(ou.S,{css:[ol.wp.display.flex,ol.wp.py(12),ol.wp.pl(16),ol.wp.borderRadius(8),ol.wp.overflow("hidden"),{border:"1px solid ".concat(rI.LU.outlineDimmest),backgroundColor:null==W?void 0:W.background}],children:(0,c.Y)(ou.D.div,{css:[ol.wp.width("100%"),ol.wp.maxWidth("100%")],ref:B})})]}):null,eh?(0,c.FD)(af.ui,{elevated:!0,css:[ol.wp.borderRadius(8)],p:8,gap:8,children:[(0,c.Y)(aA.EY,{variant:"text",multiline:!0,maxLines:3,children:eh.message}),(0,c.FD)(ou.S,{row:!0,gap:4,align:"center",children:[(0,c.Y)(aY.$n,{text:"No",css:[ol.wp.flex.grow(1)],onClick:function(){return eh.callback(!1)}}),(0,c.Y)(aY.$n,{text:"Yes",colorway:"primary",css:[ol.wp.flex.grow(1)],onClick:function(){return eh.callback(!0)}})]})]}):null]}):null]}):null,K&&"Success"===_?(0,c.FD)(ou.S,{gap:16,children:[(0,c.FD)(ou.S,{gap:4,children:[(0,c.Y)(aA.EY,{variant:"subheadBig",multiline:!1,children:"Congratulations!"}),(0,c.Y)(aA.EY,{color:"dimmer",multiline:!1,children:"You just published a new release to the Extensions Store."})]}),(0,c.Y)(ou.S,{py:8,children:(0,c.Y)(yz.q,{showMetadata:!1,extension:K,onClick:function(){a({operation:"open",pane:{type:"extensionStore",data:{page:"cover",coverPageExtensionId:(0,a_.PM)(K.id)}}})}})}),(0,c.FD)(ou.S,{row:!0,gap:8,align:"center",children:[(0,c.Y)(ya.A,{}),(0,c.Y)(aA.EY,{variant:"subheadDefault",multiline:!1,children:"Next steps"}),(0,c.Y)(ou.S,{css:[ol.wp.border({color:rI.LU.backgroundHighest,direction:"y"})],grow:!0})]}),(0,c.FD)(ou.S,{css:[ol.wp.border({color:rI.LU.outlineDimmest}),ol.wp.borderRadius(8)],p:12,gap:8,children:[(0,c.Y)(aA.EY,{variant:"subheadDefault",children:"Install your Extension"}),(0,c.Y)(aA.EY,{color:"dimmer",children:"Once installed, you can use the extension in any of your Apps."}),(0,c.Y)(aY.$n,{text:e_?"Already installed":"Install Extension",colorway:e_?"green":"primary",disabled:eY||!!e_,iconLeft:ek,loading:eY,onClick:function(){return(0,tS._)(function(){return(0,tY.YH)(this,function(e){switch(e.label){case 0:return eI(!0),[4,eC({extensionId:(0,a_.PM)(K.id),replId:null})];case 1:return e.sent(),eI(!1),[2]}})})()}})]})]}):null]})]})}var yK=t(95508),yZ=t(86309);function yJ(e){var n=e.performPaneOperation,t=(0,u._)((0,d.useState)(0),2),r=t[0],i=t[1];return(0,c.Y)(ou.S,{css:[ol.wp.flex.column,ol.wp.height("100%"),ol.wp.position.relative],children:(0,c.FD)(yK.tU,{css:[ol.wp.flex.grow(1),ol.wp.flex.column,ol.wp.align.center,ol.wp.display.flex,ol.wp.overflow("hidden")],selectedIndex:r,onSelectionChange:function(e){return i(e)},children:[(0,c.Y)(af.ui,{css:[ol.wp.top(0),ol.wp.width("100%"),ol.wp.zIndex(1)],align:"center",children:(0,c.FD)(yK.wb,{css:[ol.wp.align.center,ol.wp.width("100%"),ol.wp.pb(0),ol.wp.maxWidth(ww.R)],children:[(0,c.Y)(yK.oz,{css:[ol.wp.p(12),ol.wp.height("100%"),ol.wp.borderRadius(0)],iconLeft:(0,c.Y)(hn.A,{}),children:"Home"}),(0,c.Y)(yK.oz,{css:[ol.wp.p(12),ol.wp.height("100%"),ol.wp.borderRadius(0)],iconLeft:(0,c.Y)(yZ.A,{}),children:"Releases"}),(0,c.Y)(yK.oz,{css:[ol.wp.p(12),ol.wp.height("100%"),ol.wp.borderRadius(0)],iconLeft:(0,c.Y)(yv.A,{}),children:"Logs"}),(0,c.Y)(ou.S,{grow:!0}),(0,c.Y)(af.ui,{css:[{boxShadow:"inset 0 -1px 0 ".concat(rI.LU.outlineDimmest)}],p:8,children:(0,c.Y)(aY.$n,{text:"Docs",onClick:function(){n({operation:"open",secondary:!0,pane:{type:"docs",data:{url:tx.ik.EXTENSIONS}}})},variant:"outlined",size:"small",iconLeft:(0,c.Y)(gc.A,{}),css:[ol.wp.display.inlineFlex]})})]})}),(0,c.FD)(yK.T2,{css:[ol.wp.flex.grow(1),ol.wp.align.center,ol.wp.justify.center,ol.wp.width("100%"),ol.wp.display.flex,ol.wp.overflow("hidden")],children:[(0,c.Y)(yK.Kp,{css:[ol.wp.height("100%"),ol.wp.p(12),ol.wp.maxWidth(ww.R),ol.wp.display.flex,ol.wp.width("100%"),ol.wp.justify.center,ol.wp.overflowY("scroll")],children:(0,c.Y)(yp,{performPaneOperation:n,setSelectedTab:i})}),(0,c.Y)(yK.Kp,{css:[ol.wp.height("100%"),ol.wp.width("100%"),ol.wp.overflowY("scroll")],children:(0,c.Y)(yV,{performPaneOperation:n})}),(0,c.Y)(yK.Kp,{css:[ol.wp.height("100%"),ol.wp.width("100%")],children:(0,c.Y)(yb,{})})]})]})})}var yQ=ec.ZU.Object({type:ec.ZU.Literal("extensionDevtools")}),yX={Content:function(e){var n=e.options.performPaneOperation;return(0,c.Y)(yJ,{performPaneOperation:n})},Icon:function(e){var n=e.size;return(0,c.Y)(l7.A,{size:n})},getTitle:function(){return"Extensions Devtools"},description:"Manage and debug workspace extensions",category:e6.bY.WorkspaceExtensions,decode:function(e){return m6.T(yQ,e)}},y0=t(50072),y1=t(41667);function y2(e){var n=rg(tT),t=(0,aU.Sc)(),r=(0,aU.l$)(),i=(0,aU.Ot)(),o=(0,d.useCallback)(function(t,r){if("cover"===t){if(null===r)return void o("store",null);n({paneId:e.paneId,pane:{type:"extensionStore",data:{coverPageExtensionId:null!=r?r:null,page:"cover"}}})}else n({paneId:e.paneId,pane:{type:"extensionStore",data:{page:t}}})},[n,e.paneId]);if("cover"===e.page){var a,l,u=null!=(l=null==(a=i.find(function(n){return n.extensionId===e.coverPageExtensionId}))?void 0:a.installationId)?l:null;return(0,c.Y)(y0.G,{existingInstallationId:u,extensionId:e.coverPageExtensionId,goBackToStore:function(){return o("store",null)},installExtension:function(){return(0,tS._)(function(){var n;return(0,tY.YH)(this,function(r){switch(r.label){case 0:return[4,t({extensionId:e.coverPageExtensionId,replId:null})];case 1:if(!(n=r.sent()))throw Error("Failed to install extension");return[2,(0,a_.qq)(n.id)]}})})()},uninstallExtension:function(e){return(0,tS._)(function(){return(0,tY.YH)(this,function(n){switch(n.label){case 0:return[4,r({installationId:e,replId:null})];case 1:return n.sent(),[2]}})})()}})}return(0,c.Y)(y1.A,{storeMode:"pane",openExtensionCover:function(e){return o("cover",e)},setPage:function(e){return o(e,null)},page:e.page})}var y4=ec.ZU.Union([ec.ZU.Object({page:ec.ZU.Union([ec.ZU.Literal("store"),ec.ZU.Literal("manage")])}),ec.ZU.Object({page:ec.ZU.Literal("cover"),coverPageExtensionId:ec.ZU.Unsafe(ec.ZU.String())})]),y5=ec.ZU.Object({type:ec.ZU.Literal("extensionStore"),data:y4}),y7={Content:function(e){return(0,c.Y)(y2,(0,r9._)((0,p._)({},e.pane.data),{paneId:e.options.paneId}))},Icon:function(e){var n=e.size;return(0,c.Y)(oc.Vx.Provider,{value:{color:rI.LU.yellowStronger,size:n},children:(0,c.Y)(l7.A,{})})},getTitle:function(){return"Extension Store"},description:"Find and install workspace extensions",category:e6.bY.WorkspaceExtensions,decode:function(e){return m6.T(y5,e)}},y3=t(74276),y8=ec.ZU.Object({type:ec.ZU.Literal("replAuth")}),y6=t(94647),y9={Content:y3.A,Icon:function(e){var n=e.size;return(0,c.Y)(oc.Vx.Provider,{value:{color:rI.LU.orangeStrongest,size:n},children:(0,c.Y)(y6.A,{})})},getTitle:function(){return"Authentication"},description:"Let users log in to your App using a prebuilt login page or customize your own button",category:e6.bY.CloudServices,decode:function(e){return m6.T(y8,e)}},be=function(e){var n;null==(n=e.focus)||n.call(e)};function bn(e){var n=e.isValid,t=e.move,r=e.focus,i=void 0===r?be:r,o=e.wrap,a=void 0!==o&&o,l=e.selector,u=e.boundary,c=(0,d.useRef)(null);return(0,d.useEffect)(function(){if(c.current){var e=c.current,r=function(r){if(!n(r))return;if(l)p=(0,eA._)(e.querySelectorAll(l));else{var o;o=e.querySelectorAll('a[href],button,input,textarea,select,details,[tabindex]:not([tabindex="-1"])'),p=(0,eA._)(o)}if(0!==p.length){var c=document.activeElement;if(e.contains(c)){if(l)if(u){var s=null==c?void 0:c.closest(u),d=null==c?void 0:c.closest(l);c=d||(null==s?void 0:s.querySelector(l))}else c=null==c?void 0:c.closest(l);if(l&&(!c||!e.contains(document.activeElement))){r.preventDefault(),r.stopPropagation();var p,f,h=null==(f=document.activeElement)?void 0:f.querySelector(l);h?i(h):i(p[0]);return}if(!c){r.preventDefault(),r.stopPropagation(),i(p[0]);return}var g=p.findIndex(function(e){return e===c});if(-1===g){r.preventDefault(),r.stopPropagation(),i(p[0]);return}var m=t({event:r,children:p,activeIndex:g,activeElement:c});!a&&(m<0||m>p.length-1)||(i(m<0?p[p.length-1]:m>p.length-1?p[0]:p[m]),r.stopPropagation(),r.preventDefault())}}};return e.addEventListener("keydown",r),function(){e.removeEventListener("keydown",r)}}},[u,n,t,i,c,l,a]),c}var bt=t(9871),br=(0,rC.x)({queryPill:[ol.wp.display.inline,ol.wp.fontSize(rI.LU.fontSizeDefault)],popover:[{"& > .popover-control-container":ol.wp.mr(0)}]});function bi(e){var n=e.text;return(0,c.Y)(fR.a,{css:br.queryPill,text:0===n.length?"⎵":n})}function bo(e){var n=e.query,t=e.replacement,r=e.numMatches,i=e.onCancel,o=e.onConfirm;return(0,c.FD)(ou.S,{gap:24,children:[(0,c.FD)(aA.EY,{children:["Replace ",(0,c.Y)(bi,{text:n})," with ",(0,c.Y)(bi,{text:t})," ","in ",(0,sy.A)("match",r,!0),"?"]}),(0,c.Y)(aA.EY,{children:"This operation cannot be undone!"}),(0,c.FD)(ou.S,{row:!0,gap:12,justify:"end",children:[(0,c.Y)(aY.$n,{onClick:function(){return i()},text:"Cancel"}),(0,c.Y)(aY.$n,{colorway:"negative",onClick:function(){return o()},text:"Yes, replace ".concat((0,sy.A)("match",r,!0)),iconLeft:(0,c.Y)(bt.A,{})})]})]})}function ba(e){var n=e.disabled,t=e.loading,r=e.query,i=e.replacement,o=e.results,a=e.replace,l=e.onReplace,s=e.buttonProps,f=(0,u._)((0,d.useState)(!1),2),h=f[0],g=f[1],m=(0,d.useMemo)(function(){return o.reduce(function(e,n){return e+n.lines.reduce(function(e,n){return e+n.matches.length},0)},0)},[o]);return(0,c.Y)(ou.S,{css:br.popover,children:(0,c.FD)(hz.A,{isOpen:h,maxWidth:400,showArrow:!0,children:[(0,c.Y)(aY.$n,(0,r9._)((0,p._)({},s),{text:"Replace all",disabled:n||t,onClick:function(){g(function(e){return!e})}})),(0,c.Y)(bo,{query:r,replacement:i,numMatches:m,onCancel:function(){return g(!1)},onConfirm:function(){return(0,tS._)(function(){return(0,tY.YH)(this,function(e){switch(e.label){case 0:return g(!1),(0,oq.u4)(oq.AZ.SEARCH_PANE_USED,{action:"replace"}),[4,a()];case 1:return e.sent().success&&l(),[2]}})})()}})]})})}var bl=t(77096),bu=(0,rC.x)({self:[ol.wp.position.relative,ol.wp.flex.shrink(1),ol.wp.width("100%")],iconWrapper:[ol.wp.position.absolute,ol.wp.top(0),ol.wp.right(0),ol.wp.height("100%"),ol.wp.p(4)]}),bc=(0,d.forwardRef)(function(e,n){var t,r=e.onClear,i=(0,st._)(e,["onClear"]);return(0,c.FD)(ou.S,{css:bu.self,children:[(0,c.Y)(bl.O,(0,p._)({ref:n},i)),((null==(t=i.value)?void 0:t.length)||0)>0?(0,c.Y)(ou.S,{css:bu.iconWrapper,children:(0,c.Y)(u1.K0,{alt:"Clear search query",tooltipBehavior:"hidden",onClick:r,css:{"&:hover":{backgroundColor:"".concat(rI.LU.backgroundHighest," !important")}},children:(0,c.Y)(sr.A,{})})}):null]})});bc.displayName="SearchInput";var bs=t(88356),bd=t(40180),bp=t(44232),bf=(0,rC.x)({self:[ol.wp.width("fit-content"),ol.wp.display.inlineBlock,ol.wp.color.accentNegativeDefault,ol.wp.fontWeight.bold]});function bh(e){var n=e.content;return(0,c.Y)(c.FK,{children:n.split("\n").reduce(function(e,n,t){return null===e?[n]:(0,eA._)(e).concat([(0,c.Y)(ou.D.span,{css:bf.self,children:"\\n"},"".concat(n,"-").concat(t)),n])},null)})}var bg=t(94122),bm=ou.D.span,bv="SearchMatch",bw=function(e){return e.HIGHLIGHT="highlight",e.REMOVE="remove",e.ADD="add",e.TEXT="text",e}(bw||{});function by(e){return{outlineColor:e,outlineWidth:"1px",outlineStyle:"solid"}}var bb=(0,rC.x)((o={self:[ol.wp.width("fit-content"),ol.wp.display.inline,ol.wp.cursor.pointer,{"&:focus-visible":[ol.wp.focusRing]},ol.wp.mx(1),ol.wp.px(2),ol.wp.borderRadius(4)]},(0,ty._)(o,"highlight",[ol.wp.backgroundColor.accentPrimaryDimmest,by(rI.LU.accentPrimaryDimmer)]),(0,ty._)(o,"remove",[ol.wp.backgroundColor.accentNegativeDimmest,by(rI.LU.accentNegativeDimmer),{textDecoration:"line-through"}]),(0,ty._)(o,"add",[ol.wp.backgroundColor.accentPositiveDimmest,by(rI.LU.accentPositiveDimmer)]),(0,ty._)(o,"hiddenTextWrapper",[ol.wp.display.inlineBlock,ol.wp.mx(2),{"& > div":[ol.wp.display.inlineBlock],transform:"translateY(12.5%)"}]),(0,ty._)(o,"firstHiddenTextWrapper",[ol.wp.ml(0)]),(0,ty._)(o,"lastHiddenTextWrapper",[ol.wp.mr(0)]),o));function bx(e){var n=e.content,t=e.matches,r=e.dedentBy,i=e.replacement,o=e.isRegex,a=e.query,l=e.onOpenAtPosition;return(0,c.Y)(c.FK,{children:(function(e){for(var n=e.content,t=e.matches,r=e.dedentBy,i=e.replacement,o=[],a=r,l=0;l<t.length;l++){var u=t[l],c=u.start+u.length;o.push({start:a,end:u.start,type:"text"});var s=n.substring(u.start,c);i.length>0&&i!==s?(o.push({start:u.start,end:c,type:"remove"}),o.push({start:-1,end:c,type:"add"})):o.push({start:u.start,end:c,type:"highlight",matchIndex:l}),a=c}return o.push({start:a,end:n.length,type:"text"}),o})({content:n,matches:t,dedentBy:r,replacement:i}).map(function(e,t,r){var u=e.start,s=e.end,p=e.type,f="".concat(u,"-").concat(s),h=s-u;if("text"===p){var g=r[t+1];if(0===t&&h>50)return(0,c.FD)(d.Fragment,{children:[(0,c.Y)(bm,{css:[bb.hiddenTextWrapper,bb.firstHiddenTextWrapper],children:(0,c.Y)(u1.K0,{size:18,alt:"Jump to hidden text",onClick:function(){l(s-50)},children:(0,c.Y)(bg.A,{})})},f),(0,c.Y)("span",{children:n.substring(s-50,s)})]},f);if(t===r.length-1&&h>50)return(0,c.FD)(d.Fragment,{children:[(0,c.Y)("span",{children:n.substring(u,u+50)}),(0,c.Y)(bm,{css:[bb.hiddenTextWrapper,bb.lastHiddenTextWrapper],children:(0,c.Y)(u1.K0,{size:18,alt:"Jump to hidden text",onClick:function(){l(u+50)},children:(0,c.Y)(bg.A,{})})},f)]},f);if(g&&h>100)return(0,c.FD)(d.Fragment,{children:[(0,c.Y)("span",{children:n.substring(u,u+50)}),(0,c.Y)(bm,{css:bb.hiddenTextWrapper,children:(0,c.Y)(u1.K0,{size:18,alt:"Jump to hidden text",onClick:function(){l(u+50)},children:(0,c.Y)(bg.A,{})})},f),(0,c.Y)("span",{children:n.substring(s-50,s)})]},f)}var m=-1===u?i:n.substring(u,s);if("text"===p)return(0,c.Y)(d.Fragment,{children:m},f);var v=null,w=r[t-1];return"add"===p&&(null==w?void 0:w.type)==="remove"&&(v=n.substring(w.start,w.end)),(0,c.Y)(b_,{content:m,type:p,isRegex:o,query:a,replacement:i,removedText:v,onClick:function(e){e.stopPropagation(),l(s)}},f)})})}function b_(e){var n=e.content,t=e.type,r=e.isRegex,i=e.replacement,o=e.query,a=e.removedText,l=(0,st._)(e,["content","type","isRegex","replacement","query","removedText"]),u=n,s=void 0;switch(t){case"highlight":s="Matched text ".concat(u);break;case"remove":s="Removed text ".concat(u);break;case"add":if(s="Added text ".concat(u),r&&null!==a)try{u=a.replace(new RegExp(o),i.replaceAll(/\$[&`']/g,"$$$&"))}catch(e){}}return(0,c.Y)(ou.D.span,(0,r9._)((0,p._)({css:[bb.self,bb[t]],tabIndex:0,"aria-label":s,role:"button","data-nav":bv},l),{children:"add"===t?(0,c.Y)(bh,{content:u}):u}))}var bS=(0,rC.x)({self:[ol.wp.width("100%"),ol.wp.flex.wrap],text:[ol.wp.display.block,ol.wp.textAlign.center,{overflow:"visible",whiteSpace:"normal"}]});function bY(e){var n=e.error;return(0,c.FD)(ou.S,{css:bS.self,pt:8,pb:8,row:!0,gap:4,align:"center",justify:"center",children:[(0,c.Y)(fC.A,{}),(0,c.Y)(aA.EY,{css:bS.text,multiline:!1,children:n})]})}var bA=t(54812),bI=t(40042),bC="SearchLine",bk="--search-line-number-width",bE=(0,rC.x)({self:[ol.wp.overflow("hidden"),ol.wp.cursor.pointer,ol.wp.borderRadius(4),{"&:focus-visible":[ol.wp.focusRing],"&:hover, &:focus-visible":[ol.wp.backgroundColor.backgroundHighest]}],content:[ol.wp.font.code,ol.wp.maxWidth("100%"),ol.wp.width("fit-content"),{whiteSpace:"pre-wrap",overflowWrap:"break-word"}],lineNumberWrapper:[ol.wp.display.inlineBlock,ol.wp.color.foregroundDimmest,ol.wp.mr(8),ol.wp.pl(8)],lineNumber:[ol.wp.display.inlineBlock,ol.wp.textAlign.right,{width:"var(".concat(bk,")")}]});function bD(e){var n=e.lineNumber,t=e.content,r=e.matches,i=e.path,o=e.dedentBy,a=e.onFileLineClicked,l=(0,st._)(e,["lineNumber","content","matches","path","dedentBy","onFileLineClicked"]),u=(0,$.A)(function(){return function(e){(0,oq.u4)(oq.AZ.SEARCH_PANE_RESULT_CLICKED,(0,p._)({},l)),a({path:i,lineNumber:n,columnNumber:e})}},[n,l,i,a]),s=(0,$.A)(function(){return function(){var e=r.length>0?r[0]:null;u(e?e.start+e.length:0)}},[r,u]);return(0,c.FD)(ou.S,{tabIndex:0,css:bE.self,row:!0,gap:8,align:"stretch","data-nav":bC,onKeyDown:function(e){"Enter"===e.key&&(e.preventDefault(),e.stopPropagation(),s())},onClick:s,children:[(0,c.Y)(ou.S,{css:bE.lineNumberWrapper,children:(0,c.Y)(ou.S,{tag:"span",css:bE.lineNumber,"aria-label":"Line ".concat(n),children:n})}),(0,c.Y)("pre",{css:bE.content,children:(0,c.Y)(bx,{isRegex:l.isRegex,content:t,matches:r,dedentBy:o,query:l.query,replacement:l.replacement,onOpenAtPosition:u})})]})}var bR="SearchFileNav",bF="SearchFileHeaderNav",bU="SearchQueryNav",bP="SearchQueryTogglesNav",bO=parseInt(rI.zu.space24,10)+10,bT=(0,rC.x)({header:[ol.wp.rowWithGap(4),ol.wp.align.center,ol.wp.rowWithGap(6),ol.wp.flex.growAndShrink(1),ol.wp.overflow("hidden")],headerParentPathText:[ol.wp.flex.shrink(1e7)],headerFileNameText:[ol.wp.flex.shrink(1)],headerMatchesCountPill:[ol.wp.height(20),ol.wp.flex.shrink(0)],accordionWrapper:[ol.wp.mx(4),ol.wp.border({direction:"top",color:rI.LU.outlineDimmest})],accordionChildren:[ol.wp.p(4)],linesWrapper:[ol.wp.overflow("hidden"),ol.wp.borderRadius(4),ol.wp.font.code]});function bL(e){var n=e.path,t=e.lines,r=e.dedentBy,i=e.isFirst,o=e.expanded,a=e.onClick,l=e.scrollOffset,u=e.onFileLineClicked,s=e.searchResultBackgroundColor,f=(0,st._)(e,["path","lines","dedentBy","isFirst","expanded","onClick","scrollOffset","onFileLineClicked","searchResultBackgroundColor"]),h=(0,uO.g)("fontSize").preferences.fontSize,g=(0,d.useRef)(null),m=(0,$.A)(function(){return t.reduce(function(e,n){return e+n.matches.length},0)},[t]),v=(0,$.A)(function(){var e=t[t.length-1];if(!e)return{};var n=(0,bI.V)(e.lineNumber),r=(0,bA.s)(h);return(0,ty._)({fontSize:h,lineHeight:r},bk,"".concat(n,"ch"))},[t,h]);return(0,c.Y)(af.ui,{css:bT.accordionWrapper,style:v,"data-nav":bR,innerRef:g,children:(0,c.Y)(v1.A,{expanded:void 0===o||o,onClick:function(){a(g.current)},headerProps:{"data-nav":"".concat(bF," ").concat(bC," ").concat(i?"".concat(bU," ").concat(bP):""),style:{position:"sticky",zIndex:1,insetBlockStart:"-".concat(void 0===l?0:l,"px"),borderRadius:0,backgroundColor:s}},headerContent:(0,c.FD)(ou.S,{css:bT.header,children:[(0,c.Y)(ae.A,{path:n,size:16}),(0,c.Y)(aA.EY,{css:bT.headerFileNameText,multiline:!1,children:(0,ix.WP)(n)}),(0,c.Y)(aA.EY,{color:"dimmest",css:bT.headerParentPathText,multiline:!1,children:(0,ix._6)(n).replace(/^\.\//,"")}),(0,c.Y)(fR.a,{variant:"muted",text:"".concat(m," ").concat((0,sy.A)("match",m)),css:bT.headerMatchesCountPill})]}),children:(0,c.Y)(ou.S,{css:bT.accordionChildren,children:(0,c.Y)(ou.S,{css:bT.linesWrapper,children:t.map(function(e){return(0,c.Y)(bD,(0,r9._)((0,p._)({},e,f),{path:n,dedentBy:r,onFileLineClicked:u}),e.lineNumber)})})})})})}var bM=t(78143),bG=(0,rC.x)({container:[ol.wp.border({direction:"bottom",color:rI.LU.outlineDimmest})],actions:[ol.wp.display.flex,ol.wp.rowWithGap(4)]});function bN(e){var n="collapse"===e.collapseExpandAllState;return(0,c.FD)(ou.S,{css:bG.container,p:4,row:!0,align:"center",justify:"space-between",children:[(0,c.FD)(aA.EY,{color:"dimmer",children:[e.totalCount," results in ",(0,sy.A)("file",e.fileCount,!0)]}),(0,c.FD)(ou.S,{css:bG.actions,children:[(0,c.Y)(u1.K0,{alt:"Open New Search",onClick:e.onStartNewSearch,children:(0,c.Y)(u4.A,{})}),(0,c.Y)(u1.K0,{alt:n?"Collapse All":"Expand All",onClick:e.onToggleCollapseExpandAll,children:n?(0,c.Y)(uW.A,{}):(0,c.Y)(bM.A,{})})]})]})}var bz=t(92759),bH=(0,uw.i7)({from:{opacity:0},to:{opacity:1}}),bB=(0,rC.x)({listWrapper:[ol.wp.overflowY("auto"),ol.wp.flex.grow(1),{contain:"strict"}],list:[ol.wp.width("100%"),ol.wp.position.relative],listItem:[ol.wp.position.absolute,ol.wp.top(0),ol.wp.left(0),ol.wp.width("100%")],resultRow:[{animation:"".concat(bH," 120ms linear forwards")}]});function bW(e){var n,t,r,i,o,a,l,s,f,h,g=e.results,m=e.error,v=e.paneRef,w=e.onFileLineClicked,y=e.onOpenSearchPane,b=e.searchResultBackgroundColor,x=(0,st._)(e,["results","error","paneRef","onFileLineClicked","onOpenSearchPane","searchResultBackgroundColor"]),_=(0,$.A)(function(){return g.filter(function(e){return e.lines.length>0})},[g]),S=(0,$.A)(function(){return _.reduce(function(e,n){return e+n.lines.reduce(function(e,n){return e+n.matches.length},0)},0)},[_]),Y=(0,u._)((0,d.useState)({}),2),A=Y[0],I=Y[1],C=(0,d.useRef)(null),k=(0,bp.Te)({count:_.length,getScrollElement:function(){return C.current},estimateSize:function(e){var n;return function(e,n){var t=e.length;if(n)for(var r=n-24,i=0;i<e.length;i++){var o=e[i],a=9*(0,bI.V)(i)+9*o.content.length+4*o.matches.length;a>r&&(t+=Math.floor(r/a)+1)}return bO+20+24.39*t+2*t}(_[e].lines,null==v||null==(n=v.current)?void 0:n.offsetWidth)},overscan:3}),E=k.getVirtualItems(),D=(0,d.useRef)(null),R=(0,d.useCallback)(function(e){var n=C.current;if(n&&D.current!==e){if(e.matches('[data-nav*="'.concat(bF,'"]')))return void e.focus();var t=e.closest('[data-nav="'.concat(bR,'"]')),r=null==t?void 0:t.querySelector('[data-nav*="'.concat(bF,'"]'));if(!r)return void e.focus();var i=r.getBoundingClientRect();if(r.offsetTop+i.height>e.offsetTop){var o=e.offsetTop-i.height;D.current=e;var a=function(){n.scrollTop===o&&(n.removeEventListener("scroll",a),D.current===e&&(e.focus(),D.current=null))};n.addEventListener("scroll",a),n.scrollTo({top:o})}else e.focus()}},[]),F=(n={selector:'[data-nav*="'.concat(bF,'"]'),boundary:'[data-nav*="'.concat(bR,'"]')},t=(0,d.useCallback)(function(e){return"Tab"===e.key},[]),r=(0,d.useCallback)(function(e){var n=e.event,t=e.activeIndex;return n.shiftKey?t-1:t+1},[]),bn((0,r9._)((0,p._)({},n),{isValid:t,move:r}))),U=(i={selector:'[data-nav*="'.concat(bC,'"]'),focus:R},o=(0,d.useCallback)(function(e){return"ArrowUp"===e.key||"ArrowDown"===e.key},[]),a=(0,d.useCallback)(function(e){var n=e.event,t=e.activeIndex;return"ArrowUp"===n.key?t-1:t+1},[]),bn((0,r9._)((0,p._)({},i),{isValid:o,move:a}))),P=(l={selector:'[data-nav*="'.concat(bv,'"]'),focus:R},s=(0,d.useCallback)(function(e){return"ArrowLeft"===e.key||"ArrowRight"===e.key},[]),f=(0,d.useCallback)(function(e){var n=e.event,t=e.activeIndex;return"ArrowLeft"===n.key?t-1:t+1},[]),bn((0,r9._)((0,p._)({},l),{isValid:s,move:f}))),O=(0,bd.P)(F,U,P),T=(0,$.A)(function(){return _.length===Object.keys(A).length&&Object.values(A).every(Boolean)},[A,_.length]),L=null;return _.length>0?L=(0,c.FD)(c.FK,{children:[(0,c.Y)(bN,{fileCount:_.length,totalCount:S,collapseExpandAllState:T?"expand":"collapse",onToggleCollapseExpandAll:function(){T?I({}):I(_.reduce(function(e,n){return(0,r9._)((0,p._)({},e),(0,ty._)({},n.path,!0))},{}))},onStartNewSearch:y}),(0,c.Y)(ou.D.div,{ref:C,css:bB.listWrapper,children:(0,c.Y)(ou.S,{css:bB.list,style:{height:k.getTotalSize()},children:(0,c.Y)(ou.S,{css:bB.listItem,style:{transform:"translateY(".concat(null==(h=E[0])?void 0:h.start,"px)")},innerRef:O,children:E.map(function(e){var n,t=_[e.index],r=t.path;return(0,c.Y)(ou.D.div,{"data-index":e.index,ref:k.measureElement,css:bB.resultRow,children:(0,c.Y)(bL,(0,r9._)((0,p._)({},t,x),{scrollOffset:null==(n=E[0])?void 0:n.start,onFileLineClicked:w,isFirst:0===e.index,expanded:!0!==A[r],searchResultBackgroundColor:b,onClick:function(e){if(I(function(e){return(0,r9._)((0,p._)({},e),(0,ty._)({},r,!(r in e)||!e[r]))}),C.current&&e){var n,t,i=Math.floor(null!=(t=null==(n=E[0])?void 0:n.start)?t:0),o=Math.floor(C.current.scrollTop),a=e.offsetTop+i;a>o||C.current.scrollTo({top:a-1})}}}))},e.key.toString())})})})})]}):m===bz.F.EMPTY_RESULTS&&(L=(0,c.Y)(vd.A,{pane:{type:"searchReplace"},headerText:m})),(0,c.FD)(c.FK,{children:[m&&m!==bz.F.EMPTY_RESULTS?(0,c.Y)(bY,{error:m}):null,L]})}var bj=t(35196);function b$(e){return(0,d.useMemo)(function(){return(0,eA._)((0,bj.l0)(e,",")).map(function(e){return e.trim()}).filter(function(e){return e.length>0})},[e])}var bq=function(e){return e.QUERY_EMPTY="The query is empty",e.QUERY_SAME="The query is the same as replacement",e.NO_MATCHES="No matches were found to replace",e.RG_EMPTY="Ripgrep didn't return a response",e.NOT_MOUNTED="Component wasn't mounted",e}({}),bV=t(31246),bK=t(59438),bZ=t(86878),bJ=t(31957),bQ=t(72418),bX=t(14354),b0=t(15037),b1="SearchQueryControlsNav",b2="SearchQueryExcludeNav",b4="SearchQueryControlsColumnNav",b5=(0,uw.i7)({from:{transform:"scaleX(0)"},to:{transform:"scaleX(0.9)"}}),b7=ol.kL.min(360),b3=(0,rC.x)({self:[ol.wp.height("100%"),ol.wp.width("100%"),ol.wp.overflow("hidden"),ol.wp.px(4),ol.wp.container()],filesIncludeExcludeWrapper:[ol.wp.mt(6),ol.wp.border({direction:"top",color:rI.LU.outlineDimmest}),(0,ty._)({},b7,[ol.wp.rowWithGap(6),ol.wp.align.start,ol.wp.mt(0),{border:"none"}])],inputWithLabel:[ol.wp.flex.growAndShrink(1),ol.wp.colWithGap(1)],inputLabelText:[{userSelect:"none"},ol.wp.color.foregroundDimmest,ol.wp.truncate,{fontSize:rI.LU.fontSizeSmall}],inputLabel:[ol.wp.flex.shrink(1),ol.wp.m(0),{lineHeight:1}],input:[ol.wp.viewStyle,ol.wp.border(),{blockSize:rI.LU.space32,"::placeholder":{color:rI.LU.foregroundDimmest},"&:hover::placeholder":{color:rI.LU.foregroundDimmer},"&:focus::placeholder, &:hover:focus::placeholder":{color:rI.LU.foregroundDimmest},":not([disabled])":{cursor:"text",":focus":{boxShadow:"none"}}}],optionsWrapper:[ol.wp.rowWithGap(2),ol.wp.align.center,(0,ty._)({order:2},b7,[{order:1," > *":ol.wp.height("100%")}])],closeWrapper:[(0,ty._)({order:1},b7,{order:2," > *":ol.wp.height("100%")})],results:[ol.wp.position.relative,{flex:"1 1 auto"}],searchWrapper:[{flex:"0 1 auto"}],expandCollapseButton:[ol.wp.height(32)],searchInputAndOptionsWrapper:(0,ty._)({flex:1,display:"grid",gap:4,gridTemplateColumns:"1fr max-content"},b7,{gridTemplateColumns:"1fr max-content max-content"}),replacementWrapper:[ol.wp.ml(24),ol.wp.pl(4),ol.wp.pb(6)],replaceInputWrapper:[ol.wp.border({direction:"top",color:rI.LU.outlineDimmest}),(0,ty._)({},b7,[ol.wp.rowWithGap(4),ol.wp.pt(0),ol.wp.align.center,{border:"none"}])],loadingBar:[ol.wp.position.absolute,ol.wp.mt(2),ol.wp.height(1),ol.wp.borderRadius(2),ol.wp.width("100%"),ol.wp.backgroundColor.accentPrimaryDimmer,{animation:"".concat(b5," 20s 1s ease forwards"),transformOrigin:"center left",transform:"scaleX(0)"}]});function b8(e){var n=e.updateData,t=e.query,r=e.setQuery,i=e.isRegex,o=e.setIsRegex,a=e.isCaseSensitive,l=e.setIsCaseSensitive,u=e.isMatchingWholeWords,s=e.setIsMatchingWholeWords,d=e.isCollapsed,p=e.setIsCollapsed,f=e.executeSearch,h=e.searchInputRef,g=e.onCloseRequested;return(0,c.FD)(ou.S,{css:b3.searchWrapper,pb:4,row:!0,gap:4,children:[(0,c.Y)(u1.K0,{onClick:function(){return p(function(e){return!e})},alt:d?"Show replacement options":"Hide replacement options",css:b3.expandCollapseButton,children:d?(0,c.Y)(pg.A,{}):(0,c.Y)(fc.A,{})}),(0,c.FD)(ou.S,{css:b3.searchInputAndOptionsWrapper,children:[(0,c.Y)(bc,{"data-nav":"".concat(bU," ").concat(b1),ref:h,autoSize:!0,placeholder:"Search",value:t,css:b3.input,onChange:function(e){r(e),n({initialQuery:e})},onClear:function(){r(""),n({initialQuery:""})},onKeyDown:function(e){"Enter"!==e.key||(0,uT.T$)(e)||e.shiftKey||(e.preventDefault(),e.stopPropagation(),f())}}),(0,c.FD)(ou.S,{css:b3.optionsWrapper,children:[(0,c.Y)(bs.A,{alt:"case sensitive","data-nav":"".concat(b1," ").concat(b4),icon:(0,c.Y)(bQ.A,{}),checked:a,onClick:function(){return l(function(e){return!e})}}),(0,c.Y)(bs.A,{alt:"regular expressions","data-nav":"".concat(b1," ").concat(b4),icon:(0,c.Y)(bX.A,{}),checked:i,onClick:function(){return o(function(e){return!e})}}),(0,c.Y)(bs.A,{alt:"whole words","data-nav":"".concat(b1," ").concat(b4),icon:(0,c.Y)(b0.A,{}),checked:u,onClick:function(){return s(function(e){return!e})}})]}),(0,c.Y)(ou.S,{css:b3.closeWrapper,row:!0,gap:2,align:"center",children:g?(0,c.Y)(u1.K0,{onClick:g,alt:"Close",children:(0,c.Y)(sr.A,{})}):null})]})]})}function b6(e){var n=e.updateData,t=e.replacement,r=e.setReplacement,i=e.query,o=e.replaceLoading,a=e.search,l=e.includeGlob,u=e.setIncludeGlob,s=e.excludeGlob,d=e.setExcludeGlob,p=e.replace,f=e.results;return(0,c.FD)(ou.S,{css:b3.replacementWrapper,children:[(0,c.FD)(ou.S,{css:b3.replaceInputWrapper,pt:8,gap:6,children:[(0,c.Y)(bc,{"data-nav":"".concat(bU," ").concat(b1," ").concat(b2),autoSize:!0,placeholder:"Replacement",value:t,css:b3.input,onChange:function(e){r(e),n({initialReplacement:e})},onClear:function(){r(""),n({initialReplacement:""})}}),(0,c.Y)(ou.S,{css:b3.optionsWrapper,children:(0,c.Y)(ba,{query:i,replacement:t,results:f,disabled:0===i.length,loading:o,replace:p,onReplace:a,buttonProps:{"data-nav":"".concat(b1," ").concat(bP," ").concat(b4)}})})]}),(0,c.FD)(ou.S,{css:b3.filesIncludeExcludeWrapper,pt:8,gap:8,children:[(0,c.FD)(ou.S,{css:b3.inputWithLabel,id:"filesToInclude",children:[(0,c.Y)("label",{htmlFor:"filesToIncludeInput",css:b3.inputLabel,children:(0,c.Y)(aA.EY,{css:b3.inputLabelText,color:"dimmer",multiline:!1,children:"Files to include"})}),(0,c.Y)(bc,{id:"filesToIncludeInput","data-nav":"".concat(bU," ").concat(b1),autoSize:!0,value:l,css:b3.input,placeholder:"e.g. **.js, src/**, app/",onChange:function(e){u(e),n({initialIncludeGlob:e})},onClear:function(){u(""),n({initialIncludeGlob:""})}})]}),(0,c.FD)(ou.S,{css:b3.inputWithLabel,id:"filesToExclude",children:[(0,c.Y)("label",{htmlFor:"filesToExcludeInput",css:b3.inputLabel,children:(0,c.Y)(aA.EY,{css:b3.inputLabelText,color:"dimmer",multiline:!1,children:"Files to exclude"})}),(0,c.Y)(bc,{id:"filesToExcludeInput","data-nav":"".concat(b1," ").concat(b2),autoSize:!0,value:s,css:b3.input,onChange:function(e){d(e),n({initialExcludeGlob:e})},onClear:function(){d(""),n({initialExcludeGlob:""})}})]})]})]})}function b9(e){var n,t,r,i,o,a,l,s,f,h,g,m,v,w,y,b,x,_,S,Y,A,I,C,k,E,D,R,F,U,P,O,L,M,G,N,z,H,B,W,j,q,V=e.isActive,K=e.initialQuery,Z=void 0===K?"":K,J=e.initialReplacement,Q=void 0===J?"":J,X=e.initialIncludeGlob,ee=void 0===X?"":X,en=e.initialExcludeGlob,et=void 0===en?"":en,er=e.searchInputRef,ei=e.onDataChanged,eo=e.onFileLineClicked,ea=e.onOpenSearchPane,el=e.onCloseRequested,eu=e.searchResultBackgroundColor,ec=(0,u._)((0,d.useState)(Z),2),es=ec[0],ed=ec[1],ep=(0,u._)((0,d.useState)(Q),2),ef=ep[0],eh=ep[1],eg=(0,u._)((0,d.useState)(!1),2),em=eg[0],ev=eg[1],ew=(0,u._)((0,d.useState)(!1),2),ey=ew[0],eb=ew[1],ex=(0,u._)((0,d.useState)(!1),2),e_=ex[0],eS=ex[1],eY=(0,u._)((0,d.useState)(!0),2),eI=eY[0],eC=eY[1],ek=(0,u._)((0,d.useState)(et),2),eE=ek[0],eD=ek[1],eR=(0,u._)((0,d.useState)(ee),2),eF=eR[0],eU=eR[1],eP=b$(eE),eO=b$(eF),eT=(0,d.useRef)(null),eL=(t=(n={query:es,isRegex:em,isCaseSensitive:ey,isMatchingWholeWords:e_,excludeGlobs:eP,includeGlobs:eO}).query,r=n.isRegex,i=n.isCaseSensitive,o=n.isMatchingWholeWords,l=void 0===(a=n.includeGlobs)?[]:a,f=void 0===(s=n.excludeGlobs)?[]:s,g=(h=(0,o1.A)()).container,m=h.dotReplit,v=(0,bZ.o)(m),w=(0,T._P)({controlName:"flag-code-search-latency-metrics",logFlagToAnalytics:!1}),b=(y=(0,u._)((0,d.useState)([]),2))[0],x=y[1],S=(_=(0,u._)((0,d.useState)(null),2))[0],Y=_[1],I=(A=(0,u._)((0,d.useState)(t.length>0),2))[0],C=A[1],k=(0,$.A)(function(){return(0,eA._)(f).concat((0,eA._)(v||[]),(0,eA._)(bK.TJ))},[f,v]),E=g.getConnectionState(),D=(0,d.useMemo)(function(){return(0,bJ.A)({container:g,onError:function(e){return Y(e)},onUpdate:function(e){return x(e)},onLoadingStateChange:function(e){return C(e)},isStreaming:!0,trackLatency:w})},[]),(0,d.useEffect)(function(){E===aT.KN.CONNECTED&&D({query:t,isRegex:r,isCaseSensitive:i,isMatchingWholeWords:o,includeGlobs:l,excludeGlobs:k})},[E,D,t,r,i,o,l,k,v]),{loading:I,error:S,data:b,search:function(){return D({query:t,isRegex:r,isCaseSensitive:i,isMatchingWholeWords:o,includeGlobs:l,excludeGlobs:k})}}),eM=eL.loading,eG=eL.error,eN=eL.data,ez=eL.search;(0,d4.A)(function(){""!==es&&(0,oq.u4)(oq.AZ.SEARCH_PANE_USED,{action:"search",isRegex:em,isCaseSensitive:ey,hasIncludes:eO.length>0,hasExcludes:eP.length>0})},[es,eO,eP,em,ey],1e3);var eH=(F=(R={replacement:ef,query:es,isRegex:em,isCaseSensitive:ey,isMatchingWholeWords:e_,excludeGlobs:eP,includeGlobs:eO,fileList:eG?void 0:eN}).query,U=R.replacement,P=R.fileList,O=(0,st._)(R,["query","replacement","fileList"]),L=(0,o1.A)().container,G=(M=(0,u._)((0,d.useState)(!1),2))[0],N=M[1],H=(z=(0,u._)((0,d.useState)(null),2))[0],B=z[1],j=(W=(0,u._)((0,d.useState)(!1),2))[0],q=W[1],{replace:(0,d.useCallback)(function(){return(0,tS._)(function(){var e;return(0,tY.YH)(this,function(n){switch(n.label){case 0:var t;return q(!0),B(null),[4,(t=(0,p._)({container:L,query:F,replacement:U,fileList:null==P?void 0:P.map(function(e){return e.path})},O),(0,tS._)(function(){var e,n,r,i,o,a,l,u,c;return(0,tY.YH)(this,function(s){switch(s.label){case 0:if(n=t.container,r=t.fileList,0===(i=(0,st._)(t,["container","fileList"])).query.length)return[2,{success:!1,errorOn:"exit",errorMessage:bq.QUERY_EMPTY}];if(i.query===i.replacement)return[2,{success:!1,errorOn:"exit",errorMessage:bq.QUERY_SAME}];if(!(r&&r.length>0))return[3,1];return o=r,[3,3];case 1:return[4,(a=n).exec.apply(a,(0,eA._)((0,bV.Qq)((0,r9._)((0,p._)({},i),{context:1,mode:"files"}))))];case 2:if((u=s.sent()).error)return[2,{success:!1,errorOn:"rg",errorMessage:"exit status 1"===u.error?bq.NO_MATCHES:u.error}];o=(null==(l=u.output)?void 0:l.split("\n").filter(function(e){return e.trim().length>0}))||[],s.label=3;case 3:var d,f,h,g,m,v,w,y;if(0===o.length)return[2,{success:!1,errorOn:"rg",errorMessage:bq.NO_MATCHES}];return[4,(e=n).exec.apply(e,(0,eA._)((f=(d=i).replacement,h=d.query,g=d.isRegex,m=d.isCaseSensitive,v=d.isMatchingWholeWords,w=["sd"],y=[h.indexOf("\n")>=0?"m":"e",m?"c":"i"],v&&y.push("w"),w.push("--flags",y.join("")),!g&&w.push("--string-mode"),h.startsWith("-")&&(h="\\"+h),w.push(h,f),w)).concat((0,eA._)(o)))];case 4:if((c=s.sent()).error)return[2,{success:!1,errorOn:"sd",errorMessage:c.error}];return[2,{success:!0}]}})})())];case 1:return(e=n.sent()).success||B(e.errorMessage),q(!1),N(e.success),[2,e]}})})()},[L,F,U,P,O]),loading:j,error:H,data:G}),eB=eH.loading,eW=eH.replace,ej=(0,d.useCallback)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};null==ei||ei({initialQuery:es,initialReplacement:ef,initialIncludeGlob:eF,initialExcludeGlob:eE},e)},[ei,es,ef,eE,eF]);(0,d.useLayoutEffect)(function(){ed(Z),eh(Q),eU(ee),eD(et)},[Z,Q,ee,et]);var e$=bn({selector:'[data-nav*="'.concat(bU,'"]'),isValid:function(e){var n="ArrowUp"===e.key||"ArrowDown"===e.key,t=e.target.matches('[data-nav*="'.concat(bU,'"]')),r=e.target.matches("[data-nav*=".concat(bF,"]"));return n&&t&&(e.altKey||r)},move:function(e){var n=e.event,t=e.activeIndex;return n.preventDefault(),n.stopPropagation(),"ArrowUp"===n.key?t-1:t+1}}),eq=bn({selector:'[data-nav*="'.concat(bP,'"]'),isValid:function(e){var n="ArrowUp"===e.key||"ArrowDown"===e.key,t=e.target.matches('[data-nav*="'.concat(bP,'"]')),r=e.target.matches("[data-nav*=".concat(bF,"]"));return n&&t&&!r},move:function(e){var n=e.event,t=e.activeIndex;return n.preventDefault(),n.stopPropagation(),"ArrowUp"===n.key?t-1:t+1}}),eV=bn({selector:'[data-nav*="'.concat(b4,'"]'),isValid:function(e){var n="ArrowUp"===e.key||"ArrowDown"===e.key;if(e.target.matches('[data-nav*="'.concat(bP,'"]'))&&"ArrowDown"===e.key)return!1;var t=e.target.matches('[data-nav*="'.concat(b4,'"]'));return n&&t},move:function(e){var n=e.event,t=e.activeIndex,r=e.children,i=n.target.matches('[data-nav*="'.concat(bP,'"]'));return(n.preventDefault(),n.stopPropagation(),i)?0:0===t&&"ArrowUp"===n.key?-1:r.length-1}}),eK=bn({selector:'[data-nav*="'.concat(b2,'"]'),isValid:function(e){var n="ArrowUp"===e.key||"ArrowDown"===e.key,t=e.target.matches('[data-nav*="'.concat(b2,'"]')),r=e.target.matches("[data-nav*=".concat(bU,"]"));return n&&e.altKey&&t&&!r},move:function(e){var n=e.event,t=e.activeIndex;return n.preventDefault(),n.stopPropagation(),"ArrowUp"===n.key?t-1:t+1}}),eZ=bn({selector:'[data-nav*="'.concat(b1,'"]'),isValid:function(e){var n="ArrowLeft"===e.key||"ArrowRight"===e.key,t=e.target.matches('[data-nav*="'.concat(b4,'"]'));return n&&(e.altKey||t)},move:function(e){var n=e.event,t=e.activeIndex;return n.preventDefault(),n.stopPropagation(),"ArrowLeft"===n.key?t-1:t+1}}),eJ=(0,aM.S)([e$,eq,eV,eK,eZ],{breadcrumb:"client/workspace/components/SearchReplace/index.tsx:661"}),eQ=(0,d.useCallback)(function(e){"Escape"===e.key&&(null==el||el())},[el]);return(0,c.FD)(ou.S,{css:b3.self,innerRef:eJ,onKeyDown:eQ,children:[(0,c.Y)(b8,{isActive:V,query:es,setQuery:ed,updateData:ej,isRegex:em,isCaseSensitive:ey,isMatchingWholeWords:e_,setIsRegex:ev,setIsCaseSensitive:eb,setIsMatchingWholeWords:eS,isCollapsed:eI,setIsCollapsed:eC,executeSearch:ez,searchInputRef:er,onCloseRequested:el}),eI?null:(0,c.Y)(b6,{replacement:ef,setReplacement:eh,updateData:ej,query:es,replaceLoading:eB,search:ez,includeGlob:eF,setIncludeGlob:eU,excludeGlob:eE,setExcludeGlob:eD,replace:eW,results:eN}),(0,c.FD)(ou.S,{css:b3.results,children:[eM?(0,c.Y)(ou.S,{css:b3.loadingBar},es):null,0===es.length&&0===eN.length?(0,c.Y)(vd.A,{pane:{type:"searchReplace"},bodyText:"Enter a search query above to see results."}):(0,c.Y)(bW,{isRegex:em,query:es,replacement:ef,include:eF,exclude:eE,results:eN,error:eG,paneRef:eT,onOpenSearchPane:ea,onFileLineClicked:eo,searchResultBackgroundColor:eu})]})]})}var xe=ec.ZU.Object({type:ec.ZU.Literal("searchReplace"),data:ec.ZU.Optional(ec.ZU.Object({initialQuery:ec.ZU.Optional(ec.ZU.String()),initialReplacement:ec.ZU.Optional(ec.ZU.String()),initialIncludeGlob:ec.ZU.Optional(ec.ZU.String()),initialExcludeGlob:ec.ZU.Optional(ec.ZU.String())}))}),xn={Content:function(e){var n=e.pane,t=e.options;return(0,c.Y)(xr,{paneData:(null==n?void 0:n.data)||{},isActive:t.isActive,performPaneOperation:t.performPaneOperation})},Icon:function(e){var n=e.size;return(0,c.Y)(oX.A,{size:n})},getTitle:function(e){var n,t=null==e||null==(n=e.data)?void 0:n.initialQuery;return t&&t.length>0?"Code Search: ".concat(t):"Code Search"},description:"Search through the text contents of your App",category:e6.bY.WorkspaceFeatures,decode:function(e){return m6.T(xe,e)}},xt=(0,rC.x)({wrapper:[ol.wp.height("100%"),ol.wp.width("100%")]});function xr(e){var n=e.paneData,t=e.isActive,r=e.performPaneOperation,i=(0,d.useRef)(null),o=(0,d.useCallback)(function(){var e,n;null==(e=i.current)||e.select(),null==(n=i.current)||n.focus()},[]);(0,o6.Qt)(function(){return{type:"searchReplace",focusSearchInput:o}},[o]),(0,o6.HP)(function(){return{focus:o}},[o]);var a=(0,d.useCallback)(function(e){r({operation:"open",pane:{type:"codeEditor",data:{path:e.path,line:e.lineNumber,col:e.columnNumber}},secondary:!0})},[r]),l=(0,d.useCallback)(function(){r({operation:"commit"}),r({operation:"open",pane:{type:"searchReplace"}})},[r]),u=(0,d.useCallback)(function(e,n){r({operation:"replace",pane:{type:"searchReplace",data:(0,p._)({},e,n)}})},[r]);return(0,c.Y)(ou.S,{css:xt.wrapper,pt:6,children:(0,c.Y)(b9,(0,r9._)((0,p._)({},n),{isActive:t,searchInputRef:i,onFileLineClicked:a,onOpenSearchPane:l,onDataChanged:u,searchResultBackgroundColor:rI.LU.backgroundDefault}))})}var xi=ec.ZU.Object({type:ec.ZU.Literal("threadInbox")}),xo={Content:function(e){var n=e.options;return(0,c.Y)(v8,{openFile:function(e){n.performPaneOperation({operation:"open",secondary:!0,pane:{type:"codeEditor",data:{path:e}}})}})},Icon:function(e){var n=e.size;return(0,c.Y)(oc.Vx.Provider,{value:{color:rI.LU.blueStronger,size:n},children:(0,c.Y)(vH.A,{})})},getTitle:function(){return"Threads"},description:"Comment and discuss topics with collaborators directly inside code or text files",category:e6.bY.Collaboration,decode:function(e){return m6.T(xi,e)}},xa=t(99585),xl=t(50558),xu=t(56765),xc=t(92420),xs=t(15460),xd=t(26760),xp=function(e){return e.Ready="READY",e.Loading="LOADING",e.Error="ERROR",e}(xp||{}),xf=function(e){var n=e.progress;return(0,c.Y)(uy.m_,{tooltip:"Progress: ".concat(Math.round(100*n*10)/10,"%"),children:(0,c.Y)(ou.S,{css:[ol.wp.width("100%"),ol.wp.height(4),ol.wp.backgroundColor.backgroundHigher],children:(0,c.Y)(ou.S,{css:[ol.wp.width("".concat(100*n,"%")),ol.wp.height("100%"),ol.wp.backgroundColor.purpleDefault]})})})},xh=ec.ZU.Object({type:ec.ZU.Literal("tutorial")}),xg={Content:function(){var e,n,t,r,i=(0,o1.A)().fs,o=(e=rf(iJ),n=rf(iX),t=rg(i1),n||!e?null:t),a=(0,d6.Jw)(xl.C.id,xl.j.Sidepane),l=(0,u._)((0,d.useState)([]),2),s=l[0],p=l[1],f=(0,u._)((0,d.useState)("LOADING"),2),h=f[0],g=f[1],m=(0,er.A)(),v=(0,u._)((0,xa.A)("tutorialProgress--".concat(m),0),2),w=v[0],y=v[1],b=(0,u._)((0,d.useState)(!1),2),x=b[0],_=b[1],S=(0,d.useRef)(null),Y=(0,aS.T)(),A=Y?Y.toString():"",I=(0,uH.vO)(),C=(0,uH.rM)(),k=(0,xc.A)(C),E=(0,$.A)(function(){return k?function(e){var n,t;return k({code:e,insertAt:null!=(t=null==(n=I())?void 0:n.position.offset)?t:"end"})}:void 0},[k,I]),D=(0,xd.wp)(A,m),R=D?(0,c.Y)(xd.Q9,{challenge:D}):null,F=(0,d.useCallback)(function(){S.current&&(S.current.scrollTop=0)},[S]);return((0,d.useEffect)(function(){var e=!1;return(0,tS._)(function(){var n,t,r,o,a,l,c,s,d,f,h,m,v,w;return(0,tY.YH)(this,function(y){switch(y.label){case 0:return g("LOADING"),[4,i.readDir(xs.T)];case 1:if(n=y.sent(),e)return[2];if(n.error)return g("ERROR"),[2];return t=[],[4,Promise.all(n.children.filter(function(e){var n;return e.type===tQ.pt.File&&(null==(n=bK.Jh.from(e.filename))?void 0:n.id)==="markdown"}).map(function(e){var n="".concat(xs.T,"/").concat(e.filename);return Promise.all([n,i.readFile(n)])}))];case 2:if(r=y.sent(),e)return[2];o=!0,a=!1,l=void 0;try{for(c=r[Symbol.iterator]();!(o=(s=c.next()).done);o=!0)f=(d=(0,u._)(s.value,2))[0],(h=d[1]).error?g("ERROR"):(v=h.content.toString(),w=RegExp("^#\\s(?<title>.*)").exec(v),t.push({title:null==w||null==(m=w.groups)?void 0:m.title,content:v,path:f}))}catch(e){a=!0,l=e}finally{try{o||null==c.return||c.return()}finally{if(a)throw l}}return p(t),g("READY"),[2]}})})(),function(){e=!0}},[i]),(0,d.useEffect)(function(){s[w]||y(0)},[w,y,s]),"LOADING"===h)?(0,c.Y)(ou.S,{css:[ol.wp.center],grow:!0,shrink:!0,children:(0,c.Y)(dc.A,{})}):"ERROR"===h?(0,c.Y)(ou.S,{css:[ol.wp.center],grow:!0,shrink:!0,children:(0,c.FD)(ou.S,{css:[ol.wp.center,ol.wp.colWithGap(4)],children:[(0,c.Y)(sr.A,{color:rI.LU.accentNegativeDefault}),(0,c.Y)(aA.EY,{color:"dimmer",multiline:!1,children:"Failed to load tutorial"})]})}):0===s.length?(0,c.Y)(ou.S,{css:[ol.wp.center],grow:!0,shrink:!0,children:(0,c.FD)(ou.S,{css:[ol.wp.center,ol.wp.colWithGap(4)],children:[(0,c.Y)(sr.A,{color:rI.LU.accentNegativeDefault}),(0,c.Y)(aA.EY,{color:"dimmer",multiline:!1,children:"No tutorials found!"})]})}):x?(0,c.FD)(ou.S,{css:[ol.wp.overflowY("scroll"),ol.wp.flex.growAndShrink(1),ol.wp.p(8),ol.wp.colWithGap(16)],children:[(0,c.Y)(aA.EY,{variant:"headerDefault",multiline:!1,children:"Table of Contents"}),(0,c.Y)(ou.S,{grow:!0,shrink:!0,gap:8,children:s.map(function(e,n){return(0,c.FD)(ou.S,{css:[w===n?ol.wp.backgroundColor.backgroundHighest:ol.wp.backgroundColor.backgroundHigher,ol.wp.borderRadius(4),ol.wp.rowWithGap(8),ol.wp.align.center,ol.wp.cursor.pointer,w===n?{outline:"solid 2px ".concat(rI.LU.outlineDimmest)}:{},{":hover":{outline:"solid 2px ".concat(rI.LU.outlineDimmest)}}],p:8,onClick:function(){y(n),_(!1)},children:[(0,c.Y)(ou.S,{css:[ol.wp.backgroundColor.backgroundHighest,ol.wp.width(20),ol.wp.height(20),ol.wp.borderRadius("full"),ol.wp.center,{outline:"solid 1px ".concat(rI.LU.outlineDimmest)}],children:(0,c.Y)(aA.EY,{variant:"small",color:"dimmest",multiline:!1,children:n+1})}),(0,c.Y)(aA.EY,{css:[ol.wp.maxWidth("80%")],multiline:!1,children:e.title})]},e.title)})})]}):(0,c.Y)(ou.S,{innerRef:a,css:[ol.wp.height("100%")],children:(0,c.FD)(ou.S,{dataCy:"tutorial-viewer-content",innerRef:S,css:[ol.wp.overflowY("scroll"),ol.wp.flex.growAndShrink(1),ol.wp.p(16),ol.wp.pb(48),ol.wp.colWithGap(16)],children:[o?(0,c.Y)(aY.$n,{text:"Show tutorial video",iconLeft:(0,c.Y)(cZ.A,{}),onClick:function(){return o()}}):null,R,s.length>1&&(0,c.Y)(aY.$n,{text:"Table of Contents",iconLeft:(0,c.Y)(yH.A,{}),onClick:function(){return _(!0)}}),(0,c.Y)(xu.A,{fs:i,path:s[w].path,source:s[w].content,sourcePos:!1,onCodeInsert:E}),s.length>1&&(0,c.FD)(ou.S,{css:[ol.wp.position.absolute,ol.wp.width("100%"),ol.wp.left(0),ol.wp.bottom(0),ol.wp.overflow("hidden")],children:[(0,c.Y)(xf,{progress:(w+1)/s.length}),(0,c.FD)(ou.S,{css:[ol.wp.width("100%"),ol.wp.height(40),ol.wp.align.center,ol.wp.flex.row],children:[(0,c.Y)(ou.S,{tag:"button",css:[ol.wp.backgroundColor.backgroundHigher,ol.wp.cursor.pointer,ol.wp.width(40),ol.wp.height("100%")],p:8,justify:"center",onClick:function(){w>0&&(y(function(e){return e-1}),F())},children:w>0&&(0,c.Y)(wF.A,{size:24})}),(0,c.Y)(ou.S,{tag:"button",css:[ol.wp.height("100%"),ol.wp.justify.spaceBetween,ol.wp.backgroundColor.backgroundHighest,ol.wp.align.center,ol.wp.p(8),ol.wp.cursor.pointer,{userSelect:"none"}],grow:!0,shrink:!0,row:!0,gap:8,onClick:function(){w<s.length-1&&(y(function(e){return e+1}),F())},children:w<s.length-1&&(0,c.FD)(c.FK,{children:[(0,c.FD)(aA.EY,{multiline:!1,css:[ol.wp.flex.growAndShrink(1),ol.wp.textAlign.left,ol.wp.fontSize(rI.LU.fontSizeSubheadDefault)],children:[(0,c.FD)("span",{css:[ol.wp.color.foregroundDimmer],children:["Next",s[w+1].title?": ":" page"]}),(0,c.Y)("b",{children:null!=(r=s[w+1].title)?r:""})]}),(0,c.Y)(pg.A,{size:24})]})})]})]})]})})},Icon:function(e){var n=e.size;return(0,c.Y)(gc.A,{size:n})},getTitle:function(){return"Tutorial"},category:e6.bY.Other,decode:function(e){return m6.T(xh,e)}},xm=t(91631),xv=t(5897),xw=t(95333),xy=t(61032),xb=t(99286),xx=t(51518),x_=t(7675),xS=t(43926),xY=t(61618),xA={Content:function(e){var n,t,r=e.pane.data,i=e.options.performPaneOperation,o=(0,d.useRef)(null),a=(0,B.jt)(),l=(0,xy.z)().isExpertMode,u=(0,o1.A)(),s=u.ports,f=u.container,h=(0,xm.w)(s),g=(0,d.useMemo)(function(){var e;return null!=(e=(0,xb.E)(r,h))?e:80},[r,h]),m=(0,xx.X)(g),v=(0,pT.A)(),w=v.didConnectOnce,y=v.didDisconnect,b=(0,d.useCallback)(function(e){i({operation:"open",secondary:!1,pane:e})},[i]),x=(0,d.useCallback)(function(){return b({type:"networking"})},[b]),_=(0,d.useCallback)(function(){return b({type:"deployments"})},[b]),S=null==r?void 0:r.previewScreenSize,Y=(0,d.useCallback)(function(e){i({operation:"replace",pane:{type:"webview",data:{previewScreenSize:e}}})},[i]),A=(0,xS.xQ)({openDeploymentsPane:_,includeSharing:!0}).getCommandGroups;return((0,o6.Qt)(function(){var e={type:"webview",refresh:function(){var e;null==(e=o.current)||e.refresh()},navigate:function(e,n){var t;null==(t=o.current)||t.navigateTo(e,n)}},n=A();return n.length>0?(0,r9._)((0,p._)({},e),{commands:n}):e},[A]),a&&!l)?(0,c.Y)(xI,{ref:o,initialPort:g,initialPath:null==r||null==(t=r.ports)?void 0:t.path,openPane:b,previewScreenSize:S,setPreviewScreenSize:Y}):m?(0,c.Y)(x_.A,{openNetworkingTool:x,didConnectOnce:w,didDisconnect:y}):(0,c.Y)(xb.Q,{ref:o,initialPort:g,initialPath:null==r||null==(n=r.ports)?void 0:n.path,openPane:b,ports:s,container:f,previewScreenSize:S,setPreviewScreenSize:Y})},Icon:function(e){var n=e.size;return(0,c.Y)(oc.Vx.Provider,{value:{size:n},children:(0,c.Y)(cV.A,{})})},getTitle:function(){return"Preview"},description:"Preview your App",category:e6.bY.WorkspaceFeatures,decode:xY.D4},xI=(0,d.forwardRef)(function(e,n){var t=e.initialPort,r=e.initialPath,i=e.openPane,o=e.previewScreenSize,a=e.setPreviewScreenSize,l=(0,xw.X5)(),u=(0,o1.A)(),s=u.ports,d=u.container;if(l.state!==xw.J4.READY&&l.state!==xw.J4.LAST_RESORT_READY)return(0,c.Y)(xv.j,{webviewState:l,openPane:i});var p=l.state===xw.J4.READY?l.presentPort:l.externalPort,f=l.state===xw.J4.READY?l.presentRoute:r;return(0,c.Y)(c.FK,{children:(0,c.Y)(xb.Q,{ref:n,initialPort:null!=p?p:t,initialPath:null!=f?f:r,ports:s,container:d,openPane:i,previewScreenSize:o,setPreviewScreenSize:a})})}),xC=t(34630),xk=t(79264),xE=t(66632),xD=t(50475),xR=t(3974),xF=(0,rk.v)(["opacity","pointerEvents"]),xU=xF.styleTokens,xP=xF.cssVars,xO={opacity:xU.opacity,pointerEvents:xU.pointerEvents},xT=t(38386),xL=(0,rk.v)(["transformX","transformY","hoverScaleX","hoverScaleY","width","height","zIndex","cursor","gripVisibility","gripColor","gripWidth","gripHeight","transitionDuration","rotation"]),xM=xL.cssVars,xG=xL.styleTokens,xN=(0,rC.x)({root:[ol.wp.center,ol.wp.position.absolute,ol.wp.top(0),ol.wp.left(0),(a={transform:"translate(".concat(xG.transformX,", ").concat(xG.transformY,")"),width:xG.width,height:xG.height,cursor:xG.cursor,zIndex:xG.zIndex},(0,ty._)(a,ol.$_.canHover,[{"&:hover":{zIndex:rA.W.gutterHovered}}]),(0,ty._)(a,"&:hover .blanket",{transform:"scale(".concat(xG.hoverScaleX,", ").concat(xG.hoverScaleY,")")}),(0,ty._)(a,"& .icon",{transform:"rotate(".concat(xG.rotation,")")}),(0,ty._)(a,"&:active .blanket",[ol.wp.height("200vh"),ol.wp.width("200vw"),{transform:"translate(-50%, -50%)"}]),(0,ty._)(a,"&:not(:active):hover > .grip",(0,ty._)({},xM.gripColor,rI.LU.foregroundDefault)),a)],blanket:ol.wp.coverContainer,grip:[ol.wp.borderRadius(4),{width:xG.gripWidth,height:xG.gripHeight,visibility:xG.gripVisibility,background:xG.gripColor,transitionProperty:"opacity, width, height, background-color",transitionTimingFunction:"ease-out"}]}),xz=(0,d.memo)(function(e){var n,t,r,i,o=function(e){var n,t,r,i,o,a,l,u,c,s=r7(e),d=r3(e),p=nB(d),f=nW(d),h=r8(e),g=(n=r7(e),(0,$.A)(function(){return(0,e$.mg)(n,function(e){return!!e.snapped})},[n])),m=r6(e),v=(t=nB(r3(e)),r=r6(e),(0,$.A)(function(){return(0,ei.eU)(function(e){var n=e(t),i=n.width,o=n.height;return e(r)?i:o})},[t,r])),w=(i=r7(e),(0,$.A)(function(){return(0,ei.eU)(function(e){var n=e(i),t=n.snapped,r=n.stacked;return"right"===t?r?180:90:"left"===t?270*!r:0})},[i])),y=(o=r6(e),a=r8(e),l=nB(r3(e)),(0,$.A)(function(){return(0,ei.eU)(function(e){var n=e(l),t=n.width,r=n.height,i=e(a),u=e(o),c=e(np);return u?{width:i?t:24,height:c?6:2}:{height:i?r:24,width:c?6:2}})},[l,o,a])),b=(u=nB(r3(e)),c=r6(e),(0,$.A)(function(){return(0,ei.eU)(function(e){var n=e(u),t=n.width,r=n.height;return(e(c)?t:r)<24})},[u,c]));return{handle:rh(s),size:rh(p),position:rh(f),isActive:rh(h),isSnapped:rh(g),isStacked:rh(m),length:rh(v),rotation:rh(w),gripSize:rh(y),gripIsHidden:rh(b)}}(e.handleId),a=(n=(0,d.useRef)(null),t=(0,gi.j)(),r=rf(np),(0,rY.d)(n,o.size,function(e){var n,t=e.width,r=e.height;return n={},(0,ty._)(n,xM.width,t+"px"),(0,ty._)(n,xM.height,r+"px"),n}),(0,rY.d)(n,o.position,function(e){var n,t=e.x,r=e.y;return n={},(0,ty._)(n,xM.transformX,Math.round(t)+"px"),(0,ty._)(n,xM.transformY,Math.round(r)+"px"),n}),(0,rY.d)(n,o.rotation,function(e){return(0,ty._)({},xM.rotation,e+"deg")}),(0,rY.d)(n,o.gripIsHidden,function(e){return(0,ty._)({},xM.gripVisibility,e?"hidden":"visible")}),(0,rY.d)(n,o.length,function(e){return(0,ty._)({},xM.transitionDuration,(t?0:Math.min(Math.max(100/e*1,.08),.12))+"ms")}),(0,rY.d)(n,rh(nr),function(e){var n,t;return"centeredVisualPlanner"===e?(n={},(0,ty._)(n,xP.pointerEvents,"none"),(0,ty._)(n,xP.opacity,"0"),n):(t={},(0,ty._)(t,xP.pointerEvents,"auto"),(0,ty._)(t,xP.opacity,"1"),t)}),i=r?3:2,(0,rY.d)(n,o.isStacked,function(e){var n;return n={},(0,ty._)(n,xM.cursor,e?"row-resize":"col-resize"),(0,ty._)(n,xM.hoverScaleX,(e?1:i).toString()),(0,ty._)(n,xM.hoverScaleY,(e?i:1).toString()),n}),(0,rY.d)(n,o.isActive,function(e){var n;return n={},(0,ty._)(n,xM.gripColor,e?"radial-gradient(circle, ".concat(rI.LU.accentPrimaryDefault," calc(100% - 48px), transparent)"):rI.LU.outlineDimmest),(0,ty._)(n,xM.zIndex,(e?rA.W.gutterActive:rA.W.gutter).toString()),n}),(0,rY.d)(n,o.gripSize,function(e){var n,t=e.width,r=e.height;return n={},(0,ty._)(n,xM.gripWidth,t+"px"),(0,ty._)(n,xM.gripHeight,r+"px"),n}),n),l=rg(r5),u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=(0,d.useRef)(e),t=rg(tB),r=rm(nf);return(0,d.useCallback)(function(i){if(i.snapped)return void t({leftPath:i.leftPath,percent:n.current});Promise.resolve(r()).then(function(r){var o=eC(r,i.leftPath);if(!o||!eS(o))throw Error("Expected split or paneGroup");n.current=o.percent,t({leftPath:i.leftPath,percent:e})})},[e,t,r])}(),s=(0,d.useRef)(null),p=(0,uf.A)(o.isSnapped);return(0,c.FD)(ou.S,{style:xO,innerRef:a,css:xN.root,onDoubleClick:function(){u(o.handle.current)},onPointerDown:function(e){(0,uh.j)(e,{start:function(){var e=o.handle.current;s.current=document.activeElement,l({type:"start",leftPath:e.leftPath,stacked:e.stacked})},move:function(e){l({type:"update",moveDelta:e.delta})},end:function(){var e,n;l({type:"end"}),null==(n=s.current)||null==(e=n.focus)||e.call(n)}})},onContextMenu:function(e){e.preventDefault(),e.stopPropagation()},children:[(0,c.Y)(ou.S,{className:"blanket",css:xN.blanket}),p?(0,c.Y)(xT.A,{className:"icon"}):(0,c.Y)(ou.S,{className:"grip",css:xN.grip})]})}),xH=t(81278),xB=t(71402),xW=t(96751);function xj(){var e=(0,f._)(["\n  subscription ThreadUpdates($replId: String!) {\n    updatedThread: annotationUpdatesByRepl(replId: $replId) {\n      id\n      ...AnnotationsUIAnchor\n    }\n  }\n  ","\n"]);return xj=function(){return e},e}var x$={},xq=(0,h.J1)(xj(),vl.A9),xV=t(58272),xK=t(63074),xZ=t(30307),xJ=t(21851),xQ="video.json",xX=(0,xJ.join)(xs.T,xQ);let x0=function(e){var n=vc(e,{onReceiveAnnotationUpdate:function(){}}).generalThread;return(0,d.useMemo)(function(){return n?n.messages.filter(function(e){return!1===e.seen}).length:0},[n])};var x1=t(75804);function x2(){var e=(0,f._)(["\n  mutation HandlePortOpenedUpdateReplConfig($input: UpdateReplInput!) {\n    updateRepl(input: $input) {\n      repl {\n        id\n        config {\n          isVnc\n          isServer\n        }\n      }\n    }\n  }\n"]);return x2=function(){return e},e}var x4={},x5=(0,h.J1)(x2()),x7=t(84288),x3=t(27191);function x8(){var e=(0,f._)(["\n  subscription RegisterReplConnection($replId: String!) {\n    replConnection(replId: $replId)\n  }\n"]);return x8=function(){return e},e}var x6={},x9=(0,h.J1)(x8()),_e={direction:"reverse",state:{isExecutingPlan:!1},reducer:function(e,n){if(e.sender.type!==el.utd.AI)return!1;var t=e.contents.contents;switch(null==t?void 0:t.$kind){case"agentPlanEventContents":var r=t.agentPlanEventContents;if(!r)break;if(!0===r.requiresApproval)return n.notification={id:r.planId,text:"Plan is waiting for approval"},n.isExecutingPlan=!0,!1;if(n.isExecutingPlan&&r.step.subSteps.every(function(e){return e.status===el.jhd.STEP_COMPLETE}))return n.notification={id:r.planId,text:"Plan has been completed!"},n.isExecutingPlan=!1,!1;break;case"agentAskUserForActionRequest":var i=t.agentAskUserForActionRequest.request;if((null==i?void 0:i.$kind)==="userSecretsRequest")return n.notification={id:e.id,text:"Agent needs secrets to proceed"},!1;return n.notification={id:e.id,text:"Agent has an update for you"},!1;case"agentTimelineEventContents":var o,a=t.agentTimelineEventContents,l=a.toolData,u=a.toolName;if((null==l?void 0:l.$kind)==="messageData"){switch(null==(o=l.messageData.agentAction.optionType)?void 0:o.$kind){case"messageButtonAction":return n.notification={id:e.id,text:"Agent has a question for you"},!1;case"secretRequestAction":return n.notification={id:e.id,text:"Agent needs secrets to proceed"},!1;case"deployRequestAction":return n.notification={id:e.id,text:"Agent needs your permission to deploy the application"},!1}if("user_response"===u)return n.notification={id:e.id,text:"Agent has a question for you"},!1}}n.notification=void 0}};function _n(){var e=(0,f._)(["\n  query ReplEnvironmentNotifyUserJoin($id: String!) {\n    getRepl(id: $id) {\n      ... on Repl {\n        id\n        title\n      }\n    }\n  }\n"]);return _n=function(){return e},e}var _t=(0,h.J1)(_n()),_r=t(8388),_i=t(20632);function _o(){var e=(0,f._)(["\n  query TrackMultiplayer($replId: String!) {\n    getRepl(id: $replId) {\n      ... on Repl {\n        id\n        multiplayers {\n          id\n        }\n        owner {\n          ... on Team {\n            id\n          }\n          ... on User {\n            id\n          }\n        }\n      }\n    }\n  }\n"]);return _o=function(){return e},e}var _a={},_l=(0,h.J1)(_o());function _u(){var e=oD(),n=(0,l1.oR)(),t=rm(nb),r=rg(tO);return(0,d.useCallback)(function(i){var o=!!i&&i.reveal;if(n)return void e({pane:{type:"runnerOutput"},activate:!1,commit:!0});var a=t().find(function(e){var n=(0,u._)(e,2);return"runnerOutput"===(n[0],n[1]).type});a||e({pane:{type:"runnerOutput"},activate:!1,commit:!0}),o&&a&&r({paneId:a[0],activate:!0})},[n,t,e,r])}function _c(e,n,t){var r=rf(nI),i=rg(tJ),o=rg(tO),a=rm(nb);(0,al.SJ)(function(){if(r)return[e,function(){var e=a().find(function(e){return(0,u._)(e,2)[1].type===n.type});if(e)return void o({paneId:e[0],activate:!0});i((0,r9._)((0,p._)({},t),{pane:n,activate:!0,placement:{type:"secondary"}}))}]},[r,i,o])}var _s=t(4070),_d=t(46431),_p=t(16468),_f=t(85826),_h=t(46285),_g=t(47757),_m=t(43047),_v=t(51287),_w=t(40662),_y=t(39380),_b=t(80466),_x=t(62484),__=t(63939),_S=t(64445),_Y=t(79344);function _A(){var e=(0,f._)(["\n  query WorkspaceShowHiddenFiles($replId: String!) {\n    getRepl(id: $replId) {\n      ... on Repl {\n        id\n        templateInfo {\n          label\n        }\n      }\n    }\n  }\n"]);return _A=function(){return e},e}var _I={},_C=(0,h.J1)(_A()),_k=t(32004),_E=t(46956),_D=t(4796),_R=t(14583),_F=t(19758),_U=t(72442),_P=t(12417);function _O(e){var n,t,r,i,o,a,l,s,f,h,v,w,y,b,x,_,S,Y,A,I,C,k,E,D,R,F,U,P,O,L,M,N,z,H,W,j,q,V,K,Z,J,Q,X,ee,en,et,ei,eo,ec,es,ed,ep,ef,eh,eg,em,ev,ew,ey,eb,ex,e_,eS,eY,eA,eC,ek,eE,eD,eR,eF,eU,eP,eO,eT,eL,eM,eG,eN,ez,eH,eB,eW,e$,eq,eV,eK,eZ,eJ,eQ,eX,e0,e1,e2,e4,e5,e7,e3,e8,e6,ne,nn,nr,ni,no,na,nl,nu,nc,ns,nf,nh,ng,nm,nw,ny,nb,nx,n_,nY,nA,nC,nk,nE,nD,nR,nF,nU,nP,nO=e.repl,nT=e.currentUser,nL=(0,o1.A)(),nM=nL.replspaceApi,nG=nL.dotReplit,nN=nL.container,nz=nL.ports;l=(0,o1.A)().lspnix,s=(0,uO.g)("codeIntelligence").preferences.codeIntelligence,f=(0,T._P)({controlName:"flag-download-more-ram"}),h=(0,tW.L2)().length>0,(0,d.useEffect)(function(){if(f&&!h||!s)return void l.disable();l.enable()},[l,s,h,f]),v=(0,u._)((0,x3.eY)(),1)[0],w=rg(tD),y=(0,$.A)(function(){return ea()(w,1e3)},[w]),b=(0,er.A)(),(0,d.useEffect)(function(){var e=function(){y({replId:b,force:!1}),y.flush()};if(!v)return window.addEventListener("beforeunload",e),function(){window.removeEventListener("beforeunload",e)}},[y,b,v]),(0,d.useEffect)(function(){var e=function(){"hidden"===document.visibilityState&&y({replId:b,force:!1})};if(!v)return document.addEventListener("visibilitychange",e),function(){document.removeEventListener("visibilitychange",e)}},[y,b,v]),(0,d.useEffect)(function(){if(!v){var e=null;return function n(){e=setTimeout(function(){y({replId:b,force:!1}),n()},6e4)}(),function(){e&&clearTimeout(e)}}},[y,b,v]),(0,d.useEffect)(function(){return function(){y({replId:b,force:!1}),y.flush()}},[y,b,v]),(0,xW.A)(),(0,_E.A)(),(0,_R.A)({workspaceType:"desktop"}),(0,d.useEffect)(function(){var e=function(e){"s"===e.key&&(0,uT.T$)(e)&&e.preventDefault()};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}},[]),_=(x=(0,o1.A)()).container,S=x.presence,(0,d.useEffect)(function(){var e=S.onUserJoin(function(n){var t,r=null==(t=_.getContext())?void 0:t.repl;if(r){var i,o=n.username;return(i=r.id,(0,tS._)(function(){var e;return(0,tY.YH)(this,function(n){switch(n.label){case 0:if(!tA.V)throw Error("Expected Apollo client");return[4,tA.V.query({query:_t,variables:{id:i}})];case 1:return[2,(null==(e=n.sent().data)?void 0:e.getRepl.__typename)==="Repl"?e.getRepl.title:null]}})})()).then(function(e){e&&me({title:"",body:"".concat(o," joined ").concat(e),tag:"".concat(r.id,"-").concat(o,"-joined"),iconByUsername:o,cacheDuration:9e5})}),function(){e()}}})},[S,_]),Y=(0,er.A)(),A=(0,uO.g)("agentAudioNotification").preferences.agentAudioNotification,I=(0,d.useCallback)(function(e,n){if(A&&document.hidden)try{new Audio("/public/sounds/pop.mp3").play()}catch(e){}me({title:"Agent Update",body:n,tag:"".concat(Y,"-").concat(e),icon:"/public/images/ai/agent/AgentIconStandard.png",cacheDuration:3e5})},[A,Y]),C=(0,B.NC)(),k=(0,eu.J2)(C.sessions.agent.current),E=(0,d.useMemo)(function(){return null==k?void 0:k.reduce(_e,1)},[k]),D=null==k?void 0:k.agent.state,R=(0,d.useMemo)(function(){return D&&E?us.cP.combine(D,E):null},[D,E]),(0,eu.q3)(R,{next:function(e){var n=(0,u._)(e,2),t=n[0],r=n[1].notification;r&&(null==t?void 0:t.state)===el.g32.AGENT_STATE_PAUSED&&I(r.id,r.text)}}),(0,_x.A)(),F=(0,er.A)(),U=(0,o1.A)().container,P={variables:{replId:F},skip:(0,aG.A)(U)!==x1.KN.CONNECTED},O=(0,p._)({},x6,P),yx.R(x9,O),L=(0,o1.A)().presence,(0,d.useEffect)(function(){return L.onFollowingUsersChanged(function(e){var n=e.followingUsers,t=e.type,r=n.length;"follow"===t?(0,oq.u4)(_i.AZ.REMOTE_USER_CURSOR_FOLLOWED,{numFollowers:r}):(0,oq.u4)(_i.AZ.REMOTE_USER_CURSOR_UNFOLLOWED,{numFollowers:r})})},[L]),(0,_F.A)(),M=(0,o1.A)().presence,N=rf(nt),(0,d.useEffect)(function(){M.updateOpenFile(N)},[M,N]),H=(z=(0,ak.A)()).showConfirm,W=z.showNotice,j=z.hideMessage,q=z.showError,V=(0,o1.A)().container,K=(0,d.useRef)(!1),(0,d.useEffect)(function(){var e=V.onToast(function(e){e.startsWith("PANIC")||W(e,Math.max(1e4,e.length/.025+1e3))}),n=null,t=!1,r=V.onConnectionStateChanged(function(e){if(n&&(j(n),n=null),e===x1.KN.CONNECTED){t&&K.current&&(n=H("Connected",1500),K.current=!1),t=!0;return}if(t){if(e===x1.KN.CONNECTING){n=W("Reconnecting");return}if(e===x1.KN.DISCONNECTED){n=q("Disconnected"),K.current=!0;return}}});return function(){n&&j(n),e(),r()}},[V,H,W,q,j]),Z=(0,ak.A)().showConfirm,J=(0,o1.A)().fs,(0,d.useEffect)(function(){var e=J.registerOnFlushSuccess(function(e,n){if(n===tQ.sT.MANUAL_SAVE){var t="Saved ".concat(e);Z(t,Math.max(1e4,t.length/.025+1e3))}});return function(){e()}},[J,Z]),X=(Q=(0,ak.A)()).showNotice,ee=Q.showError,(0,di.b)(function(e,n){var t=n.signal;return(0,tS._)(function(){var n,r;return(0,tY.YH)(this,function(i){switch(i.label){case 0:return[4,e.pythonMigration.detectLegacyPython.rpc({},{signal:t})];case 1:if(!(n=i.sent()).ok||!n.payload.oldVenvDetected)return[2];return[4,e.pythonMigration.migratePython.rpc({},{signal:t})];case 2:if(!(r=i.sent()).ok)return"NOP"!==r.payload.code&&ee((0,c.FD)(c.FK,{children:[(0,c.Y)("div",{children:"Failed to migrate legacy Python configuration."}),(0,c.Y)("div",{children:"You may need to reinstall your Python packages, or contact support."})]}),1e4),[2];return X((0,c.FD)(c.FK,{children:[(0,c.Y)("div",{children:"This Repl contained legacy Python configuration"}),(0,c.Y)("div",{children:"and has been automatically migrated."})]}),1e4),[2]}})})()},[ee,X]),en=rf(nI),et=_u(),ei=(0,d6.Os)(xl.C.id,xl.j.Output),(0,d.useEffect)(function(){if(en&&(null==ei?void 0:ei.isActive)){var e=setInterval(function(){et()},200);return function(){clearInterval(e)}}},[null==ei?void 0:ei.isActive,et,en]),_c(cU.showShell.id,{type:"shell"}),_c(cU.showDocs.id,{type:"docs"}),_c(cU.showGit.id,{type:"git"}),_c(cU.showSettings.id,{type:"preferences"}),_c(cU.showConsole.id,{type:"runnerOutput"}),_c(cU.showReplitAi.id,{type:"ghostwriterChat"},{commit:!0}),(0,_d.A)(),eo=(0,o1.A)().presence,ec=oU(),(0,d.useEffect)(function(){return eo.onUserOpenedFile(function(e){var n=e.user,t=e.file,r=eo.getFollowedUser();r&&r.id===n.id&&t&&ec({path:t})})},[eo,ec]),ed=(es=(0,u._)((0,d.useState)(null),2))[0],ep=es[1],(0,d.useEffect)(function(){return eo.onFollowedUserChanged(ep)},[eo]),(0,d.useEffect)(function(){if(ed){var e=setTimeout(function(){document.addEventListener("click",n)},0);return function(){clearTimeout(e),document.removeEventListener("click",n)}}function n(){eo.unfollowUser()}},[ed]),ef=(0,uH.xu)(),ev=(null==(em=(eh={variables:{replId:(0,er.A)()}},eg=(0,p._)({},_I,eh),g.I(_C,eg)).data)?void 0:em.getRepl.__typename)==="Repl"?em.getRepl:null,(0,d.useEffect)(function(){var e;ev&&(null==(e=ev.templateInfo)?void 0:e.label.includes("Blank Repl"))&&ef(!0)},[ef,ev]),ew=rg(i0),ey=(0,o1.A)().fs,eb=(0,xs.A)().isTutorial,ex=(0,oe.A)(ew),(0,d.useEffect)(function(){if(eb){var e=!1,n=ey.watchDir(xs.T,{onChange:function(n){(0,tS._)(function(){var e;return(0,tY.YH)(this,function(t){switch(t.label){case 0:if(!n.find(function(e){return e.type===tQ.pt.File&&e.filename===xQ}))return[2,null];return[4,ey.readFile(xX)];case 1:if((e=t.sent()).error)return[2,null];return[2,e.content.toString()]}})})().then(function(n){if(!e){if(!n)return void ex.current(null);var t=null;try{t=wy._3(n)}catch(e){}var r=(void 0===t?"undefined":(0,eI._)(t))==="object"&&"string"==typeof t.embedUrl?t.embedUrl:null;ex.current(r?{embedUrl:r}:null)}})},onMoveOrDelete:function(){ex.current(null)},onError:function(){ex.current(null)}});return function(){e=!0,n()}}},[ey,eb,ex]),e_=(0,xs.A)().isTutorial,eS=rg(i4),(0,d.useEffect)(function(){e_&&eS()},[eS,e_]),r=x0(t=(0,er.A)()),i=(n=vc(t,{onReceiveAnnotationUpdate:function(){}}).annotations,(0,d.useMemo)(function(){return n.reduce(function(e,n){return n.isGeneral?e:e+n.messages.filter(function(e){return!1===e.seen}).length},0)},[n])),o=(0,_r.A)(),a=(0,uH.RF)(),(0,d.useEffect)(function(){a({paneType:"chat",indicatorType:r>0?rI.LU.redStronger:void 0})},[a,r]),(0,d.useEffect)(function(){a({paneType:"threadInbox",indicatorType:i>0?rI.LU.redStronger:void 0})},[a,i]),(0,d.useEffect)(function(){a({paneType:"envEditor",indicatorType:o?rI.LU.redStronger:void 0})},[o,a]),(0,_b.R)({onOpenEnvEditor:function(){nH({pane:{type:"envEditor"},activate:!0,placement:{type:"secondary"}})}}),eA={variables:{replId:eY=nO.id},onData:function(e){var n,t,r=null==(t=e.data)||null==(n=t.data)?void 0:n.updatedThread;r&&"AnnotationAnchor"===r.__typename&&(e.client.cache.updateQuery({query:vl.FL,variables:{replId:eY}},function(e){return(0,ej.jM)(e,function(e){null!==e&&"Repl"===e.getRepl.__typename&&(e.getRepl.annotationAnchors.find(function(e){return e.id===r.id})||e.getRepl.annotationAnchors.push(r))})}),e.client.cache.updateQuery({query:xV.FZ,variables:{replId:eY,path:r.path}},function(e){return(0,ej.jM)(e,function(e){var n;e&&(null==(n=e.threadsByFile)?void 0:n.__typename)==="ThreadsByFileResult"&&(e.threadsByFile.threads.find(function(e){return e.id===r.id})||e.threadsByFile.threads.push((0,r9._)((0,p._)({},r),{messageCount:r.messages.length,unreadCount:r.messages.filter(function(e){return!e.seen}).length,participants:r.messages.filter(function(e){return!!e.user}).map(function(e){return e.user})})))})}))}},eC=(0,p._)({},x$,eA),yx.R(xq,eC),ek=rf(e9),eE=(0,tW.T_)(),eD=(0,tW.nF)(),(0,d.useEffect)(function(){ek?eE(ek):eD()},[eE,eD,ek]),eR=(0,o6.eZ)(),eF=rh(oa),eU=rm(e9),eP=(0,oe.A)(eR),(0,d.useEffect)(function(){var e=function(e){e&&(null!==n&&clearTimeout(n),n=setTimeout(function(){var e=eU();e&&eP.current(e)}))},n=null;e(eF.current);var t=eF.subscribe(e);return function(){null!==n&&clearTimeout(n),t()}},[eF,eP,eU]),eO=rf(t7),eT=rg(oR),(0,d.useEffect)(function(){var e=function(){eT()};if(eO)return document.addEventListener("dragend",e),function(){document.removeEventListener("dragend",e)}},[eO,eT]),(0,_y.A)(),eL=x0((0,er.A)()),eM=(0,d.useRef)(0),eG=(0,uO.g)("chatAudioNotification").preferences,(0,d.useEffect)(function(){eG.chatAudioNotification&&eL>eM.current&&new Audio("/public/sounds/pop.mp3").play(),eM.current=eL},[eL,eM,eG]),eN=rf(nI),ez=(0,o6.gB)(),eH=rm(nv),(0,al.SJ)(function(){if(eN)return[cU.webviewRefresh.id,function(){var e=eH().filter(function(e){return"webview"===(0,u._)(e,2)[1].type}),n=!0,t=!1,r=void 0;try{for(var i,o=e[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var a=(0,u._)(i.value,1)[0],l=ez(a);l&&"webview"===l.type&&l.refresh()}}catch(e){t=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(t)throw r}}}]},[eN,ez,eH]),(0,__.A)(),(0,xZ.i)(!(null==(nU=nO.org)?void 0:nU.id));var nH=aE(),nB=(0,B.jt)();(0,d.useEffect)(function(){return dt.NA("replId",nO.id),function(){dt.NA("replId",void 0)}},[nO.id]),(0,d.useEffect)(function(){return dt.NA("agent",nB),(0,lK.$Y)(nB),function(){dt.NA("agent",void 0),(0,lK.qh)()}},[nB]),(0,_s.A)({repl:nO,currentUser:nT,container:nN}),eB=(0,er.A)(),e$=(eW=(0,o1.A)()).container,eq=eW.ports,eK=(0,u._)((eV=(0,p._)({},x4,void 0),m.n(x5,eV)),1)[0],eZ=(0,uO.g)("webviewAutoOpenOnPortOpened").preferences.webviewAutoOpenOnPortOpened,eJ=(0,l1.oR)(),eQ=(0,B.jt)(),eX=oD(),e0=(0,d.useCallback)(function(e){e.isForwarded&&!eQ&&(eJ||eX({pane:{type:"vnc"}}),eK({variables:{input:{id:eB,isVnc:!0}}}))},[eQ,eJ,eK,eB,eX]),e1=(0,d.useCallback)(function(e){var n=e.isForwarded,t=e.isOpen,r=e.data;n&&(void 0===t||t)&&!eQ&&(eZ&&!eJ&&eX({pane:{type:"webview",data:r}}),eK({variables:{input:{id:eB,isServer:!0}}}))},[eJ,eQ,eB,eK,eZ,eX]),(0,d.useEffect)(function(){return eq.portsState.subscribe(ea()(function(e){if(e){var n=!0,t=!1,r=void 0;try{for(var i,o=e[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var a=i.value,l=a.configuration,u=a.isOpen;if(l.isVnc)return void e0({isForwarded:u});var c=l.type===x7.gH.FORWARDED;e1({isForwarded:c,isOpen:u,data:{ports:function(e){var n=e.configuration;if(n.localPort)return{type:"local",path:"/",port:n.localPort};var t=(0,x7.Zd)(n);if(t)return{type:"external",path:"/",port:t}}(a)}})}}catch(e){t=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(t)throw r}}}},500,{leading:!0}))},[e$,eq.portsState,e1,e0]),(0,_D.A)(),e2=(0,T._P)({controlName:"flag-open-telemetry-tracing"}),no=(e5=(e4=(0,u._)((0,d.useState)(!1),2))[0],e7=e4[1],e8=(e3=(0,u._)((0,d.useState)(Date.now()),2))[0],e6=e3[1],nn=(ne=(0,u._)((0,d.useState)(Date.now()),2))[0],nr=ne[1],(0,d.useEffect)(function(){var e=function(){e7(!document.hidden),document.hidden?nr(Date.now()):e6(Date.now())};return document.addEventListener("visibilitychange",e),e(),function(){document.removeEventListener("visibilitychange",e)}},[]),ni={visibility:e5,visibleTime:e8,hiddenTime:nn}).visibility,na=ni.visibleTime,nl=ni.hiddenTime,(0,d.useEffect)(function(){e2&&no&&(na-nl)/1e3>60&&(0,G.O)(_Y.rA)},[e2,no,nl,na]),nu=(0,o1.A)().ports,nc=(0,uO.g)("forwardPortsAutomatically").preferences,(0,d.useEffect)(function(){nu.setForwardPortsAutomatically(nc.forwardPortsAutomatically)},[nc.forwardPortsAutomatically,nu]),(0,xK.A)(nO,nT);var nW=rg(nd),nj=(0,gi.j)();(0,d.useEffect)(function(){nW(!nj)},[nj,nW]);var n$=rg(np),nq=(0,xB.A)();(0,d.useEffect)(function(){n$(nq)},[nq,n$]),nf=(0,o1.A)().presence,nh=(0,er.A)(),ng=(0,d.useRef)(!1),nb=(nm={variables:{replId:nh}},nw=(0,p._)({},_a,nm),ny=g.I(_l,nw)).data,nx=ny.loading,n_=0,(null==nb?void 0:nb.getRepl.__typename)==="Repl"&&(n_=nb.getRepl.multiplayers.length,(null==(ns=nb.getRepl.owner)?void 0:ns.__typename)==="User"&&(n_+=1)),(0,d.useEffect)(function(){if(!nx&&!ng.current){var e=nf.onActiveUsersChange(function(){ng.current=!0,e(),(0,oq.u4)(oq.AZ.MULTIPLAYER_REPL_OPENED,{replId:nh,participantsCount:n_,usersOnlineCount:nf.getActiveUsers().length})});return e}},[nh,nx,n_,nf]);var nV=(0,tW.c_)();(0,d.useEffect)(function(){nM.setWaitForFileClose(nV)},[nM,nV]);var nK=(0,x3.iO)(),nZ=rf(nS);(0,d.useEffect)(function(){nZ&&nK(nZ)},[nK,nZ]),nA=(nY=(0,o1.A)()).packager,nC=nY.toolchain,(0,d.useEffect)(function(){var e=setTimeout(function(){(0,tS._)(function(){var e,n,t,r,i,o,a,l,u,c;return(0,tY.YH)(this,function(s){switch(s.label){case 0:if(!nC.configs.current||!nA)return[2];e=nC.configs.current.packagers,n=!0,t=!1,r=void 0,s.label=1;case 1:s.trys.push([1,7,8,9]),i=e[Symbol.iterator](),s.label=2;case 2:if(n=(o=i.next()).done)return[3,6];return a=o.value,[4,nA.listSpecfile(a.id)];case 3:var d;return(l=s.sent()).packages&&l.packages.length>0&&(u=l.packages.map(function(e){return e.name||""})||[],lK.vF.info("packager installed packages",{packagerId:a.id,language:a.language,packages:u}),(0,oq.u4)(_i.AZ.PACKAGER_PACKAGES_INSTALLED,{packages:u})),[4,(d=(5+5*Math.random())*1e3,(0,tS._)(function(){return(0,tY.YH)(this,function(e){switch(e.label){case 0:return[4,new Promise(function(e){return setTimeout(function(){return e()},d)})];case 1:return e.sent(),[2]}})})())];case 4:s.sent(),s.label=5;case 5:return n=!0,[3,2];case 6:return[3,9];case 7:return c=s.sent(),t=!0,r=c,[3,9];case 8:try{n||null==i.return||i.return()}finally{if(t)throw r}return[7];case 9:return[2]}})})()},(10+5*Math.random())*1e3);return function(){clearTimeout(e)}},[nA,nC.configs.current]),nk=(0,tW.RG)(),nE=(0,o6.eZ)(),(0,d.useEffect)(function(){var e=function(){var e=nk();e&&nE(e)},n=function(){"visible"===document.visibilityState&&document.activeElement===document.body&&e()};return window.addEventListener("focus",e),document.addEventListener("visibilitychange",n),function(){window.removeEventListener("focus",e),document.removeEventListener("visibilitychange",n)}},[nE,nk]),(0,_g.A)();var nJ=rg(iA),nQ=rg(iI),nX=(0,o1.A)().fs;(0,_S.A)({fs:nX,openMultipleFiles:nJ,openMultipleURLs:nQ,waitForFileClose:nV,isMobileWorkspace:!1}),(0,o9.Pt)({supportsAgent:nB}),(0,cR.I7)({dotReplit:nG}),(0,_P.en)();var n0=oD();(0,d6.Os)(d8.X.id,d8.F.ProjectPane,{onEnter:function(){return n0({pane:{type:"project"},commit:!0,activate:!0})}}),(0,_U.A)(nz),nD=_u(),nR=(0,d.useCallback)(function(){nD({reveal:!1})},[nD]),(0,cR.bD)(nR,[nR]),(0,_p.u)(),nF=rg(tu),(0,eu.q3)((0,gb.S)(),{next:nF}),(0,_h.M)(),(0,_k.H)(),(0,_v.k)(),(0,_w.t)(),(0,_f.E)(),(0,_m.e)(!!(null==(nP=nO.config)?void 0:nP.isAgentRepl));var n1=oD(),n2=(0,d.useCallback)(function(e){n1({pane:{type:e},activate:!0,reveal:!0,commit:!0})},[n1]);return(0,xH.A)({handleOpenPane:n2}),null}var _T=t(60998);function _L(e){var n=e.children,t=e.tour,r=e.userId;if(!t)return(0,c.Y)(c.FK,{children:n});var i="workspace-desktop-new-user-tour"===t.id||"workspace-desktop-tour-2024"===t.id;function o(e){i&&t&&(0,oq.ls)({id:r.toString(),workspaceTourId:t.id,workspaceTourStatus:e===t.steps[t.steps.length-1].id?"completed":e.toLowerCase()})}return(0,c.Y)(_T.f,{tour:t,onStep:function(e){t&&((0,oq.u4)(oq.AZ.WORKSPACE_TOUR_STEP_VIEWED,{tour:t.id,stepId:e.toLowerCase()}),o(e))},onDone:function(e){(0,oq.u4)(oq.AZ.WORKSPACE_TOUR_DISMISSED,{tour:t.id,stepId:e.toLowerCase(),didComplete:e===t.steps[t.steps.length-1].id}),o(e)},children:n})}var _M=t(90401),_G=t(92076),_N=t(5425),_z=t(4401),_H=t.n(_z),_B=t(75605);function _W(){var e=(0,eu.J2)((0,gb.S)()),n=(0,eu.J2)((0,gy.e)()),t=_B.O.prompt;return e?t=_B.O.agentWorking:n&&(t=_B.O.agentWaiting),t?(0,c.Y)(_H(),{children:(0,c.Y)("link",{rel:"shortcut icon",href:t,sizes:"192x192",type:"image/png"})}):null}var _j=t(27462),_$=t(66308),_q=t(21234),_V=t(82002);function _K(){var e=(0,f._)(["\n  query PublishedAs($id: String!) {\n    getRepl(id: $id) {\n      ... on Repl {\n        id\n        publishedAs\n      }\n    }\n  }\n"]);return _K=function(){return e},e}var _Z={},_J=(0,h.J1)(_K()),_Q=t(38023),_X=t(95570),_0=".replit-dynamic-template",_1=t(51689),_2=t(92665),_4=t(17142);function _5(){var e,n,t,r,i,o,a,l,s,f,h,m,v,w,y,b,x,_,S,Y=(0,u._)((0,d.useState)(!1),2),A=Y[0],I=Y[1],C=(0,d.useCallback)(function(e){switch(e){case"starting":return void I(!0);case"none":return void I(!1);case"running":if(!A)throw Error("expected repl not to need dynamic template initialization")}},[I,A]),k=(0,u._)((0,d.useState)([]),2),E=k[0],D=k[1],R=(0,wC.c)();n=(e={handleRPC:(0,d.useCallback)(function(e){switch(e.type){case"progress":case"failed":return D(function(n){return(0,eA._)(n).concat([(0,p._)({key:R(n.length)},e)])}),null;case"query":case"prompt":case"confirm":var n=(0,_V.A)();return D(function(t){return(0,eA._)(t).concat([(0,p._)({respond:n,key:R(t.length)},e)])}),n.promise;default:throw Error("unhandled request type: "+JSON.stringify(e))}},[R]),onConnStateChange:C}).handleRPC,t=e.onConnStateChange,r=(0,T._P)({controlName:"octopus-smokescreen"}),l=(i={variables:{id:(0,er.A)()}},o=(0,p._)({},_Z,i),a=g.I(_J,o)).loading,s=a.data,f=(0,$.A)(function(){if(l)return!1;var e=null==s?void 0:s.getRepl;return(null==e?void 0:e.__typename)==="Repl"&&e.publishedAs===fN.Q_w.Template},[l,s]),m=(h=(0,o1.A)()).container,v=h.fs,y=(w=(0,u._)((0,d.useState)(!1),2))[0],b=w[1],_=(x=(0,mv.A)({container:m,service:"exec",skip:!y})).channel,S=x.isConnecting,(0,d.useEffect)(function(){!r||f||l||(0,tS._)(function(){return(0,tY.YH)(this,function(e){switch(e.label){case 0:return[4,v.stat(_0)];case 1:return b(e.sent().exists),[2]}})})()},[v,r,f,l,b]),(0,d.useEffect)(function(){if(!S){if(!_)throw Error("exec channel is not open");var e=(0,_V.A)();e.promise.then(function(){return(0,tS._)(function(){var e;return(0,tY.YH)(this,function(n){switch(n.label){case 0:return[4,_.request({input:JSON.stringify({type:"start"})+"\n"})];case 1:if(!(e=n.sent()).ok)throw Error((e.error,": "+e.error));return[2]}})})()});var r=_.onCommand(function(r){switch(r.body){case"state":r.state===_Q.api.State.Running?(t("starting"),e.resolve()):t("none");return;case"output":var i,o,a=r.output;if(!a)return;try{o=JSON.parse(a)}catch(e){throw Error("failed to parse dynamic template output: ".concat(e))}null==(i=n(o))||i.then(function(e){return _.send({input:JSON.stringify(e)+"\n"})});return;case"stderr":_X.warn("got dynamic template generator stderr:",r.stderr);return;case"error":_X.error("got dynamic template generator error:",r.error);return;case"ok":return;default:throw Error("unhandled exec channel body: ".concat(r.body))}});return _.send({exec:{args:["sh",_0],lifecycle:_Q.api.Exec.Lifecycle.STDIN}}),function(){r()}}},[_,n,S,t,y]);var F=E.map(function(e){switch(e.type){case"progress":return(0,c.Y)(_7,(0,p._)({},e));case"failed":return(0,c.Y)(_3,(0,p._)({},e));case"query":return(0,c.Y)(_8,(0,p._)({},e));case"prompt":return(0,c.Y)(_6,(0,p._)({},e));case"confirm":return(0,c.Y)(_9,(0,p._)({},e))}});return(0,c.Y)(ap.a,{isOpen:A,onRequestClose:function(){return I(!1)},children:(0,c.Y)(ou.S,{gap:8,children:F})})}function _7(e){var n=e.progress,t=(0,st._)(e,["progress"]);return(0,c.FD)(ou.S,(0,r9._)((0,p._)({},t),{children:["progress: ",n]}))}function _3(e){var n=e.error,t=(0,st._)(e,["error"]);return(0,c.FD)(ou.S,(0,r9._)((0,p._)({},t),{children:["error: ",n]}))}function _8(e){var n=e.query,t=e.options,r=e.respond,i=(0,st._)(e,["query","options","respond"]),o=(0,u._)((0,d.useState)(null),2),a=o[0],l=o[1],s=(0,u._)((0,d.useState)(!1),2),f=s[0],h=s[1],g=(0,wC.c)(),m=(0,d.useCallback)(function(){null!==a&&(h(!0),r.resolve({type:"answer",answer:t[a]}))},[a,t,r]);return(0,c.FD)(ou.S,(0,r9._)((0,p._)({},i),{children:["query: ",n,t.map(function(e,t){return(0,c.FD)("label",{children:[(0,c.Y)("input",{type:"radio",name:n,value:t,checked:a===t,onChange:function(){f||l(t)}}),e]},g(t))}),(0,c.Y)(aY.$n,{text:"submit",onClick:m})]}))}function _6(e){var n=e.prompt,t=e.respond,r=(0,st._)(e,["prompt","respond"]),i=(0,u._)((0,d.useState)(""),2),o=i[0],a=i[1],l=(0,u._)((0,d.useState)(!1),2),s=l[0],f=l[1],h=(0,d.useCallback)(function(){f(!0),t.resolve({type:"answer",answer:o})},[o,t]);return(0,c.FD)(ou.S,(0,r9._)((0,p._)({},r),{children:["prompt: ",n,(0,c.Y)(v4.pd,{disabled:s,inputMode:"text",title:n,onChange:function(e){return a(e.currentTarget.value)}}),(0,c.Y)(aY.$n,{text:"submit",onClick:h})]}))}function _9(e){var n=e.confirm,t=e.dataConfirmation,r=e.respond,i=(0,st._)(e,["confirm","dataConfirmation","respond"]),o=Object.keys(t),a=Object.values(t);return(0,c.FD)(ou.S,(0,r9._)((0,p._)({},i),{children:["confirm: ",n,(0,c.FD)(_1.A,{"aria-label":"the data to be used to generate your App",children:[(0,c.Y)(_4.A,{children:o.map(function(e){return(0,c.Y)(_q.VP,{isRowHeader:!0,children:e},e)})}),(0,c.Y)(_2.A,{children:(0,c.Y)(_q.fI,{children:a.map(function(e,n){return(0,c.Y)(_q.fh,{children:e},o[n])})})})]}),(0,c.Y)(aY.$n,{text:"yes",onClick:function(){return r.resolve({type:"answer",answer:"yes"})}}),(0,c.Y)(aY.$n,{text:"no",onClick:function(){return r.resolve({type:"answer",answer:"no"})}})]}))}var Se=t(3768),Sn=t(69642);let St=function(e){return(0,c.Y)(ap.a,{preventClose:!0,isOpen:!0,onRequestClose:e.onCancel,children:(0,c.FD)(ou.S,{gap:24,children:[(0,c.Y)(aA.Y9,{variant:"headerDefault",level:2,css:ol.wp.maxWidth("100%"),children:"Replit needs your permission to enable notifications."}),(0,c.Y)(aA.EY,{children:"Never miss messages from your collaborators if you’re in another tab or window."}),(0,c.FD)(ou.S,{row:!0,gap:12,justify:"end",children:[(0,c.Y)(aY.$n,{onClick:e.onCancel,text:"Deny",iconLeft:(0,c.Y)(sr.A,{})}),(0,c.Y)(aY.$n,{text:"Allow notifications",colorway:"positive",iconLeft:(0,c.Y)(pl.A,{}),onClick:e.onConfirm})]})]})})};var Sr=t(91289),Si=t(35865),So=t(27192),Sa=t(54997),Sl=t.n(Sa),Su=(0,rI.CK)("index.module.css",["--x","--y","--width","--height","--z-index","--expand-blanket-opacity","--expand-blanket-pointer-events","--expand-blanket-width","--sidebar-resize-handle-width","--sidebar-resize-handle-grip-color"]);function Sc(){}function Ss(){var e=oG(),n=rg(ta),t=rf(tl),r=(0,o1.A)(),i=r.secrets,o=r.fs,a=oD(),l=(0,d.useCallback)(function(e){return a({pane:e})},[a]),s=(0,m9.n)(),p=s.session,f=s.setSession,h=s.setSessionId,g=oH(),m=(0,d.useRef)(null);(0,rY.d)(m,up(g.rect,g.getTransitionEnabled),function(e){var n;return n={},(0,ty._)(n,Su.x,e.x+"px"),(0,ty._)(n,Su.y,e.y+"px"),(0,ty._)(n,Su.width,e.width+"px"),(0,ty._)(n,Su.height,e.height+"px"),n});var v=(0,uf.A)(g.displayState),w=(0,u._)((0,d.useState)(null),2),y=w[0],b=w[1],x=g.setChatRef;(0,d.useEffect)(function(){if(y)return x({setSessionId:h,focusInput:function(){return y.focus()}}),function(){x(null)}},[y,x,h]);var _=(0,rl.p)();return(0,c.FD)(af.ui,{elevated:"centered"!==v&&!_,innerRef:m,clsx:Sl().root,style:(0,ty._)({},Su.zIndex,rA.W.filetreeDragLayer.toString()),children:[(0,c.Y)(ve.j,{secrets:i,readFile:o.readFile,session:p,setSession:f,openPane:l,onPlanApproval:function(){return n("tilingLayout")},isDesktopOrTabletAgentPresentationCentered:"centeredVisualPlanner"===e,isDesktopLayoutAgentPresentationTransitionInProgress:t,openPip:Sc,inputRef:b}),(0,c.Y)(Sd,{}),(0,c.Y)(Sp,{})]})}function Sd(){var e,n=oH(),t=(0,d.useRef)(null);(0,rY.d)(t,n.displayState,function(e){var n;return n={},(0,ty._)(n,Su.expandBlanketOpacity,"collapsed"===e?"1":"0"),(0,ty._)(n,Su.expandBlanketPointerEvents,"collapsed"===e?"all":"none"),n});var r=(0,uf.A)(n.agentFiletreeOrder);return(0,c.FD)(af.ui,{type:"button",clsx:[Sl().expandBlanket,(e={},(0,ty._)(e,Sl().left,"filetree-agent"===r),(0,ty._)(e,Sl().right,"agent-filetree"===r),e)],justify:"start",align:"center",innerRef:t,py:10,style:(0,ty._)({},Su.expandBlanketWidth,n.collapsedWidth+"px"),onClick:function(){n.toggle(!0)},children:[(0,c.Y)(g_,{size:16,isInLayout:!1}),(0,c.Y)(ou.S,{clsx:Sl().expandIcon,children:(0,c.Y)(pg.A,{rotate:180*("agent-filetree"!==r),size:24})})]})}var Sp=(0,d.memo)(function(){var e,n=(0,d.useRef)(null),t=oH(),r=(0,d.useRef)(null);(0,rY.d)(r,t.gutter,function(e){return(0,ty._)({},Su.sidebarResizeHandleWidth,e+"px")});var i=(0,uf.A)(t.agentFiletreeOrder);return(0,c.Y)(ou.S,{innerRef:r,clsx:[Sl().sidebarResizeHandle,(e={},(0,ty._)(e,Sl().left,"filetree-agent"===i),(0,ty._)(e,Sl().right,"agent-filetree"===i),e)],align:"center",justify:"center",onDoubleClick:function(){t.toggle("collapsed"===t.displayState.current)},onPointerDown:function(e){(0,uh.j)(e,{start:function(){n.current=document.activeElement,t.resizeSidebar({type:"start"})},move:function(e){var n=e.delta;t.resizeSidebar({type:"update",moveDelta:n})},end:function(){var e,r;t.resizeSidebar({type:"end"}),null==(r=n.current)||null==(e=r.focus)||e.call(r)}})}})}),Sf=(0,rk.v)(["transform","width","height","opacity"]),Sh=Sf.cssVars,Sg=Sf.styleTokens,Sm=(0,uw.i7)({from:{borderColor:rI.LU.blurpleDimmest},to:{borderColor:rI.LU.blurpleDefault}}),Sv=(0,rC.x)({root:[ol.wp.borderRadius(),ol.wp.border({color:rI.LU.blurpleDimmest}),{position:"absolute",top:0,left:0,transform:Sg.transform,width:Sg.width,height:Sg.height,opacity:Sg.opacity,zIndex:rA.W.overlay,transition:"opacity 0.2s",animation:"".concat(Sm," 800ms alternate infinite"),pointerEvents:"none"}]});function Sw(){var e=(0,d.useRef)(null);return(0,rY.d)(e,rh(tc),function(e){var n,t,r,i,o;return o={},(0,ty._)(o,Sh.transform,"translate(".concat(null!=(n=null==e?void 0:e.x)?n:0,"px, ").concat(null!=(t=null==e?void 0:e.y)?t:0,"px)")),(0,ty._)(o,Sh.width,"".concat(null!=(r=null==e?void 0:e.width)?r:0,"px")),(0,ty._)(o,Sh.height,"".concat(null!=(i=null==e?void 0:e.height)?i:0,"px")),(0,ty._)(o,Sh.opacity,(null==e?void 0:e.show)?"1":"0"),o}),(0,c.Y)(ou.S,{innerRef:e,css:Sv.root})}var Sy=t(80131),Sb=t(58321);function Sx(e){var n=e.session,t=(0,st._)(e,["session"]),r=(0,eu.Rj)(function(){return n.type},[n])===el.dF3.AGENT_SESSION?"agent_chat":"assistant_chat",i=(0,Sy.K)(n,r),o=i.openFeedbackModal,a=i.FeedbackModal;return(0,c.FD)(c.FK,{children:[(0,c.Y)(u1.K0,(0,r9._)((0,p._)({},t),{alt:"Submit feedback",onClick:o,children:(0,c.Y)(Sb.A,{color:rI.LU.foregroundDimmer})})),(0,c.Y)(a,{})]})}var S_=t(77222);function SS(){var e=(0,f._)(["\n  query ReplEnvironmentDesktopSidebarUpgradeCta {\n    currentUser {\n      id\n      ...UserPlanStateCurrentUser\n    }\n  }\n  ","\n"]);return SS=function(){return e},e}var SY={},SA=(0,h.J1)(SS(),S_.o),SI=t(41545),SC=t(59171),Sk=t(50951);function SE(e){var n,t,r,i=e.iconButton,o=(n=(0,p._)({},SY,void 0),g.I(SA,n)),a=o.data,l=o.loading,u=(0,SI.ET)().orgId;if(l||!(null==a?void 0:a.currentUser))return null;var s=(0,Sk.q)({user:a.currentUser}),d=s.plan,f=s.showUpgradeCta;if(void 0!==u||!f)return null;function h(){window.location.reload()}if(d.name!==dL.en)return(0,c.Y)(ou.S,{dataCy:"workspace-sidebar-upgrade-cta",children:(0,c.Y)(dM.A,{onPlanCheckoutComplete:h,size:"small",context:"workspace_sidebar",variant:"default",colorway:"primary",iconButton:i,stretch:!0})});if(null==(t=d.trial)?void 0:t.cancelsAt){var m=new Date;if(m.setMonth(m.getMonth()+1),new Date(d.trial.cancelsAt)>m)return null}var v=(null==(r=d.trial)?void 0:r.cancelsAt)?"Trial ends ".concat((0,SC.g)(d.trial.cancelsAt)):void 0;return(0,c.Y)(dM.A,{onPlanCheckoutComplete:h,variant:"default",context:"workspace_sidebar",text:v,iconButton:i,stretch:!0})}var SD=t(22440),SR={searchReplace:cU.searchFileContents,shell:cU.showShell,runnerOutput:cU.showConsole,docs:cU.showDocs,ghostwriterChat:cU.showReplitAi,preferences:cU.showSettings,git:cU.showGit},SF=(l={},(0,ty._)(l,e6.bY.CloudServices,"Replit-native and third-party services which your App can interact with"),(0,ty._)(l,e6.bY.WorkspaceFeatures,"Everything you need to write, run, debug, and maintain your code"),(0,ty._)(l,e6.bY.Collaboration,"Communication tools for working with collaborators"),(0,ty._)(l,e6.bY.WorkspaceExtensions,"Make your workspace more powerful with new tools, commands, and integrations"),l);function SU(e){var n,t=e.panes,r=e.dismissPopover,i=(n=(0,e6.Vv)(),(0,d.useMemo)(function(){return function(e,n){var t=(a={},(0,ty._)(a,e6.bY.CloudServices,[]),(0,ty._)(a,e6.bY.Collaboration,[]),(0,ty._)(a,e6.bY.WorkspaceFeatures,[]),(0,ty._)(a,e6.bY.WorkspaceExtensions,[]),(0,ty._)(a,e6.bY.Other,[]),a),r=!0,i=!1,o=void 0;try{for(var a,l,u=e[Symbol.iterator]();!(r=(l=u.next()).done);r=!0){var c=l.value,s=n.getCategory(c);["extensionStore","extensionDevtools","integrations"].includes(c.type)?t[s].unshift(c):t[s].push(c)}}catch(e){i=!0,o=e}finally{try{r||null==u.return||u.return()}finally{if(i)throw o}}return t}(t,n)},[t,n])),o=(0,e6.Vv)(),a=oD(),l=(0,d.useMemo)(function(){var e,n,t,l,s,d;return n=(e={categorizedPanes:i,ui:o,openPane:function(e){r(),a({pane:e,activate:!0})},dismissPopover:r}).categorizedPanes,t=e.ui,l=e.openPane,s=e.dismissPopover,d=Object.entries(n).map(function(e){var n=(0,u._)(e,2),r=n[0],i=n[1];return{data:{type:"context",label:r,icon:(0,c.Y)(oX.A,{}),tooltip:SF[r]},commands:function(){return i.map(function(e){var n,r,i,o,a;return{match:(r=(n={pane:e,aliases:o3.f.get(e.type),dismissPopover:s}).pane,o=void 0===(i=n.aliases)?[]:i,a=n.dismissPopover,function(e){var n=e.searchQuery,t=e.data,i=e.active;if("group"===t.type)return null;if(!n)return{score:1,render:{content:(0,c.Y)(SP,{pane:r,dismissPopover:a,toolItemProps:{pane:r,active:i}})}};var l=(0,SD.w2)(n,t.label,{filterLowMatchScores:!0});if(null!=l)return{score:null!=(p=null==l?void 0:l.score)?p:0,render:{content:(0,c.Y)(SP,{pane:r,dismissPopover:a,toolItemProps:{pane:r,labelHighlights:null!=(f=null==l?void 0:l.ranges)?f:[],active:i}})}};var u=!0,s=!1,d=void 0;try{for(var p,f,h,g=o[Symbol.iterator]();!(u=(h=g.next()).done);u=!0){var m=h.value,v="string"==typeof m?{alias:m,prefix:void 0}:m,w=v.alias,y=v.prefix,b=(0,SD.w2)(n,w,{filterLowMatchScores:!0});if(b)return{score:b.score,render:{content:(0,c.Y)(SP,{pane:r,dismissPopover:a,toolItemProps:{active:i,alias:w,aliasPrefix:y,pane:r}})}}}}catch(e){s=!0,d=e}finally{try{u||null==g.return||g.return()}finally{if(s)throw d}}return null}),data:{key:"extension"===e.type?"extension-".concat(e.data.installationId):e.type,type:"action",label:t.getTitle(e),icon:t.Icon({pane:e}),run:function(){return l(e)}}}})}}}),{data:{type:"context",label:"Search actions",description:"Search tools",icon:(0,c.Y)(oX.A,{})},commands:function(){return d}}},[i,o,r,a]),s=(0,d.useRef)(null);return(0,d.useEffect)(function(){s.current&&s.current()},[s]),(0,c.Y)(ah.r,{focusRef:s,command:l})}function SP(e){var n=e.pane,t=e.dismissPopover,r=e.toolItemProps,i=gM(n,{onDragStart:t}).dragRef,o=(0,e6.qo)(n,{short:!0}),a=(0,e6.Vv)(),l=a.Icon({pane:n}),u=a.getTitle(n),s=SR[n.type];return(0,c.Y)(uy.m_,{tooltip:o?(0,c.Y)(gO,{description:o,title:u,icon:l}):null,placement:"right-start",isDisabled:!o,maxWidth:300,children:function(e,n){return(0,c.Y)(ou.S,(0,r9._)((0,p._)({innerRef:n},e),{style:{height:"100%"},children:(0,c.Y)(ou.S,{style:{height:"100%"},innerRef:i,justify:"center",children:(0,c.Y)(o7.k,(0,r9._)((0,p._)({},r),{shortcutCommand:s}))})}))}})}var SO=t(2339),ST=t.n(SO);function SL(e){var n=e.placement,t=e.tooltipPlacement,r=(0,u._)((0,d.useState)(!1),2),i=r[0],o=r[1],a=(0,d.useCallback)(function(){return o(!1)},[]);return(0,c.FD)(dK.Wv,{isOpen:i,onOpenChange:o,label:"All tools",placement:void 0===n?"right":n,children:[(0,c.Y)(gU,{filled:!1,alt:"All tools",onClick:function(){return o(!0)},tooltipPlacement:void 0===t?"right-end":t,size:32,children:(0,c.Y)(sc.A,{})}),(0,c.Y)(SM,{dismissPopover:a})]})}function SM(e){var n=e.dismissPopover,t=(0,o9.Tb)();return(0,c.Y)(ou.S,{clsx:ST().toolsListPopover,children:(0,c.Y)(SU,{panes:t,dismissPopover:n})})}var SG=(0,rC.x)({files:{transitionProperty:"opacity",transitionDuration:sR.Ds.duration,transitionTimingFunction:sR.Ds.timingFunction,"&& button":[ol.wp.border({color:rI.LU.outlineDimmest}),{backgroundColor:uk.s}]}});function SN(){var e=oN(),n=(0,uf.A)(e.isOpen),t=(0,al.Jn)(u8.id),r=e.toggle;return(0,al.SJ)(function(){return[u8.id,function(){return r()}]},[r]),(0,c.Y)(Sz,{onClick:function(){return e.toggle(!n)},shortcut:t,isOpen:n})}function Sz(e){var n=e.isOpen,t=e.shortcut,r=e.onClick,i=(n?"Close":"Open")+" files",o=t?(0,c.Y)(SH,{shortcut:t,text:i}):i;return(0,c.Y)(ou.S,{css:SG.files,children:(0,c.Y)(gU,{dataCy:"toggle-files-sidebar",filled:!1,alt:i,tooltipContents:o,onClick:r,tooltipPlacement:"right",size:32,children:n?(0,c.Y)(pB.A,{}):(0,c.Y)(pW.A,{})})})}function SH(e){return(0,c.FD)(ou.S,{row:!0,gap:8,align:"center",children:[(0,c.Y)(aA.EY,{multiline:!1,variant:"small",children:e.text}),(0,c.Y)(al._y,{fontSize:10,keyCombo:e.shortcut})]})}var SB=t(69659),SW=t.n(SB);function Sj(e){var n,t,r,i=(n=(0,d.useRef)(null),t=(0,d.useRef)(null),r=(0,d.useRef)(null),(0,d.useEffect)(function(){var e=n.current;if(e){var i=!1,o=null,a=null,l=function(){if(n.current){var e=n.current,i=e.scrollTop,l=e.scrollHeight,u=e.clientHeight,c=i<=0,s=1>=Math.abs(l-u-i);c!==o&&t.current&&(t.current.style.setProperty("opacity",c?"0":"1"),o=c),s!==a&&r.current&&(r.current.style.setProperty("opacity",s?"0":"1"),a=s)}},u=function(){i||(i=!0,requestAnimationFrame(function(){i=!1,l()}))};return u(),e.addEventListener("scroll",u),function(){e.removeEventListener("scroll",u)}}},[]),{scrollRef:n,topRef:t,bottomRef:r}),o=i.scrollRef,a=i.topRef,l=i.bottomRef;return(0,c.FD)(ou.S,{style:{top:ru.uF,width:e.width,height:"calc(100vh - ".concat(ru.uF,"px)")},innerRef:e.innerRef,clsx:SW().root,align:"stretch",justify:"space-between",gap:6,children:[(0,c.Y)(ou.S,{align:"center",children:e.filesButton}),(0,c.FD)(ou.S,{clsx:SW().middle,align:"center",children:[(0,c.Y)(ou.S,{clsx:SW().primaryTools,children:e.primaryTools}),(0,c.Y)(ou.S,{clsx:SW().divider}),(0,c.FD)(ou.S,{clsx:SW().secondarySection,align:"stretch",children:[(0,c.FD)(ou.S,{clsx:SW().secondaryTools,align:"center",children:[(0,c.Y)(ou.S,{clsx:[SW().fade,SW().fadeTop],innerRef:a}),(0,c.Y)(ou.S,{clsx:SW().secondaryToolsScroll,innerRef:o,children:e.secondaryTools}),(0,c.Y)(ou.S,{clsx:[SW().fade,SW().fadeBottom],innerRef:l,align:"center",justify:"end"})]}),(0,c.Y)(ou.S,{align:"center",children:e.allToolsButton})]})]}),(0,c.Y)(ou.S,{align:"center",children:e.footer})]})}var S$=t(38486),Sq=t(17717),SV=t(85292);function SK(e){return(0,c.FD)(dK.Wv,{placement:"right",label:"Tool added",isOpen:e.isOpen,onOpenChange:function(n){!1===n&&e.dismissOnOutsideClick&&e.dismiss()},arrow:!0,children:[function(n){var t=n.ref,r=(0,st._)(n,["ref"]);return(0,c.Y)(ou.S,(0,r9._)((0,p._)({},r),{innerRef:t,children:e.children}))},(0,c.FD)(ou.S,{gap:8,style:{padding:8},children:[e.callout,(0,c.FD)(ou.S,{row:!0,gap:4,children:[e.action,(0,c.Y)(aY.$n,{colorway:"primary",text:"Got it",onClick:e.dismiss,style:{marginLeft:"auto"}})]})]})]})}function SZ(e){return"extension"===e.type?e.data.installationId:e.type}var SJ=(0,d.memo)(function(e){var n,t,r,i,o,a,l,s,p,f,h,g,m,v,w,y,b,x,_,S,Y,A,I,C,k,E,D=oG(),R=0===(0,o9.Tb)().length,F=oz((0,o9.No)()),U=(t=(n=(0,SV.Cv)("neon")).toolState,r=n.dismissCallout,i=n.showCallout,o=n.setToolState,a=rg(th),l=(0,cL.GK)().database,s=(0,Sq.ex)(),p=(0,S$.C9)().agentState,f=(0,eu.G9)((0,d.useMemo)(function(){return null==p?void 0:p.select(function(e){return null==e?void 0:e.state})},[p])),h=(0,d.useRef)(!1),g=void 0!==l,m=null==l?void 0:l.isEphemeral,(0,d.useEffect)(function(){"callout-dismissed"!==t&&g&&!h.current&&f.current===el.g32.AGENT_STATE_RUNNING&&(h.current=!0,a({pane:{type:"neon"}}),o("was-added-by-agent"))},[t,g,a,o,f]),w=(v=l&&m&&s)?(0,c.Y)(ou.S,{children:(0,c.Y)(Sq.Bt,{isFrozen:l.isFrozen,scheduledFreezeTime:l.scheduledFreezeTime,scheduledDeletionTime:l.scheduledDeletionTime})}):(0,c.FD)(aA.EY,{children:["We created a database for you,",(0,c.Y)("br",{}),"manage it here"]}),{action:v?(0,c.Y)(dM.A,{context:"workspace_ephemeral_postgres_database_banner",text:"Upgrade to Replit ".concat(dL.en),colorway:"brand",variant:"outlined",style:{flex:"1 1 auto"}}):null,callout:i?w:null,dismissCallout:r,isActive:i}),P=(b=(y=(0,SV.Cv)("replitAuth")).toolState,x=y.dismissCallout,_=y.showCallout,S=y.setToolState,Y=(0,u._)((0,SV.Ne)(),1)[0],A=oz((0,o9.No)()),I=rg(th),k=(C=(0,u._)((0,d.useState)(!1),2))[0],E=C[1],(0,d.useEffect)(function(){if(A.secondaryTools){E(Y);var e=A.secondaryTools.some(function(e){return"replitAuth"===e.type});Y&&!e&&"was-added-by-agent"!==b&&"callout-dismissed"!==b&&(I({pane:{type:"replitAuth"}}),S("was-added-by-agent"))}},[Y,b,I,S,A]),{callout:_?(0,c.FD)(aA.EY,{children:["Manage users and log in settings",(0,c.Y)("br",{}),"from the Authentication pane"]}):null,dismissCallout:x,isActive:_,showFlag:k}),O=(0,d6.Jw)(fe,p1.SidebarDock),T=(0,B.jt)(),L=(0,B.NC)(),M=(0,eu.Rj)(function(){return T?L.sessions.agent.current:L.sessions.chat.open.latest},[L,T]),G=(0,pH.F)().isFreemiumStarterPlanUsersOwnRepl;return!F.visible||"centeredVisualPlanner"===D||R?null:(0,c.Y)(c.FK,{children:(0,c.Y)(Sj,{innerRef:O,width:48,filesButton:(0,c.Y)(SN,{}),primaryTools:F.primaryTools.map(function(e){return(0,c.Y)(gN,{pane:e},SZ(e))}),secondaryTools:F.secondaryTools.map(function(n){var t={neon:{callout:U.callout,action:U.action,dismiss:U.dismissCallout,isActive:U.isActive},replitAuth:{callout:P.callout,dismiss:P.dismissCallout,isActive:P.isActive,showFlag:P.showFlag}}[n.type];if(t){var r=t.callout,i=t.action,o=t.dismiss,a=t.isActive,l=t.showFlag;return(0,c.Y)(SK,{callout:r,action:i,dismiss:o,isOpen:(!!r||!!l)&&!e.isWorkspaceTourActive&&!1!==a,dismissOnOutsideClick:!0,children:(0,c.Y)(gN,{pane:n})},SZ(n))}return(0,c.Y)(gN,{pane:n},SZ(n))}),allToolsButton:(0,c.Y)(SL,{}),footer:(0,c.FD)(ou.S,{gap:4,align:"center",children:[(0,c.Y)(SE,{iconButton:!0}),M&&!G?(0,c.Y)(Sx,{session:M,size:32,tooltipPlacement:"top-start"}):null,(0,c.Y)(gp.A,{})]})})})}),SQ=(0,rC.x)({root:[ol.wp.position.absolute,ol.wp.borderRadius(8),ol.wp.backgroundColor.backgroundRoot,ol.wp.pt(16),ol.wp.align.center,{border:"1px solid",borderColor:rI.LU.outlineDimmest}],content:[ol.wp.width("100%"),ol.wp.flex.growAndShrink(1)]});function SX(){var e=rf(rj),n=rf(nl),t=rg(tq),r=function(){var e,n=(0,u._)((0,mn.H)({accept:[tQ.pt.File,gL.N.NewPane],collect:function(e){return{isOver:e.isOver()}},hover:function(e){i.drag()},drop:function(e){if("nodes"===e.type){var n=(0,e6.u9)(e.nodes);n.length>0&&i.drop({panes:n})}if(e.type===gL.N.NewPane){var t=e.pane;i.drop({panes:[t]})}}}),2),t=n[0].isOver,r=n[1],i=(e=rg(rE),(0,d.useEffect)(function(){t||e(null)},[t,e]),{drag:rg(rB),drop:rg(rW)});return r}(),i=aa({openPane:(0,d.useCallback)(function(e){(0,oq.u4)(oq.AZ.TOOL_OPENED,{source:"Empty Layout",tool:e.pane.type}),t({pane:e.pane,edge:"left"})},[t])});return(0,c.Y)(ou.S,{style:{width:e.width,height:e.height,transform:"translate(".concat(e.x,"px, ").concat(e.y,"px)"),zIndex:n?100:void 0},css:SQ.root,innerRef:r,children:(0,c.Y)(ou.S,{css:SQ.content,children:(0,c.Y)(ah.r,{autoFocus:!0,command:i,showToolDescriptions:!0})})})}var S0=ec.ZU.Object({sidebar:ec.ZU.Optional(nV),layout:ew,data:ec.ZU.Record(ec.ZU.String(),ec.ZU.Object({type:ec.ZU.String()})),dock:ec.ZU.Optional(td)});function S1(e,n,t){var r=null;try{r=m6.T(S0,e)}catch(e){}if(null===r)return null;var i=r.sidebar&&!t.wsUiSimplification?r.sidebar:{width:180,isOpen:!1},o={layout:r.layout,data:{},type:"saved",sidebar:i,dock:r.dock?function(e,n,t){var r=[],i=!0,o=!1,a=void 0;try{for(var l,u=e.secondaryTools[Symbol.iterator]();!(i=(l=u.next()).done);i=!0){var c=l.value,s=n(c.type,c);s&&r.push(s)}}catch(e){o=!0,a=e}finally{try{i||null==u.return||u.return()}finally{if(o)throw a}}if(t.isAgentChatEnabled){var d="webview";r.some(function(e){return e.type===d})||r.unshift({type:d})}if(r.length)return{visible:e.visible,primaryTools:[{type:"agentChat"},{type:"ghostwriterChat"}],secondaryTools:r}}(r.dock,n,t):void 0},a=new Set,l=function(e){var n=new Set,t=!0,r=!1,i=void 0;try{for(var o,a=e.floating[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=o.value,u=!0,c=!1,s=void 0;try{for(var d,p=l.panes[Symbol.iterator]();!(u=(d=p.next()).done);u=!0){var f=d.value;n.add(f)}}catch(e){c=!0,s=e}finally{try{u||null==p.return||p.return()}finally{if(c)throw s}}}}catch(e){r=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}return e.tiling&&function e(t){if("paneGroup"!==t.type)return t.children.forEach(e);var r=!0,i=!1,o=void 0;try{for(var a,l=t.panes[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var u=a.value;n.add(u)}}catch(e){i=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}}(e.tiling),n}(o.layout),c=!0,s=!1,d=void 0;try{for(var p,f=Object.entries(r.data)[Symbol.iterator]();!(c=(p=f.next()).done);c=!0){var h=(0,u._)(p.value,2),g=h[0],m=h[1];if(l.has(g)){var v=n(m.type,m);if(!v){a.add(g);continue}o.data[g]=v}}}catch(e){s=!0,d=e}finally{try{c||null==f.return||f.return()}finally{if(s)throw d}}return(0,ej.jM)(o,function(e){var n=function(n){if(l.has(n))return void eN(e.layout,n)},r=!0,i=!1,o=void 0;try{for(var c,s=a[Symbol.iterator]();!(r=(c=s.next()).done);r=!0){var d=c.value;n(d)}}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}var p=!0,f=!1,h=void 0;try{for(var g,m=Object.entries(e.data)[Symbol.iterator]();!(p=(g=m.next()).done);p=!0){var v=(0,u._)(g.value,2),w=v[0],y=v[1];("commands"===y.type||"codeEditor"===y.type&&!y.data.path||"agentProgress"===y.type||t.wsUiSimplification&&"agentChat"===y.type)&&(delete e.data[w],n(w))}}catch(e){f=!0,h=e}finally{try{p||null==m.return||m.return()}finally{if(f)throw h}}})}var S2=t(13422),S4=t(91702),S5=t(34104),S7=t.n(S5);function S3(e){var n,t,r,i,o,a,l,f,h,g,m,v,w,y=e.repl,b=e.currentUser,x=(0,s.useRouter)(),_=(0,V.pE)("enterInAgentMode","boolean"),S=(0,V.pE)("agent","boolean"),Y=(0,V.pE)("popupId","string"),A=(0,q.Po)(x),I=(0,q.ME)(x,"workspace2"),C=(0,ra.E)(),k=(0,u._)((0,d.useState)(function(){var e;return(0,e6.HJ)({config:(e=(0,xC.P)(),(0,r9._)((0,p._)({},e),{webview:xA,commands:wr,docs:ws,chat:wn,threadInbox:xo,tutorial:xg,extension:wv,extensionStore:y7,replAuth:y9,searchReplace:xn,deployments:xE.B,config:wl,integrations:xD.u,extensionDevtools:yX,csvPreview:xk.J,agentChat:vt,agentProgress:xR.M,multiplayer:xR.M})),filePaneFlag:C})}),1)[0],E=(0,T._P)({controlName:"flag-agent-everywhere"}),D=null,R=(0,V.pE)("gitImport","boolean"),F=!!y.config.isAgentRepl,U=_||F||E,P=(0,rl.p)();Y?D=S1(!(f=ni.A.get(ns(Y)))||"string"==typeof f&&parseInt(f,10)<Date.now()?null:ni.A.get(nc(Y)),k.decode,{isAgentChatEnabled:U,wsUiSimplification:P}):y.layoutState?D=S1(y.layoutState,k.decode,{isAgentChatEnabled:U,wsUiSimplification:P}):R&&!E&&(D={type:"default",data:Object.values(h={config:{paneId:(0,tb.A)(),pane:{type:"config",flow:"githubImport"}},codeEditor:{paneId:(0,tb.A)(),pane:{type:"codeEditor",data:{path:""}}},output:{paneId:(0,tb.A)(),pane:{type:"runnerOutput"}},shell:{paneId:(0,tb.A)(),pane:{type:"shell"}}}).reduce(function(e,n){var t=n.pane;return e[n.paneId]=t,e},{}),layout:{floating:[],tiling:{type:"split",percent:100,stacked:!1,children:[{id:(0,tb.A)(),type:"paneGroup",percent:40,activeIndex:0,panes:[h.config.paneId]},{type:"split",percent:60,stacked:!0,children:[{id:(0,tb.A)(),type:"paneGroup",percent:50,activeIndex:0,panes:[h.codeEditor.paneId]},{id:(0,tb.A)(),type:"paneGroup",percent:50,activeIndex:0,panes:[h.output.paneId,h.shell.paneId]}]}]}}}),(S||F||E)&&(w=D?"saved":y.config.isExpertMode?"split-with-console":"split-with-webview");var O=(r=(n={repl:y,currentUser:b,isAgentChatEnabled:U,enteredWithAgentPrompt:_}).repl,i=n.currentUser,a=void 0!==(o=n.isAgentChatEnabled)&&o,l=n.enteredWithAgentPrompt,r&&i&&null==r.lesson&&!r.config.isInPlanningPhase?void 0!==l&&l||i.hasSeenWorkspaceTour2024?a?null:!i.hasSeenProjectsTour2024&&(null==(t=r.project)?void 0:t.id)?d8.X:null:{id:fe,steps:[a?p5:p7,p3,p8,p6,p9].filter(Boolean)}:null),L=(g=(0,V.pE)("deploymentPane","boolean"),m=(0,V.pE)("projectPane","boolean"),(0,$.A)(function(){return g?{type:"deployments"}:m?{type:"project"}:void 0},[g,m])),M=(!!(null==(v=y.origin)?void 0:v.id)||y.config.isExpertMode)&&!y.config.isInPlanningPhase,G=(_||!!y.config.isInPlanningPhase)&&!y.config.figmaUrl&&!M;return(0,c.FD)(K.Ve,{currentUsername:b.username,replId:y.id,children:[(0,c.Y)(uH.CP,{children:(0,c.Y)(rd,{initialPane:L,savedLayoutState:D,isExtension:!!y.config.isExtension,isBlankRepl:W(y),popupId:Y,agentCenteredLayout:G,agentLayoutVariation:w,children:(0,c.Y)(_L,{tour:O,userId:b.id,children:(0,c.Y)(S8,{ui:k,repl:y,currentUser:b,isBonsaiWebview:A,doesBonsaiSupportWorkspace2:I,agentChatEnabled:U,activeWorkspaceTour:O,agentIsEverywhere:E},y.id)})})}),(0,c.Y)(Z.A,{})]})}function S8(e){var n,t,r,i,o,a,l,s,p,f,h,g,m,v,w,y,b,x,_,S=e.repl,Y=e.currentUser,A=e.isBonsaiWebview,I=e.doesBonsaiSupportWorkspace2,C=e.ui,k=e.agentChatEnabled,E=e.activeWorkspaceTour,D=e.agentIsEverywhere,R=(n=oU(),t=rg(iA),r=rg(iI),i=(0,x3.iO)(),o=(0,T._P)({controlName:"flag-null-diagnostics",logFlagToAnalytics:!1}),a="html"===S.language?"html":"outputs",s=(l=(0,u._)((0,d.useState)(!1),2))[0],p=l[1],h=(f=(0,u._)((0,d.useState)(!1),2))[0],g=f[1],m=(0,hN.q6)(),v=(0,hN.DJ)(),w=(0,T._P)({controlName:"flag-open-telemetry-tracing"}),y=(0,T._P)({controlName:"flag-multi-lsp-connections"}),b=(0,$.A)(function(){return{runnerMode:a,onPresenceCommand:m,getColorForUser:v,onUnrecoverableError:(0,_N.A)({origin:"replEnvironmentDesktop: services/unrecoverableError",tags:{environment:"desktop"},onNonBsodUnrecoverableError:function(e){e===j.ub.NotAllowed?p(!0):e===j.ub.RequiresRefresh&&g(!0)},throwBsod:i}),openFile:n,openMultipleFiles:t,openMultipleURLs:r,enableUserEvents:o,enableMultipleLSPClientsPerFile:y,openTelemetryTracing:w,enableReplspaceSshTokenPassthrough:!0}},[o,a,n,t,r,i,m,v,w,y]),x=(0,_M.q)(b),(0,$.A)(function(){return{services:x,isPleaseRefresh:h,isNotAllowed:s}},[x,h,s])),F=R.services,U=R.isPleaseRefresh,P=R.isNotAllowed,O=(0,xy.z)().setExpertMode;(0,d.useEffect)(function(){S.config.isExpertMode&&O&&D&&O(!0)},[S.config.isExpertMode,O,D]),(0,So.X$)(!!S.layoutState);var L=(0,$.A)(function(){return(0,sV.Y)(null==Y?void 0:Y.keybindings.keybindings)},[Y]);if(!F)return null;var M=S.authorizations.useAdvancedChat.isAuthorized;return(0,c.Y)(B.KH,{replId:S.id,currentUser:Y,hasAccessToAdvancedModel:M,agentChatEnabled:k,orgId:null==(_=S.org)?void 0:_.id,children:(0,c.Y)(uJ.SF,{children:(0,c.FD)(sX,{services:F,ui:C,repl:S,userKeybindings:L,children:[(0,c.FD)(mw.A,{origin:"ErrorBoundary: ReplEnvironmentDesktop Top level",bsod:!0,children:[(0,c.Y)(sD,{}),(0,c.Y)(c4,{isAdmin:Y.isAdmin,isSubscribed:Y.isSubscribed}),(0,c.Y)(Sr.A,{repl:S}),A&&!I?(0,c.Y)(s6,{}):null,(0,c.Y)(aw,{}),(0,c.Y)(s4,{repl:S}),(0,c.Y)(_O,{repl:S,currentUser:Y}),(0,c.Y)(dw,{}),(0,c.Y)(dg,{}),(0,c.Y)(Ye,{isBonsaiWebview:A,doesBonsaiSupportWorkspace2:I,isWorkspaceTourActive:!!E}),(0,c.Y)(uo,{}),(0,c.Y)(ue,{}),(0,c.Y)(_j.A,{}),(0,c.Y)(_5,{}),(0,c.Y)(S9,{isMultiplayerSession:S.multiplayers.length>0}),(0,c.Y)(Se.A,{isOpen:P}),(0,c.Y)(Sn.A,{isOpen:U}),(0,c.Y)(S4.$,{}),(0,c.Y)(S2.F,{}),(0,c.Y)(l3,{}),(0,c.Y)(s5,{}),(0,c.Y)(_$.P,{}),(0,c.Y)(Si.y,{repl:S}),(0,c.Y)(o$,{})]}),(0,c.Y)(S6,{replId:S.id})]})})})}function S6(e){var n,t=e.replId,r=(0,u._)((0,x3.eY)(),1)[0],i=(0,u._)((n=(0,p._)({},z,void 0),m.n(H,n)),1)[0],o=(0,d.useCallback)(function(){i({variables:{input:{replId:t,state:{}}}})},[i,t]);return(0,d.useEffect)(function(){r&&o()},[r,o]),(0,c.Y)(_G.A,{})}function S9(e){var n,t,r,i,o,a=(n=e.isMultiplayerSession,r=(t=(0,u._)((0,d.useState)(!1),2))[0],i=t[1],o=(0,d6.qv)(),(0,d.useEffect)(function(){!o&&n&&"default"===g3()&&i(!0)},[n,o]),{shouldShowModal:r,hideModal:(0,d.useCallback)(function(){g6(!0),i(!1)},[]),confirm:(0,d.useCallback)(function(){return(0,tS._)(function(){return(0,tY.YH)(this,function(e){switch(e.label){case 0:return[4,(0,tS._)(function(){return(0,tY.YH)(this,function(e){switch(e.label){case 0:return[4,(0,tS._)(function(){return(0,tY.YH)(this,function(e){try{window.Notification.requestPermission().then()}catch(e){return[2,new Promise(function(e){window.Notification.requestPermission(function(n){e(n)})})]}return[2,window.Notification.requestPermission()]})})()];case 1:return e.sent(),g6(!1),[2]}})})()];case 1:return e.sent(),i(!1),[2]}})})()},[])}),l=a.shouldShowModal,s=a.hideModal,p=a.confirm;return l?(0,c.Y)(St,{onCancel:s,onConfirm:p}):null}var Ye=(0,d.memo)(function(e){var n,t,r,i,o,a,l,u=e.isWorkspaceTourActive,s=e.isBonsaiWebview,p=e.doesBonsaiSupportWorkspace2,f=(n=rg(n8),t=(0,ca.A)(),r=(0,dF.vm)(),i=(0,dF.d0)(),o=(r||i)&&t?ru.uF:0,a=(0,d.useRef)(null),l=(0,g4.A)(function(e){var t=e.width,r=e.height;if(t&&r&&a.current){var i=a.current.getBoundingClientRect(),l=i.top;n({width:t,height:r,x:i.left,y:l-o})}}),(0,d.useCallback)(function(e){a.current=e,l(e)},[l])),h=rf(n_),g=rf(eV),m=rf(eK),v=rf(eZ),w=(0,d.useRef)(null),y=(0,B.jt)(),b=(0,d.useCallback)(function(e){f(e),w.current=e},[f]),x=(0,rl.p)();return(0,c.FD)(af.ui,{elevated:x,innerRef:b,clsx:S7().contentContainer,style:x?void 0:{backgroundColor:"transparent"},children:[h?(0,c.FD)(c.FK,{children:[s?(0,c.Y)(g2,{doesBonsaiSupportWorkspace2:p}):(0,c.Y)(gV,{}),(0,c.Y)(u9,{}),(0,c.FD)("main",{id:"main-content",children:[m.map(function(e){return(0,c.Y)(xz,{handleId:e},e)}),v.map(function(e){return(0,c.Y)(m8,{headerId:e},e)}),g.map(function(e){return(0,c.Y)(mS,{paneId:e},e)}),0===g.length?(0,c.Y)(SX,{}):null]}),(0,c.Y)(rH,{}),(0,c.Y)(oY,{}),(0,c.Y)(mA,{}),(0,c.Y)(sH,{}),(0,c.Y)(Sw,{}),(0,c.Y)(uJ.tz,{}),x?null:(0,c.Y)(SJ,{isWorkspaceTourActive:u}),x&&y?(0,c.Y)(Ss,{}):null]}):null,(0,c.Y)(_W,{})]})}),Yn=t(64910),Yt=t(60843),Yr=t(41944),Yi=t(50464),Yo=t(91832),Ya=t(40976),Yl=t(19922),Yu=t(46584),Yc=t(18511),Ys=t(83423),Yd=t.n(Ys);let Yp=function(){var e,n,t,r=null,i=(0,s.useRouter)().query;if(!i.replUrl)throw Error("Expected replUrl to be set");if(!i.replId)throw Error("Expected replId to be set");var o=(0,u._)((0,M.t)(),2),a=(o[0],o[1]),l=i.replUrl.toString(),f=i.replId.toString(),h=(0,L.A)(f).loading,m=(e={variables:{replId:f,environment:(0,Yi.v)(),platform:(0,Yo.V)()},ssr:!!i.ssr},n=(0,p._)({},U,e),g.I(P,n)),v=m.data,w=m.loading,y=m.error,b=(0,T._P)({controlName:"flag-token-email-verification"}),x=(null==v?void 0:v.currentUser)||void 0,_=(null==v?void 0:v.getRepl)&&("Repl"===v.getRepl.__typename||"ReplRedirect"===v.getRepl.__typename||"ReplSubscriptionExpired"===v.getRepl.__typename)?v.getRepl:null,S=(null==v?void 0:v.getRepl)&&"Repl"!==v.getRepl.__typename&&"ReplRedirect"!==v.getRepl.__typename&&"ReplSubscriptionExpired"!==v.getRepl.__typename?v.getRepl.message:null,Y=(null==_?void 0:_.__typename)==="Repl"?_:null,A="https://replit.com".concat(l),I=null!=(t=null==Y?void 0:Y.description)?t:void 0,C=null!=S?S:null==y?void 0:y.message,k=(0,u._)((0,d.useState)(!1),2),E=k[0],D=k[1];(0,d.useEffect)(function(){return D(!0)},[]);var R=b&&x&&!x.isVerified;return r=R?(0,c.Y)(ou.S,{clsx:Yd().emailVerificationWrapper,grow:!0,shrink:!0,children:(0,c.Y)(O.A,{})}):C?(0,c.Y)(ou.S,{align:"center",justify:"center",grow:!0,shrink:!0,children:(0,c.Y)(aA.EY,{multiline:!1,children:"Something went wrong loading the Repl. Please reload the page and try again."})}):w||!E||a||h?(0,c.Y)(ou.S,{clsx:Yd().loadingAnimationWrapper,grow:!0,shrink:!0,children:(0,c.Y)(Yl.A,{height:100})}):Y&&x?(0,c.Y)(Ya.A.Provider,{value:Y.id,children:(0,c.Y)(S3,{repl:Y,currentUser:x},Y.id)}):(0,c.Y)(ou.S,{clsx:Yd().loadingAnimationWrapper,grow:!0,shrink:!0,children:(0,c.Y)(Yl.A,{height:100})}),(0,c.Y)(Yu.A,{children:(0,c.FD)(Yc.A,{dataCy:"workspace-page",title:"".concat((null==Y?void 0:Y.title)||"Loading..."),oembedUrl:A,description:I,noHeader:!R,noMain:!R,noSidebar:!R,noFooter:!0,hideEmailVerify:!0,children:[(0,c.Y)(G.d,{}),(0,c.Y)(Yr.A,{replResponse:_,replUrl:l,children:(0,c.FD)(af.ui,{clsx:Yd().surface,children:[(0,c.Y)(Yn.z,{}),(0,c.Y)(Yt.u,{}),r]})})]})})}},15268:(e,n,t)=>{"use strict";t.d(n,{A:()=>g});var r=t(12694),i=t(57034),o=t(21462),a=t(72607),l=t(4558),u=t(47211),c=t(51481),s=t(42793),d=t(79890),p=t(83020),f=t(85743),h=(0,s.AH)(p.wp.dragRegion);function g(){var e,n,t,s,p,g,m,v,w=(0,c.vm)(),y=(0,u.A)(),b=(e=(0,u.A)(),t=(n=(0,r._)((0,o.useState)(!1),2))[0],s=n[1],(0,o.useEffect)(function(){if(e)return s(document.hasFocus()),a.M.onFocusChanged(s)},[e]),t),x=(p=(0,u.A)(),m=(g=(0,r._)((0,o.useState)(!1),2))[0],v=g[1],(0,o.useEffect)(function(){if(p)return a.M.onFullScreenChanged(v)},[p]),m);return w&&y&&!x?(0,i.Y)(f.S,{css:h,children:(0,i.Y)("svg",{width:l.Cp,height:l.GB-16,children:b?null:(0,i.FD)(i.FK,{children:[(0,i.Y)("circle",{cx:19,cy:16,r:5,fill:"none",stroke:d.LU.outlineDefault,strokeWidth:1}),(0,i.Y)("circle",{cx:39,cy:16,r:5,fill:"none",stroke:d.LU.outlineDefault,strokeWidth:1}),(0,i.Y)("circle",{cx:59,cy:16,r:5,fill:"none",stroke:d.LU.outlineDefault,strokeWidth:1})]})})}):null}},15430:e=>{e.exports={root:"RunStatusButton_root__Zgid2",agentStatusIcon:"RunStatusButton_agentStatusIcon__dyBqs",running:"RunStatusButton_running__tAAYE",agent:"RunStatusButton_agent__q_Sk6"}},15831:e=>{e.exports={container:"TabList_container__s3ufN",newTabButton:"TabList_newTabButton__F7Fv4",tabScrollAreaRoot:"TabList_tabScrollAreaRoot__O0iqm",tabScrollAreaViewport:"TabList_tabScrollAreaViewport__9wZEC",tabScrollAreaScrollbar:"TabList_tabScrollAreaScrollbar__6xrLt",tabScrollAreaThumb:"TabList_tabScrollAreaThumb__KxoId",tabContainer:"TabList_tabContainer__o__tr",tabPreview:"TabList_tabPreview__7VoJt"}},16703:(e,n,t)=>{"use strict";t.d(n,{A:()=>R});var r=t(17844),i=t(93629),o=t(12694),a=t(86105),l=t(57034),u=t(21462),c=t(39695),s=t(12584),d=t(41114),p=t(54744),f=t(98628);function h(){var e=(0,s._)(["\n  query OrgGroupSearch($orgId: String, $input: OrgGroupsInput) {\n    currentUser {\n      __typename\n      id\n      org(orgId: $orgId) {\n        __typename\n        ... on Org {\n          id\n          groups(input: $input) {\n            __typename\n            ... on OrgGroupConnection {\n              pageInfo {\n                hasNextPage\n                nextCursor\n              }\n              items {\n                ...OrgGroupsOrgGroup\n              }\n            }\n            ... on UserError {\n              message\n            }\n          }\n        }\n        ... on NotFoundError {\n          message\n        }\n      }\n    }\n  }\n  ","\n"]);return h=function(){return e},e}var g={},m=(0,d.J1)(h(),f.Um),v=t(92932),w=t(79890),y=t(18304),b=t(83020),x=t(41379),_=t(84516),S=t(82368),Y=t(60421),A=t(85743),I=t(4883),C=t(29351),k=t(23241),E=[b.wp.p(8),b.wp.cursor.pointer],D=(0,y.x)({container:[b.wp.position.relative],rightIcon:[b.wp.position.absolute,b.wp.right(8),b.wp.top("50%"),{transform:"translateY(-50%)"}],dropdownMenu:[b.wp.width("100%"),b.wp.position.absolute,b.wp.zIndex(1),b.wp.top("100%"),b.wp.left(0),b.wp.backgroundColor.backgroundDefault,b.wp.maxHeight(300),b.wp.overflow("auto"),b.wp.borderRadius(4),b.wp.border({color:w.LU.foregroundDimmest}),{borderTop:"0 none"}],result:(0,a._)(E),activeResult:(0,a._)(E).concat([b.wp.backgroundColor.accentPrimaryDimmer]),closeIconButton:[{"&:hover":{backgroundColor:"".concat(w.LU.backgroundHighest," !important")}}]});let R=function(e){var n,t,a,s=e.inputId,d=e.orgId,f=e.types,h=e.selectedGroups,w=e.value,y=e.setValue,b=e.onSelect,E=e.onClear,R=e.placeholder,F=void 0===R?"Find an existing group...":R,U=(0,o._)((0,u.useState)([]),2),P=U[0],O=U[1],T=(0,v.A)(w.trim(),250),L=(n={variables:{orgId:d,input:{count:10,types:f,filters:{name:{search:T}}}},ssr:!1,skip:!T,fetchPolicy:"cache-and-network",onCompleted:function(e){if((null==e||null==(t=e.currentUser)||null==(n=t.org)?void 0:n.__typename)==="Org"&&(null==e||null==(o=e.currentUser)||null==(i=o.org)||null==(r=i.groups)?void 0:r.__typename)==="OrgGroupConnection"){var n,t,r,i,o;O(e.currentUser.org.groups.items.filter(function(e){return!h.some(function(n){return e.id===n.id})}))}}},t=(0,r._)({},g,n),p.I(m,t)),M=L.data,G=L.loading,N=L.error,z=M&&M.currentUser&&"Org"!==M.currentUser.org.__typename?M.currentUser.org.message:void 0,H=M&&M.currentUser&&"Org"===M.currentUser.org.__typename&&"OrgGroupConnection"!==M.currentUser.org.groups.__typename?M.currentUser.org.groups.message:void 0,B=null==N?void 0:N.message,W=null!=(a=null!=z?z:H)?a:B;return(0,u.useEffect)(function(){0===w.length&&0!==P.length&&O([])},[w.length,P.length]),(0,l.Y)(A.S,{css:D.container,children:(0,l.Y)(c.Ay,{onSelect:function(e){e&&b(e)},itemToString:function(e){return(null==e?void 0:e.name)||""},initialHighlightedIndex:0,defaultHighlightedIndex:0,children:function(e){var n=e.getInputProps,t=e.getItemProps,o=e.getMenuProps,a=e.isOpen,u=e.highlightedIndex,c=e.getRootProps;return(0,l.FD)(A.S,(0,i._)((0,r._)({},c({refKey:"innerRef"})),{children:[(0,l.Y)(_.pd,(0,r._)({},n({id:s,ref:null,value:w,onChange:function(e){y(e.currentTarget.value)},placeholder:F,autoComplete:"off"}))),G||0!==w.length?null:(0,l.Y)(k.A,{css:D.rightIcon}),G?(0,l.Y)(A.S,{css:D.rightIcon,children:(0,l.Y)(C.A,{})}):null,!G&&w.length>0?(0,l.Y)(A.S,{css:D.rightIcon,children:(0,l.Y)(x.K0,{css:D.closeIconButton,alt:"Clear",tooltipBehavior:"hidden",onClick:function(){y(""),E&&E()},children:(0,l.Y)(I.A,{})})}):null,(0,l.FD)(A.S,(0,i._)((0,r._)({tag:"ul"},o({refKey:"innerRef"})),{children:[W?(0,l.Y)(A.S,{tag:"ul",css:D.dropdownMenu,children:(0,l.Y)(A.S,{tag:"li",css:D.result,children:(0,l.Y)(S.N,{colorway:"negative",text:W})})}):null,a&&P&&P.length?(0,l.Y)(A.S,{css:D.dropdownMenu,children:P.map(function(e,n){return(0,l.Y)(A.S,(0,i._)((0,r._)({tag:"li"},t({item:e,index:n})),{css:n===u?D.activeResult:D.result,children:(0,l.Y)(Y.EY,{height:"singleLine",multiline:!1,children:e.name})}),e.id)})}):null,a&&!G&&T.length>0&&0===P.length?(0,l.Y)(A.S,{tag:"ul",css:D.dropdownMenu,children:(0,l.Y)(A.S,{tag:"li",css:D.result,children:(0,l.FD)(Y.EY,{height:"singleLine",color:"dimmer",multiline:!1,children:['No results found for "',w,'"']})})}):null]}))]}))}})})}},17747:(e,n,t)=>{"use strict";t.d(n,{X:()=>d});var r=t(12584),i=t(41114),o=t(33819),a=t(85836),l=t(6066);function u(){var e=(0,r._)(["\n  fragment ComponentsReplActionsFeaturedRepl on Repl {\n    id\n    isPrivate\n    isFeaturedRepl\n    publicForkCount\n    timeUpdated\n    org {\n      id\n    }\n  }\n"]);return u=function(){return e},e}function c(){var e=(0,r._)(["\n  fragment ComponentsReplActions on Repl {\n    id\n    url\n    title\n    slug\n    user {\n      id\n      username\n    }\n    ...DeleteReplDialogRepl\n    ...EditReplFormRepl\n    ...ComponentsReplActionsFeaturedRepl\n    ...TransferReplToOrgDialogRepl\n    owner {\n      __typename\n      ... on Team {\n        id\n      }\n      ... on User {\n        id\n      }\n    }\n    authorizations {\n      deleteRepl {\n        isAuthorized\n      }\n      fork {\n        isAuthorized\n      }\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n"]);return c=function(){return e},e}var s=(0,i.J1)(u()),d=(0,i.J1)(c(),o.kh,a.pV,s,l.B_)},17887:e=>{e.exports={search:"Search_search__aMe_J",shortcut:"Search_shortcut__PEM95"}},22092:(e,n,t)=>{"use strict";t.d(n,{An:()=>A,PQ:()=>k,ce:()=>C,mC:()=>D});var r=t(17844),i=t(12584),o=t(41114),a=t(54744),l=t(17747),u=t(68160),c=t(41151),s=t(54830);function d(){var e=(0,i._)(["\n  fragment OrgReplMultiplayers on Repl {\n    multiplayers {\n      id\n      displayName\n      username\n      url\n      image\n      presenceStatus {\n        isOnline\n      }\n    }\n  }\n"]);return d=function(){return e},e}function p(){var e=(0,i._)(["\n  fragment OrgReplTemplateInfo on Repl {\n    templateInfo {\n      label\n      replId\n      iconUrl\n    }\n  }\n"]);return p=function(){return e},e}function f(){var e=(0,i._)(["\n  fragment OrgReplHostingDeployment on Repl {\n    hostingDeployment {\n      __typename\n      ... on HostingDeployment {\n        id\n        latestBuildStatus\n        currentBuild {\n          id\n          status\n          timeCreated\n          isPrivate\n          user {\n            id\n            displayName\n          }\n        }\n      }\n    }\n  }\n"]);return f=function(){return e},e}function h(){var e=(0,i._)(["\n  fragment OrgReplOwner on Repl {\n    owner {\n      __typename\n      ... on User {\n        id\n        username\n        url\n        image\n      }\n      ... on Team {\n        id\n        username\n        url\n        image\n      }\n    }\n  }\n"]);return h=function(){return e},e}function g(){var e=(0,i._)(["\n  fragment OrgReplAuthorizations on Repl {\n    authorizations {\n      editFileContents {\n        isAuthorized\n        code\n        message\n      }\n      viewFileContents {\n        isAuthorized\n        code\n        message\n      }\n      connectToWorkspace {\n        isAuthorized\n        code\n        message\n      }\n      deleteRepl {\n        isAuthorized\n        code\n        message\n      }\n      fork {\n        isAuthorized\n        code\n        message\n      }\n    }\n  }\n"]);return g=function(){return e},e}function m(){var e=(0,i._)(["\n  fragment OrgReplListRepl on Repl {\n    __typename\n    id\n    title\n    timeCreated\n    timeUpdated\n    imageUrl\n    iconUrl\n    wasPublished\n    isOwner\n    org {\n      id\n    }\n    project {\n      id\n      title\n    }\n    user {\n      id\n      ...OrgReplCreator\n    }\n    ...ReplLinkRepl\n    ...OrgReplMultiplayers\n    ...OrgReplTemplateInfo\n    ...OrgReplHostingDeployment\n    ...OrgReplOwner\n    ...OrgReplAuthorizations\n    ...ComponentsReplActions\n  }\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n"]);return m=function(){return e},e}function v(){var e=(0,i._)(["\n  fragment OrgReplsResult on ReplConnection {\n    items {\n      ...OrgReplListRepl\n    }\n    pageInfo {\n      hasPreviousPage\n      previousCursor\n      hasNextPage\n      nextCursor\n    }\n  }\n  ","\n"]);return v=function(){return e},e}function w(){var e=(0,i._)(["\n  fragment OrgReplManagement on Org {\n    ...OrgMetadata\n    authorizations {\n      createPublicRepl: createRepl(private: false) {\n        isAuthorized\n        message\n      }\n      createPrivateRepl: createRepl(private: true) {\n        isAuthorized\n        message\n      }\n    }\n  }\n  ","\n"]);return w=function(){return e},e}function y(){var e=(0,i._)(["\n  query OrgRepls($orgId: String!, $replsInput: OrgReplsInput!) {\n    currentUser {\n      __typename\n      id\n      org(orgId: $orgId) {\n        __typename\n        ... on Org {\n          ...OrgReplManagement\n          repls(input: $replsInput) {\n            __typename\n            ... on ReplConnection {\n              ...OrgReplsResult\n            }\n            ... on UserError {\n              message\n            }\n          }\n        }\n        ... on Error {\n          message\n        }\n      }\n    }\n  }\n  ","\n  ","\n"]);return y=function(){return e},e}var b={},x=(0,o.J1)(d()),_=(0,o.J1)(p()),S=(0,o.J1)(f()),Y=(0,o.J1)(h()),A=(0,o.J1)(g()),I=(0,o.J1)(m(),s._L,u.r,x,_,S,Y,A,l.X),C=(0,o.J1)(v(),I),k=(0,o.J1)(w(),c.wW),E=(0,o.J1)(y(),k,C);function D(e){var n=(0,r._)({},b,e);return a.I(E,n)}},24474:(e,n,t)=>{"use strict";t.d(n,{cr:()=>c,tU:()=>u,ZA:()=>C});var r=t(95570),i="object"==typeof localStorage&&(localStorage.getItem("debug")?.includes("next-usequerystate")||localStorage.getItem("debug")?.includes("nuqs"))||!1;function o(e,...n){if(!i)return;let t=function(e,...n){return e.replace(/%[sfdO]/g,e=>{let t=n.shift();return"%O"===e&&t?JSON.stringify(t).replace(/"([^"]+)":/g,"$1:"):String(t)})}(e,...n);performance.mark(t),r.log(e,...n)}function a(e,n,t){try{return e(n)}catch(e){return!function(e,...n){i&&r.warn(e,...n)}("[nuqs] Error while parsing value `%s`: %O"+(t?" (for key `%s`)":""),n,e,t),null}}function l(e){function n(n){if(void 0===n)return null;let t="";if(Array.isArray(n)){if(void 0===n[0])return null;t=n[0]}return"string"==typeof n&&(t=n),a(e.parse,t)}return{...e,parseServerSide:n,withDefault(e){return{...this,defaultValue:e,parseServerSide:t=>n(t)??e}},withOptions(e){return{...this,...e}}}}var u=l({parse:e=>e,serialize:e=>`${e}`});l({parse:e=>{let n=parseInt(e);return Number.isNaN(n)?null:n},serialize:e=>Math.round(e).toFixed()}),l({parse:e=>{let n=parseInt(e,16);return Number.isNaN(n)?null:n},serialize:e=>{let n=Math.round(e).toString(16);return n.padStart(n.length+n.length%2,"0")}}),l({parse:e=>{let n=parseFloat(e);return Number.isNaN(n)?null:n},serialize:e=>e.toString()});var c=l({parse:e=>"true"===e,serialize:e=>e?"true":"false"});l({parse:e=>{let n=parseInt(e);return Number.isNaN(n)?null:new Date(n)},serialize:e=>e.valueOf().toString()}),l({parse:e=>{let n=new Date(e);return Number.isNaN(n.valueOf())?null:n},serialize:e=>e.toISOString()});var s={409:"Multiple versions of the library are loaded. This may lead to unexpected behavior. Currently using %s, but %s was about to load on top.",429:"URL update rate-limited by the browser. Consider increasing `throttleMs` for keys %s. %O",500:"Empty search params cache. Search params can't be accessed in Layouts.",501:"Search params cache already populated. Have you called `parse` twice?"};function d(e){return`[nuqs] ${s[e]}
  See https://err.47ng.com/NUQS-${e}`}var p=t(33329),f=t(21462),h=t(95570),g=function(){if("undefined"==typeof window||!window.GestureEvent)return 50;try{let e=navigator.userAgent?.match(/version\/([\d\.]+) safari/i);return parseFloat(e[1])>=17?120:320}catch{return 320}}(),m=new Map,v={history:"replace",scroll:!1,shallow:!0,throttleMs:g},w=new Set,y=0,b=null;function x(e){return m.get(e)??null}function _(e,n){let t=e.split("#")[0]??"";return t+function(e){if(0===e.size)return"";let n=[];for(let[t,r]of e.entries())n.push(`${t}=${r.replace(/%/g,"%25").replace(/\+/g,"%2B").replace(/ /g,"+").replace(/#/g,"%23").replace(/&/g,"%26").replace(/"/g,"%22").replace(/'/g,"%27").replace(/`/g,"%60").replace(/</g,"%3C").replace(/>/g,"%3E")}`);return"?"+n.join("&")}(n)+location.hash}var S=Symbol("__nuqs__SYNC__"),Y="__nuqs__NO_SYNC__",A=Symbol("__nuqs__NOTIFY__"),I=function(e){return{all:e=e||new Map,on:function(n,t){var r=e.get(n);r?r.push(t):e.set(n,[t])},off:function(n,t){var r=e.get(n);r&&(t?r.splice(r.indexOf(t)>>>0,1):e.set(n,[]))},emit:function(n,t){var r=e.get(n);r&&r.slice().map(function(e){e(t)}),(r=e.get("*"))&&r.slice().map(function(e){e(n,t)})}}}();function C(e,{history:n="replace",shallow:t=!0,scroll:r=!1,throttleMs:i=g,parse:l=e=>e,serialize:u=String,defaultValue:c,startTransition:s}={history:"replace",scroll:!1,shallow:!0,throttleMs:g,parse:e=>e,serialize:String,defaultValue:void 0}){let A=(0,p.useRouter)(),k=(0,p.useSearchParams)(),[E,D]=f.useState(()=>{let n=x(e),t="object"!=typeof location?k?.get(e)??null:new URLSearchParams(location.search).get(e)??null,r=n??t;return null===r?null:a(l,r,e)}),R=f.useRef(E);o("[nuqs `%s`] render - state: %O, iSP: %s",e,E,k?.get(e)??null),f.useEffect(()=>{if("14.0.3"!==window.next.version)return;let n=k.get(e)??null,t=null===n?null:a(l,n,e);o("[nuqs `%s`] syncFromUseSearchParams %O",e,t),R.current=t,D(t)},[k?.get(e),e]),f.useInsertionEffect(()=>{function n(n){o("[nuqs `%s`] updateInternalState %O",e,n),R.current=n,D(n)}function t(t){let r=t.get(e)??null,i=null===r?null:a(l,r,e);o("[nuqs `%s`] syncFromURL %O",e,i),n(i)}return o("[nuqs `%s`] subscribing to sync",e),I.on(S,t),I.on(e,n),()=>{o("[nuqs `%s`] unsubscribing from sync",e),I.off(S,t),I.off(e,n)}},[e]);let F=f.useCallback((a,l={})=>{let p="function"==typeof a?a(R.current??c??null):a;I.emit(e,p);var f={history:l.history??n,shallow:l.shallow??t,scroll:l.scroll??r,throttleMs:l.throttleMs??i,startTransition:l.startTransition??s};let x=null===p?null:u(p);return o("[nuqs queue] Enqueueing %s=%s %O",e,x,f),m.set(e,x),"push"===f.history&&(v.history="push"),f.scroll&&(v.scroll=!0),!1===f.shallow&&(v.shallow=!1),f.startTransition&&(w.add(f.startTransition),v.shallow=!1),v.throttleMs=Math.max(f.throttleMs??g,Number.isFinite(v.throttleMs)?v.throttleMs:0),null===b&&(b=new Promise((e,n)=>{if(!Number.isFinite(v.throttleMs)){o("[nuqs queue] Skipping flush due to throttleMs=Infinity"),e(new URLSearchParams(location.search)),setTimeout(()=>{b=null},0);return}function t(){y=performance.now();let[t,r]=function(e){let n=new URLSearchParams(location.search);if(0===m.size)return[n,null];let t=Array.from(m.entries()),r={...v},i=Array.from(w);for(let[e,i]of(m.clear(),w.clear(),v.history="replace",v.scroll=!1,v.shallow=!0,v.throttleMs=g,o("[nuqs queue] Flushing queue %O with options %O",t,r),t))null===i?n.delete(e):n.set(e,i);try{let t=window.next?.router;if("string"==typeof t?.state?.asPath){let e=_(t.state.asPath.split("?")[0]??"",n);o("[nuqs queue (pages)] Updating url: %s",e),("push"===r.history?t.push:t.replace).call(t,e,e,{scroll:r.scroll,shallow:r.shallow})}else{let t=_(location.origin+location.pathname,n);o("[nuqs queue (app)] Updating url: %s",t),("push"===r.history?history.pushState:history.replaceState).call(history,history.state,Y,t),r.scroll&&window.scrollTo(0,0),r.shallow||function(e,n){let t=r=>{if(r===e.length)return n();let i=e[r];if(!i)throw Error("Invalid transition function");i(()=>t(r+1))};t(0)}(i,()=>{e.replace(t,{scroll:!1,shallow:!1})})}return[n,null]}catch(e){return h.error(d(429),t.map(([e])=>e).join(),e),[n,e]}}(A);null===r?e(t):n(t),b=null}setTimeout(function(){let e=performance.now()-y,n=v.throttleMs,r=Math.max(0,Math.min(n,n-e));o("[nuqs queue] Scheduling flush in %f ms. Throttled at %f ms",r,n),0===r?t():setTimeout(t,r)},0)})),b},[e,n,t,r,i,s]);return[E??c??null,F]}"object"==typeof history&&function(){let e="1.15.3",n=history.__nuqs_patched;if(n){n!==e&&h.error(d(409),n,e);return}for(let n of(o("[nuqs] Patching history with %s",e),["pushState","replaceState"])){let e=history[n].bind(history);history[n]=function(t,r,i){if(!i)return o("[nuqs] history.%s(null) (%s) %O",n,r,t),e(t,r,i);let a=r===Y?"internal":"external",l=new URL(i,location.origin).searchParams;if(o("[nuqs] history.%s(%s) (%s) %O",n,i,a,t),"external"===a){for(let[e,n]of l.entries()){let t=x(e);null!==t&&t!==n&&(o("[nuqs] Overwrite detected for key: %s, Server: %s, queue: %s",e,n,t),l.set(e,t))}setTimeout(()=>{o("[nuqs] External history.%s call: triggering sync with %s",n,l),I.emit(S,l),I.emit(A,{search:l,source:a})},0)}else setTimeout(()=>{I.emit(A,{search:l,source:a})},0);return e(t,r===Y?"":r,i)}}Object.defineProperty(history,"__nuqs_patched",{value:e,writable:!1,enumerable:!1,configurable:!1})}()},26242:e=>{e.exports={importButtonContainer:"FigmaImportForm_importButtonContainer__wEqpP",limitMeter:"FigmaImportForm_limitMeter__U_gFJ",input:"FigmaImportForm_input__hx_c9",container:"FigmaImportForm_container__ZGfRZ",divider:"FigmaImportForm_divider__POsUX"}},26760:(e,n,t)=>{"use strict";t.d(n,{Q9:()=>f,_:()=>d,wp:()=>p});var r=t(57034),i=t(27338),o=(0,t(86105)._)(["workspace-guided-tour-data-app","workspace-guided-tour-portfolio-website"]).concat(["100-days-of-python","100-days-of-python-promo","add-guest-new-user","agent-banner","agent-disclaimer","ai-image-generation-banner","apps-announcement","appsOnboardingForkRepl","appsOnboardingRunRepl","appsOnboardingSelectRepl","april_2019_hiring","archive-cta","assignment_markdown","boosts-modal","bounties-home-module","bounties-services-tab","changelog-banner","classroom-repl-talk-ask-on-error","cleanup-popover-dismissed","codemirror-explorers-banner","create-model-solution","createWebsite","curriculum-launch-modal","custom-themes-banner","custom-domain-purchase-announcement","cycles-release","cycles-survey","dashboard_new_folder","dashboard_search","dashboard_templates","debugger_start","dec172020maintenance","deployment-analytics-dot","deployments-banner","deployments-mobile-download","deployments-synced-secrets","desktop-app-banner","desktop-app-nav-menu","devtools-intro","discount_hacker_18","discount_holiday_19","discount_newyear_19","downtime-073118","draw-new-user-cta","edfest-announcement","enveditorintro","file_tree","flexible-spend-announcement","follow-cursor-avatar-click","ghostwriter-banner","ghostwriter-chat-banner","ghostwriter-repl-resources-cta","ghostwriter-trial-repl-resources-cta","ghostwriter-trial-3-day-left-modal","ghostwriter-trial-banner","ghostwriter-trial-expired-modal","ghostwriter-post-purchase-tour","ghostwriter-existing-user-chat-beta-tour","grid_click","hacker_upgrade","hacker-gift","header-layout-tooltip","home","home-feed","home-onboarding-checklist","home-onboarding-checklist-apps","home-onboarding-checklist-learn","home-onboarding-checklist-repl","home-page-modules-tooltip","home-page-demo-repl-tour-suggestion","hosting_url","introduceYourself","js-4-day-challenge-day-1","js-4-day-challenge-day-2","js-4-day-challenge-day-3","js-4-day-challenge-day-4","js-4-day-challenge-day-end","july_2019_music_jam","july18_irl","landing","languagesInterestedIn","launch-modal","learn-onboarding","legacy-cycles-grant-notice","make_website","march_2019_game_jam","migrate-to-deployments-banner","migrated_unnamed_repls","mobile-app-banner","mobile-app-banner-web-update","mobile-announcement","mobile-new-workspace-banner","mobile-survey-banner-11042021","move_unnamed_repls","repricing-announcement","multiplayer","multiplayer_invite","multiplayer_welcome","new_in_repls","new_share","nft-world-2022","onboarding_connection_toast","onboarding_run","onboarding-simplify-experiment","packager-shell-hint","packman","prettier-formatter","product_hunt","profile-refresh-beta","profile2","projects-overview-cta","projects-overview-tests-disclaimer","publish-guidelines","repl_stars","repl-con-2022","repl-talk-update-2021","repl-talk-update-2022","replit-teams-onboarding-tour","resources-upgrade-modal","revisions_history","run_on_replit","saw_unnamed_folders","search","self-grouping-projects-cta","series-b-announcement","share_classroom","share_repl_to_talk","show_packager_about_tooltip","show_packager_import_tooltip","show_test_update_tooltip","stack-create-cta","stack-migration-cta","summer_hacker","summer-2021-pd-survey","teams_pro_module","teams-grading-survey","teams-pro-2022","template-jam-announcement","threads-2-announcement","upgrade_module","usage-migration-reserved-vms","usage-migration-power-ups-free-user","usage-migration-power-ups-core-user","workspace-always-on-user-reserved-deployments-announcement","workspace-assistant-auto-apply-changes","workspace-assistant-auto-restart-repl","workspace-assistant-intro-video","workspace-deployments-webview-banner","workspace-desktop-tour","workspace-desktop-tour19","workspace-experience-task-completion-survey-06022022","workspace-experience-task-completion-survey-nudge-06022022","workspace-guided-tour-data-app","workspace-guided-tour-portfolio-website","workspace-history-announcement","workspace-ssh-connect-to-vscode-config-tour","workspace-tools-databases-postgres-tour","workspace-repo-projects-tour","youtube-in-the-ws","themes-announcement","extensions-onboarding-checklist","extensions-onboarding-checklist-create","extensions-onboarding-checklist-concepts","extensions-onboarding-checklist-api","extensions-onboarding-checklist-publish","extensions-store-info","external-claim-privacy-warning","gcp-docs-landing-screen","trending-home-module","following-home-module","storage-announcement","pro-onboarding-tour","pro-trial-expired","pro-trial-hcaptcha-fail","pro-trial-enrollment","ai-code-completion","replit-ai-chat-onbording-10-2023","workspace-desktop-new-user-tour","workspace-desktop-tour-2024","workspace-bonsai-tour-2025","workspace-desktop-sidebar-tour","replit-core-banner","hosting-deployments-announcement-7-2023","teams-for-education-deprecation-12-2023","teams-for-education-verification-prompt","usage-based-billing-announcement-1-2024","port-nudges","mobileApp-themes-announcement","mobileApp-server-change-CTA","mobileApp-purchase-subscription-announcement","mobileApp-onboarding-education-announcement","mobileApp-teams-coming-soon-announcement","incident-20240219-action-required-banner","incident-20250711-refund-banner","scheduled-deployments-banner","quick-start-guides","teams-projects-onboarding-card","onboarding-purchase-seen","replit-teams-banner","integrations-toast","starter-changes-announcement-aug-2024","private-deployments-banner","editors-have-secret-access-warning","workspace-right-sidebar-cta","assistant-now-defaulting-to-claude-3-5","org-roles-and-permissions-info-banner","onboarding-seen","teams-sponsorships-onboarding-card","agent-billing-notification-usage-page","agent-billing-notification-creation-entrypoint","agent-billing-creation-disclaimer","agent-billing-workspace-disclaimer","agent-billing-threshold-reached-warning","agent-billing-workspace-flex-credits-almost-reached","agent-billing-announcement","agent-billing-announcement-banner","drizzle-studio-announcement","freemium-agent-access-announcement","referral-program-banner","referral-pending-banner","post-verification-educational-upsell","invoice-threshold-change-announcement","agent-v2-welcome-modal","agent-v2-homepage-modal","agent-mobile-notification-nudge","visual-editor-callout","deterministic-edits-callout","bonsai-ws-agent-onboarding","queue-drawer-callout","viewer-seats-announcement","apps-private-by-default-announcement","agent-billing-v2-announcement","agent-billing-v2-home-banner","effort-based-pricing-announcement","dynamic-intelligence-modal","expert-mode-acknowledged","workspace-deployment-pane-production-database-banner","workspace-database-pane-toggle-tour"]),a=t(61683),l=t(5942),u=t(91584),c=t(92152),s=t(36967),d=function(e,n){return"".concat(e,"-tutorialChallenge-").concat(n)},p=function(e,n){var t,r=JSON.parse(a.A.get(d(e,n),"string")||"{}");if("string"==typeof r.tourName&&"string"==typeof r.url&&(t=r.tourName,o.includes(t)))return r},f=function(e){var n=e.challenge,t=o.find(function(e){return e.toString()===n.tourName})||"js-4-day-challenge-day-1",a=(0,u.g)(t),d=a.isDone,p=a.isLoading,f=a.setAsDone,h=(0,i.useRouter)();return p?null:(0,r.Y)(c.$n,{colorway:d?"primary":"positive",onClick:function(){f(),(0,l.u4)(l.AZ.TUTORIAL_DONE_BUTTON_COMPLETED),h.push("/~")},disabled:d,iconLeft:(0,r.Y)(s.A,{}),size:"big",text:d?"Challenge completed!":"Complete Challenge"})}},33819:(e,n,t)=>{"use strict";t.d(n,{P_:()=>p,kh:()=>s});var r=t(17844),i=t(12584),o=t(41114),a=t(39590);function l(){var e=(0,i._)(["\n  fragment DeleteReplDialogRepl on Repl {\n    id\n    title\n  }\n"]);return l=function(){return e},e}function u(){var e=(0,i._)(["\n  mutation DeleteReplDialogReplDelete($id: String!) {\n    deleteRepl(id: $id) {\n      id\n    }\n  }\n"]);return u=function(){return e},e}var c={},s=(0,o.J1)(l()),d=(0,o.J1)(u());function p(e){var n=(0,r._)({},c,e);return a.n(d,n)}},34104:e=>{e.exports={contentContainer:"Workspace_contentContainer__DubhE"}},35728:(e,n,t)=>{"use strict";t.d(n,{A:()=>A});var r=t(12694),i=t(57034),o=t(21462),a=t(83213),l=t(79391),u=t(79890),c=t(18304),s=t(83020),d=t(7617),p=t(97877),f=t(85743),h=t(36967),g=t(4883),m=t(96696),v=t(62017),w=t(83868),y=t(30484),b=t(29351),x=t(78519),_=(0,c.x)({scopeSelector:[s.wp.position.relative],selectOption:[{"&:hover":{cursor:"auto"}}],icon:[s.wp.position.absolute,s.wp.top("50%"),s.wp.left(-4),{transform:"translate(-100%, -50%)"}]}),S=function(e){switch(e){case a.oOo.Owner:return{icon:(0,i.Y)(y.A,{}),label:"Owner",description:"Full permissions including App deletion"};case a.oOo.Deployer:return{icon:(0,i.Y)(m.A,{}),label:"Deployer",description:"Can edit, deploy, and manage resources"};case a.oOo.Editor:return{icon:(0,i.Y)(v.A,{}),label:"Editor",description:"Can edit code and view resources"};case a.oOo.Viewer:return{icon:(0,i.Y)(w.A,{}),label:"Viewer",description:"Can only view code and fork Apps"};case a.oOo.None:return{icon:(0,i.Y)(g.A,{}),label:"None",description:"Cannot search, view, or edit Apps"}}},Y=function(e){switch(e){case a.oOo.Owner:return a.Fvk.Owner;case a.oOo.Deployer:return a.Fvk.Deployer;case a.oOo.Editor:return a.Fvk.Editor;case a.oOo.Viewer:return a.Fvk.Viewer}};let A=function(e){var n,t=e.group,c=e.repl,s=e.options,g=e.onScopeChange,m=e.iconSize,v=void 0===m?24:m,w=(0,r._)((0,o.useState)(!1),2),y=w[0],A=w[1],I=(0,r._)((0,o.useState)(s.find(function(e){return e.status===a.jLn.Current})),2),C=I[0],k=I[1],E="".concat(c.id,"-role-").concat((0,o.useId)()),D=C?S(C.role).label:void 0,R=c.authorizations.editPermissions.isAuthorized,F=(0,r._)((0,l.k6)({onCompleted:function(e){"OrgGroup"===e.updateOrgGroupScopes.__typename&&(g(),A(!0),setTimeout(function(){return A(!1)},2e3))}}),2),U=F[0],P=F[1],O=P.data,T=P.loading,L=P.error,M=(null==O?void 0:O.updateOrgGroupScopes)&&"OrgGroup"!==O.updateOrgGroupScopes.__typename?O.updateOrgGroupScopes.message:null==L?void 0:L.message;return n=M?(0,i.Y)(p.m_,{tooltip:M,children:(0,i.Y)(x.A,{size:v,color:u.LU.accentNegativeDefault})}):T?(0,i.Y)(b.A,{size:v}):y?(0,i.Y)(h.A,{size:v,color:u.LU.accentPositiveDefault}):null,(0,i.FD)(f.S,{css:_.scopeSelector,row:!0,gap:8,justify:"end",children:[n?(0,i.Y)(f.S,{css:_.icon,children:n}):null,(0,i.Y)(p.m_,{tooltip:"You cannot edit this group's permissions.",isDisabled:R,children:(0,i.Y)(d.in,{id:E,label:null!=D?D:"Select a role...","aria-label":"".concat(t.name,"'s access to ").concat(c.title),onAction:function(e){var n=s.find(function(n){return n.role===e});if(n&&n.role!==(null==C?void 0:C.role)){k(n);var r=n.role===a.oOo.None?[]:[{resourceId:c.id,role:Y(n.role)}],i=n.role===a.oOo.None?[{resourceType:a.mWV.Repl,resourceId:c.id}]:[];U({variables:{input:{orgGroupId:t.id,orgScopes:[],groupScopes:[],replScopes:r,removeScopes:i}}})}},items:s,disallowEmptySelection:!0,isDisabled:!R,children:function(e){var n=S(e.role),r=e.status===a.jLn.Unavailable;return(0,i.Y)(d.Dr,{id:e.role,label:n.label,description:r?"".concat(t.name," cannot have ").concat(e.role," access"):n.description,css:_.selectOption,icon:n.icon,isDisabled:r},e.role)}})})]})}},35791:e=>{e.exports={tab:"Tab_tab__EF2Lk",active:"Tab_active__WvwT0",dragging:"Tab_dragging__eIlED",closeButton:"Tab_closeButton__SEFkG",tabButton:"Tab_tabButton__2m0lS",tabIcon:"Tab_tabIcon__Gmt_u",tabTitle:"Tab_tabTitle__hyRHu",uniquePath:"Tab_uniquePath___dbzh",activeLine:"Tab_activeLine__jYh7y",indicator:"Tab_indicator__wLq2U"}},36974:(e,n,t)=>{"use strict";t.d(n,{g:()=>w});var r=t(12694),i=t(57034),o=t(21462),a=t(61646),l=t(49374),u=t(27970),c=t(85577),s=t(67401),d=t(79890),p=t(18304),f=t(17376),h=t(83020),g=t(19789),m=t(60421),v=t(85743),w=function(e){var n=e.isIndividualOwner,t=e.showUpgradeForm,p=(0,r._)((0,o.useState)({type:"closed"}),2),f=p[0],h=p[1],w=(0,l.g)();if(!n||"loading"===w.type||"error"===w.type)return null;var b=w.replCount,x=w.isStarterUser,_=w.shouldEnforceUsersOverLimit;if(!x||!_)return null;var S=a.q-b,Y=Array.from({length:a.q}).map(function(e,n){return(0,i.Y)(v.S,{css:y.measureBar,style:{backgroundColor:n<b?(0,c.p)({replCount:b}):d.LU.backgroundDefault,border:n+1>b?"1px solid ".concat(d.LU.outlineDefault):"1px solid ".concat((0,c.A)({replCount:b}))}},n)});return(0,i.FD)(i.FK,{children:[(0,i.Y)(v.S,{tag:"button",css:y.bannerWrapper,onClick:function(e){e.preventDefault(),t?t():h({type:"open",onUpgradeConfirm:w.refetch})},children:(0,i.FD)(g.ui,{css:y.container,p:8,children:[(0,i.Y)(m.EY,{variant:"small",color:"dimmest",height:"singleLine",css:y.text,children:b===a.q-1?"This is your last free app":b<a.q?"You have ".concat(S," free ").concat((0,s.A)("app",S)," left"):"You're at the limit of free Apps"}),(0,i.Y)(v.S,{css:y.measures,row:!0,gap:4,children:Y})]})}),(0,i.Y)(u.k,{setState:h,state:f})]})},y=(0,p.x)({bannerWrapper:[h.wp.reset.button,h.wp.textAlign.left,h.wp.borderRadius()],container:[h.wp.cursor.pointer,h.wp.borderRadius(),f.b.filled,h.wp.rowWithGap(24),h.wp.align.center],text:[h.wp.fontWeight.medium],measures:[h.wp.cursor.pointer,h.wp.flex.growAndShrink(1),h.wp.minWidth(42),h.wp.align.center],measureBar:[h.wp.height(10),h.wp.borderRadius(2),h.wp.overflow("visible"),h.wp.backgroundColor.backgroundDefault,h.wp.flex.growAndShrink(1)]})},37540:(e,n,t)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/replEnvironmentDesktop",function(){return t(5967)}])},41151:(e,n,t)=>{"use strict";t.d(n,{rh:()=>u,wW:()=>c});var r=t(12584),i=t(41114);function o(){var e=(0,r._)(["\n  fragment OrgCurrentUser on CurrentUser {\n    id\n    displayName\n    username\n  }\n"]);return o=function(){return e},e}function a(){var e=(0,r._)(["\n  fragment OrgMetadata on Org {\n    id\n    slug\n    type\n    name\n    image\n  }\n"]);return a=function(){return e},e}function l(){var e=(0,r._)(["\n  query OrgMetadata($orgId: String!) {\n    currentUser {\n      __typename\n      ...OrgCurrentUser\n      org(orgId: $orgId) {\n        __typename\n        ... on Org {\n          ...OrgMetadata\n        }\n        ... on NotFoundError {\n          message\n        }\n      }\n    }\n  }\n  ","\n  ","\n"]);return l=function(){return e},e}var u=(0,i.J1)(o()),c=(0,i.J1)(a());l()},47130:(e,n,t)=>{"use strict";t.d(n,{B:()=>i});var r=t(90629);function i(e,n){return r.v4(function(t){t.setTag("start-with-ai",!0),n&&t.setExtras(n),r.Cp(e)}),e}},48749:(e,n,t)=>{"use strict";t.d(n,{H:()=>eg,A:()=>em});var r=t(57034),i=t(91839),o=t(17844),a=t(12584),l=t(41114),u=t(54744),c=t(78864);function s(){var e=(0,a._)(["\n  fragment FigmaImportCurrentUser on CurrentUser {\n    id\n    url\n    image\n    username\n    fullName\n    email\n    timeCreated\n    isStaff: hasRole(role: REPLIT_STAFF)\n    replCount {\n      ... on ReplCount {\n        count\n      }\n    }\n    ...ReplOwnerCurrentUser\n    teams {\n      id\n      ...ReplOwnerTeam\n    }\n    figmaAuth: auth(provider: FIGMA) {\n      provider\n    }\n  }\n  ","\n  ","\n"]);return s=function(){return e},e}function d(){var e=(0,a._)(["\n  query FigmaImport {\n    currentUser {\n      id\n      ...FigmaImportCurrentUser\n    }\n  }\n  ","\n"]);return d=function(){return e},e}var p={},f=(0,l.J1)(s(),c.nM,c.eC),h=(0,l.J1)(d(),f),g=t(20632),m=t(51937),v=t(84885),w=t(5942),y=t(92152),b=t(60421),x=t(85743),_=t(29935),S=t(53847),Y=t(12694),A=t(82643),I=t(21462),C=t(90629),k=t(24474),E=t(21701),D=t(92320),R=t(27614),F=t(9249),U=t(80453),P=t(7409),O=t(62991),T=t(49374),L=t(36974),M=t(41545),G=t(92932),N=t(69673),z=t(84516),H=t(62019),B=t(37743),W=t(1833),j=t(93629),$=t(89264),q=t(27338),V=t(39590);function K(){var e=(0,a._)(["\n  mutation CreateFigmaRepl($input: CreateReplInput!) {\n    createRepl(input: $input, isTitleAutoGenerated: false) {\n      ... on Repl {\n        id\n        url\n        isPrivate\n        nextPagePathname\n        origin {\n          id\n          isOwner\n        }\n        config {\n          figmaUrl\n          figmaImportStatus\n        }\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n"]);return K=function(){return e},e}var Z={},J=(0,l.J1)(K()),Q=t(47130),X=t(17421),ee=t(42236),en=t(47925),et=function(e){function n(e){var t;return(0,B._)(this,n),(t=(0,H._)(this,n,[e])).name="CreateFigmaReplError",t}return(0,W._)(n,e),n}((0,$._)(Error)),er=t(7737),ei=t(29351),eo=t(26242),ea=t.n(eo),el="Invalid Figma URL. Please ensure link is a valid Figma frame for your connected account in the format https://www.figma.com/design/...";function eu(e){var n,t,a,l,u,c,s,d,p=e.currentUser,f=e.onUpsell,h=(0,Y._)((0,I.useState)(null),2),g=h[0],m=h[1],v=(0,Y._)((0,k.ZA)("figmaUrl",{defaultValue:""}),2),b=v[0],H=v[1],B=(0,G.A)(b,500),W=(0,M.ET)().orgId,$=(0,Y._)((0,P.p)(p,W),3),K=$[0],eo=$[1],eu=$[2],ec=(0,I.useId)(),es=(0,O.d)(K,void 0),ed=es.isPrivate,ep=es.setIsPrivate,ef=es.privacyAuthz,eh=es.isValidPrivacy,eg=(t=(n=(0,Y._)((0,I.useState)("idle"),2))[0],a=n[1],l=(0,X.m6)(),c=(0,Y._)((u=(0,o._)({},Z,void 0),V.n(J,u)),1)[0],s=(0,q.useRouter)(),d=(0,ee.A)(),{createFigmaRepl:function(e){return(0,_._)(function(e){var n,t,r,u,p,f,h,g,m;return(0,A.YH)(this,function(v){switch(v.label){case 0:return n=e.isPrivate,t=e.orgId,r=e.figmaUrl,a("creating_repl"),[4,c({variables:{input:{isPrivate:n,orgId:t,figmaUrl:r,figmaImportStatus:i.u4D.Started}}})];case 1:if((f=v.sent()).errors)throw(0,Q.B)(new et(f.errors.map(function(e){return e.message}).join(", "))),new et("Something went wrong. Please try again.");if((null==(p=f.data)||null==(u=p.createRepl)?void 0:u.__typename)==="UserError")throw(0,Q.B)(new et(f.data.createRepl.message)),new et(f.data.createRepl.message);if(!f.data)throw new et("Something went wrong. Please try again.");if(h=f.data.createRepl,a("opening_repl"),g={enterInAgentMode:!0,agentOnboarding:!1},m=(0,en.q1)(h,g),!l)return[3,2];return window.location.href=(0,en.cY)(h,g),[3,4];case 2:return[4,s.push((0,j._)((0,o._)({},m.href),{pathname:d}),m.as)];case 3:v.sent(),v.label=4;case 4:return[2]}})}).apply(this,arguments)},status:t}),em=eg.createFigmaRepl,ev=eg.status;(0,I.useEffect)(function(){B?m((0,Y._)((0,E.uQ)(B),1)[0]?null:el):m(null)},[B]);var ew=(0,T.g)(),ey="CurrentUser"===K.__typename&&K.id===p.id,eb=ey&&"data"===ew.type&&!ew.canCreateRepl;return(0,r.Y)(x.S,{tag:"form",onSubmit:function(e){(0,_._)(function(){var e;return(0,A.YH)(this,function(n){switch(n.label){case 0:if(!(0,Y._)((0,E.uQ)(b),1)[0])return m(el),[2];(0,w.u4)(w.AZ.FIGMA_IMPORT_USED,{action:"form_submitted"}),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,em({isPrivate:ed,orgId:"Org"===K.__typename?K.id:void 0,figmaUrl:b})];case 2:return n.sent(),[3,4];case 3:return e=n.sent(),(0,S._)(e,et)?m(e.message):(m("Something went wrong. Please try again."),C.v4(function(n){n.setTag("figma-import-create-repl",!0),n.setExtras({figmaUrl:b,isPrivate:ed,orgId:"Org"===K.__typename?K.id:void 0}),C.Cp(e)})),[2];case 4:return[2]}})})(),e.preventDefault()},gap:16,children:(0,r.Y)(x.S,{gap:8,children:(0,r.FD)(x.S,{clsx:ea().container,p:16,children:[(0,r.FD)(x.S,{gap:8,pb:8,children:[(0,r.Y)("label",{htmlFor:"figmaUrl",children:"Figma URL"}),(0,r.Y)(z.pd,{id:"figmaUrl",value:b,onChange:function(e){return H(e.target.value)},placeholder:"https://www.figma.com/design/...",clsx:ea().input})]}),g?(0,r.Y)(x.S,{pb:8,py:4,children:(0,r.Y)(D.A,{children:g})}):null,(0,r.Y)(N.a,{clsx:ea().divider}),(0,r.FD)(x.S,{gap:12,children:[eu.length>1?(0,r.FD)(x.S,{gap:8,children:[(0,r.Y)("label",{htmlFor:ec,children:"Owner"}),(0,r.Y)(U.A,{id:ec,owners:eu,selectedOwner:K,setSelectedOwner:eo})]}):null,"Org"===K.__typename?(0,r.Y)(R.A,{org:K,isPrivate:ed,setIsPrivate:ep,privacyAuthz:ef}):(0,r.Y)(F.Z,{isPrivate:ed,isTeam:"Team"===K.__typename,setIsPrivate:ep,privacyAuthz:ef,onUpsell:f})]}),(0,r.FD)(x.S,{clsx:ea().importButtonContainer,row:!0,gap:12,justify:"space-between",pt:12,children:[(0,r.Y)(x.S,{clsx:ea().limitMeter,children:(0,r.Y)(L.g,{isIndividualOwner:ey,showUpgradeForm:function(){(0,w.u4)(w.AZ.UPGRADE_SELECTED,{source:"import_figma"}),null==f||f(!0)}})}),(0,r.Y)(x.S,{align:"center",justify:"center",children:(0,r.Y)(y.$n,{iconLeft:"idle"!==ev?(0,r.Y)(ei.A,{}):(0,r.Y)(er.A,{}),colorway:"primary",stretch:!0,type:"submit",loading:"loading"===ew.type,disabled:!!g||"idle"!==ev||"loading"===ew.type||eb||!eh,text:"Import from Figma",dataCy:"import-figma-btn"})})]})]})})})}var ec=t(56987),es=t(37414),ed=t(42548),ep=t(46921),ef=t(831),eh=t.n(ef),eg=function(){return(0,r.FD)(x.S,{row:!0,justify:"center",gap:8,pb:12,align:"center",children:[(0,r.Y)(x.S,{justify:"center",align:"center",clsx:eh().figmaIcon,children:(0,r.Y)(ed.A,{size:24})}),(0,r.Y)(x.S,{justify:"center",align:"center",children:(0,r.Y)(es.A,{})}),(0,r.Y)(x.S,{justify:"center",align:"center",clsx:eh().replitIcon,children:(0,r.Y)(ep.A,{size:24})})]})};function em(e){var n,t,a,l=e.onUpsell,c=(n={fetchPolicy:"no-cache"},t=(0,o._)({},p,n),u.I(h,t)),s=c.data,d=c.refetch,f=null==s?void 0:s.currentUser,_=(0,v.A)().showConfirm,S=(0,m.m)({onAuth:function(){_("Successfully connected to Figma"),d(),(0,w.u4)(g.AZ.FIGMA_AUTH_COMPLETE,{source:"import_page"})}}),Y=(null==f?void 0:f.__typename)==="CurrentUser"&&(null==f||null==(a=f.figmaAuth)?void 0:a.provider)===i.edb.Figma;return(null==f?void 0:f.__typename)!=="CurrentUser"?(0,r.Y)(ec.A,{}):Y?(0,r.Y)(eu,{currentUser:f,onUpsell:l}):(0,r.FD)(x.S,{clsx:eh().container,px:24,py:32,gap:12,align:"center",justify:"center",children:[(0,r.Y)(eg,{}),(0,r.Y)(b.EY,{variant:"subheadDefault",children:"Connect Figma to Replit"}),(0,r.Y)(b.EY,{children:"Get started by logging in with your Figma account"}),(0,r.Y)(y.$n,{clsx:eh().button,onClick:function(){return S()},text:"Log in with Figma",colorway:"primary",iconRight:(0,r.Y)(es.A,{})})]})}},50957:(e,n,t)=>{"use strict";t.d(n,{R:()=>s});var r=t(57034),i=t(43355),o=t(58506),a=t(91584),l=t(82368),u=t(60421),c=t(23349);function s(e){var n=e.type,t=(0,a.Z)("org-roles-and-permissions-info-banner"),s=t.isLoading,d=t.isDone,p=t.setAsDone;return s||d?null:(0,r.Y)(l.N,{text:(0,r.FD)(u.EY,{children:["View detailed role permissions"," ",(0,r.Y)("a",{href:function(e){switch(e){case"org":return o.ik.ORG_PERMISSIONS;case"repl":return o.ik.REPL_PERMISSIONS;case"group":return o.ik.GROUP_PERMISSIONS;default:(0,i.A)(e)}}(n),target:"_blank",children:"here"}),"."]}),icon:(0,r.Y)(c.A,{}),colorway:"primary",closable:!0,closeAction:p})}},54830:(e,n,t)=>{"use strict";t.d(n,{P4:()=>h,Qs:()=>f,_L:()=>d});var r=t(17844),i=t(12584),o=t(41114),a=t(54744);function l(){var e=(0,i._)(["\n  fragment OrgReplCreator on User {\n    id\n    displayName\n    username\n    image\n  }\n"]);return l=function(){return e},e}function u(){var e=(0,i._)(["\n  query UserSelectorSearch($orgId: String!, $searchInput: OrgMembersInput!) {\n    currentUser {\n      __typename\n      id\n      org(orgId: $orgId) {\n        __typename\n        ... on Org {\n          id\n          members(input: $searchInput) {\n            __typename\n            ... on Error {\n              message\n            }\n            ... on OrgMemberConnection {\n              __typename\n              items {\n                member {\n                  id\n                  user {\n                    id\n                    ...OrgReplCreator\n                  }\n                }\n                type\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return u=function(){return e},e}function c(){var e=(0,i._)(["\n  query UserSelectorGetUser($id: Int!) {\n    user(id: $id) {\n      id\n      ...OrgReplCreator\n    }\n  }\n  ","\n"]);return c=function(){return e},e}var s={},d=(0,o.J1)(l()),p=(0,o.J1)(u(),d);function f(e){var n=(0,r._)({},s,e);return a.I(p,n)}var h=(0,o.J1)(c(),d)},54997:e=>{e.exports={root:"AgentChat_root__S4p6B",expandIcon:"AgentChat_expandIcon__lWPo0",expandBlanket:"AgentChat_expandBlanket__MTD97",right:"AgentChat_right__QSUg7",left:"AgentChat_left__B_TFP",sidebarResizeHandle:"AgentChat_sidebarResizeHandle__LT0LS"}},56987:(e,n,t)=>{"use strict";t.d(n,{A:()=>c});var r=t(57034),i=t(18304),o=t(83020),a=t(85743),l=t(29351),u=(0,i.x)({container:[o.wp.width("100%"),o.wp.height(200),o.wp.center]});let c=function(){return(0,r.Y)(a.S,{css:u.container,children:(0,r.Y)(l.A,{size:24})})}},57117:(e,n,t)=>{"use strict";t.d(n,{A:()=>p});var r=t(57034),i=t(83213),o=t(43355),a=t(18304),l=t(83020),u=t(85743),c=t(45716),s=[l.wp.backgroundColor.outlineDimmest,l.wp.color.foregroundDefault,l.wp.borderRadius(4),l.wp.align.center,l.wp.justify.center,{height:"var(--group-icon-size)",width:"var(--group-icon-size)"}],d=(0,a.x)({grey:[s,l.wp.backgroundColor.greyDimmest],red:[s,l.wp.backgroundColor.redDimmest],orange:[s,l.wp.backgroundColor.orangeDimmest],yellow:[s,l.wp.backgroundColor.yellowDimmest],lime:[s,l.wp.backgroundColor.limeDimmest],blue:[s,l.wp.backgroundColor.blueDimmest],purple:[s,l.wp.backgroundColor.purpleDimmest],pink:[s,l.wp.backgroundColor.pinkDimmest]});let p=function(e){var n,t,a=e.group,l=e.variant,s=void 0===l?"normal":l;switch(a.color){case i.RVn.Grey:n=d.grey;break;case i.RVn.Red:n=d.red;break;case i.RVn.Orange:n=d.orange;break;case i.RVn.Yellow:n=d.yellow;break;case i.RVn.Lime:n=d.lime;break;case i.RVn.Blue:n=d.blue;break;case i.RVn.Purple:n=d.purple;break;case i.RVn.Pink:n=d.pink;break;default:n=d.grey}switch(s){case"normal":t=32;break;case"compact":t=24;break;default:(0,o.A)(s)}return(0,r.Y)(u.S,{css:n,style:{"--group-icon-size":"".concat(t,"px")},children:(0,r.Y)(c.A,{})})}},60843:(e,n,t)=>{"use strict";t.d(n,{n:()=>a,u:()=>o});var r=t(57034),i=t(42793);function o(){return(0,r.Y)(i.mL,{styles:[{body:{overscrollBehaviorX:"none"}}]})}function a(){return(0,r.Y)(i.mL,{styles:[{body:{overscrollBehaviorY:"none"}}]})}},62873:e=>{e.exports={dividerContainer:"PlanningTimeline_dividerContainer__1Fxqg",divider:"PlanningTimeline_divider__J7gIK",pill:"PlanningTimeline_pill__E8NBl",pillActive:"PlanningTimeline_pillActive__f75bR",text:"PlanningTimeline_text__mGnOC",stepInteractive:"PlanningTimeline_stepInteractive__8yHKb"}},69659:e=>{e.exports={root:"Layout_root__zbmnW","fade-in":"Layout_fade-in___4xKz",middle:"Layout_middle__CTNFw",enter:"Layout_enter__U3ed7",divider:"Layout_divider__K1Gu3",secondarySection:"Layout_secondarySection__QzsOI",primaryTools:"Layout_primaryTools__ynQG1",secondaryTools:"Layout_secondaryTools__xDqvE",secondaryToolsScroll:"Layout_secondaryToolsScroll__ZeWEF",fade:"Layout_fade__5GmrQ",fadeTop:"Layout_fadeTop__y79T3",fadeBottom:"Layout_fadeBottom__spqF7"}},71643:e=>{e.exports={root:"DockSidebar_root__N_L1p",simple:"DockSidebar_simple__71QvR",header:"DockSidebar_header__xaaAD",content:"DockSidebar_content__e0_hV",title:"DockSidebar_title__e3CZQ",footerButtons:"DockSidebar_footerButtons__ENw63",resizeHandleRoot:"DockSidebar_resizeHandleRoot__vsVgf",left:"DockSidebar_left___kGwf",right:"DockSidebar_right__sHiSc",resizeHandleGrip:"DockSidebar_resizeHandleGrip__5IgIv"}},72198:(e,n,t)=>{"use strict";t.d(n,{A:()=>f,z:()=>p});var r=t(12694),i=t(21462),o=t(17844),a=t(12584),l=t(41114),u=t(54744);function c(){var e=(0,a._)(["\n  query CreateReplTitle($teamId: Int, $title: String) {\n    replTitle(teamId: $teamId, title: $title)\n  }\n"]);return c=function(){return e},e}var s={},d=(0,l.J1)(c()),p=60;function f(e){var n,t,a=e.preferredTitle,l=e.teamId,c=(0,r._)((0,i.useState)(""),2),f=c[0],h=c[1],g=(0,i.useRef)(null),m=(0,i.useRef)(!1),v=(n={variables:{title:a,teamId:l},fetchPolicy:"network-only",nextFetchPolicy:"cache-first",ssr:!1},t=(0,o._)({},s,n),u.I(d,t)),w=v.data,y=v.previousData,b=(null==w?void 0:w.replTitle)||(null==y?void 0:y.replTitle);(0,i.useEffect)(function(){b&&(m.current||h(b))},[b]);var x=(0,i.useCallback)(function(e){m.current=!0,h(e.slice(0,p))},[]),_=!a&&b===f;return{title:f,setTitle:x,titleInputRef:g,isTitleAutoGenerated:_}}},73061:e=>{e.exports={root:"Search_root__qfJle"}},73388:e=>{e.exports={surface:"Header_surface__O1_Hg",headerContentMoreActions:"Header_headerContentMoreActions__WHJN2",left:"Header_left__RrNvy",right:"Header_right__6qiEj"}},74999:e=>{e.exports={root:"PlanningBadge_root__xmkd4"}},75060:e=>{e.exports={overlay:"FigmaImport_overlay__to7_u",animationWrapper:"FigmaImport_animationWrapper__8PuMi",progressBarContainer:"FigmaImport_progressBarContainer__GBU7c",progressBarTrack:"FigmaImport_progressBarTrack__AjpdN",progressBarFill:"FigmaImport_progressBarFill__WUllg"}},75729:(e,n,t)=>{"use strict";t.d(n,{Z:()=>i,_:()=>o});var r=t(5942),i=function(e){(0,r.u4)(r.AZ.COURSE_ACTION,e)},o=function(e){(0,r.u4)(r.AZ.LESSON_ACTION,e)}},79391:(e,n,t)=>{"use strict";t.d(n,{LT:()=>L,TR:()=>z,c6:()=>B,hh:()=>C,k6:()=>O,qO:()=>W,vJ:()=>G});var r=t(17844),i=t(12584),o=t(41114),a=t(39590),l=t(54744),u=t(57933),c=t(68160),s=t(81456),d=t(22092);function p(){var e=(0,i._)(["\n  fragment OrgGroupPermissionsOrgScopeOption on OrgScopeOption {\n    __typename\n    role\n    status\n  }\n"]);return p=function(){return e},e}function f(){var e=(0,i._)(["\n  fragment OrgGroupPermissionsGroup on OrgGroup {\n    ...OrgGroupMetadata\n    permissions {\n      editPermissions\n      viewPermissions\n    }\n    orgScopeOptions {\n      ...OrgGroupPermissionsOrgScopeOption\n    }\n  }\n  ","\n  ","\n"]);return f=function(){return e},e}function h(){var e=(0,i._)(["\n  fragment OrgGroupOption on OrgGroupScopeOption {\n    status\n    role\n  }\n"]);return h=function(){return e},e}function g(){var e=(0,i._)(["\n  fragment OrgGroupOptions on OrgGroupScopeOptions {\n    targetGroupId\n    options {\n      __typename\n      ...OrgGroupOption\n    }\n  }\n  ","\n"]);return g=function(){return e},e}function m(){var e=(0,i._)(["\n  fragment OrgGroupRepl on Repl {\n    id\n    title\n    iconUrl\n    ...ReplLinkRepl\n    authorizations {\n      editPermissions {\n        isAuthorized\n      }\n    }\n  }\n  ","\n"]);return m=function(){return e},e}function v(){var e=(0,i._)(["\n  fragment GroupReplsPage on ReplConnection {\n    pageInfo {\n      hasNextPage\n      nextCursor\n      previousCursor\n    }\n    items {\n      __typename\n      ...OrgGroupRepl\n    }\n  }\n  ","\n"]);return v=function(){return e},e}function w(){var e=(0,i._)(["\n  fragment ReplScopeOption on ReplScopeOption {\n    status\n    role\n  }\n"]);return w=function(){return e},e}function y(){var e=(0,i._)(["\n  fragment ReplScopeOptions on ReplScopeOptions {\n    replId\n    options {\n      __typename\n      ...ReplScopeOption\n    }\n  }\n  ","\n"]);return y=function(){return e},e}function b(){var e=(0,i._)(["\n  mutation UpdateOrgGroupScopes($input: UpdateOrgGroupScopesInput!) {\n    updateOrgGroupScopes(input: $input) {\n      __typename\n      ... on OrgGroup {\n        ...OrgGroupPermissionsGroup\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n  ","\n"]);return b=function(){return e},e}function x(){var e=(0,i._)(["\n  query OrgGroupPermissionsGroups($orgId: String, $input: OrgGroupsInput) {\n    currentUser {\n      __typename\n      id\n      org(orgId: $orgId) {\n        __typename\n        ... on Org {\n          id\n          groups(input: $input) {\n            __typename\n            ... on OrgGroupConnection {\n              pageInfo {\n                hasNextPage\n                nextCursor\n              }\n              items {\n                ...OrgGroupMetadata\n              }\n            }\n            ... on UserError {\n              message\n            }\n          }\n        }\n        ... on NotFoundError {\n          message\n        }\n      }\n    }\n  }\n  ","\n"]);return x=function(){return e},e}function _(){var e=(0,i._)(["\n  query OrgGroupScopeOptions(\n    $orgId: String!\n    $groupId: String!\n    $input: OrgGroupGroupScopeOptionsInput!\n  ) {\n    currentUser {\n      __typename\n      id\n      org(orgId: $orgId) {\n        __typename\n        ... on Org {\n          id\n          group(orgGroupId: $groupId) {\n            __typename\n            ... on OrgGroup {\n              __typename\n              id\n              groupScopeOptions(input: $input) {\n                __typename\n                ... on OrgGroupGroupScopeOptions {\n                  items {\n                    ...OrgGroupOptions\n                  }\n                }\n                ... on UnauthorizedError {\n                  message\n                }\n              }\n            }\n            ... on NotFoundError {\n              message\n            }\n          }\n        }\n        ... on NotFoundError {\n          message\n        }\n      }\n    }\n  }\n  ","\n"]);return _=function(){return e},e}function S(){var e=(0,i._)(["\n  query OrgGroupPermissionsRepls($orgId: String, $input: OrgReplsInput!) {\n    currentUser {\n      __typename\n      id\n      org(orgId: $orgId) {\n        __typename\n        ... on Org {\n          id\n          ...OrgReplManagement\n          replsCount\n          repls(input: $input) {\n            __typename\n            ... on ReplConnection {\n              ...GroupReplsPage\n            }\n            ... on UserError {\n              message\n            }\n          }\n        }\n        ... on NotFoundError {\n          message\n        }\n      }\n    }\n  }\n  ","\n  ","\n"]);return S=function(){return e},e}function Y(){var e=(0,i._)(["\n  query OrgGroupReplScopeOptions(\n    $orgId: String!\n    $groupId: String!\n    $input: OrgGroupReplScopeOptionsInput!\n  ) {\n    currentUser {\n      __typename\n      id\n      org(orgId: $orgId) {\n        __typename\n        ... on Org {\n          id\n          group(orgGroupId: $groupId) {\n            __typename\n            ... on OrgGroup {\n              __typename\n              id\n              replScopeOptions(input: $input) {\n                __typename\n                ... on OrgGroupReplScopeOptions {\n                  items {\n                    ...ReplScopeOptions\n                  }\n                }\n                ... on UnauthorizedError {\n                  message\n                }\n              }\n            }\n            ... on NotFoundError {\n              message\n            }\n          }\n        }\n        ... on NotFoundError {\n          message\n        }\n      }\n    }\n  }\n  ","\n"]);return Y=function(){return e},e}var A={},I=(0,o.J1)(p()),C=(0,o.J1)(f(),s.Fe,I),k=(0,o.J1)(h()),E=(0,o.J1)(g(),k),D=(0,o.J1)(m(),c.r),R=(0,o.J1)(v(),D),F=(0,o.J1)(w()),U=(0,o.J1)(y(),F),P=(0,o.J1)(b(),C);function O(e){var n=(0,r._)({},A,e);return a.n(P,n)}var T=(0,o.J1)(x(),s.Fe);function L(e){var n=(0,r._)({},A,e);return l.I(T,n)}var M=(0,o.J1)(_(),E);function G(e){var n=(0,r._)({},A,e);return l.I(M,n)}var N=(0,o.J1)(S(),d.PQ,R);function z(e){var n=(0,r._)({},A,e);return l.I(N,n)}var H=(0,o.J1)(Y(),U);function B(e){var n=(0,r._)({},A,e);return l.I(H,n)}function W(e){var n=(0,r._)({},A,e);return u._(H,n)}},81456:(e,n,t)=>{"use strict";t.d(n,{Fe:()=>u});var r=t(12584),i=t(41114),o=t(41151);function a(){var e=(0,r._)(["\n  fragment OrgGroupMetadata on OrgGroup {\n    id\n    color\n    slug\n    type\n    name\n  }\n"]);return a=function(){return e},e}function l(){var e=(0,r._)(["\n  query OrgGroupMetadata($orgId: String!, $groupId: String!) {\n    currentUser {\n      __typename\n      ...OrgCurrentUser\n      org(orgId: $orgId) {\n        __typename\n        ... on Org {\n          ...OrgMetadata\n          group(orgGroupId: $groupId) {\n            __typename\n            ... on OrgGroup {\n              ...OrgGroupMetadata\n            }\n            ... on NotFoundError {\n              message\n            }\n          }\n        }\n        ... on NotFoundError {\n          message\n        }\n      }\n    }\n  }\n  ","\n  ","\n  ","\n"]);return l=function(){return e},e}var u=(0,i.J1)(a());l(),o.rh,o.wW},83022:e=>{e.exports={root:"Pane_root__Dz_FC",container:"Pane_container__V2H53",interactionBlanket:"Pane_interactionBlanket__HGhM4"}},83423:e=>{e.exports={surface:"replEnvironmentDesktop_surface__18l0g",loadingAnimationWrapper:"replEnvironmentDesktop_loadingAnimationWrapper__upKsd",emailVerificationWrapper:"replEnvironmentDesktop_emailVerificationWrapper__KPi4v"}},84282:e=>{var n=1/0,t=0/0,r=/^\s+|\s+$/g,i=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,a=/^0o[0-7]+$/i,l=/^(?:0|[1-9]\d*)$/,u=parseFloat,c=parseInt,s=Object.prototype.toString,d=Math.floor,p=Math.min,f=Math.random;function h(e){var n=typeof e;return!!e&&("object"==n||"function"==n)}function g(e){return e?(e=function(e){if("number"==typeof e)return e;if("symbol"==typeof(n=e)||n&&"object"==typeof n&&"[object Symbol]"==s.call(n))return t;if(h(e)){var n,l="function"==typeof e.valueOf?e.valueOf():e;e=h(l)?l+"":l}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(r,"");var u=o.test(e);return u||a.test(e)?c(e.slice(2),u?2:8):i.test(e)?t:+e}(e))===n||e===-n?(e<0?-1:1)*17976931348623157e292:e==e?e:0:0===e?e:0}e.exports=function(e,n,t){if(t&&"boolean"!=typeof t&&function(e,n,t){if(!h(t))return!1;var r,i,o,a,u,c,d,p=typeof n;return("number"==p?!!(null!=(r=t)&&"number"==typeof(i=r.length)&&i>-1&&i%1==0&&i<=0x1fffffffffffff&&"[object Function]"!=(a=h(o=r)?s.call(o):"")&&"[object GeneratorFunction]"!=a&&(d=null==(d=t.length)?0x1fffffffffffff:d)&&("number"==typeof n||l.test(n))&&n>-1&&n%1==0&&n<d):"string"==p&&n in t)&&(u=t[n],u===(c=e)||u!=u&&c!=c)}(e,n,t)&&(n=t=void 0),void 0===t&&("boolean"==typeof n?(t=n,n=void 0):"boolean"==typeof e&&(t=e,e=void 0)),void 0===e&&void 0===n?(e=0,n=1):(e=g(e),void 0===n?(n=e,e=0):n=g(n)),e>n){var r,i,o=e;e=n,n=o}if(t||e%1||n%1){var a=f();return p(e+a*(n-e+u("1e-"+((a+"").length-1))),n)}return r=e,i=n,r+d(f()*(i-r+1))}},85139:(e,n,t)=>{"use strict";t.d(n,{L:()=>P});var r=t(12694),i=t(57034),o=t(21462),a=t(17844),l=t(12584),u=t(41114),c=t(54744);function s(){var e=(0,l._)(["\n  fragment ReplDesktopAvatarMenuCurrentUser on CurrentUser {\n    id\n    url\n    username\n    fullName\n    image\n    userSubscriptionType\n  }\n"]);return s=function(){return e},e}function d(){var e=(0,l._)(["\n  query ReplDesktopAvatarMenu {\n    currentUser {\n      id\n      ...ReplDesktopAvatarMenuCurrentUser\n    }\n  }\n  ","\n"]);return d=function(){return e},e}var p={},f=(0,u.J1)(s()),h=(0,u.J1)(d(),f),g=t(83213),m=t(80200),v=t(72607),w=t(79890),y=t(18304),b=t(17376),x=t(83020),_=t(94807),S=t(85105),Y=t(24735),A=t(94679),I=t(19789),C=t(60421),k=t(85743),E=t(11838),D=t(94781),R=t(29904),F=t(82970),U=(0,y.x)({wrapper:[x.wp.noDragRegion],button:[b.b.nofill,x.wp.p(4),x.wp.viewStyle,x.wp.reset.button,x.wp.rowWithGap(2),x.wp.align.center,x.wp.color.foregroundDefault,x.wp.cursor.pointer,x.wp.borderRadius(8),{transition:"box-shadow 120ms ease-out",":hover svg":{fill:w.LU.foregroundDefault}}],surface:[x.wp.borderRadius(8),x.wp.minWidth(80),{"& > ul > li:first-of-type":{borderRadius:"10px 10px 0 0"}}],username:[x.wp.ml(8)],menuItem:[],accountModal:[x.wp.overflow("auto"),x.wp.height("100%")],appVersionWrapper:[x.wp.center,x.wp.border({color:w.LU.outlineDimmer,width:1,style:"solid",direction:"top"})]});function P(e){var n,t=e.showName,l=(0,r._)((0,o.useState)(!1),2),u=l[0],s=l[1],d=(0,r._)((0,o.useState)(!1),2),f=d[0],y=d[1],b=(n=(0,a._)({},p,void 0),c.I(h,n)).data,x=null==b?void 0:b.currentUser;if(!x)return null;var P=[{label:"Home",icon:(0,i.Y)(R.A,{}),onAction:function(){v.M.openExternalUrl("/"),s(!1)}},{label:"Account",icon:(0,i.Y)(F.A,{}),onAction:function(){y(function(e){return!e}),s(!1)}},{label:"Log out",icon:(0,i.Y)(D.A,{}),onAction:function(){v.M.logout()}}];return(0,i.FD)(k.S,{css:U.wrapper,children:[(0,i.FD)(A.Wv,{isOpen:u,onOpenChange:s,placement:"bottom start",label:"Account options",children:[(0,i.FD)("button",{onClick:function(){s(function(e){return!e})},css:U.button,"data-cy":"desktop-app-avatar-menu",children:[(0,i.Y)(_.e,{size:24,src:(null==x?void 0:x.image)||null,username:(null==x?void 0:x.username)||"",fullName:(null==x?void 0:x.fullName)||"",showCoreBadge:x.userSubscriptionType===g.Ohf.HackerPro}),t?(0,i.FD)(k.S,{css:U.username,className:"username",children:["@",null==x?void 0:x.username]}):null,(0,i.Y)(E.A,{color:w.LU.foregroundDimmest,size:12})]}),(0,i.FD)(I.ui,{elevated:!0,css:U.surface,background:"higher",children:[(0,i.Y)(S.W1,{label:"Account options",onAction:function(e){var n=P[parseInt(e,10)];n&&n.onAction()},children:P.map(function(e,n){return(0,i.Y)(S.q7,{"aria-label":e.label,children:(0,i.FD)(k.S,{row:!0,gap:8,align:"center",children:[e.icon,(0,i.Y)(C.EY,{children:e.label})]})},n)})}),(0,i.Y)(k.S,{css:U.appVersionWrapper,py:4,px:8,children:(0,i.Y)(C.EY,{color:"dimmer",variant:"small",dataCy:"desktop-app-version",children:"Version ".concat(v.M.getVersion())})})]})]}),(0,i.Y)(Y.a,{isOpen:f,onRequestClose:function(){return y(!1)},maxWidth:872,elevation:"root",skipTransition:!0,css:U.accountModal,children:(0,i.Y)(m.A,{})})]})}},85836:(e,n,t)=>{"use strict";t.d(n,{Sc:()=>p,pV:()=>s});var r=t(17844),i=t(12584),o=t(41114),a=t(39590);function l(){var e=(0,i._)(["\n  fragment EditReplFormRepl on Repl {\n    id\n    title\n    description\n    imageUrl\n    iconUrl\n    templateInfo {\n      iconUrl\n      imageUrl\n    }\n    authorizations {\n      editMetadata {\n        isAuthorized\n      }\n    }\n  }\n"]);return l=function(){return e},e}function u(){var e=(0,i._)(["\n  mutation EditReplFormEdit($input: UpdateReplInput!) {\n    updateRepl(input: $input) {\n      repl {\n        id\n        ...EditReplFormRepl\n      }\n    }\n  }\n  ","\n"]);return u=function(){return e},e}var c={},s=(0,o.J1)(l()),d=(0,o.J1)(u(),s);function p(e){var n=(0,r._)({},c,e);return a.n(d,n)}},91521:e=>{e.exports={opaqueOnHover:"Header_opaqueOnHover__cvJl6",root:"Header_root__fJWuA",desktopAppWindowsOs:"Header_desktopAppWindowsOs__XZvA_"}},98628:(e,n,t)=>{"use strict";t.d(n,{Um:()=>f,y3:()=>g,zT:()=>p});var r=t(17844),i=t(12584),o=t(41114),a=t(54744),l=t(41151);function u(){var e=(0,i._)(["\n  fragment OrgGroupsOrg on Org {\n    ...OrgMetadata\n    authorizations {\n      createOrgGroup {\n        isAuthorized\n        message\n      }\n    }\n  }\n  ","\n"]);return u=function(){return e},e}function c(){var e=(0,i._)(["\n  fragment OrgGroupsOrgGroup on OrgGroup {\n    id\n    slug\n    type\n    name\n    color\n    isMember\n    memberCount\n    permissions {\n      editPermissions\n      viewPermissions\n    }\n  }\n"]);return c=function(){return e},e}function s(){var e=(0,i._)(["\n  query OrgGroups($orgId: String, $input: OrgGroupsInput) {\n    currentUser {\n      __typename\n      id\n      org(orgId: $orgId) {\n        __typename\n        ... on Org {\n          id\n          groups(input: $input) {\n            __typename\n            ... on OrgGroupConnection {\n              pageInfo {\n                hasNextPage\n                nextCursor\n              }\n              items {\n                ...OrgGroupsOrgGroup\n              }\n            }\n            ... on UserError {\n              message\n            }\n          }\n        }\n        ... on NotFoundError {\n          message\n        }\n      }\n    }\n  }\n  ","\n"]);return s=function(){return e},e}var d={},p=(0,o.J1)(u(),l.wW),f=(0,o.J1)(c()),h=(0,o.J1)(s(),f);function g(e){var n=(0,r._)({},d,e);return a.I(h,n)}},98700:e=>{e.exports={root:"Border_root__PbshN",base:"Border_base__Zic7G",floating:"Border_floating__yz1uA",dragging:"Border_dragging__MpD9f",active:"Border_active__v1eK1",highlight:"Border_highlight__8R14e","fade-out":"Border_fade-out__IgQfd"}}},e=>{e.O(0,[4017,7433,3451,727,5325,8185,7573,1938,685,2647,3329,705,7368,3669,1425,8508,9066,5621,4611,4357,1234,3030,6549,4739,7606,4102,4254,3635,6546,474,9602,242,7313,1701,2290,8981,4768,8604,8226,3739,3729,5127,6638,5076,8511,5619,709,2667,6655,7962,9355,4359,6368,2676,9397,8901,4029,7644,8,4887,8282,412,200,1667,8464,232,5042,72,6593,636,8792],()=>e(e.s=37540)),_N_E=e.O()}]);
//# sourceMappingURL=replEnvironmentDesktop-b4aef892a7586e22.js.map
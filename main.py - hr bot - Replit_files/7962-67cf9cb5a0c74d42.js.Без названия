!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=Error().stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="565ad736-46f9-4bb0-83fb-70baf8ddd6e0",e._sentryDebugIdIdentifier="sentry-dbid-565ad736-46f9-4bb0-83fb-70baf8ddd6e0")}catch(e){}}();var _global="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};_global.SENTRY_RELEASE={id:"d6be34e7"};"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7962],{1223:(e,n,r)=>{r.d(n,{T:()=>c});var t=r(17844),i=r(12584),o=r(41114),a=r(54744);function l(){var e=(0,i._)(["\n  query CurrentUserId {\n    currentUser {\n      id\n    }\n  }\n"]);return l=function(){return e},e}var u={},d=(0,o.J1)(l());function c(){var e,n,r=(e=(0,t._)({},u,void 0),a.I(d,e)).data;return(null==r||null==(n=r.currentUser)?void 0:n.id)||null}},4213:(e,n,r)=>{r.d(n,{A:()=>b});var t=r(17844),i=r(93629),o=r(12694),a=r(27338),l=r(21462),u=r(12584),d=r(41114),c=r(39590);function s(){var e=(0,u._)(["\n  mutation ForkReplCreateRepl($input: CreateReplInput!) {\n    createRepl(input: $input) {\n      ... on Repl {\n        id\n        org {\n          id\n        }\n        url\n        isPrivate\n        language\n        nextPagePathname\n        origin {\n          id\n          isOwner\n        }\n        source {\n          release {\n            id\n            repl {\n              id\n              title\n              owner {\n                ... on User {\n                  id\n                  username\n                }\n                ... on Team {\n                  id\n                  username\n                }\n              }\n            }\n          }\n        }\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n"]);return s=function(){return e},e}var p={},f=(0,d.J1)(s()),g=r(87671),m=r(41545),h=r(23107),v=r(84885),w=r(92062),k=r(5942),y=r(42236),Y=r(47925);function b(){var e,n,r,u,d,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},b=s.onFork,A=s.onError,R=s.navigateAfterFork,_=void 0===R||R,C=s.replLinkOptions,F=(0,a.useRouter)(),x=(0,h._P)({controlName:"flag-migrate-html"}),D=(0,v.A)().showError,E=(0,y.A)(),S=(0,o._)((e={onCompleted:function(e){var n=(null==e?void 0:e.createRepl.__typename)==="Repl"?e.createRepl:null;if(n&&(b&&b(e),_)){var r=(0,g.A)(n,x);if("/replEnvironmentDesktop"===F.pathname||"/replEnvironmentMobile"===F.pathname||"/replView"===F.pathname&&r){window.location.href=(0,Y.cY)(n,C);return}var o=(0,Y.q1)(n,C);F.push((0,i._)((0,t._)({},o.href),{pathname:E}),o.as)}}},n=(0,t._)({},p,e),c.n(f,n)),2),I=S[0],T=S[1],P=(null==(r=T.data)?void 0:r.createRepl.__typename)==="UserError"?null==(u=T.data)?void 0:u.createRepl.message:null==(d=T.error)?void 0:d.message;return(0,l.useEffect)(function(){P&&(D(P),A&&A())},[P,D,A]),[(0,l.useCallback)(function(e){var n=e.originId,r=e.replReleaseId,o=e.teamId,a=e.title,l=e.description,u=e.isPrivate,d=e.folderId,c=e.trackingData,s=e.forkToPersonal,p=e.orgId;(0,k.u4)(k.AZ.FORK_REQUESTED,c),I({variables:{input:{originId:n,replReleaseId:r,teamId:o,title:a,isPrivate:u,description:l,folderId:d,forkToPersonal:s,gitRemoteUrl:"",orgId:p}}}).then(function(e){var o,a,l,u,d,s,p,f,g,h,v,y,Y,b,A=(null==(o=e.data)?void 0:o.createRepl.__typename)==="Repl"?e.data.createRepl:null;A&&(0,k.u4)(k.AZ.REPL_CREATED,(0,i._)((0,t._)({isSignup:!1,isOnboarding:!1},c),{isForked:!0,isPrivate:A.isPrivate,replId:A.id,isRenamed:!1,language:A.language,isSelfForked:!!(null==(a=A.origin)?void 0:a.isOwner),isTemplateFork:!!r,originId:n,templateReplId:(null==(d=A.source)||null==(u=d.release)||null==(l=u.repl)?void 0:l.id)||void 0,templateTitle:null==(f=A.source)||null==(p=f.release)||null==(s=p.repl)?void 0:s.title,templateOwner:null==(y=A.source)||null==(v=y.release)||null==(h=v.repl)||null==(g=h.owner)?void 0:g.username,templateType:(null==(b=A.source)||null==(Y=b.release)?void 0:Y.repl)?(0,w.i)(A.source.release.repl):void 0,orgContext:(0,m.po)(A.org?{id:A.org.id}:void 0)}))})},[I]),{loading:!!T.loading||!!T.data&&"Repl"===T.data.createRepl.__typename}]}},6137:(e,n,r)=>{r.d(n,{A:()=>u});var t=r(57034),i=r(18304),o=r(83020),a=r(60421),l=(0,i.x)({self:[o.wp.textAlign.right,o.wp.fontSize("0.75em")]});let u=function(e){var n=e.maxLength,r=e.value,i=e.hideLabel;return(0,t.FD)(a.EY,{css:l.self,multiline:!1,color:"dimmer",children:[(void 0===r?"":r).length," / ",void 0===n?140:n," ",void 0!==i&&i?"":"characters"]})}},7385:(e,n,r)=>{r.d(n,{z:()=>t});var t=1e3},27614:(e,n,r)=>{r.d(n,{A:()=>k});var t,i=r(83846),o=r(57034),a=r(88269),l=r(83213),u=r(79890),d=r(18304),c=r(83020),s=r(97329),p=r(94807),f=r(61549),g=r(60421),m=r(85743),h=r(30484),v=(0,d.x)({radioGroup:[(t={},(0,i._)(t,c.$_.max("tabletMax"),[c.wp.colWithGap(8)]),(0,i._)(t,c.$_.min("tabletMax"),[c.wp.display.grid,{gridTemplateColumns:"1fr 1fr",gap:u.LU.space8,gridAutoFlow:"column"}]),t)],radioContainer:[c.wp.rowWithGap(8),c.wp.align.start,c.wp.p(8),c.wp.border({style:"solid",color:u.LU.outlineDimmest,width:1}),c.wp.borderRadius(8)],radio:[c.wp.pt(2)],labelAndIconRow:[c.wp.rowWithGap(4),c.wp.align.center],label:[c.wp.flex.shrink(1)],unauthorizedText:[c.wp.color.redDefault]}),w=function(e){return e.Public="public",e.Private="private",e}(w||{});let k=function(e){var n,r=e.isPrivate,t=e.setIsPrivate,i=e.privacyAuthz,d=i.privateRepl,c=i.publicRepl,w=e.org,k=(0,s.c)(),y=k("private"),Y=k("public"),b=w.type===l.NT1.Personal?"Only you":"Only ".concat(w.name," organization members");return(0,o.FD)(m.S,{gap:8,children:[(0,o.Y)(a.J,{htmlFor:"privacy",children:(0,o.Y)(g.EY,{children:"Privacy"})}),(0,o.FD)(f.z,{tag:"fieldset",css:v.radioGroup,name:"privacy",value:r?"private":"public",onChange:function(e){t("private"===e.target.value)},children:[(0,o.FD)(m.S,{css:v.radioContainer,children:[(0,o.Y)(m.S,{css:v.radio,children:(0,o.Y)(f.s,{id:y,value:"private",disabled:!d.isAuthorized})}),(0,o.FD)(m.S,{grow:!0,shrink:!0,gap:4,children:[(0,o.Y)(a.J,{htmlFor:y,children:(0,o.FD)(m.S,{css:v.labelAndIconRow,children:[(0,o.FD)(g.EY,{multiline:!1,css:v.label,color:d.isAuthorized?"default":"dimmer",children:["Internal to ",w.name]}),(0,o.Y)(p.e,{src:null!=(n=w.image)?n:null,username:w.name,size:16})]})}),(0,o.Y)(g.EY,{multiline:!0,variant:"small",color:"dimmer",css:!d.isAuthorized&&v.unauthorizedText,children:d.isAuthorized?"".concat(b," can see this Repl. You choose who can edit."):d.message})]})]}),(0,o.FD)(m.S,{css:v.radioContainer,children:[(0,o.Y)(m.S,{css:v.radio,children:(0,o.Y)(f.s,{id:Y,value:"public",disabled:!c.isAuthorized})}),(0,o.FD)(m.S,{grow:!0,shrink:!0,gap:4,children:[(0,o.Y)(a.J,{htmlFor:Y,children:(0,o.FD)(m.S,{css:v.labelAndIconRow,children:[(0,o.Y)(g.EY,{color:c.isAuthorized?"default":"dimmer",children:"Public to Replit"}),(0,o.Y)(h.A,{size:16,color:c.isAuthorized?u.LU.foregroundDefault:u.LU.foregroundDimmer})]})}),(0,o.Y)(g.EY,{multiline:!0,variant:"small",color:"dimmer",css:!c.isAuthorized&&v.unauthorizedText,children:c.isAuthorized?"Anyone can see this Repl. You choose who can edit.":c.message})]})]})]})]})}},27970:(e,n,r)=>{r.d(n,{k:()=>u});var t=r(57034),i=r(59271),o=r(61646),a=r(39358),l=r(60421),u=function(e){var n=e.setState,r=e.state,u=e.centered;return(0,t.Y)(a.default,{isOpen:"open"===r.type,onClose:function(){n({type:"closed"})},type:"purchase",onPurchaseComplete:function(){"open"===r.type&&r.onUpgradeConfirm()},headingText:"Upgrade for More Apps",subHeadingText:"Upgrade to Replit ".concat(i.en," to create more than ").concat(o.q," Apps"),contextualUpsell:(0,t.FD)(t.FK,{children:[(0,t.Y)(l.EY,{variant:"subheadBig",children:"Upgrade for More Apps"}),(0,t.FD)(l.EY,{multiline:!0,children:["Upgrade to Replit ",i.en," to create more than"," ",o.q," Apps."]})]}),analyticsContext:{upgrade:{context:"repl_limit_upsell"}},centered:u})}},80575:(e,n,r)=>{r.d(n,{A:()=>l});var t=r(17844),i=r(93629),o=r(57034),a=r(46586);function l(e){return(0,o.Y)(a.Ay,(0,i._)((0,t._)({},e),{children:(0,o.Y)("path",{fillRule:"evenodd",d:"M18.505 3.22a.668.668 0 0 1 .99 0l2.8 3a.789.789 0 0 1 0 1.06l-2.8 3a.668.668 0 0 1-.99 0 .789.789 0 0 1 0-1.06l1.534-1.644a26.777 26.777 0 0 0-1.05-.06c-.779-.03-1.701-.027-2.388.08-2.441.382-3.476 2.354-4.685 4.76l-.049.097c-1.143 2.276-2.48 4.937-5.666 5.435-.818.127-1.845.125-2.64.095a27.974 27.974 0 0 1-1.312-.08l-.082-.008-.022-.002h-.008c-.385-.038-.67-.403-.634-.816.035-.412.376-.716.76-.678h.006l.019.002.075.007.283.022c.242.018.58.04.964.054.78.03 1.702.027 2.389-.08 2.441-.382 3.476-2.354 4.685-4.76l.049-.097c1.143-2.276 2.48-4.937 5.666-5.435.818-.127 1.845-.125 2.64-.095a28.06 28.06 0 0 1 1.15.067L18.504 4.28a.789.789 0 0 1 0-1.06ZM2.264 7.6h.005l.019-.002.075-.007.283-.022c.242-.018.58-.04.964-.054.78-.03 1.702-.027 2.389.08 1.196.188 2.044.755 2.737 1.543a.668.668 0 0 0 .99.031.788.788 0 0 0 .029-1.06C8.877 7.112 7.753 6.355 6.2 6.112c-.818-.127-1.845-.125-2.64-.095a28.083 28.083 0 0 0-1.312.08l-.082.008-.022.002h-.008c-.385.038-.67.403-.634.816.035.412.376.716.76.678Zm16.241 6.119a.668.668 0 0 1 .99 0l2.8 3a.788.788 0 0 1 0 1.06l-2.8 3a.668.668 0 0 1-.99 0 .788.788 0 0 1 0-1.06l1.68-1.8-.09.006c-.253.02-.608.042-1.011.057-.795.03-1.822.032-2.64-.096-1.551-.242-2.675-1-3.553-1.998a.788.788 0 0 1 .029-1.06.668.668 0 0 1 .99.032c.692.788 1.54 1.355 2.736 1.542.687.107 1.61.11 2.389.08.384-.014.722-.035.964-.053l.043-.003-1.537-1.647a.788.788 0 0 1 0-1.06Z",clipRule:"evenodd"})}))}},83137:(e,n,r)=>{r.d(n,{Ay:()=>b,Hy:()=>v,Lw:()=>Y,u7:()=>y,zl:()=>w});var t=r(29935),i=r(12694),o=r(82643),a=r(57034),l=r(27338),u=r(21462),d=r(78e3),c=r(87083),s=r(18304),p=r(83020),f=r(24735),g=r(60421),m=r(85743),h=(0,s.x)({authModal:[p.wp.maxWidth("100%"),p.wp.px(16),p.wp.py(32),p.wp.colWithGap(24),p.wp.align.center,p.wp.justify.center],modalDescription:[p.wp.color.foregroundDimmer,p.wp.maxWidth("60%"),p.wp.textAlign.center]}),v=function(e){var n=e.loginTitle,r=e.signupTitle,t=e.description,o=e.tracking,l=e.onSuccess,c=(0,i._)((0,u.useState)("signup"),2),s=c[0],p=c[1],f=(0,u.useMemo)(function(){return"login"===s?n:r},[s,n,r]);return(0,a.FD)(m.S,{css:h.authModal,"data-cy":"auth-modal",children:[f?(0,a.Y)(g.Y9,{variant:"headerDefault",level:1,children:f}):null,t?(0,a.Y)(g.EY,{variant:"subheadDefault",css:h.modalDescription,children:t}):null,(0,a.Y)(d.A,{customHeader:void 0!==f,isModal:!0,mode:s,onModeChange:function(e){return p(e)},onSuccess:void 0===l?function(){}:l,seededEmail:void 0,initialTenantId:void 0,tracking:o})]})},w="authModal",k=function(e){return"".concat(e.from,":").concat(e.location)},y=function(e){var n=(0,i._)(e.split(":"),2),r=n[0],t=n[1];if(void 0!==r&&void 0!==t)return{from:r,location:t}},Y=function(e,n){return(0,t._)(function(){var r;return(0,o.YH)(this,function(t){switch(t.label){case 0:return r=k(n),[4,(0,c.HQ)({router:e,params:[{mode:"add",key:w,value:r}]})];case 1:return t.sent(),[2]}})})()};let b=function(e){var n=e.loginTitle,r=e.signupTitle,s=e.description,p=e.tracking,g=e.onSuccess,m=void 0===g?function(){}:g,h=(0,l.useRouter)(),y=(0,c.pE)(w,"string"),Y=k(p),b=(0,i._)((0,u.useState)(y===Y),2),A=b[0],R=b[1],_=(0,u.useCallback)(function(){return(0,t._)(function(){return(0,o.YH)(this,function(e){switch(e.label){case 0:return[4,(0,c.HQ)({router:h,params:[{mode:"delete",key:w},{mode:"delete",key:d.C}]})];case 1:return e.sent(),[2]}})})()},[h]);return(0,u.useEffect)(function(){Y===h.query[w]?R(!0):R(!1)},[Y,h.query]),(0,a.Y)(f.a,{isOpen:A,onRequestClose:_,children:A?(0,a.Y)(v,{description:s,loginTitle:n,onSuccess:function(e){return(0,t._)(function(){return(0,o.YH)(this,function(n){switch(n.label){case 0:return[4,_()];case 1:return n.sent(),m(e),[2]}})})()},signupTitle:r,tracking:p}):null})}},87671:(e,n,r)=>{r.d(n,{A:()=>i,k:()=>t});var t=function(e){return e.Initializing="initialize",e.Connecting="connect",e.GettingInitialConfig="get init config",e.ImportingMigrationTemplate="import migration template",e.MergeDotReplit="merge dot replit",e.ExecingPostMigration="exec post migration",e.UpdatingLanguage="set language",e.Finished="finished",e.Failed="error",e}({});function i(e,n){return n?"nix"!==e.language:"nix"!==e.language&&"html"!==e.language}},92062:(e,n,r)=>{r.d(n,{i:()=>i});var t=r(58506);function i(e){var n;return(null==(n=e.owner)?void 0:n.username)===t.GA?"official":"community"}},97962:(e,n,r)=>{r.d(n,{B:()=>el,Z:()=>ea});var t=r(29935),i=r(17844),o=r(12694),a=r(82643),l=r(57034),u=r(27338),d=r(21462),c=r(83137),s=r(93629),p=r(17459),f=r(90629),g=r(12584),m=r(41114),h=r(54744),v=r(78864);function w(){var e=(0,g._)(["\n  fragment ForkModalCurrentUser on CurrentUser {\n    id\n    url\n    image\n    username\n    fullName\n    ...ReplOwnerCurrentUser\n    teams {\n      id\n      ...ReplOwnerTeam\n    }\n  }\n  ","\n  ","\n"]);return w=function(){return e},e}function k(){var e=(0,g._)(["\n  query ForkModal {\n    currentUser {\n      id\n      ...ForkModalCurrentUser\n    }\n  }\n  ","\n"]);return k=function(){return e},e}var y={},Y=(0,m.J1)(w(),v.nM,v.eC),b=(0,m.J1)(k(),Y),A=r(46357),R=r(27614),_=r(9249),C=r(80453),F=r(7409),x=r(62991),D=r(49374),E=r(59271),S=r(61646),I=r(27970),T=r(18304),P=r(83020),U=r(82368),L=r(85743),z=r(74600),M=function(e){var n=e.isIndividualOwner,r=e.showUpgradeForm,t=e.replLimitCtx,i=(0,o._)((0,d.useState)({type:"closed"}),2),a=i[0],u=i[1];if(!n||"loading"===t.type||"error"===t.type)return null;var c=t.replCount,s=t.shouldEnforceUsersOverLimit,p=t.isStarterUser,f=s||c===S.q;if(!p||!f)return null;var g=c>=S.q?"(".concat(c,"/").concat(S.q,") You've hit the limit for Apps in the Starter Plan. Upgrade to Replit ").concat(E.en," for unlimited Apps!"):"You have created ".concat(c,"/").concat(S.q," Apps. Click here to upgrade to Replit ").concat(E.en," for unlimited Apps!");return(0,l.FD)(l.FK,{children:[(0,l.Y)(L.S,{tag:"button",css:O.bannerWrapper,onClick:function(e){e.preventDefault(),r?r():u({type:"open",onUpgradeConfirm:t.refetch})},children:(0,l.Y)(U.N,{icon:(0,l.Y)(z.A,{}),colorway:"yellow",text:g})}),(0,l.Y)(I.k,{setState:u,state:a})]})},O=(0,T.x)({bannerWrapper:[P.wp.cursor.pointer,P.wp.borderRadius(),P.wp.textAlign.left]}),H=r(41545),q=r(56185),N=r(7385),W=r(97329),J=r(92152),G=r(84516),Z=r(60421),B=r(6137),$=r(29351),K=r(80575),Q=(0,T.x)({fieldLabel:[P.wp.flex.row,P.wp.justify.spaceBetween,P.wp.align.end],fieldError:[P.wp.color.accentNegativeStronger],descriptionTextArea:[P.wp.minHeight(96),P.wp.maxHeight(128),{resize:"vertical"}]}),V=function(e){var n,r=e.onFork,t=e.hideModal,i=e.initialTitle,a=e.initialDescription,u=e.teamContext,c=e.currentUser,s=e.template,p=e.keepOpenOnFork,f=void 0!==p&&p,g=e.isForking,m=e.orgId,h=e.originReplId,v=e.replLimitCtx,w=(0,d.useRef)(null),k=(0,W.c)(),y=(0,H.ET)().orgId,Y=(0,o._)((0,F.p)(c,null!=(n=null!=u?u:m)?n:y),3),b=Y[0],D=Y[1],E=Y[2],S=(0,x.d)(b,h),I=S.isPrivate,T=S.setIsPrivate,P=S.privacyAuthz,U=S.isValidPrivacy,z="CurrentUser"===b.__typename&&b.id===c.id,O=z&&"data"===v.type&&!v.canCreateRepl,V=(0,q.W)(i,function(e){if(e&&e.length>60)return{message:"Must be no longer than 60 characters"}}),j=(0,q.W)(void 0===a?"":a,function(e){if(e&&e.length>N.z)return{message:"Must be no longer than ".concat(N.z," characters")}});(0,d.useEffect)(function(){w.current&&w.current.focus()},[w]);var X="Team"===b.__typename?b.id:null,ee=!!(V.error||j.error)||g||!U;return(0,l.Y)("form",{onSubmit:function(e){e.preventDefault(),!(V.validate()||j.validate())&&(r(X,V.value.trim(),j.value,I,"Org"===b.__typename?b.id:void 0),f||t())},children:(0,l.FD)(L.S,{gap:16,children:[(0,l.Y)(Z.Y9,{variant:"headerDefault",level:2,children:s?"Use Framework":"Remix App"}),(0,l.FD)(L.S,{gap:16,children:[(0,l.FD)(L.S,{gap:4,children:[(0,l.FD)(L.S,{css:Q.fieldLabel,children:[(0,l.Y)(A.J,{for:k("name"),children:"Name"}),(0,l.Y)(B.A,{maxLength:60,value:V.value,hideLabel:!0})]}),(0,l.Y)(G.pd,{ref:w,className:"repl-title-input",placeholder:"Name your App",onChange:function(e){return V.setValue(e.target.value)},onFocus:function(e){return e.target.select()},value:V.value,onBlur:V.handleBlur,id:k("name")}),V.error?(0,l.Y)(Z.EY,{css:Q.fieldError,multiline:!1,children:V.error.message}):null]}),(0,l.FD)(L.S,{gap:4,children:[(0,l.FD)(L.S,{css:Q.fieldLabel,children:[(0,l.Y)(A.J,{for:k("description"),children:"Description"}),(0,l.Y)(B.A,{hideLabel:!0})]}),(0,l.Y)(G.ov,{maxLength:N.z,value:j.value,onChange:function(e){return j.setValue(e.target.value)},placeholder:"What does this App do?",css:Q.descriptionTextArea,id:k("description")})]})]}),"Org"===b.__typename?(0,l.Y)(R.A,{isPrivate:I,setIsPrivate:T,privacyAuthz:P,org:b}):(0,l.Y)(_.Z,{isPrivate:I,setIsPrivate:T,privacyAuthz:P,isTeam:!!X}),E.length>1?(0,l.FD)(L.S,{gap:4,children:[(0,l.Y)(A.J,{for:k("owner"),children:"Owner"}),(0,l.Y)(C.A,{id:k("owner"),owners:E,selectedOwner:b,setSelectedOwner:D,dataCy:"fork-modal-owner-select"})]}):null,(0,l.Y)(M,{replLimitCtx:v,isIndividualOwner:z}),(0,l.FD)(L.S,{row:!0,gap:12,justify:"end",children:[(0,l.Y)(J.$n,{onClick:t,text:"Cancel",type:"button"}),(0,l.Y)(J.$n,{dataCy:"fork-btn",colorway:"primary",type:"submit",disabled:"loading"===v.type||O||ee,text:s?(0,l.Y)(l.FK,{children:"Use Framework"}):(0,l.Y)(l.FK,{children:"Remix App"}),iconLeft:g||"loading"===v.type?(0,l.Y)($.A,{}):(0,l.Y)(K.A,{})})]})]})})};function j(e){var n,r,t=e.onReachedReplLimit,o=(0,p._)(e,["onReachedReplLimit"]),a=(n={fetchPolicy:"cache-and-network",ssr:!1,onError:function(e){f.v4(function(n){n.setTag("fork-modal",!0),f.Cp(e)})}},r=(0,i._)({},y,n),h.I(b,r)),u=a.data,c=a.loading,g=a.error,m=(0,D.g)(),v="data"===m.type&&!m.canCreateRepl;if((0,d.useEffect)(function(){v&&t()},[v,t]),v)return null;if(c&&!u||"loading"===m.type)return(0,l.Y)(Z.EY,{color:"dimmer",multiline:!1,children:"Loading..."});if(g)return(0,l.Y)(Z.EY,{multiline:!1,children:"Something went wrong."});if(!u)return null;var w=u.currentUser;return w?(0,l.Y)(V,(0,s._)((0,i._)({},o),{replLimitCtx:m,currentUser:w})):(f.Cp(Error("ForkModal was presented to an unauthed user")),(0,l.Y)(U.N,{colorway:"negative",text:"You must be logged in to fork this App"}))}var X=r(81983),ee=r(1223),en=r(4213),er=r(84885),et=r(87083),ei=r(24735),eo=(0,d.createContext)({isForking:!1,fork:function(){}}),ea=function(){return(0,d.useContext)(eo)},el=function(e){var n,r,s,p=e.children,f=e.forkParams,g=e.navigateAfterFork,m=e.onFork,h=e.repl,v=e.teamContext,w=e.template,k=e.autorun,y=(0,u.useRouter)(),Y=(0,er.A)().showError,b=(0,ee.T)(),A=(0,et.pE)("forkRepl","string"),R=(0,et.pE)("forkContext","string"),_=(0,o._)((0,d.useState)(),2),C=_[0],F=_[1],x=(0,d.useMemo)(function(){return null===b},[b]),D=f.trackingData.forkSource,E=(0,o._)((0,en.A)({replLinkOptions:{autorun:void 0!==k&&k},navigateAfterFork:void 0===g||g,onFork:m,onError:function(){Y("Error forking App")}}),2),S=E[0],I=E[1].loading,T=(0,d.useCallback)(function(){return(0,t._)(function(){return(0,a.YH)(this,function(e){switch(e.label){case 0:if(!x)return[3,2];return[4,(0,et.HQ)({router:y,params:[{mode:"add",key:"forkRepl",value:h.id},{mode:"add",key:"forkContext",value:D}]})];case 1:return e.sent(),F("auth"),[3,3];case 2:F("fork"),e.label=3;case 3:return[2]}})})()},[x,h.id,y,D]),P=(0,d.useCallback)(function(){return(0,t._)(function(){return(0,a.YH)(this,function(e){switch(e.label){case 0:return[4,(0,et.HQ)({router:y,params:[{mode:"delete",key:"forkRepl"},{mode:"delete",key:"forkContext"}]})];case 1:return e.sent(),F(void 0),[2]}})})()},[y]);(0,d.useEffect)(function(){A===h.id&&R===D&&(x?F("auth"):F("fork"))},[A,R,x,h.id,D]);var U=(0,d.useCallback)(function(){return F("limited")},[]);return(0,l.FD)(eo.Provider,{value:{isForking:I,fork:T},children:[p,(0,l.FD)(ei.a,{isOpen:void 0!==C,onRequestClose:function(){return P()},maxWidth:"limited"===C?1e3:ei.S,noPadding:"limited"===C,children:["limited"===C?(0,l.Y)(X.A,{shouldBlockReplForm:!0,onClose:function(){return P()},onPurchaseComplete:function(){return F("fork")},context:"fork_modal_limit_reached"}):null,"auth"===C?(0,l.Y)(c.Hy,{loginTitle:"Log in to Remix this App",signupTitle:"Sign up to Remix this App",onSuccess:function(){return F("fork")},tracking:{from:D,location:null!=(r=f.trackingData.location)?r:"fork"}}):null,"fork"===C?(0,l.Y)(j,{onReachedReplLimit:U,hideModal:function(){return P()},onFork:function(e,n,r,t,o){return S((0,i._)({originId:h.id,teamId:e,title:n,description:r,isPrivate:t,forkToPersonal:null===e&&null==o,orgId:o},f))},initialTitle:h.title,initialDescription:null!=(s=h.description)?s:void 0,orgId:null==(n=h.org)?void 0:n.id,teamContext:v,template:w,originReplId:h.id}):null]})]})}}}]);
//# sourceMappingURL=7962-67cf9cb5a0c74d42.js.map